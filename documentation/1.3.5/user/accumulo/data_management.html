

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>7.8. Data Management &mdash; GeoMesa 1.3.5 Manuals</title>
  

  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../../_static/css/theme_custom.css" type="text/css" />
  

  

  
        <link rel="index" title="Index"
              href="../../genindex.html"/>
        <link rel="search" title="Search" href="../../search.html"/>
    <link rel="top" title="GeoMesa 1.3.5 Manuals" href="../../index.html"/>
        <link rel="up" title="7. Accumulo Data Store" href="index.html"/>
        <link rel="next" title="7.9. GeoMesa Jobs" href="jobs.html"/>
        <link rel="prev" title="7.7. Accumulo Visibilities" href="visibilities.html"/> 

  
  <script src="../../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../../index.html" class="icon icon-home"> GeoMesa
          

          
          </a>

          
            
            
              <div class="version">
                1.3.5
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
                <ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="../index.html">User Manual</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../introduction.html">1. Introduction</a></li>
<li class="toctree-l2"><a class="reference internal" href="../architecture.html">2. Architecture Overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="../getting_started.html">3. Getting Started</a></li>
<li class="toctree-l2"><a class="reference internal" href="../download.html">4. Versions and Downloads</a></li>
<li class="toctree-l2"><a class="reference internal" href="../install.html">5. Installation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../datastores/index.html">6. GeoMesa Data Stores</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="index.html">7. Accumulo Data Store</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="install.html">7.1. Installing GeoMesa Accumulo</a></li>
<li class="toctree-l3"><a class="reference internal" href="configuration.html">7.2. Accumulo Configuration</a></li>
<li class="toctree-l3"><a class="reference internal" href="commandline_tools.html">7.3. Command Line Tools</a></li>
<li class="toctree-l3"><a class="reference internal" href="examples.html">7.4. Command Line Examples</a></li>
<li class="toctree-l3"><a class="reference internal" href="usage.html">7.5. Using the Accumulo Data Store Programmatically</a></li>
<li class="toctree-l3"><a class="reference internal" href="geoserver.html">7.6. Using the Accumulo Data Store in GeoServer</a></li>
<li class="toctree-l3"><a class="reference internal" href="visibilities.html">7.7. Accumulo Visibilities</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">7.8. Data Management</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#accumulo-attribute-indices">7.8.1. Accumulo Attribute Indices</a></li>
<li class="toctree-l4"><a class="reference internal" href="#accumulo-logical-timestamps">7.8.2. Accumulo Logical Timestamps</a></li>
<li class="toctree-l4"><a class="reference internal" href="#splitting-the-record-index">7.8.3. Splitting the Record Index</a></li>
<li class="toctree-l4"><a class="reference internal" href="#moving-and-migrating-data">7.8.4. Moving and Migrating Data</a></li>
<li class="toctree-l4"><a class="reference internal" href="#upgrading-existing-indices">7.8.5. Upgrading Existing Indices</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="jobs.html">7.9. GeoMesa Jobs</a></li>
<li class="toctree-l3"><a class="reference internal" href="raster.html">7.10. GeoMesa Raster</a></li>
<li class="toctree-l3"><a class="reference internal" href="internals.html">7.11. Internals</a></li>
<li class="toctree-l3"><a class="reference internal" href="kerberos.html">7.12. Kerberos</a></li>
<li class="toctree-l3"><a class="reference internal" href="ageoff.html">7.13. Age-Off Iterators</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../hbase/index.html">8. HBase Data Store</a></li>
<li class="toctree-l2"><a class="reference internal" href="../bigtable/index.html">9. Bigtable Data Store</a></li>
<li class="toctree-l2"><a class="reference internal" href="../cassandra/index.html">10. Cassandra Data Store</a></li>
<li class="toctree-l2"><a class="reference internal" href="../kafka/index.html">11. Kafka Data Store</a></li>
<li class="toctree-l2"><a class="reference internal" href="../lambda/index.html">12. Lambda Data Store</a></li>
<li class="toctree-l2"><a class="reference internal" href="../filesystem/index.html">13. FileSystem Datastore (Amazon S3, HDFS Datastore)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../geoserver.html">14. GeoServer Plugins</a></li>
<li class="toctree-l2"><a class="reference internal" href="../blobstore.html">15. GeoMesa Blob Store</a></li>
<li class="toctree-l2"><a class="reference internal" href="../convert/index.html">16. GeoMesa Convert</a></li>
<li class="toctree-l2"><a class="reference internal" href="../geojson.html">17. GeoMesa GeoJSON</a></li>
<li class="toctree-l2"><a class="reference internal" href="../metrics.html">18. GeoMesa Metrics</a></li>
<li class="toctree-l2"><a class="reference internal" href="../native_api.html">19. GeoMesa Native API</a></li>
<li class="toctree-l2"><a class="reference internal" href="../nifi.html">20. GeoMesa NiFi Bundle</a></li>
<li class="toctree-l2"><a class="reference internal" href="../process.html">21. GeoMesa Processes</a></li>
<li class="toctree-l2"><a class="reference internal" href="../spark/index.html">22. GeoMesa Spark</a></li>
<li class="toctree-l2"><a class="reference internal" href="../stream.html">23. GeoMesa Stream Processing</a></li>
<li class="toctree-l2"><a class="reference internal" href="../web_data.html">24. GeoMesa Web Data</a></li>
<li class="toctree-l2"><a class="reference internal" href="../index.html#appendix">Appendix</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../developer/index.html">Developer Manual</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../tutorials/index.html">Tutorials</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../../index.html">GeoMesa</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          

 



<div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../../index.html">Docs</a> &raquo;</li>
      
          <li><a href="../index.html">User Manual</a> &raquo;</li>
      
          <li><a href="index.html">7. Accumulo Data Store</a> &raquo;</li>
      
    <li>7.8. Data Management</li>
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="../../_sources/user/accumulo/data_management.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="data-management">
<h1>7.8. Data Management<a class="headerlink" href="#data-management" title="Permalink to this headline">¶</a></h1>
<p>GeoMesa provides many ways to optimize your data storage. You can add additional indices to speed up
certain queries, disable indices to speed up ingestion, pre-split tables for optimal data
distribution and migrate data between tables or environments.</p>
<div class="section" id="accumulo-attribute-indices">
<span id="id1"></span><h2>7.8.1. Accumulo Attribute Indices<a class="headerlink" href="#accumulo-attribute-indices" title="Permalink to this headline">¶</a></h2>
<p>See <a class="reference internal" href="../datastores/index_basics.html#attribute-indices"><span class="std std-ref">Attribute Index</span></a> for an overview of attribute indices. The Accumulo data store extends the
normal attribute indices with an additional ‘join’ format that stores less data.</p>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">Accumulo data stores use the reduced ‘join’ format by default. In order to use ‘full’ indices,
the keyword <code class="docutils literal"><span class="pre">full</span></code> must be used in the <code class="docutils literal"><span class="pre">SimpleFeatureType</span></code> as described below.</p>
</div>
<div class="section" id="join-indices">
<h3>7.8.1.1. Join Indices<a class="headerlink" href="#join-indices" title="Permalink to this headline">¶</a></h3>
<p>Join indices store a reduced subset of data in the index - just the feature ID, the default date
and the default geometry. To answer most queries, a join against the record index is required
to retrieve the full simple features - hence the name join index. Joining against the record
table is slow when returning many results, and should generally be avoided except for small queries.</p>
<p>GeoMesa will avoid joining against the record table if it is possible to answer
a query with only the data in the join index. In general, this means that the query is only
returning the properties for the default date, default geometry and the attribute being queried.
In addition, any CQL filters must only operate on those three attributes as well.</p>
<p>The keyword <code class="docutils literal"><span class="pre">join</span></code> may be used in place of <code class="docutils literal"><span class="pre">true</span></code> when specifying an attribute index in the
<code class="docutils literal"><span class="pre">SimpleFeatureType</span></code>. Note that join indices are the default in the Accumulo data store.</p>
</div>
<div class="section" id="full-indices">
<h3>7.8.1.2. Full Indices<a class="headerlink" href="#full-indices" title="Permalink to this headline">¶</a></h3>
<p>Full indices store the full simple feature. This takes up the most space on disk, but allows for any query to
be answered without joining against the record table. This is the only option for non-Accumulo data stores.
To use a full index, the keyword <code class="docutils literal"><span class="pre">full</span></code> must be used in place of <code class="docutils literal"><span class="pre">true</span></code> when specifying an attribute
index in the <code class="docutils literal"><span class="pre">SimpleFeatureType</span></code>.  Note that join indices are the default in the Accumulo data store.</p>
</div>
</div>
<div class="section" id="accumulo-logical-timestamps">
<span id="logical-timestamps"></span><h2>7.8.2. Accumulo Logical Timestamps<a class="headerlink" href="#accumulo-logical-timestamps" title="Permalink to this headline">¶</a></h2>
<p>By default, GeoMesa index tables are created using Accumulo’s logical time. This ensures that updates to a given
simple feature will be ordered correctly, however it obscures the actual insert time for the underlying data
row. For advanced use cases, standard system time can be used instead of logical time. To disble logical
time, add the following user data hint to the simple feature type before calling <code class="docutils literal"><span class="pre">createSchema</span></code>:</p>
<div class="highlight-java"><div class="highlight"><pre><span></span><span class="c1">// append the hints to the end of the string, separated by a semi-colon</span>
<span class="n">String</span> <span class="n">spec</span> <span class="o">=</span> <span class="s">&quot;name:String,dtg:Date,*geom:Point:srid=4326;geomesa.logical.time=&#39;false&#39;&quot;</span><span class="o">;</span>
<span class="n">SimpleFeatureType</span> <span class="n">sft</span> <span class="o">=</span> <span class="n">SimpleFeatureTypes</span><span class="o">.</span><span class="na">createType</span><span class="o">(</span><span class="s">&quot;mySft&quot;</span><span class="o">,</span> <span class="n">spec</span><span class="o">);</span>
</pre></div>
</div>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">If table sharing is enabled, then the index tables may have already been created with logical
time enabled. If this is the case, then disabling it will have no effect. To ensure the
tables are created correctly, you may wish to disable table sharing by adding the user data string
<code class="docutils literal"><span class="pre">geomesa.table.sharing='false'</span></code></p>
</div>
</div>
<div class="section" id="splitting-the-record-index">
<h2>7.8.3. Splitting the Record Index<a class="headerlink" href="#splitting-the-record-index" title="Permalink to this headline">¶</a></h2>
<p>By default, GeoMesa assumes that feature IDs are UUIDs, and have an even distribution. If your
feature IDs do not follow this pattern, you may define a custom table splitter for the record index.
This will ensure that your features are spread across several different tablet servers, speeding
up ingestion and queries.</p>
<p>GeoMesa supplies three different table splitter options:</p>
<ul>
<li><p class="first"><code class="docutils literal"><span class="pre">org.locationtech.geomesa.index.conf.HexSplitter</span></code> (used by default)</p>
<p>Assumes an even distribution of IDs starting with 0-9, a-f, A-F</p>
</li>
<li><p class="first"><code class="docutils literal"><span class="pre">org.locationtech.geomesa.index.conf.AlphaNumericSplitter</span></code></p>
<p>Assumes an even distribution of IDs starting with 0-9, a-z, A-Z</p>
</li>
<li><p class="first"><code class="docutils literal"><span class="pre">org.locationtech.geomesa.index.conf.DigitSplitter</span></code></p>
<p>Assumes an even distribution of IDs starting with numeric values, which are specified as options</p>
</li>
</ul>
<p>Custom splitters may also be used - any class that extends <code class="docutils literal"><span class="pre">org.locationtech.geomesa.index.conf.TableSplitter</span></code>.</p>
<div class="section" id="specifying-a-table-splitter">
<h3>7.8.3.1. Specifying a Table Splitter<a class="headerlink" href="#specifying-a-table-splitter" title="Permalink to this headline">¶</a></h3>
<p>Table splitter may be specified by setting a hint when creating a simple feature type,
similar to enabling indices (above).</p>
<p>Setting the hint can be done in three ways. If you are using a string to indicate your simple feature type
(e.g. through the command line tools, or when using <code class="docutils literal"><span class="pre">SimpleFeatureTypes.createType</span></code>), you can append
the hint to the end of the string, like so:</p>
<div class="highlight-java"><div class="highlight"><pre><span></span><span class="c1">// append the hints to the end of the string, separated by a semi-colon</span>
<span class="n">String</span> <span class="n">spec</span> <span class="o">=</span> <span class="s">&quot;name:String,dtg:Date,*geom:Point:srid=4326;&quot;</span> <span class="o">+</span>
    <span class="s">&quot;table.splitter.class=org.locationtech.geomesa.index.conf.AlphaNumericSplitter&quot;</span><span class="o">;</span>
<span class="n">SimpleFeatureType</span> <span class="n">sft</span> <span class="o">=</span> <span class="n">SimpleFeatureTypes</span><span class="o">.</span><span class="na">createType</span><span class="o">(</span><span class="s">&quot;mySft&quot;</span><span class="o">,</span> <span class="n">spec</span><span class="o">);</span>
</pre></div>
</div>
<p>If you have an existing simple feature type, or you are not using <code class="docutils literal"><span class="pre">SimpleFeatureTypes.createType</span></code>,
you may set the hint directly in the feature type:</p>
<div class="highlight-java"><div class="highlight"><pre><span></span><span class="c1">// set the hint directly</span>
<span class="n">SimpleFeatureType</span> <span class="n">sft</span> <span class="o">=</span> <span class="o">...</span>
<span class="n">sft</span><span class="o">.</span><span class="na">getUserData</span><span class="o">().</span><span class="na">put</span><span class="o">(</span><span class="s">&quot;table.splitter.class&quot;</span><span class="o">,</span>
    <span class="s">&quot;org.locationtech.geomesa.index.conf.DigitSplitter&quot;</span><span class="o">);</span>
<span class="n">sft</span><span class="o">.</span><span class="na">getUserData</span><span class="o">().</span><span class="na">put</span><span class="o">(</span><span class="s">&quot;table.splitter.options&quot;</span><span class="o">,</span> <span class="s">&quot;fmt:%02d,min:0,max:99&quot;</span><span class="o">);</span>
</pre></div>
</div>
<p>If you are using TypeSafe configuration files to define your simple feature type, you may include
a ‘user-data’ key:</p>
<div class="highlight-javascript"><div class="highlight"><pre><span></span><span class="nx">geomesa</span> <span class="p">{</span>
  <span class="nx">sfts</span> <span class="p">{</span>
    <span class="s2">&quot;mySft&quot;</span> <span class="o">=</span> <span class="p">{</span>
      <span class="nx">attributes</span> <span class="o">=</span> <span class="p">[</span>
        <span class="p">{</span> <span class="nx">name</span> <span class="o">=</span> <span class="nx">name</span><span class="p">,</span> <span class="nx">type</span> <span class="o">=</span> <span class="nb">String</span>             <span class="p">}</span>
        <span class="p">{</span> <span class="nx">name</span> <span class="o">=</span> <span class="nx">dtg</span><span class="p">,</span>  <span class="nx">type</span> <span class="o">=</span> <span class="nb">Date</span>               <span class="p">}</span>
        <span class="p">{</span> <span class="nx">name</span> <span class="o">=</span> <span class="nx">geom</span><span class="p">,</span> <span class="nx">type</span> <span class="o">=</span> <span class="nx">Point</span><span class="p">,</span> <span class="nx">srid</span> <span class="o">=</span> <span class="mi">4326</span> <span class="p">}</span>
      <span class="p">]</span>
      <span class="nx">user</span><span class="o">-</span><span class="nx">data</span> <span class="o">=</span> <span class="p">{</span>
        <span class="nx">table</span><span class="p">.</span><span class="nx">splitter</span><span class="p">.</span><span class="kr">class</span> <span class="o">=</span> <span class="s2">&quot;org.locationtech.geomesa.index.conf.DigitSplitter&quot;</span>
        <span class="nx">table</span><span class="p">.</span><span class="nx">splitter</span><span class="p">.</span><span class="nx">options</span> <span class="o">=</span> <span class="s2">&quot;fmt:%01d,min:0,max:9&quot;</span>
      <span class="p">}</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="moving-and-migrating-data">
<h2>7.8.4. Moving and Migrating Data<a class="headerlink" href="#moving-and-migrating-data" title="Permalink to this headline">¶</a></h2>
<p>If you want an offline copy of your data, or you want to move data between networks, you can
export compressed Avro files containing your simple features. To do this using the command line
tools, use the export command with the <code class="docutils literal"><span class="pre">format</span></code> and <code class="docutils literal"><span class="pre">gzip</span></code> options:</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>$ geomesa <span class="nb">export</span> -c myTable -f mySft --format avro --gzip <span class="m">6</span> -o myFeatures.avro
</pre></div>
</div>
<p>To re-import the data into another environment, you may use the import command. Because the Avro file
is self-describing, you do not need to specify any converter config or simple feature type definition:</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>$ geomesa import -c myTable -f mySft myFeatures.avro
</pre></div>
</div>
<p>If your data is too large for a single file, you may run multiple exports and use CQL
filters to separate your data.</p>
<p>If you prefer to not use Avro files, you may do the same process with delimited text files:</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>$ geomesa <span class="nb">export</span> -c myTable -f mySft --format tsv --gzip <span class="m">6</span> -o myFeatures.tsv.gz
$ geomesa import -c myTable -f mySft myFeatures.tsv.gz
</pre></div>
</div>
</div>
<div class="section" id="upgrading-existing-indices">
<span id="index-upgrades"></span><h2>7.8.5. Upgrading Existing Indices<a class="headerlink" href="#upgrading-existing-indices" title="Permalink to this headline">¶</a></h2>
<p>GeoMesa often makes updates to indexing formats to improve query and write performance. However,
the index format for a given schema is fixed when it is first created. Updating GeoMesa versions
will provide bug fixes and new features, but will not update existing data to new index formats.</p>
<p>The following tables show the different indices available for different versions of GeoMesa. If not
known, the schema version for a feature type can be checked by examining the user data value
<code class="docutils literal"><span class="pre">geomesa.version</span></code>, or by scanning the Accumulo catalog table for <code class="docutils literal"><span class="pre">version</span></code>. For GeoMesa schemas
created with 1.2.7 or later, the version of each index is tracked separately and the overall schema
version is no longer maintained.</p>
<div class="section" id="schema-version-4-1-0-0-rc-7">
<h3>7.8.5.1. Schema version 4 - 1.0.0-rc.7<a class="headerlink" href="#schema-version-4-1-0-0-rc-7" title="Permalink to this headline">¶</a></h3>
<table border="1" class="docutils">
<colgroup>
<col width="11%" />
<col width="9%" />
<col width="79%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Index</th>
<th class="head">Version</th>
<th class="head">Notes</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>GeoHash</td>
<td>1</td>
<td>Used for most queries</td>
</tr>
<tr class="row-odd"><td>Record</td>
<td>1</td>
<td>Used for queries on feature ID</td>
</tr>
<tr class="row-even"><td>Attribute</td>
<td>1</td>
<td>Used for attribute queries (when configured)</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="schema-version-5-1-1-0-rc-1-through-1-1-0-rc-2">
<h3>7.8.5.2. Schema version 5 - 1.1.0-rc.1 through 1.1.0-rc.2<a class="headerlink" href="#schema-version-5-1-1-0-rc-1-through-1-1-0-rc-2" title="Permalink to this headline">¶</a></h3>
<table border="1" class="docutils">
<colgroup>
<col width="11%" />
<col width="9%" />
<col width="79%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Index</th>
<th class="head">Version</th>
<th class="head">Notes</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>Z3</td>
<td>1</td>
<td>Replaces GeoHash index for spatio-temporal queries on point geometries</td>
</tr>
<tr class="row-odd"><td>GeoHash</td>
<td>1</td>
<td>&#160;</td>
</tr>
<tr class="row-even"><td>Record</td>
<td>1</td>
<td>&#160;</td>
</tr>
<tr class="row-odd"><td>Attribute</td>
<td>1</td>
<td>&#160;</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="schema-version-6-1-1-0-rc-3-through-1-2-0">
<h3>7.8.5.3. Schema version 6 - 1.1.0-rc.3 through 1.2.0<a class="headerlink" href="#schema-version-6-1-1-0-rc-3-through-1-2-0" title="Permalink to this headline">¶</a></h3>
<table border="1" class="docutils">
<colgroup>
<col width="11%" />
<col width="9%" />
<col width="79%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Index</th>
<th class="head">Version</th>
<th class="head">Notes</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>Z3</td>
<td>1</td>
<td>&#160;</td>
</tr>
<tr class="row-odd"><td>GeoHash</td>
<td>1</td>
<td>&#160;</td>
</tr>
<tr class="row-even"><td>Record</td>
<td>1</td>
<td>&#160;</td>
</tr>
<tr class="row-odd"><td>Attribute</td>
<td>2</td>
<td>Added a composite date index and improved row-key collisions</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="schema-version-7-1-2-1">
<h3>7.8.5.4. Schema version 7 - 1.2.1<a class="headerlink" href="#schema-version-7-1-2-1" title="Permalink to this headline">¶</a></h3>
<table border="1" class="docutils">
<colgroup>
<col width="11%" />
<col width="9%" />
<col width="79%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Index</th>
<th class="head">Version</th>
<th class="head">Notes</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>Z3</td>
<td>2</td>
<td>Added support for non-point geometries and sharding for improved ingestion</td>
</tr>
<tr class="row-odd"><td>GeoHash</td>
<td>1</td>
<td>&#160;</td>
</tr>
<tr class="row-even"><td>Record</td>
<td>1</td>
<td>&#160;</td>
</tr>
<tr class="row-odd"><td>Attribute</td>
<td>2</td>
<td>&#160;</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="schema-version-8-1-2-2-through-1-2-4">
<h3>7.8.5.5. Schema version 8 - 1.2.2 through 1.2.4<a class="headerlink" href="#schema-version-8-1-2-2-through-1-2-4" title="Permalink to this headline">¶</a></h3>
<table border="1" class="docutils">
<colgroup>
<col width="11%" />
<col width="9%" />
<col width="79%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Index</th>
<th class="head">Version</th>
<th class="head">Notes</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>Z3</td>
<td>2</td>
<td>&#160;</td>
</tr>
<tr class="row-odd"><td>Z2</td>
<td>1</td>
<td>Spatial only index to replace GeoHash index</td>
</tr>
<tr class="row-even"><td>Record</td>
<td>1</td>
<td>&#160;</td>
</tr>
<tr class="row-odd"><td>Attribute</td>
<td>2</td>
<td>&#160;</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="schema-version-10-1-2-5">
<h3>7.8.5.6. Schema version 10 - 1.2.5+<a class="headerlink" href="#schema-version-10-1-2-5" title="Permalink to this headline">¶</a></h3>
<table border="1" class="docutils">
<colgroup>
<col width="11%" />
<col width="9%" />
<col width="79%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Index</th>
<th class="head">Version</th>
<th class="head">Notes</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>Z3</td>
<td>3</td>
<td>Support for attribute-level visibilities and improved feature ID encoding</td>
</tr>
<tr class="row-odd"><td>Z2</td>
<td>2</td>
<td>Support for attribute-level visibilities and improved feature ID encoding</td>
</tr>
<tr class="row-even"><td>XZ3</td>
<td>1</td>
<td>Spatio-temporal index with improved support for non-point geometries</td>
</tr>
<tr class="row-odd"><td>XZ2</td>
<td>1</td>
<td>Spatial index with improved support for non-point geometries</td>
</tr>
<tr class="row-even"><td>Record</td>
<td>2</td>
<td>Support for attribute-level visibilities and improved feature ID encoding</td>
</tr>
<tr class="row-odd"><td>Attribute</td>
<td>3</td>
<td>Support for attribute-level visibilities and improved feature ID encoding</td>
</tr>
</tbody>
</table>
<p>Using the GeoMesa command line tools, you can add or update an index to a newer version using <code class="docutils literal"><span class="pre">add-index</span></code>.
For example, you could add the XZ3 index to replace the Z3 index for a feature type with non-point geometries.
The command will populate the new index using a distributed job. For large data sets, you can choose to
only populate features matching a CQL filter (e.g. the last month), or choose to not populate any
data. The update is seamless, and clients can continue to query and ingest while it runs.</p>
<p>See <a class="reference internal" href="commandline_tools.html#add-index-command"><span class="std std-ref">add-index</span></a> for more details on the command line tools.</p>
</div>
</div>
</div>


           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="jobs.html" class="btn btn-neutral float-right" title="7.9. GeoMesa Jobs" accesskey="n">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="visibilities.html" class="btn btn-neutral" title="7.7. Accumulo Visibilities" accesskey="p"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>

    </p>
  </div>

<div role="contentinfo">
  <p>
    &copy; Copyright 2013-2017 <a href="https://www.ccri.com/">Commonwealth Computer Research, Inc.</a>
    <br/>
    Licensed under the <a href="http://www.opensource.org/licenses/apache2.0.php">Apache License, Version 2.0</a>
  </p>
</div>

Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>



</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../../',
            VERSION:'1.3.5',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="../../_static/jquery.js"></script>
      <script type="text/javascript" src="../../_static/underscore.js"></script>
      <script type="text/javascript" src="../../_static/doctools.js"></script>
      <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

  

  
  
    <script type="text/javascript" src="../../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>