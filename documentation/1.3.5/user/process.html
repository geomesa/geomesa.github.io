

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>21. GeoMesa Processes &mdash; GeoMesa 1.3.5 Manuals</title>
  

  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../_static/css/theme_custom.css" type="text/css" />
  

  

  
        <link rel="index" title="Index"
              href="../genindex.html"/>
        <link rel="search" title="Search" href="../search.html"/>
    <link rel="top" title="GeoMesa 1.3.5 Manuals" href="../index.html"/>
        <link rel="up" title="User Manual" href="index.html"/>
        <link rel="next" title="22. GeoMesa Spark" href="spark/index.html"/>
        <link rel="prev" title="20. GeoMesa NiFi Bundle" href="nifi.html"/> 

  
  <script src="../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../index.html" class="icon icon-home"> GeoMesa
          

          
          </a>

          
            
            
              <div class="version">
                1.3.5
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
                <ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="index.html">User Manual</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="introduction.html">1. Introduction</a></li>
<li class="toctree-l2"><a class="reference internal" href="architecture.html">2. Architecture Overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="getting_started.html">3. Getting Started</a></li>
<li class="toctree-l2"><a class="reference internal" href="download.html">4. Versions and Downloads</a></li>
<li class="toctree-l2"><a class="reference internal" href="install.html">5. Installation</a></li>
<li class="toctree-l2"><a class="reference internal" href="datastores/index.html">6. GeoMesa Data Stores</a></li>
<li class="toctree-l2"><a class="reference internal" href="accumulo/index.html">7. Accumulo Data Store</a></li>
<li class="toctree-l2"><a class="reference internal" href="hbase/index.html">8. HBase Data Store</a></li>
<li class="toctree-l2"><a class="reference internal" href="bigtable/index.html">9. Bigtable Data Store</a></li>
<li class="toctree-l2"><a class="reference internal" href="cassandra/index.html">10. Cassandra Data Store</a></li>
<li class="toctree-l2"><a class="reference internal" href="kafka/index.html">11. Kafka Data Store</a></li>
<li class="toctree-l2"><a class="reference internal" href="lambda/index.html">12. Lambda Data Store</a></li>
<li class="toctree-l2"><a class="reference internal" href="filesystem/index.html">13. FileSystem Datastore (Amazon S3, HDFS Datastore)</a></li>
<li class="toctree-l2"><a class="reference internal" href="geoserver.html">14. GeoServer Plugins</a></li>
<li class="toctree-l2"><a class="reference internal" href="blobstore.html">15. GeoMesa Blob Store</a></li>
<li class="toctree-l2"><a class="reference internal" href="convert/index.html">16. GeoMesa Convert</a></li>
<li class="toctree-l2"><a class="reference internal" href="geojson.html">17. GeoMesa GeoJSON</a></li>
<li class="toctree-l2"><a class="reference internal" href="metrics.html">18. GeoMesa Metrics</a></li>
<li class="toctree-l2"><a class="reference internal" href="native_api.html">19. GeoMesa Native API</a></li>
<li class="toctree-l2"><a class="reference internal" href="nifi.html">20. GeoMesa NiFi Bundle</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">21. GeoMesa Processes</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#installation">21.1. Installation</a></li>
<li class="toctree-l3"><a class="reference internal" href="#processors">21.2. Processors</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#densityprocess">21.2.1. DensityProcess</a></li>
<li class="toctree-l4"><a class="reference internal" href="#statsprocess">21.2.2. StatsProcess</a></li>
<li class="toctree-l4"><a class="reference internal" href="#queryprocess">21.2.3. QueryProcess</a></li>
<li class="toctree-l4"><a class="reference internal" href="#uniqueprocess">21.2.4. UniqueProcess</a></li>
<li class="toctree-l4"><a class="reference internal" href="#chaining-processes">21.2.5. Chaining Processes</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="spark/index.html">22. GeoMesa Spark</a></li>
<li class="toctree-l2"><a class="reference internal" href="stream.html">23. GeoMesa Stream Processing</a></li>
<li class="toctree-l2"><a class="reference internal" href="web_data.html">24. GeoMesa Web Data</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#appendix">Appendix</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../developer/index.html">Developer Manual</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tutorials/index.html">Tutorials</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../index.html">GeoMesa</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          

 



<div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../index.html">Docs</a> &raquo;</li>
      
          <li><a href="index.html">User Manual</a> &raquo;</li>
      
    <li>21. GeoMesa Processes</li>
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="../_sources/user/process.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="geomesa-processes">
<span id="geomesa-process"></span><h1>21. GeoMesa Processes<a class="headerlink" href="#geomesa-processes" title="Permalink to this headline">¶</a></h1>
<p>The following analytic processes are available and optimized on GeoMesa
data stores, found in the <code class="docutils literal"><span class="pre">geomesa-process</span></code> module:</p>
<ul class="simple">
<li><code class="docutils literal"><span class="pre">ArrowConversionProcess</span></code> - encodes simple features in the <a class="reference external" href="https://arrow.apache.org/">Apache Arrow</a> format</li>
<li><code class="docutils literal"><span class="pre">BinConversionProcess</span></code> - encodes simple features in a minimized 16-byte format</li>
<li><a class="reference internal" href="#density-process"><span class="std std-ref">DensityProcess</span></a> - computes a density heatmap for a CQL query</li>
<li><code class="docutils literal"><span class="pre">HashAttributeProcess</span></code>/<code class="docutils literal"><span class="pre">HashAttributeColorProcess</span></code> - computes an
additional ‘hash’ attribute which is useful for styling.</li>
<li><code class="docutils literal"><span class="pre">JoinProcess</span></code> - merges features from two different schemas using a common attribute field</li>
<li><code class="docutils literal"><span class="pre">KNearestNeighborSearchProcess</span></code> - performs a KNN search</li>
<li><code class="docutils literal"><span class="pre">Point2PointProcess</span></code> - aggregates a collection of points into a collection of line segments</li>
<li><code class="docutils literal"><span class="pre">ProximitySearchProcess</span></code> - searches near a set input features</li>
<li><a class="reference internal" href="#query-process"><span class="std std-ref">QueryProcess</span></a> - performs a Geomesa query, useful as input for nested requests</li>
<li><code class="docutils literal"><span class="pre">RouteSearchProcess</span></code> - matches features traveling along a given route</li>
<li><code class="docutils literal"><span class="pre">SamplingProcess</span></code> - uses statistical sampling to reduces the features
returned by a query</li>
<li><a class="reference internal" href="#statsiterator-process"><span class="std std-ref">StatsProcess</span></a> - returns various stats for a CQL query</li>
<li><code class="docutils literal"><span class="pre">TrackLabelProcess</span></code> - selects the last feature in a track based on a common attribute, useful for styling</li>
<li><code class="docutils literal"><span class="pre">TubeSelectProcess</span></code> - performs a correlated search across time and space</li>
<li><a class="reference internal" href="#unique-process"><span class="std std-ref">UniqueProcess</span></a> - identifies unique values for an attribute</li>
</ul>
<p>Where possible, the calculations are pushed out to a distributed system for faster performance. Currently
this has been implemented in the Accumulo data store and partially in the HBase data store. Other
back-ends can still be used, but local processing will be used.</p>
<div class="section" id="installation">
<h2>21.1. Installation<a class="headerlink" href="#installation" title="Permalink to this headline">¶</a></h2>
<p>While they can be used independently, the common use case is to use them
with GeoServer. To deploy them in GeoServer requires:</p>
<ol class="arabic simple">
<li>a GeoMesa datastore plugin</li>
<li>the GeoServer WPS extension</li>
<li>the <code class="docutils literal"><span class="pre">geomesa-process-wps_2.11-&lt;version&gt;.jar</span></code> deployed in <code class="docutils literal"><span class="pre">${GEOSERVER_HOME}/WEB-INF/lib</span></code></li>
</ol>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Some processes also require custom output formats, available separately in the GPL licensed
<a class="reference external" href="https://github.com/geomesa/geomesa-geoserver">GeoMesa GeoServer WFS module</a></p>
</div>
<p>The GeoMesa datastore plugin and GeoMesa process jars are both
available in the binary distribution in the gs-plugins directory.</p>
<p>Documentation about the GeoServer WPS Extension (including download
instructions) is available <a class="reference external" href="http://docs.geoserver.org/stable/en/user/services/wps/install.html">here</a>.</p>
<p>To verify the install, start GeoServer, and you should see a line like
<code class="docutils literal"><span class="pre">INFO</span> <span class="pre">[geoserver.wps]</span> <span class="pre">-</span> <span class="pre">Found</span> <span class="pre">15</span> <span class="pre">bindable</span> <span class="pre">processes</span> <span class="pre">in</span> <span class="pre">GeoMesa</span> <span class="pre">Process</span> <span class="pre">Factory</span></code>.</p>
<p>In the GeoServer web UI, click ‘Demos’ and then ‘WPS request builder’.
From the request builder, under ‘Choose Process’, click on any of the
‘geomesa:’ options to build up example requests and in some cases see
results.</p>
</div>
<div class="section" id="processors">
<h2>21.2. Processors<a class="headerlink" href="#processors" title="Permalink to this headline">¶</a></h2>
<div class="section" id="densityprocess">
<span id="density-process"></span><h3>21.2.1. DensityProcess<a class="headerlink" href="#densityprocess" title="Permalink to this headline">¶</a></h3>
<p>The <code class="docutils literal"><span class="pre">DensityProcess</span></code> computes a density map over a set of features stored in GeoMesa. A raster image is returned.</p>
<table border="1" class="docutils">
<colgroup>
<col width="13%" />
<col width="88%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Parameters</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>data</td>
<td>Input Simple Feature Collection to run the density process over.</td>
</tr>
<tr class="row-odd"><td>radiusPixels</td>
<td>Radius of the density kernel in pixels. Controls the “fuzziness” of the density map.</td>
</tr>
<tr class="row-even"><td>weightAttr</td>
<td>Name of the attribute to use for data point weights.</td>
</tr>
<tr class="row-odd"><td>outputBBOX</td>
<td>Bounding box and CRS of the output raster.</td>
</tr>
<tr class="row-even"><td>outputWidth</td>
<td>Width of the output raster in pixels.</td>
</tr>
<tr class="row-odd"><td>outputHeight</td>
<td>Height of the output raster in pixels.</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="statsprocess">
<span id="statsiterator-process"></span><h3>21.2.2. StatsProcess<a class="headerlink" href="#statsprocess" title="Permalink to this headline">¶</a></h3>
<p>The <code class="docutils literal"><span class="pre">StatsProcess</span></code> allows the running of statistics on a given feature set.</p>
<table border="1" class="docutils">
<colgroup>
<col width="8%" />
<col width="92%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Parameters</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>features</td>
<td>The feature set on which to query. Can be a raw text input, reference to a remote URL, a subquery or a vector layer.</td>
</tr>
<tr class="row-odd"><td>statString</td>
<td>Stat string indicating which stats to instantiate. More info here <a class="reference internal" href="#statstring"><span class="std std-ref">Stat Strings</span></a>.</td>
</tr>
<tr class="row-even"><td>encode</td>
<td>Return the values encoded as json. Must be <code class="docutils literal"><span class="pre">true</span></code> or <code class="docutils literal"><span class="pre">false</span></code>; empty values will not work.</td>
</tr>
<tr class="row-odd"><td>properties</td>
<td>The properties / transforms to apply before gathering stats. More info here <span class="xref std std-ref">transformationsAndProjections</span>.</td>
</tr>
</tbody>
</table>
<div class="section" id="stat-strings">
<span id="statstring"></span><h4>21.2.2.1. Stat Strings<a class="headerlink" href="#stat-strings" title="Permalink to this headline">¶</a></h4>
<p>Stat strings are a GeoMesa domain specific language (DSL) that allows the specification of stats for the iterators
to collect. The available stat function are listed below:</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Items marked with <code class="docutils literal"><span class="pre">*</span></code> are the name of an attribute, either in your sft or as the result of a transformation or projection.</p>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">A TimePeriod is defined as one of the following strings: “day”, “week”, “month”, “year”</p>
</div>
<table border="1" class="docutils">
<colgroup>
<col width="46%" />
<col width="15%" />
<col width="39%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Syntax</th>
<th class="head">Parameters</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td colspan="3">Count</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal"><span class="pre">Count()</span></code></td>
<td>&#160;</td>
<td>Counts the number of features.</td>
</tr>
<tr class="row-even"><td colspan="3">MinMax</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal"><span class="pre">MinMax(attribute)</span></code></td>
<td><ul class="first last simple">
<li>attribute*: String</li>
</ul>
</td>
<td>Finds the min and max values of the given attribute.</td>
</tr>
<tr class="row-even"><td colspan="3">GroupBy</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal"><span class="pre">GroupBy(attribute,stat)</span></code></td>
<td><ul class="first last simple">
<li>attribute*: String</li>
<li>stat: Stat String</li>
</ul>
</td>
<td>Groups stats by the given attribute and then runs
the given stat on each group. Any stat can be provided.</td>
</tr>
<tr class="row-even"><td colspan="3">Descriptive Stats</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal"><span class="pre">DescriptiveStats(attribute)</span></code></td>
<td><ul class="first last simple">
<li>attribute*: String</li>
</ul>
</td>
<td>Runs single pass stats on the given attribute
calculating stats describing the attribute such as:
count; min; max; mean; and population and sample
versions of variance, standard deviation, kurtosis,
excess kurtosis, covariance, and correlation.</td>
</tr>
<tr class="row-even"><td colspan="3">Enumeration</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal"><span class="pre">Enumeration(attribute)</span></code></td>
<td><ul class="first last simple">
<li>attribute*: String</li>
</ul>
</td>
<td>Enumerates the values in the give attribute and the
number of occurrences.</td>
</tr>
<tr class="row-even"><td colspan="3">TopK</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal"><span class="pre">TopK(attribute)</span></code></td>
<td><ul class="first last simple">
<li>attribute*: String</li>
</ul>
</td>
<td>TopK of the given attribute</td>
</tr>
<tr class="row-even"><td colspan="3">Histogram</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal"><span class="pre">Histogram(attribute,numBins,lower,upper)</span></code></td>
<td><ul class="first last simple">
<li>attribute*: String</li>
<li>numBins: Int</li>
<li>lower: Int</li>
<li>upper: Int</li>
</ul>
</td>
<td>Provides a histogram of the given attribute, binning
the results into a binned array using the numBins as
the number of bins and lower and upper as the bounds
of the binned array.</td>
</tr>
<tr class="row-even"><td colspan="3">Freqency</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal"><span class="pre">Frequency(attribute,dtg,period,precision)</span></code></td>
<td><ul class="first last simple">
<li>attribute*: String</li>
<li>dtg*: String</li>
<li>period: TimePeriod</li>
<li>precision: Int</li>
</ul>
</td>
<td>Estimates frequency counts at scale.</td>
</tr>
<tr class="row-even"><td colspan="3">z3Histogram</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal"><span class="pre">Z3Histogram(geom,dtg,period,length)</span></code></td>
<td><ul class="first last simple">
<li>geom*: String</li>
<li>dtg*: String</li>
<li>period: TimePeriod</li>
<li>length: Int</li>
</ul>
</td>
<td>Provides a histogram similar to <code class="docutils literal"><span class="pre">Histogram</span></code> but
treats the geometry and date attributes as a single
value.</td>
</tr>
<tr class="row-even"><td colspan="3">z3Frequency</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal"><span class="pre">Z3Frequency(geom,dtg,period,precision)</span></code></td>
<td><ul class="first last simple">
<li>geom*: String</li>
<li>dtg*: String</li>
<li>period: TimePeriod</li>
<li>precision: Int</li>
</ul>
</td>
<td>Provides a freqency estimate similar to <code class="docutils literal"><span class="pre">Frequency</span></code>
but treats the geometry and date attributes as a
single value.</td>
</tr>
<tr class="row-even"><td colspan="3">Iterator Stack</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal"><span class="pre">IteratorStackCount()</span></code></td>
<td>&#160;</td>
<td>IteratorStackCount keeps track of the number of times
Accumulo sets up an iterator stack as a result of a
query.</td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="section" id="queryprocess">
<span id="query-process"></span><h3>21.2.3. QueryProcess<a class="headerlink" href="#queryprocess" title="Permalink to this headline">¶</a></h3>
<p>The <code class="docutils literal"><span class="pre">QueryProcess</span></code> takes an (E)CQL query/filter for a given feature set as a text object and returns
the result as a json object.</p>
<table border="1" class="docutils">
<colgroup>
<col width="9%" />
<col width="91%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Parameters</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>features</td>
<td><dl class="first last docutils">
<dt>The data source feature collection to query. Reference as <code class="docutils literal"><span class="pre">store:layername</span></code>.</dt>
<dd>For an XML file enter <code class="docutils literal"><span class="pre">&lt;wfs:Query</span> <span class="pre">typeName=store:layername</span> <span class="pre">/&gt;</span></code>
For interactive WPS request builder select <code class="docutils literal"><span class="pre">VECTOR_LAYER</span></code> &amp; choose <code class="docutils literal"><span class="pre">store:layername</span></code></dd>
</dl>
</td>
</tr>
<tr class="row-odd"><td>filter</td>
<td><dl class="first docutils">
<dt>The filter to apply to the feature collection.</dt>
<dd>For an XML file enter:</dd>
</dl>
<div class="highlight-xml"><div class="highlight"><pre><span></span><span class="nt">&lt;wps:ComplexData</span> <span class="na">mimeType=</span><span class="s">&quot;text/plain; subtype=cql&quot;</span><span class="nt">&gt;</span>
   <span class="cp">&lt;![CDATA[some-query-text]]</span>
<span class="cp">&lt;/wps:ComplexData&gt;</span>
</pre></div>
</div>
<dl class="last docutils">
<dt>For interactive WPS request builder select TEXT &amp; choose <code class="docutils literal"><span class="pre">&quot;text/plain;</span> <span class="pre">subtype=cql&quot;</span></code></dt>
<dd>enter the query text in the text box</dd>
</dl>
</td>
</tr>
<tr class="row-even"><td>output</td>
<td><dl class="first docutils">
<dt>Specify how the output feature collection will be presented.</dt>
<dd>For an XML file enter:</dd>
</dl>
<div class="highlight-xml"><div class="highlight"><pre><span></span><span class="nt">&lt;wps:ResponseForm&gt;</span>
   <span class="nt">&lt;wps:RawDataOutput</span> <span class="na">mimeType=</span><span class="s">&quot;application/json&quot;</span><span class="nt">&gt;</span>
      <span class="nt">&lt;ows:Identifier&gt;</span>result<span class="nt">&lt;/ows:Identifier&gt;</span>
   <span class="nt">&lt;/wps:RawDataOutput&gt;</span>
<span class="nt">&lt;/wps:ResponseForm&gt;</span>
</pre></div>
</div>
<p class="last">For interactive WPS request builder check the Generate box and choose “application/json”</p>
</td>
</tr>
<tr class="row-odd"><td>properties</td>
<td>The properties / transforms to apply before gathering stats.</td>
</tr>
</tbody>
</table>
<div class="section" id="query-example-xml">
<span id="queryexamplexml"></span><h4>21.2.3.1. Query example (XML)<a class="headerlink" href="#query-example-xml" title="Permalink to this headline">¶</a></h4>
<p><a class="reference download internal" href="../_downloads/QueryProcess_wps.xml" download=""><code class="xref download docutils literal"><span class="pre">QueryProcess_wps.xml</span></code></a> is a geoserver WPS call to the GeoMesa QueryProcess that performs the same query shown
in the <a class="reference external" href="http://www.geomesa.org/documentation/tutorials/geomesa-quickstart-accumulo.html">Accumulo-quickstart</a>. It can be run with the following curl call:</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>curl -v -u admin:geoserver -H <span class="s2">&quot;Content-Type: text/xml&quot;</span> -d@QueryProcess_wps.xml localhost:8080/geoserver/wps
</pre></div>
</div>
<p id="queryexampleresults">The query should generate results that look like <a class="reference download internal" href="../_downloads/QueryProcess_results.json" download=""><code class="xref download docutils literal"><span class="pre">this</span></code></a>:</p>
<div class="highlight-json"><div class="highlight"><pre><span></span>{
  &quot;type&quot;: &quot;FeatureCollection&quot;,
  &quot;features&quot;: [
    {
      &quot;type&quot;: &quot;Feature&quot;,
      &quot;geometry&quot;: {
        &quot;type&quot;: &quot;Point&quot;,
        &quot;coordinates&quot;: [
          -76.513,
          -37.4941
        ]
      },
      &quot;properties&quot;: {
        &quot;Who&quot;: &quot;Bierce&quot;,
        &quot;What&quot;: 931,
        &quot;When&quot;: &quot;2014-07-04T22:25:38.000+0000&quot;
      },
      &quot;id&quot;: &quot;Observation.931&quot;
    },
    .
    .
    .
  ]
}
</pre></div>
</div>
</div>
</div>
<div class="section" id="uniqueprocess">
<span id="unique-process"></span><h3>21.2.4. UniqueProcess<a class="headerlink" href="#uniqueprocess" title="Permalink to this headline">¶</a></h3>
<p>The <code class="docutils literal"><span class="pre">UniqueProcess</span></code> class is optimized for GeoMesa to find unique attributes values for a feature collection,
which are returned as a json object.</p>
<table border="1" class="docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Parameters</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>features</td>
<td><dl class="first last docutils">
<dt>The data source feature collection to query. Reference as <code class="docutils literal"><span class="pre">store:layername</span></code>.</dt>
<dd>For an XML file enter <code class="docutils literal"><span class="pre">&lt;wfs:Query</span> <span class="pre">typeName=store:layername</span> <span class="pre">/&gt;</span></code>
For interactive WPS request builder select <code class="docutils literal"><span class="pre">VECTOR_LAYER</span></code> &amp; choose <code class="docutils literal"><span class="pre">store:layername</span></code></dd>
</dl>
</td>
</tr>
<tr class="row-odd"><td>attribute</td>
<td><dl class="first last docutils">
<dt>The attribute for which unique values will be extracted. Attributes are expressed as a string.</dt>
<dd>For an XML file enter <code class="docutils literal"><span class="pre">&lt;wps:LiteralData&gt;attribute-name&lt;/wps:LiteralData&gt;</span></code></dd>
</dl>
</td>
</tr>
<tr class="row-even"><td>filter</td>
<td><dl class="first docutils">
<dt>The filter to apply to the feature collection.</dt>
<dd>For an XML file enter:</dd>
</dl>
<div class="highlight-xml"><div class="highlight"><pre><span></span><span class="nt">&lt;wps:ComplexData</span> <span class="na">mimeType=</span><span class="s">&quot;text/plain; subtype=cql&quot;</span><span class="nt">&gt;</span>
   <span class="cp">&lt;![CDATA[some-query-text]]</span>
<span class="cp">&lt;/wps:ComplexData&gt;</span>
</pre></div>
</div>
<dl class="last docutils">
<dt>For interactive WPS request builder select TEXT &amp; choose <code class="docutils literal"><span class="pre">&quot;text/plain;</span> <span class="pre">subtype=cql&quot;</span></code></dt>
<dd>enter the query text in the text box.</dd>
</dl>
</td>
</tr>
<tr class="row-odd"><td>histogram</td>
<td><dl class="first last docutils">
<dt>Create a histogram of attribute values. Expressed as a boolean (true/false).</dt>
<dd>For an XML file enter <code class="docutils literal"><span class="pre">&lt;wps:LiteralData&gt;true/false&lt;/wps:LiteralData&gt;</span></code></dd>
</dl>
</td>
</tr>
<tr class="row-even"><td>sort</td>
<td><dl class="first last docutils">
<dt>Sort the results. Expressed as a string; allowed values are ASC or DESC.</dt>
<dd>For an XML file enter <code class="docutils literal"><span class="pre">&lt;wps:LiteralData&gt;ASC/DESC&lt;/wps:LiteralData&gt;</span></code></dd>
</dl>
</td>
</tr>
<tr class="row-odd"><td>sortByCount</td>
<td><dl class="first last docutils">
<dt>Sort by histogram counts instead of attribute values. Expressed as a boolean (true/false).</dt>
<dd>For an XML file enter <code class="docutils literal"><span class="pre">&lt;wps:LiteralData&gt;true/false&lt;/wps:LiteralData&gt;</span></code></dd>
</dl>
</td>
</tr>
<tr class="row-even"><td>output</td>
<td><dl class="first docutils">
<dt>Specify how the output feature collection will be presented.</dt>
<dd>For an XML file enter:</dd>
</dl>
<div class="highlight-xml"><div class="highlight"><pre><span></span><span class="nt">&lt;wps:ResponseForm&gt;</span>
   <span class="nt">&lt;wps:RawDataOutput</span> <span class="na">mimeType=</span><span class="s">&quot;application/json&quot;</span><span class="nt">&gt;</span>
      <span class="nt">&lt;ows:Identifier&gt;</span>result<span class="nt">&lt;/ows:Identifier&gt;</span>
   <span class="nt">&lt;/wps:RawDataOutput&gt;</span>
<span class="nt">&lt;/wps:ResponseForm&gt;</span>
</pre></div>
</div>
<p class="last">For interactive WPS request builder check the Generate box and choose “application/json”</p>
</td>
</tr>
</tbody>
</table>
<div class="section" id="unique-example-xml">
<span id="uniqueexamplexml"></span><h4>21.2.4.1. Unique example (XML)<a class="headerlink" href="#unique-example-xml" title="Permalink to this headline">¶</a></h4>
<p><a class="reference download internal" href="../_downloads/UniqueProcess_wps.xml" download=""><code class="xref download docutils literal"><span class="pre">UniqueProcess_wps.xml</span></code></a> is a geoserver WPS call to the GeoMesa UniqueProcess that reports the unique names
in in the ‘Who’ field of the Accumulo quickstart data for a restricted bounding box (-77.5, -37.5, -76.5, -36.5)). It can be run with the following curl call:</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>curl -v -u admin:geoserver -H <span class="s2">&quot;Content-Type: text/xml&quot;</span> -d@UniqueProcess_wps.xml localhost:8080/geoserver/wps
</pre></div>
</div>
<p id="uniqueexampleresults">The query should generate results that look like this:</p>
<div class="highlight-json"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;FeatureCollection&quot;</span><span class="p">,</span>
  <span class="nt">&quot;features&quot;</span><span class="p">:</span> <span class="p">[</span>
    <span class="p">{</span>
      <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;Feature&quot;</span><span class="p">,</span>
      <span class="nt">&quot;properties&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;value&quot;</span><span class="p">:</span> <span class="s2">&quot;Addams&quot;</span><span class="p">,</span>
        <span class="nt">&quot;count&quot;</span><span class="p">:</span> <span class="mi">37</span>
      <span class="p">},</span>
      <span class="nt">&quot;id&quot;</span><span class="p">:</span> <span class="s2">&quot;fid--21d4eb0_15b68e0e8ca_-7fd6&quot;</span>
    <span class="p">},</span>
    <span class="p">{</span>
      <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;Feature&quot;</span><span class="p">,</span>
      <span class="nt">&quot;properties&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;value&quot;</span><span class="p">:</span> <span class="s2">&quot;Bierce&quot;</span><span class="p">,</span>
        <span class="nt">&quot;count&quot;</span><span class="p">:</span> <span class="mi">43</span>
      <span class="p">},</span>
      <span class="nt">&quot;id&quot;</span><span class="p">:</span> <span class="s2">&quot;fid--21d4eb0_15b68e0e8ca_-7fd5&quot;</span>
    <span class="p">},</span>
    <span class="p">{</span>
      <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;Feature&quot;</span><span class="p">,</span>
      <span class="nt">&quot;properties&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;value&quot;</span><span class="p">:</span> <span class="s2">&quot;Clemens&quot;</span><span class="p">,</span>
        <span class="nt">&quot;count&quot;</span><span class="p">:</span> <span class="mi">48</span>
      <span class="p">},</span>
      <span class="nt">&quot;id&quot;</span><span class="p">:</span> <span class="s2">&quot;fid--21d4eb0_15b68e0e8ca_-7fd4&quot;</span>
    <span class="p">}</span>
  <span class="p">]</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="chaining-processes">
<span id="id1"></span><h3>21.2.5. Chaining Processes<a class="headerlink" href="#chaining-processes" title="Permalink to this headline">¶</a></h3>
<p>WPS processes can be chained, using the result of one process as the input for another. For example, a bounding box
in a GeoMesa <a class="reference internal" href="#query-process"><span class="std std-ref">QueryProcess</span></a> can be used to restrict data sent to <a class="reference internal" href="#statsiterator-process"><span class="std std-ref">StatsProcess</span></a>.
<a class="reference download internal" href="../_downloads/GeoMesa_WPS_chain_example.xml" download=""><code class="xref download docutils literal"><span class="pre">GeoMesa_WPS_chain_example.xml</span></code></a> will get all points from
the AccumuloQuickStart table that are within a specified bounding box (-77.5, -37.5, -76.5, -36.5), and calculate
descriptive statistics on the ‘What’ attribute of the results.</p>
<p>The query should generate results that look like this:</p>
<div class="highlight-json"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;FeatureCollection&quot;</span><span class="p">,</span>
  <span class="nt">&quot;features&quot;</span><span class="p">:</span> <span class="p">[</span>
    <span class="p">{</span>
      <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;Feature&quot;</span><span class="p">,</span>
      <span class="nt">&quot;geometry&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;Point&quot;</span><span class="p">,</span>
        <span class="nt">&quot;coordinates&quot;</span><span class="p">:</span> <span class="p">[</span>
          <span class="mi">0</span><span class="p">,</span>
          <span class="mi">0</span>
        <span class="p">]</span>
      <span class="p">},</span>
      <span class="nt">&quot;properties&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;stats&quot;</span><span class="p">:</span> <span class="s2">&quot;{\&quot;count\&quot;:128,\&quot;minimum\&quot;:[29.0],\&quot;maximum\&quot;:[991.0],\&quot;mean\&quot;:[508.5781249999999],\&quot;population_variance\&quot;:[85116.25952148438],\&quot;population_standard_deviation\&quot;:[291.74691004616375],\&quot;population_skewness\&quot;:[-0.11170819256679464],\&quot;population_kurtosis\&quot;:[1.7823482287566166],\&quot;population_excess_kurtosis\&quot;:[-1.2176517712433834],\&quot;sample_variance\&quot;:[85786.46628937007],\&quot;sample_standard_deviation\&quot;:[292.893267743337],\&quot;sample_skewness\&quot;:[-0.11303718280959842],\&quot;sample_kurtosis\&quot;:[1.8519712064424219],\&quot;sample_excess_kurtosis\&quot;:[-1.1480287935575781],\&quot;population_covariance\&quot;:[85116.25952148438],\&quot;population_correlation\&quot;:[1.0],\&quot;sample_covariance\&quot;:[85786.46628937007],\&quot;sample_correlation\&quot;:[1.0]}&quot;</span>
      <span class="p">},</span>
      <span class="nt">&quot;id&quot;</span><span class="p">:</span> <span class="s2">&quot;stat&quot;</span>
    <span class="p">}</span>
  <span class="p">]</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
</div>
</div>


           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="spark/index.html" class="btn btn-neutral float-right" title="22. GeoMesa Spark" accesskey="n">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="nifi.html" class="btn btn-neutral" title="20. GeoMesa NiFi Bundle" accesskey="p"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>

    </p>
  </div>

<div role="contentinfo">
  <p>
    &copy; Copyright 2013-2017 <a href="https://www.ccri.com/">Commonwealth Computer Research, Inc.</a>
    <br/>
    Licensed under the <a href="http://www.opensource.org/licenses/apache2.0.php">Apache License, Version 2.0</a>
  </p>
</div>

Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>



</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../',
            VERSION:'1.3.5',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="../_static/jquery.js"></script>
      <script type="text/javascript" src="../_static/underscore.js"></script>
      <script type="text/javascript" src="../_static/doctools.js"></script>
      <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

  

  
  
    <script type="text/javascript" src="../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>