

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>11.2. Using the Kafka Data Store Programmatically &mdash; GeoMesa 1.3.5 Manuals</title>
  

  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../../_static/css/theme_custom.css" type="text/css" />
  

  

  
        <link rel="index" title="Index"
              href="../../genindex.html"/>
        <link rel="search" title="Search" href="../../search.html"/>
    <link rel="top" title="GeoMesa 1.3.5 Manuals" href="../../index.html"/>
        <link rel="up" title="11. Kafka Data Store" href="index.html"/>
        <link rel="next" title="11.3. Using the Kafka Data Store in GeoServer" href="geoserver.html"/>
        <link rel="prev" title="11.1. Installing GeoMesa Kafka" href="install.html"/> 

  
  <script src="../../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../../index.html" class="icon icon-home"> GeoMesa
          

          
          </a>

          
            
            
              <div class="version">
                1.3.5
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
                <ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="../index.html">User Manual</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../introduction.html">1. Introduction</a></li>
<li class="toctree-l2"><a class="reference internal" href="../architecture.html">2. Architecture Overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="../getting_started.html">3. Getting Started</a></li>
<li class="toctree-l2"><a class="reference internal" href="../download.html">4. Versions and Downloads</a></li>
<li class="toctree-l2"><a class="reference internal" href="../install.html">5. Installation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../datastores/index.html">6. GeoMesa Data Stores</a></li>
<li class="toctree-l2"><a class="reference internal" href="../accumulo/index.html">7. Accumulo Data Store</a></li>
<li class="toctree-l2"><a class="reference internal" href="../hbase/index.html">8. HBase Data Store</a></li>
<li class="toctree-l2"><a class="reference internal" href="../bigtable/index.html">9. Bigtable Data Store</a></li>
<li class="toctree-l2"><a class="reference internal" href="../cassandra/index.html">10. Cassandra Data Store</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="index.html">11. Kafka Data Store</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="install.html">11.1. Installing GeoMesa Kafka</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">11.2. Using the Kafka Data Store Programmatically</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#parameters">11.2.1. Parameters</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="geoserver.html">11.3. Using the Kafka Data Store in GeoServer</a></li>
<li class="toctree-l3"><a class="reference internal" href="commandline.html">11.4. Kafka Command Line Tools</a></li>
<li class="toctree-l3"><a class="reference internal" href="producers.html">11.5. Data Producers</a></li>
<li class="toctree-l3"><a class="reference internal" href="consumers.html">11.6. Data Consumers</a></li>
<li class="toctree-l3"><a class="reference internal" href="feature_events.html">11.7. Listening for Feature Events</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../lambda/index.html">12. Lambda Data Store</a></li>
<li class="toctree-l2"><a class="reference internal" href="../filesystem/index.html">13. FileSystem Datastore (Amazon S3, HDFS Datastore)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../geoserver.html">14. GeoServer Plugins</a></li>
<li class="toctree-l2"><a class="reference internal" href="../blobstore.html">15. GeoMesa Blob Store</a></li>
<li class="toctree-l2"><a class="reference internal" href="../convert/index.html">16. GeoMesa Convert</a></li>
<li class="toctree-l2"><a class="reference internal" href="../geojson.html">17. GeoMesa GeoJSON</a></li>
<li class="toctree-l2"><a class="reference internal" href="../metrics.html">18. GeoMesa Metrics</a></li>
<li class="toctree-l2"><a class="reference internal" href="../native_api.html">19. GeoMesa Native API</a></li>
<li class="toctree-l2"><a class="reference internal" href="../nifi.html">20. GeoMesa NiFi Bundle</a></li>
<li class="toctree-l2"><a class="reference internal" href="../process.html">21. GeoMesa Processes</a></li>
<li class="toctree-l2"><a class="reference internal" href="../spark/index.html">22. GeoMesa Spark</a></li>
<li class="toctree-l2"><a class="reference internal" href="../stream.html">23. GeoMesa Stream Processing</a></li>
<li class="toctree-l2"><a class="reference internal" href="../web_data.html">24. GeoMesa Web Data</a></li>
<li class="toctree-l2"><a class="reference internal" href="../index.html#appendix">Appendix</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../developer/index.html">Developer Manual</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../tutorials/index.html">Tutorials</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../../index.html">GeoMesa</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          

 



<div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../../index.html">Docs</a> &raquo;</li>
      
          <li><a href="../index.html">User Manual</a> &raquo;</li>
      
          <li><a href="index.html">11. Kafka Data Store</a> &raquo;</li>
      
    <li>11.2. Using the Kafka Data Store Programmatically</li>
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="../../_sources/user/kafka/usage.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="using-the-kafka-data-store-programmatically">
<h1>11.2. Using the Kafka Data Store Programmatically<a class="headerlink" href="#using-the-kafka-data-store-programmatically" title="Permalink to this headline">¶</a></h1>
<p>To create a <code class="docutils literal"><span class="pre">KafkaDataStore</span></code> there are two required properties, one
for the Apache Kafka connection, “brokers”, and one for the Apache
Zookeeper connection, “zookeepers”. An optional parameter, “zkPath” is
used to specify a path in Zookeeper under which schemas are stored. If
no “zkPath” is specified then a default path will be used. Another
optional parameter, “isProducer”, is used to create a <code class="docutils literal"><span class="pre">KafkaDataStore</span></code>
in <em>producer</em> or <em>consumer</em> mode. This parameter defaults to false, i.e.
by default a Kafka Consumer Data Store will be created. The same set of
configuration parameters, with the exception of “isProducer” must be
used to create both the Kafka Producer Data Store and the Kafka Consumer
Data Store.</p>
<p>After a <code class="docutils literal"><span class="pre">KafkaDataStore</span></code> has been created, additional simple feature
type specific hints must be provided. These hints are stored in the user
data of the <code class="docutils literal"><span class="pre">SimpleFeatureType</span></code>. Use the <code class="docutils literal"><span class="pre">KafkaDataStoreHelper</span></code> to
create a copy of your <code class="docutils literal"><span class="pre">SimpleFeatureType</span></code> with the hints added. Then
call <code class="docutils literal"><span class="pre">dataStore.createSchema(sft)</span></code> where <code class="docutils literal"><span class="pre">sft</span></code> is the
<code class="docutils literal"><span class="pre">SimpleFeatureType</span></code> returned by the <code class="docutils literal"><span class="pre">KafkaDataStoreHelper</span></code>. This
must be done once per Simple Feature Type. The Simple Feature Type along
with hints are stored in Zookeeper so if <code class="docutils literal"><span class="pre">createSchema(sft)</span></code> is called
on the Kafka Data Store Producer, it cannot be called on the Kafka
Consumer Data Store Consumer.</p>
<div class="section" id="parameters">
<span id="kafka-parameters"></span><h2>11.2.1. Parameters<a class="headerlink" href="#parameters" title="Permalink to this headline">¶</a></h2>
<p>The Kafka Data Store takes several parameters.</p>
<table border="1" class="docutils">
<colgroup>
<col width="18%" />
<col width="9%" />
<col width="73%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Parameter</th>
<th class="head">Type</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>brokers *</td>
<td>String</td>
<td>Comma-separated list of Kafka brokers</td>
</tr>
<tr class="row-odd"><td>zookeepers *</td>
<td>String</td>
<td>Comma-separated list of Zookeeper servers</td>
</tr>
<tr class="row-even"><td>zkPath</td>
<td>String</td>
<td>Path to GeoMesa Kafka data in Zookeeper</td>
</tr>
<tr class="row-odd"><td>namespace</td>
<td>String</td>
<td>Namespace</td>
</tr>
<tr class="row-even"><td>partitions</td>
<td>Integer</td>
<td>Number of partitions to use in Kafka topics</td>
</tr>
<tr class="row-odd"><td>replication</td>
<td>Integer</td>
<td>Replication factor to use in Kafka topics</td>
</tr>
<tr class="row-even"><td>isProducer</td>
<td>Boolean</td>
<td>Indicates whether the Kafka Data Store is a producer</td>
</tr>
<tr class="row-odd"><td>expirationPeriod</td>
<td>Long</td>
<td>Feature will be “auto-dropped” (expired) after this delay
in milliseconds. Leave black or use -1 to not drop features.</td>
</tr>
<tr class="row-even"><td>cleanUpCache</td>
<td>Boolean</td>
<td>If true, run a thread to clean up the live feature cache every
second if set to true. False by default.</td>
</tr>
<tr class="row-odd"><td>autoOffsetReset</td>
<td>String</td>
<td>What offset to reset to when there is no initial offset in ZooKeeper
or if an offset is out of range. Valid values are smallest or
largest. Default value is largest.</td>
</tr>
</tbody>
</table>
<p>The required parameters are marked with an asterisk.</p>
</div>
</div>


           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="geoserver.html" class="btn btn-neutral float-right" title="11.3. Using the Kafka Data Store in GeoServer" accesskey="n">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="install.html" class="btn btn-neutral" title="11.1. Installing GeoMesa Kafka" accesskey="p"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>

    </p>
  </div>

<div role="contentinfo">
  <p>
    &copy; Copyright 2013-2017 <a href="https://www.ccri.com/">Commonwealth Computer Research, Inc.</a>
    <br/>
    Licensed under the <a href="http://www.opensource.org/licenses/apache2.0.php">Apache License, Version 2.0</a>
  </p>
</div>

Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>



</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../../',
            VERSION:'1.3.5',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="../../_static/jquery.js"></script>
      <script type="text/javascript" src="../../_static/underscore.js"></script>
      <script type="text/javascript" src="../../_static/doctools.js"></script>
      <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

  

  
  
    <script type="text/javascript" src="../../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>