

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>15.4.5. NYC Taxi &mdash; GeoMesa 1.3.3 Manuals</title>
  

  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../../../_static/css/theme_custom.css" type="text/css" />
  

  
    <link rel="stylesheet" href="../../../_static/sphinx_tabs/tabs.css" type="text/css" />
  
    <link rel="stylesheet" href="../../../_static/sphinx_tabs/semantic-ui-2.2.7/segment.min.css" type="text/css" />
  
    <link rel="stylesheet" href="../../../_static/sphinx_tabs/semantic-ui-2.2.7/menu.min.css" type="text/css" />
  
    <link rel="stylesheet" href="../../../_static/sphinx_tabs/semantic-ui-2.2.7/tab.min.css" type="text/css" />
  

  
    <link rel="top" title="GeoMesa 1.3.3 Manuals" href="../../../index.html"/>
        <link rel="up" title="15.4. Prepackaged Converter Definitions" href="index.html"/>
        <link rel="next" title="15.4.6. OpenStreetMap GPX Data" href="osm-gpx.html"/>
        <link rel="prev" title="15.4.4. Global Terrorism Database (GTD)" href="gtd.html"/> 

  
  <script src="../../../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../../../index.html" class="icon icon-home"> GeoMesa
          

          
          </a>

          
            
            
              <div class="version">
                1.3.3
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
                <ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="../../index.html">User Manual</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../../introduction.html">1. Introduction</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../architecture.html">2. Architecture Overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../getting_started.html">3. Getting Started</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../download.html">4. Versions and Downloads</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../install.html">5. Installation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../datastores/index.html">6. GeoMesa Data Stores</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../accumulo/index.html">7. Accumulo Data Store</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../hbase/index.html">8. HBase Data Store</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../bigtable/index.html">9. Bigtable Data Store</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../cassandra/index.html">10. Cassandra Data Store</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../kafka/index.html">11. Kafka Data Store</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../lambda/index.html">12. Lambda Data Store</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../geoserver.html">13. GeoServer Plugins</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../blobstore.html">14. GeoMesa Blob Store</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../index.html">15. GeoMesa Convert</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="../example.html">15.1. Example Usage</a></li>
<li class="toctree-l3"><a class="reference internal" href="../usage_tools.html">15.2. Using SFT and Converter Definitions with Command-Line Tools</a></li>
<li class="toctree-l3"><a class="reference internal" href="../usage_runtime.html">15.3. Loading Converters and SFTs at Runtime</a></li>
<li class="toctree-l3 current"><a class="reference internal" href="index.html">15.4. Prepackaged Converter Definitions</a><ul class="current">
<li class="toctree-l4"><a class="reference internal" href="gdelt.html">15.4.1. Global Database of Events, Language, and Tone (GDELT)</a></li>
<li class="toctree-l4"><a class="reference internal" href="geolife.html">15.4.2. GeoLife GPS Trajectory Data</a></li>
<li class="toctree-l4"><a class="reference internal" href="geonames.html">15.4.3. GeoNames</a></li>
<li class="toctree-l4"><a class="reference internal" href="gtd.html">15.4.4. Global Terrorism Database (GTD)</a></li>
<li class="toctree-l4 current"><a class="current reference internal" href="#">15.4.5. NYC Taxi</a></li>
<li class="toctree-l4"><a class="reference internal" href="osm-gpx.html">15.4.6. OpenStreetMap GPX Data</a></li>
<li class="toctree-l4"><a class="reference internal" href="tdrive.html">15.4.7. T-Drive Trajectory Data</a></li>
<li class="toctree-l4"><a class="reference internal" href="twitter.html">15.4.8. Twitter</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../function_overview.html">15.5. Transformation Function Overview</a></li>
<li class="toctree-l3"><a class="reference internal" href="../function_usage.html">15.6. Transformation Function Usage</a></li>
<li class="toctree-l3"><a class="reference internal" href="../json.html">15.7. Parsing JSON</a></li>
<li class="toctree-l3"><a class="reference internal" href="../xml.html">15.8. Parsing XML</a></li>
<li class="toctree-l3"><a class="reference internal" href="../avro.html">15.9. Parsing Avro</a></li>
<li class="toctree-l3"><a class="reference internal" href="../extending.html">15.10. Extending the Converter Library</a></li>
<li class="toctree-l3"><a class="reference internal" href="../parsing_and_validation.html">15.11. Parsing and Validation</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../geojson.html">16. GeoMesa GeoJSON</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../metrics.html">17. GeoMesa Metrics</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../native_api.html">18. GeoMesa Native API</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../nifi.html">19. GeoMesa NiFi Bundle</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../process.html">20. GeoMesa Processes</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../spark/index.html">21. GeoMesa Spark</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../stream.html">22. GeoMesa Stream Processing</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../web_data.html">23. GeoMesa Web Data</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../filesystem/index.html">24. FileSystem Datastore (Amazon S3, HDFS Datastore)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../index.html#appendix">Appendix</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../developer/index.html">Developer Manual</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../tutorials/index.html">Tutorials</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../../../index.html">GeoMesa</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          

 



<div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../../../index.html">Docs</a> &raquo;</li>
      
          <li><a href="../../index.html">User Manual</a> &raquo;</li>
      
          <li><a href="../index.html">15. GeoMesa Convert</a> &raquo;</li>
      
          <li><a href="index.html">15.4. Prepackaged Converter Definitions</a> &raquo;</li>
      
    <li>15.4.5. NYC Taxi</li>
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="../../../_sources/user/convert/premade/nyctaxi.txt" rel="nofollow"> View page source</a>
          
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="nyc-taxi">
<h1>15.4.5. NYC Taxi<a class="headerlink" href="#nyc-taxi" title="Permalink to this headline">¶</a></h1>
<p>New York City taxi activity data published by the University of Illinois from
Freedom of Information Law requests to NYC Taxi and Limo Commission.
More information about the dataset is
<a class="reference external" href="https://publish.illinois.edu/dbwork/open-data/">here</a>.</p>
<p>The University of Illinois hosts the data in a Box web interface and arrives in
several zip archives. Only the &#8220;trip data&#8221; is examined here. There is
also &#8220;fare data&#8221; from the taxi meters such as fare amount and tip. Once
unpacked there are monthly CSV files covering four years.</p>
<div class="section" id="getting-the-data">
<h2>15.4.5.1. Getting the Data<a class="headerlink" href="#getting-the-data" title="Permalink to this headline">¶</a></h2>
<p>The .zip files are available for download
<a class="reference external" href="https://databank.illinois.edu/datasets/IDB-9610843">here</a>. Select
the desired zip files unzip them into a convenient directory.</p>
<p>The taxi data includes two points and two timestamps per record in the
original data. This presents an opportunity for different simple feature
type designs.</p>
<p>There is one design where each SFT is either a pickup or dropoff point
with a timestamp. The two points share a common trip ID. Internally they
are differentiated by hashing the record with either &#8220;pickup&#8221; or
&#8220;dropoff&#8221; appended. The advantage of this for geomesa demonstrations is
dealing with a larger quantity of point data.</p>
<p>In keeping with the original data, there is a two-point feature type as
well.</p>
<p>One could also imagine a <code class="docutils literal"><span class="pre">LineString</span></code> geometry, however the path is
underspecified. Previous analysis of the NYC Taxi data seems to have
used Google Maps API calls to propose valid paths through the streets.
We do not attempt that in this work.</p>
</div>
<div class="section" id="sample-ingest-command">
<h2>15.4.5.2. Sample ingest command<a class="headerlink" href="#sample-ingest-command" title="Permalink to this headline">¶</a></h2>
<p>Check that the <code class="docutils literal"><span class="pre">nyctaxi</span></code> and <code class="docutils literal"><span class="pre">nyctaxi-single</span></code> simple feature types
are available on the GeoMesa tools classpath. This is the default case.</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">geomesa</span> <span class="n">env</span> <span class="o">|</span> <span class="n">grep</span> <span class="s1">&#39;nyctaxi\|nyctaxi-single&#39;</span>
</pre></div>
</div>
<p>If they are not, merge the contents of <code class="docutils literal"><span class="pre">reference.conf</span></code> with
<code class="docutils literal"><span class="pre">$GEOMESA_ACCUMULO_HOME/conf/application.conf</span></code>, or ensure that
<code class="docutils literal"><span class="pre">reference.conf</span></code> is in <code class="docutils literal"><span class="pre">$GEOMESA_ACCUMULO_HOME/conf/sfts/nyctaxi</span></code>.</p>
<div class="section" id="two-record-method">
<h3>15.4.5.2.1. Two record method<a class="headerlink" href="#two-record-method" title="Permalink to this headline">¶</a></h3>
<p>To ingest with GeoMesa command line interface, first the pickups:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span>$ geomesa ingest -u username -c catalogName -s nyctaxi -C nyctaxi hdfs://namenode:9000/path/to/nyctaxi*
</pre></div>
</div>
<p>Then the dropoffs ingests the same file with the same simple feature
type, but a different converter.</p>
<div class="highlight-default"><div class="highlight"><pre><span></span>$ geomesa ingest -u username -c catalogName -s nyctaxi -C nyctaxi-drop hdfs://namenode:9000/path/to/nyctaxi*
</pre></div>
</div>
</div>
<div class="section" id="single-record-method">
<h3>15.4.5.2.2. Single record method<a class="headerlink" href="#single-record-method" title="Permalink to this headline">¶</a></h3>
<div class="highlight-default"><div class="highlight"><pre><span></span>$ geomesa ingest -u username -c catalogName -s nyctaxi-single -C nyctaxi-single.conf hdfs://namenode:9000/path/to/nyctaxi*
</pre></div>
</div>
</div>
</div>
</div>


           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="osm-gpx.html" class="btn btn-neutral float-right" title="15.4.6. OpenStreetMap GPX Data" accesskey="n">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="gtd.html" class="btn btn-neutral" title="15.4.4. Global Terrorism Database (GTD)" accesskey="p"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>

    </p>
  </div>

<div role="contentinfo">
  <p>
    &copy; Copyright 2013-2017 <a href="https://www.ccri.com/">Commonwealth Computer Research, Inc.</a>
    <br/>
    Licensed under the <a href="http://www.opensource.org/licenses/apache2.0.php">Apache License, Version 2.0</a>
  </p>
</div>

Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>



</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../../../',
            VERSION:'1.3.3',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="../../../_static/jquery.js"></script>
      <script type="text/javascript" src="../../../_static/underscore.js"></script>
      <script type="text/javascript" src="../../../_static/doctools.js"></script>
      <script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
      <script type="text/javascript" src="../../../_static/sphinx_tabs/tabs.js"></script>
      <script type="text/javascript" src="../../../_static/sphinx_tabs/semantic-ui-2.2.7/tab.min.js"></script>

  

  
  
    <script type="text/javascript" src="../../../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>