

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>26. Upgrade Guide &mdash; GeoMesa 2.1.0-SNAPSHOT Manuals</title>
  

  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../_static/css/theme_custom.css" type="text/css" />
  

  

  
        <link rel="index" title="Index"
              href="../genindex.html"/>
        <link rel="search" title="Search" href="../search.html"/>
    <link rel="top" title="GeoMesa 2.1.0-SNAPSHOT Manuals" href="../index.html"/>
        <link rel="up" title="User Manual" href="index.html"/>
        <link rel="next" title="GeoMesa Utils" href="appendix/utils.html"/>
        <link rel="prev" title="25. GeoMesa Web Data" href="web_data.html"/> 

  
  <script src="../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../index.html" class="icon icon-home"> GeoMesa
          

          
          </a>

          
            
            
              <div class="version">
                2.1.0-SNAPSHOT
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
                <ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="index.html">User Manual</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="introduction.html">1. Introduction</a></li>
<li class="toctree-l2"><a class="reference internal" href="download.html">2. Versions and Downloads</a></li>
<li class="toctree-l2"><a class="reference internal" href="install.html">3. Installation</a></li>
<li class="toctree-l2"><a class="reference internal" href="getting_started.html">4. Getting Started</a></li>
<li class="toctree-l2"><a class="reference internal" href="architecture.html">5. Architecture Overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="datastores/index.html">6. GeoMesa Data Stores</a></li>
<li class="toctree-l2"><a class="reference internal" href="cli/index.html">7. Command-Line Tools</a></li>
<li class="toctree-l2"><a class="reference internal" href="accumulo/index.html">8. Accumulo Data Store</a></li>
<li class="toctree-l2"><a class="reference internal" href="hbase/index.html">9. HBase Data Store</a></li>
<li class="toctree-l2"><a class="reference internal" href="bigtable/index.html">10. Bigtable Data Store</a></li>
<li class="toctree-l2"><a class="reference internal" href="cassandra/index.html">11. Cassandra Data Store</a></li>
<li class="toctree-l2"><a class="reference internal" href="kafka/index.html">12. Kafka Data Store</a></li>
<li class="toctree-l2"><a class="reference internal" href="lambda/index.html">13. Lambda Data Store</a></li>
<li class="toctree-l2"><a class="reference internal" href="filesystem/index.html">14. FileSystem Datastore (Amazon S3, HDFS Datastore)</a></li>
<li class="toctree-l2"><a class="reference internal" href="geoserver.html">15. GeoServer Plugins</a></li>
<li class="toctree-l2"><a class="reference internal" href="spark/index.html">16. GeoMesa Spark</a></li>
<li class="toctree-l2"><a class="reference internal" href="convert/index.html">17. GeoMesa Convert</a></li>
<li class="toctree-l2"><a class="reference internal" href="process.html">18. GeoMesa Processes</a></li>
<li class="toctree-l2"><a class="reference internal" href="geojson.html">19. GeoMesa GeoJSON</a></li>
<li class="toctree-l2"><a class="reference internal" href="nifi.html">20. GeoMesa NiFi Bundle</a></li>
<li class="toctree-l2"><a class="reference internal" href="blobstore.html">21. GeoMesa Blob Store</a></li>
<li class="toctree-l2"><a class="reference internal" href="native_api.html">22. GeoMesa Native API</a></li>
<li class="toctree-l2"><a class="reference internal" href="metrics.html">23. GeoMesa Metrics</a></li>
<li class="toctree-l2"><a class="reference internal" href="stream.html">24. GeoMesa Stream Processing</a></li>
<li class="toctree-l2"><a class="reference internal" href="web_data.html">25. GeoMesa Web Data</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">26. Upgrade Guide</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#version-2-0-0">26.1. Version 2.0.0</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#geotools-18-and-geoserver-2-12">26.1.1. GeoTools 18 and GeoServer 2.12</a></li>
<li class="toctree-l4"><a class="reference internal" href="#data-store-parameters">26.1.2. Data Store Parameters</a></li>
<li class="toctree-l4"><a class="reference internal" href="#removal-of-joda-time">26.1.3. Removal of Joda Time</a></li>
<li class="toctree-l4"><a class="reference internal" href="#saxon-xml-parser">26.1.4. Saxon XML Parser</a></li>
<li class="toctree-l4"><a class="reference internal" href="#kafka-data-store">26.1.5. Kafka Data Store</a></li>
<li class="toctree-l4"><a class="reference internal" href="#accumulo-standardization">26.1.6. Accumulo Standardization</a></li>
<li class="toctree-l4"><a class="reference internal" href="#table-splitters">26.1.7. Table Splitters</a></li>
<li class="toctree-l4"><a class="reference internal" href="#system-properties">26.1.8. System Properties</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="index.html#appendix">Appendix</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../developer/index.html">Developer Manual</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tutorials/index.html">Tutorials</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../index.html">GeoMesa</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          

 



<div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../index.html">Docs</a> &raquo;</li>
      
          <li><a href="index.html">User Manual</a> &raquo;</li>
      
    <li>26. Upgrade Guide</li>
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="../_sources/user/upgrade.txt" rel="nofollow"> View page source</a>
          
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="upgrade-guide">
<span id="id1"></span><h1>26. Upgrade Guide<a class="headerlink" href="#upgrade-guide" title="Permalink to this headline">¶</a></h1>
<p>This section describes code and configuration changes required when upgrading GeoMesa versions.</p>
<div class="section" id="version-2-0-0">
<h2>26.1. Version 2.0.0<a class="headerlink" href="#version-2-0-0" title="Permalink to this headline">¶</a></h2>
<div class="section" id="geotools-18-and-geoserver-2-12">
<h3>26.1.1. GeoTools 18 and GeoServer 2.12<a class="headerlink" href="#geotools-18-and-geoserver-2-12" title="Permalink to this headline">¶</a></h3>
<p>GeoMesa 2.0.0 is compiled against GeoTools 18.0 and GeoServer 2.12. When upgrading GeoServer instances,
it&#8217;s usually best to start over with a new GeoServer data directory. If you upgrade GeoMesa in an existing
GeoServer instance that has run GeoMesa 1.3.x or earlier, layers will still work but you will not be
able to edit any existing GeoMesa stores. In order to edit stores, you will need to delete them and
re-create them through the GeoServer UI. Alternatively, you may edit the GeoServer <code class="docutils literal"><span class="pre">datastore.xml</span></code> files
(located in the GeoServer data directory) to match the new GeoMesa data store parameters (described below).
In particular, you will need to add a <code class="docutils literal"><span class="pre">namespace</span></code> parameter that matches the workspace of the GeoServer store.</p>
</div>
<div class="section" id="data-store-parameters">
<h3>26.1.2. Data Store Parameters<a class="headerlink" href="#data-store-parameters" title="Permalink to this headline">¶</a></h3>
<p>The data store parameters used in calls to <code class="docutils literal"><span class="pre">DataStoreFinder</span></code> and the Spark <code class="docutils literal"><span class="pre">SpatialRDDProvider</span></code> have
been standardized . New parameters are outlined in the individual data store pages:</p>
<blockquote>
<div><ul class="simple">
<li><a class="reference internal" href="accumulo/usage.html#accumulo-parameters"><span class="std std-ref">Accumulo Data Store Parameters</span></a></li>
<li><a class="reference internal" href="hbase/usage.html#hbase-parameters"><span class="std std-ref">HBase Data Store Parameters</span></a></li>
<li><a class="reference internal" href="bigtable/usage.html#bigtable-parameters"><span class="std std-ref">Bigtable Data Store Parameters</span></a></li>
<li><a class="reference internal" href="cassandra/usage.html#cassandra-parameters"><span class="std std-ref">Cassandra Data Store Parameters</span></a></li>
<li><a class="reference internal" href="kafka/usage.html#kafka-parameters"><span class="std std-ref">Kafka Data Store Parameters</span></a></li>
<li><a class="reference internal" href="lambda/usage.html#lambda-parameters"><span class="std std-ref">Lambda Data Store Parameters</span></a></li>
</ul>
</div></blockquote>
<p>The older parameter names will continue to work, but are deprecated and may be removed in future versions.</p>
</div>
<div class="section" id="removal-of-joda-time">
<h3>26.1.3. Removal of Joda Time<a class="headerlink" href="#removal-of-joda-time" title="Permalink to this headline">¶</a></h3>
<p>With the introduction of <code class="docutils literal"><span class="pre">java.time</span></code> in Java 8, the Joda Time project has been deprecated. As such, GeoMesa
has removed its Joda dependency in favor of <code class="docutils literal"><span class="pre">java.time</span></code>. One consequence of this is that custom date patterns
in <code class="docutils literal"><span class="pre">geomesa-convert</span></code> are interpreted slightly differently. See <a class="reference external" href="https://docs.oracle.com/javase/8/docs/api/java/time/format/DateTimeFormatter.html">DateTimeFormatter</a> for details.</p>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">In particular, &#8220;year of era&#8221; has changed from <code class="docutils literal"><span class="pre">Y</span></code> to <code class="docutils literal"><span class="pre">y</span></code>. <code class="docutils literal"><span class="pre">Y</span></code> now means &#8220;week-based year&#8221;, and will
give different results.</p>
</div>
</div>
<div class="section" id="saxon-xml-parser">
<h3>26.1.4. Saxon XML Parser<a class="headerlink" href="#saxon-xml-parser" title="Permalink to this headline">¶</a></h3>
<p>The GeoMesa converter XML module now ships with Saxon-HE by default. Saxon-HE is generally much faster
at parsing XML than the default Java implementation. Previously, Saxon was available as an additional download.</p>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">Saxon parsing has some differences from the default Java implementation, which may cause existing
converter definitions to fail. In particular, Saxon is much stricter with XML namespaces. See
<a class="reference internal" href="convert/xml.html#xml-converter-namespaces"><span class="std std-ref">Handling Namespaces with Saxon</span></a> for more information.</p>
</div>
</div>
<div class="section" id="kafka-data-store">
<h3>26.1.5. Kafka Data Store<a class="headerlink" href="#kafka-data-store" title="Permalink to this headline">¶</a></h3>
<p>The Kafka Data Store has been rewritten into a single implementation for Kafka 0.9.x or later. Support for
Kafka 0.8 has been removed. See <a class="reference internal" href="kafka/index.html#kafka-index"><span class="std std-ref">Kafka Data Store</span></a> for more information.</p>
</div>
<div class="section" id="accumulo-standardization">
<h3>26.1.6. Accumulo Standardization<a class="headerlink" href="#accumulo-standardization" title="Permalink to this headline">¶</a></h3>
<p>In order to standardize behavior between data store implementations, some behaviors of the <code class="docutils literal"><span class="pre">AccumuloDataStore</span></code>
have been modified.</p>
<div class="section" id="attribute-index-coverage">
<h4>26.1.6.1. Attribute Index Coverage<a class="headerlink" href="#attribute-index-coverage" title="Permalink to this headline">¶</a></h4>
<p>Accumulo attribute indices specified with <code class="docutils literal"><span class="pre">index=true</span></code> will now create full attribute indices, instead of
join indices. To create a join index, explicitly specify <code class="docutils literal"><span class="pre">index=join</span></code>. Existing schemas are not affected.</p>
</div>
<div class="section" id="record-index-identifier">
<h4>26.1.6.2. Record Index Identifier<a class="headerlink" href="#record-index-identifier" title="Permalink to this headline">¶</a></h4>
<p>The Accumulo <code class="docutils literal"><span class="pre">record</span></code> index has been renamed to the <code class="docutils literal"><span class="pre">id</span></code> index. In general practice, this will have no effect,
however when specifying <code class="docutils literal"><span class="pre">geomesa.indices.enabled</span></code>, the value <code class="docutils literal"><span class="pre">id</span></code> must be used in place of <code class="docutils literal"><span class="pre">records</span></code>.</p>
</div>
<div class="section" id="tools-command-name">
<h4>26.1.6.3. Tools Command Name<a class="headerlink" href="#tools-command-name" title="Permalink to this headline">¶</a></h4>
<p>The Accumulo command line tools script has been renamed from <code class="docutils literal"><span class="pre">geomesa</span></code> to <code class="docutils literal"><span class="pre">geomesa-accumulo</span></code>.</p>
</div>
</div>
<div class="section" id="table-splitters">
<h3>26.1.7. Table Splitters<a class="headerlink" href="#table-splitters" title="Permalink to this headline">¶</a></h3>
<p>The table splitting API has changed. Any custom table splitters implementing
<code class="docutils literal"><span class="pre">org.locationtech.geomesa.index.conf.TableSplitter</span></code> will need to be updated for the new method signatures.
In addition, the provided GeoMesa splitters have been deprecated and replaced. See <a class="reference internal" href="datastores/index_config.html#table-split-config"><span class="std std-ref">Configuring Index Splits</span></a>
for more details.</p>
</div>
<div class="section" id="system-properties">
<h3>26.1.8. System Properties<a class="headerlink" href="#system-properties" title="Permalink to this headline">¶</a></h3>
<p>Time-related system properties have been standardized to all use readable durations. Durations can be specified
as a number followed by a time unit, e.g. <code class="docutils literal"><span class="pre">10</span> <span class="pre">minutes</span></code> or <code class="docutils literal"><span class="pre">30</span> <span class="pre">seconds</span></code>. The following properties
have been changed to accept durations, and some have been renamed. Note that this will affect system properties
set in the JVM as well as any custom <code class="docutils literal"><span class="pre">geomesa-site.xml</span></code> files. More details can be found under
<a class="reference internal" href="datastores/runtime_config.html#geomesa-site-xml"><span class="std std-ref">Runtime Configuration</span></a> or the appropriate data store configuration section.</p>
<table border="1" class="docutils">
<colgroup>
<col width="46%" />
<col width="54%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Property</th>
<th class="head">Previous name</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>geomesa.query.timeout</td>
<td>geomesa.query.timeout.millis</td>
</tr>
<tr class="row-odd"><td>geomesa.metadata.expiry</td>
<td>N/A</td>
</tr>
<tr class="row-even"><td>geomesa.batchwriter.latency</td>
<td>geomesa.batchwriter.latency.millis</td>
</tr>
<tr class="row-odd"><td>geomesa.batchwriter.latency</td>
<td>geomesa.batchwriter.latency.millis</td>
</tr>
<tr class="row-even"><td>geomesa.stats.compact.interval</td>
<td>geomesa.stats.compact.millis</td>
</tr>
<tr class="row-odd"><td>geomesa.cassandra.read.timeout</td>
<td>geomesa.cassandra.read.timeout.millis</td>
</tr>
<tr class="row-even"><td>geomesa.cassandra.connection.timeout</td>
<td>geomesa.cassandra.connection.timeout.millis</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>


           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="appendix/utils.html" class="btn btn-neutral float-right" title="GeoMesa Utils" accesskey="n">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="web_data.html" class="btn btn-neutral" title="25. GeoMesa Web Data" accesskey="p"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>

    </p>
  </div>

<div role="contentinfo">
  <p>
    &copy; Copyright 2013-2017 <a href="https://www.ccri.com/">Commonwealth Computer Research, Inc.</a>
    <br/>
    Licensed under the <a href="http://www.opensource.org/licenses/apache2.0.php">Apache License, Version 2.0</a>
  </p>
</div>

Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>



</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../',
            VERSION:'2.1.0-SNAPSHOT',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="../_static/jquery.js"></script>
      <script type="text/javascript" src="../_static/underscore.js"></script>
      <script type="text/javascript" src="../_static/doctools.js"></script>
      <script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

  

  
  
    <script type="text/javascript" src="../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>