

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>7.3. Command Line Tools &mdash; GeoMesa 1.4.0-SNAPSHOT Manuals</title>
  

  
  
  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../../_static/css/theme_custom.css" type="text/css" />
  

  
    <link rel="stylesheet" href="../../_static/sphinx_tabs/tabs.css" type="text/css" />
  
    <link rel="stylesheet" href="../../_static/sphinx_tabs/semantic-ui-2.2.7/segment.min.css" type="text/css" />
  
    <link rel="stylesheet" href="../../_static/sphinx_tabs/semantic-ui-2.2.7/menu.min.css" type="text/css" />
  
    <link rel="stylesheet" href="../../_static/sphinx_tabs/semantic-ui-2.2.7/tab.min.css" type="text/css" />
  

  
        <link rel="index" title="Index"
              href="../../genindex.html"/>
        <link rel="search" title="Search" href="../../search.html"/>
    <link rel="top" title="GeoMesa 1.4.0-SNAPSHOT Manuals" href="../../index.html"/>
        <link rel="up" title="7. Accumulo Data Store" href="index.html"/>
        <link rel="next" title="7.4. Command Line Examples" href="examples.html"/>
        <link rel="prev" title="7.2. Accumulo Configuration" href="configuration.html"/> 

  
  <script src="../../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../../index.html" class="icon icon-home"> GeoMesa
          

          
          </a>

          
            
            
              <div class="version">
                1.4.0-SNAPSHOT
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="../index.html">User Manual</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../introduction.html">1. Introduction</a></li>
<li class="toctree-l2"><a class="reference internal" href="../architecture.html">2. Architecture Overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="../getting_started.html">3. Getting Started</a></li>
<li class="toctree-l2"><a class="reference internal" href="../download.html">4. Versions and Downloads</a></li>
<li class="toctree-l2"><a class="reference internal" href="../install.html">5. Installation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../datastores/index.html">6. GeoMesa Data Stores</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="index.html">7. Accumulo Data Store</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="install.html">7.1. Installing GeoMesa Accumulo</a></li>
<li class="toctree-l3"><a class="reference internal" href="configuration.html">7.2. Accumulo Configuration</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">7.3. Command Line Tools</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#installing-sft-and-converter-definitions">7.3.1. Installing SFT and Converter Definitions</a></li>
<li class="toctree-l4"><a class="reference internal" href="#running-the-command-line-tools">7.3.2. Running the command line tools</a></li>
<li class="toctree-l4"><a class="reference internal" href="#command-overview">7.3.3. Command overview</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="examples.html">7.4. Command Line Examples</a></li>
<li class="toctree-l3"><a class="reference internal" href="usage.html">7.5. Using the Accumulo Data Store Programmatically</a></li>
<li class="toctree-l3"><a class="reference internal" href="geoserver.html">7.6. Using the Accumulo Data Store in GeoServer</a></li>
<li class="toctree-l3"><a class="reference internal" href="visibilities.html">7.7. Accumulo Visibilities</a></li>
<li class="toctree-l3"><a class="reference internal" href="data_management.html">7.8. Data Management</a></li>
<li class="toctree-l3"><a class="reference internal" href="jobs.html">7.9. GeoMesa Jobs</a></li>
<li class="toctree-l3"><a class="reference internal" href="raster.html">7.10. GeoMesa Raster</a></li>
<li class="toctree-l3"><a class="reference internal" href="internals.html">7.11. Internals</a></li>
<li class="toctree-l3"><a class="reference internal" href="kerberos.html">7.12. Kerberos</a></li>
<li class="toctree-l3"><a class="reference internal" href="ageoff.html">7.13. Age-Off Iterators</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../hbase/index.html">8. HBase Data Store</a></li>
<li class="toctree-l2"><a class="reference internal" href="../bigtable/index.html">9. Bigtable Data Store</a></li>
<li class="toctree-l2"><a class="reference internal" href="../cassandra/index.html">10. Cassandra Data Store</a></li>
<li class="toctree-l2"><a class="reference internal" href="../kafka/index.html">11. Kafka Data Store</a></li>
<li class="toctree-l2"><a class="reference internal" href="../lambda/index.html">12. Lambda Data Store</a></li>
<li class="toctree-l2"><a class="reference internal" href="../filesystem/index.html">13. FileSystem Datastore (Amazon S3, HDFS Datastore)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../geoserver.html">14. GeoServer Plugins</a></li>
<li class="toctree-l2"><a class="reference internal" href="../blobstore.html">15. GeoMesa Blob Store</a></li>
<li class="toctree-l2"><a class="reference internal" href="../convert/index.html">16. GeoMesa Convert</a></li>
<li class="toctree-l2"><a class="reference internal" href="../geojson.html">17. GeoMesa GeoJSON</a></li>
<li class="toctree-l2"><a class="reference internal" href="../metrics.html">18. GeoMesa Metrics</a></li>
<li class="toctree-l2"><a class="reference internal" href="../native_api.html">19. GeoMesa Native API</a></li>
<li class="toctree-l2"><a class="reference internal" href="../nifi.html">20. GeoMesa NiFi Bundle</a></li>
<li class="toctree-l2"><a class="reference internal" href="../process.html">21. GeoMesa Processes</a></li>
<li class="toctree-l2"><a class="reference internal" href="../spark/index.html">22. GeoMesa Spark</a></li>
<li class="toctree-l2"><a class="reference internal" href="../stream.html">23. GeoMesa Stream Processing</a></li>
<li class="toctree-l2"><a class="reference internal" href="../web_data.html">24. GeoMesa Web Data</a></li>
<li class="toctree-l2"><a class="reference internal" href="../index.html#appendix">Appendix</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../developer/index.html">Developer Manual</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../tutorials/index.html">Tutorials</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">GeoMesa</a>
        
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../index.html">Docs</a> &raquo;</li>
        
          <li><a href="../index.html">User Manual</a> &raquo;</li>
        
          <li><a href="index.html">7. Accumulo Data Store</a> &raquo;</li>
        
      <li>7.3. Command Line Tools</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../../_sources/user/accumulo/commandline_tools.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="command-line-tools">
<span id="accumulo-tools"></span><h1>7.3. Command Line Tools<a class="headerlink" href="#command-line-tools" title="Permalink to this headline">¶</a></h1>
<p>This chapter describes GeoMesa Tools, a set of command line tools for feature
management, query planning and explanation, ingest, and export from
the command line.</p>
<div class="section" id="installing-sft-and-converter-definitions">
<h2>7.3.1. Installing SFT and Converter Definitions<a class="headerlink" href="#installing-sft-and-converter-definitions" title="Permalink to this headline">¶</a></h2>
<p>Starting with version 1.2.3, GeoMesa Tools ships with embedded SimpleFeatureType and GeoMesa Converter definitions
for common data types including Twitter, GeoNames, T-drive, and many more.
See <a class="reference internal" href="../convert/usage_tools.html#installing-sft-and-converter-definitions"><span class="std std-ref">Using SFT and Converter Definitions with Command-Line Tools</span></a>.</p>
<p>To see which SFT and converter configurations are installed, try the <code class="docutils literal"><span class="pre">geomesa</span> <span class="pre">env</span></code> command described below.</p>
</div>
<div class="section" id="running-the-command-line-tools">
<h2>7.3.2. Running the command line tools<a class="headerlink" href="#running-the-command-line-tools" title="Permalink to this headline">¶</a></h2>
<p>Run <code class="docutils literal"><span class="pre">geomesa</span></code> without any arguments to produce the following usage text:</p>
<div class="highlight-default"><div class="highlight"><pre>$ geomesa
Usage: geomesa [command] [command options]
  Commands:
    add-attribute-index    Run a Hadoop map reduce job to add an index for attributes
    add-index              Add or update indices for an existing GeoMesa feature type
    classpath              Display the GeoMesa classpath
    config-table           Perform table configuration operations
    configure              Configure the local environment for GeoMesa
    configure-age-off      List/set/remove age-off for a GeoMesa feature type
    convert                Convert files using GeoMesa&#39;s internal SFT converter framework
    create-schema          Create a GeoMesa feature type
    delete-catalog         Delete a GeoMesa catalog completely (and all features in it)
    delete-features        Delete features from a table in GeoMesa. Does not delete any tables or schema information.
    delete-raster          Delete a GeoMesa Raster table
    env                    Examine the current GeoMesa environment
    explain                Explain how a GeoMesa query will be executed
    export                 Export features from a GeoMesa data store
    export-bin             Export features from a GeoMesa data store in a binary format.
    gen-avro-schema        Generate an Avro schema from a SimpleFeatureType
    get-names              List GeoMesa feature types for a given catalog
    get-schema             Describe the attributes of a given GeoMesa feature type
    get-sft-config                Get the SimpleFeatureType of a feature
    help                   Show help
    ingest                 Ingest/convert various file formats into GeoMesa
    ingest-raster          Ingest raster files into GeoMesa
    keywords               Add/Remove/List keywords on an existing schema
    query-raster-stats     Export queries and statistics about the last X number of queries to a CSV file.
    remove-schema          Remove a schema and associated features from a GeoMesa catalog
    stats-analyze          Analyze statistics on a GeoMesa feature type
    stats-bounds           View or calculate bounds on attributes in a GeoMesa feature type
    stats-count            Estimate or calculate feature counts in a GeoMesa feature type
    stats-histogram        View or calculate counts of attribute in a GeoMesa feature type, grouped by sorted values
    stats-top-k            Enumerate the most frequent values in a GeoMesa feature type
    version                Display the installed GeoMesa version
</pre></div>
</div>
<p>This usage text lists the available commands. To see help for an individual command,
run <code class="docutils literal"><span class="pre">geomesa</span> <span class="pre">help</span> <span class="pre">&lt;command-name&gt;</span></code>, which for example will give you something like this:</p>
<div class="highlight-default"><div class="highlight"><pre>$ geomesa help get-type-names
Usage: get-type-names [options]
  Options:
    --auths
       Accumulo authorizations
  * -c, --catalog
       Catalog table for GeoMesa datastore
    -i, --instance
       Accumulo instance name
    --keytab
       Path to Accumulo user Kerberos keytab file
    --mock
       Run everything with a mock accumulo instance instead of a real one
       Default: false
    -p, --password
       Accumulo password (will prompt if not supplied and not using Kerberos)
  * -u, --user
       Accumulo user name
    --visibilities
       Default feature visibilities
    -z, --zookeepers
       Zookeepers (host[:port], comma separated)
</pre></div>
</div>
<p>The Accumulo username and either a password or a path to a Kerberos keytab file is required for each command.
Specify the username and password in each command by using <code class="docutils literal"><span class="pre">-u</span></code> (or <code class="docutils literal"><span class="pre">--username</span></code>) and <code class="docutils literal"><span class="pre">-p</span></code> (or
<code class="docutils literal"><span class="pre">--password</span></code>), respectively. One can also only specify the username on the
command line using <code class="docutils literal"><span class="pre">-u</span></code> or <code class="docutils literal"><span class="pre">--username</span></code> and type the password in an additional
prompt, where the password will be hidden from the shell history.
To use Kerberos authentication instead, use <code class="docutils literal"><span class="pre">--keytab</span></code> with a path to a Kerberos keytab file containing an entry for
the specified user. Since a keytab file allows authentication without any further constraints, it should be protected
appropriately.</p>
<p>In nearly all commands below, one can add <code class="docutils literal"><span class="pre">--instance-name</span></code>, <code class="docutils literal"><span class="pre">--zookeepers</span></code>,
<code class="docutils literal"><span class="pre">--auths</span></code>, and <code class="docutils literal"><span class="pre">--visibilities</span></code> (or in short form <code class="docutils literal"><span class="pre">-i</span></code>, <code class="docutils literal"><span class="pre">-z</span></code>, <code class="docutils literal"><span class="pre">-a</span></code>, and <code class="docutils literal"><span class="pre">-v</span></code>) arguments
to properly configure the Accumulo data store connector. The Accumulo instance
name and Zookeepers string can usually be automatically assigned as long as
Accumulo is configured correctly. The Auths and Visibilities strings will have
to be added as arguments to each command, if needed.</p>
</div>
<div class="section" id="command-overview">
<h2>7.3.3. Command overview<a class="headerlink" href="#command-overview" title="Permalink to this headline">¶</a></h2>
<div class="section" id="tools-configuration">
<h3>7.3.3.1. Tools Configuration<a class="headerlink" href="#tools-configuration" title="Permalink to this headline">¶</a></h3>
<div class="section" id="configure">
<h4>7.3.3.1.1. configure<a class="headerlink" href="#configure" title="Permalink to this headline">¶</a></h4>
<p>Used to configure the current environment for using the commandline tools. This is frequently run after the tools are
first installed to ensure the environment is configured correctly:</p>
<div class="highlight-default"><div class="highlight"><pre>$ geomesa configure
</pre></div>
</div>
</div>
<div class="section" id="classpath">
<h4>7.3.3.1.2. classpath<a class="headerlink" href="#classpath" title="Permalink to this headline">¶</a></h4>
<p>Prints out the current classpath configuration:</p>
<div class="highlight-default"><div class="highlight"><pre>$ geomesa classpath
</pre></div>
</div>
</div>
</div>
<div class="section" id="creating-and-deleting-feature-types">
<h3>7.3.3.2. Creating and deleting feature types<a class="headerlink" href="#creating-and-deleting-feature-types" title="Permalink to this headline">¶</a></h3>
<div class="section" id="create-schema">
<h4>7.3.3.2.1. create-schema<a class="headerlink" href="#create-schema" title="Permalink to this headline">¶</a></h4>
<p>Used to create a feature type (<code class="docutils literal"><span class="pre">SimpleFeatureType</span></code>)  in a GeoMesa catalog:</p>
<div class="highlight-default"><div class="highlight"><pre>$ geomesa create -u username -p password \
  -i instance -z zoo1,zoo2,zoo3 \
  -c test_create \
  -f testing \
  -s fid:String:index=true,dtg:Date,geom:Point:srid=4326 \
  --dtg dtg
</pre></div>
</div>
</div>
<div class="section" id="get-schema">
<h4>7.3.3.2.2. get-schema<a class="headerlink" href="#get-schema" title="Permalink to this headline">¶</a></h4>
<p>Display details about the attributes of a specified feature type:</p>
<div class="highlight-default"><div class="highlight"><pre>$ geomesa get-schema -u username -p password -c test_delete -f testing
</pre></div>
</div>
</div>
<div class="section" id="get-sft-config">
<h4>7.3.3.2.3. get-sft-config<a class="headerlink" href="#get-sft-config" title="Permalink to this headline">¶</a></h4>
<p>Get the specified feature type as a typesafe config:</p>
<div class="highlight-default"><div class="highlight"><pre>$ geomesa get-sft-config -u username -p password -c test_catalog -f test_feature --format typesafe
</pre></div>
</div>
<p>Get the specified feature type as an encoded feature schema string:</p>
<div class="highlight-default"><div class="highlight"><pre>$ geomesa get-sft-config -u username -p password -c test_catalog -f test_feature --format spec
</pre></div>
</div>
</div>
<div class="section" id="keywords">
<h4>7.3.3.2.4. keywords<a class="headerlink" href="#keywords" title="Permalink to this headline">¶</a></h4>
<p>Add or remove keywords to a specified schema::
Repeat the -a or -r flags to add or remove multiple keywords
The <code class="docutils literal"><span class="pre">--removeAll</span></code> option removes all keywords
The <code class="docutils literal"><span class="pre">-l</span></code> option lists the schema&#8217;s keywords following all operations
If there is whitespace within a keyword, enclose it in quotes for proper functionality:</p>
<div class="highlight-default"><div class="highlight"><pre>$ geomesa keywords -u username -p password \
  -a keywordB -a keywordC -r keywordA -l \
  -i instance -z zoo1,zoo2,zoo3 \
  -c catalog -f featureTypeName
</pre></div>
</div>
</div>
<div class="section" id="get-names">
<h4>7.3.3.2.5. get-names<a class="headerlink" href="#get-names" title="Permalink to this headline">¶</a></h4>
<p>List all known feature types in a GeoMesa catalog:</p>
<div class="highlight-default"><div class="highlight"><pre>$ geomesa get-names -u username -p password -c test_catalog
</pre></div>
</div>
</div>
<div class="section" id="remove-schema">
<h4>7.3.3.2.6. remove-schema<a class="headerlink" href="#remove-schema" title="Permalink to this headline">¶</a></h4>
<p>Used to remove a feature type (<code class="docutils literal"><span class="pre">SimpleFeatureType</span></code>) in a GeoMesa catalog. This will also delete any feature of that type in the data store:</p>
<div class="highlight-default"><div class="highlight"><pre>$ geomesa remove-schema -u username -p password \
  -i instance -z zoo1,zoo2,zoo3 \
  -c test_catalog -f testfeature1
$ geomesa remove-schema -u username -p password \
  -i instance -z zoo1,zoo2,zoo3 \
  -c test_catalog --pattern &#39;testfeatures\d+&#39;
</pre></div>
</div>
</div>
</div>
<div class="section" id="manipulating-data">
<h3>7.3.3.3. Manipulating data<a class="headerlink" href="#manipulating-data" title="Permalink to this headline">¶</a></h3>
<div class="section" id="convert">
<h4>7.3.3.3.1. convert<a class="headerlink" href="#convert" title="Permalink to this headline">¶</a></h4>
<p>Convert files using the internal SFT (<code class="docutils literal"><span class="pre">SimpleFeatureType</span></code>) converter framework:</p>
<div class="highlight-default"><div class="highlight"><pre>$ geomesa convert -spec example --converter example-csv \
  -F json ./exampledata.csv

$ geomesa convert -s example -C example-csv -F avro --gzip 4 \
  --max-features 10 -o exampleout.avro ./exampledata.csv
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Output data has been converted by the internal SFT converters as defined by the provided converter config. This most likely means a new converter config will be required to ingest (or re-convert) the converted data.</p>
</div>
</div>
</div>
<div class="section" id="ingesting-and-exporting-data">
<h3>7.3.3.4. Ingesting and exporting data<a class="headerlink" href="#ingesting-and-exporting-data" title="Permalink to this headline">¶</a></h3>
<div class="section" id="export">
<span id="id1"></span><h4>7.3.3.4.1. export<a class="headerlink" href="#export" title="Permalink to this headline">¶</a></h4>
<p>Export GeoMesa features. The &#8220;attribute expressions&#8221; specified by the <code class="docutils literal"><span class="pre">-a</span></code> option are comma-separated expressions
in the format:</p>
<div class="highlight-default"><div class="highlight"><pre><span class="n">attribute</span><span class="p">[</span><span class="o">=</span><span class="n">filter_function_expression</span><span class="p">]</span><span class="o">|</span><span class="n">derived</span><span class="o">-</span><span class="n">attribute</span><span class="o">=</span><span class="n">filter_function_expression</span>
</pre></div>
</div>
<p><cite>filter_function_expression</cite> is an expression of filter function applied to attributes, literals and filter functions, i.e. can be nested.</p>
<p>Example export commands:</p>
<div class="highlight-default"><div class="highlight"><pre>$ geomesa export -u username -p password \
  -c test_catalog -f test_feature \
  -a &quot;geom,text,user_name&quot; --format csv \
  -q &quot;include&quot; -m 100
$ geomesa export -u username -p password \
  -c test_catalog -f test_feature \
  -a &quot;geom,text,user_name&quot; --format gml \
  -q &quot;user_name=&#39;JohnSmith&#39;&quot;
$ geomesa export -u username -p password \
  -c test_catalog -f test_feature \
  -a &quot;user_name,buf=buffer(geom\, 2)&quot; \
  --format csv -q &quot;[[ user_name like `John%&#39; ] AND [ bbox(geom, 22.1371589, 44.386463, 40.228581, 52.379581, &#39;EPSG:4326&#39;) ]]&quot;
</pre></div>
</div>
<p>For fine-grained control, query hints can be set using the <cite>&#8211;hints</cite> parameter, in the form <cite>key1=value1;key2=value2</cite>.
See <a class="reference internal" href="../datastores/query_config.html#query-hints"><span class="std std-ref">Setting Query Hints</span></a> and <a class="reference internal" href="../datastores/analytic_queries.html#analytic-queries"><span class="std std-ref">Feature Sampling</span></a> for more information.</p>
</div>
<div class="section" id="ingest">
<span id="id2"></span><h4>7.3.3.4.2. ingest<a class="headerlink" href="#ingest" title="Permalink to this headline">¶</a></h4>
<p>Used to convert and ingest data from various file formats as GeoMesa features.</p>
<p>GeoMesa defines several common converter factories for formats such as delimited text
(TSV, CSV), fixed width files, JSON, XML, and Avro. New converter factories (e.g. for custom binary formats) can be
registered on the classpath using Java SPI. Shapefile ingest is also supported. Files can be either local or in HDFS.
You cannot mix target files (e.g. local and HDFS).</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The header, if present, is not parsed by <code class="docutils literal"><span class="pre">ingest</span></code> for information. It is assumed that all lines are valid entries.</p>
</div>
<p>Converters and SFTs are specified in the <a class="reference external" href="https://github.com/typesafehub/config/blob/master/HOCON.md">HOCON</a> format
and loaded using the <a class="reference external" href="https://github.com/typesafehub/config">TypeSafe configuration library</a>.
They can be referenced by name using the <code class="docutils literal"><span class="pre">-s</span></code> and <code class="docutils literal"><span class="pre">-C</span></code> args.</p>
<p>To define new converters for the users can package a <code class="docutils literal"><span class="pre">reference.conf</span></code> file inside a jar and drop it in the
<code class="docutils literal"><span class="pre">$GEOMESA_ACCUMULO_HOME/lib</span></code> directory or add config definitions to the <code class="docutils literal"><span class="pre">$GEOMESA_TOOLS/conf/application.conf</span></code> file which
includes some examples. SFT and Converter specifications should use the path prefixes
<code class="docutils literal"><span class="pre">geomesa.converters.&lt;convertername&gt;</span></code> and <code class="docutils literal"><span class="pre">geomesa.sfts.&lt;typename&gt;</span></code></p>
<p>For example, here&#8217;s a simple CSV file to ingest named <code class="docutils literal"><span class="pre">example.csv</span></code>:</p>
<div class="highlight-default"><div class="highlight"><pre><span class="n">FID</span><span class="p">,</span><span class="n">Name</span><span class="p">,</span><span class="n">Age</span><span class="p">,</span><span class="n">LastSeen</span><span class="p">,</span><span class="n">Friends</span><span class="p">,</span><span class="n">Lat</span><span class="p">,</span><span class="n">Lon</span>
<span class="mi">23623</span><span class="p">,</span><span class="n">Harry</span><span class="p">,</span><span class="mi">20</span><span class="p">,</span><span class="mi">2015</span><span class="o">-</span><span class="mi">05</span><span class="o">-</span><span class="mi">06</span><span class="p">,</span><span class="s">&quot;Will, Mark, Suzan&quot;</span><span class="p">,</span><span class="o">-</span><span class="mf">100.236523</span><span class="p">,</span><span class="mi">23</span>
<span class="mi">26236</span><span class="p">,</span><span class="n">Hermione</span><span class="p">,</span><span class="mi">25</span><span class="p">,</span><span class="mi">2015</span><span class="o">-</span><span class="mi">06</span><span class="o">-</span><span class="mi">07</span><span class="p">,</span><span class="s">&quot;Edward, Bill, Harry&quot;</span><span class="p">,</span><span class="mf">40.232</span><span class="p">,</span><span class="o">-</span><span class="mf">53.2356</span>
<span class="mi">3233</span><span class="p">,</span><span class="n">Severus</span><span class="p">,</span><span class="mi">30</span><span class="p">,</span><span class="mi">2015</span><span class="o">-</span><span class="mi">10</span><span class="o">-</span><span class="mi">23</span><span class="p">,</span><span class="s">&quot;Tom, Riddle, Voldemort&quot;</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="o">-</span><span class="mf">62.23</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">ID is a reserved word, for a full list of reserved words see <a class="reference internal" href="../datastores/reserved_words.html#reserved-words"><span class="std std-ref">Reserved Words</span></a>.</p>
</div>
<p>To ingest this file, a SimpleFeatureType named <code class="docutils literal"><span class="pre">renegades</span></code> and a converter named <code class="docutils literal"><span class="pre">renegades-csv</span></code> can be placed in
the <code class="docutils literal"><span class="pre">application.conf</span></code> file:</p>
<div class="highlight-default"><div class="highlight"><pre><span class="c"># cat $GEOMESA_ACCUMULO_HOME/conf/application.conf</span>
<span class="n">geomesa</span> <span class="p">{</span>
  <span class="n">sfts</span> <span class="p">{</span>
    <span class="n">renegades</span> <span class="o">=</span> <span class="p">{</span>
      <span class="n">attributes</span> <span class="o">=</span> <span class="p">[</span>
        <span class="p">{</span> <span class="n">name</span> <span class="o">=</span> <span class="s">&quot;fid&quot;</span><span class="p">,</span>      <span class="nb">type</span> <span class="o">=</span> <span class="s">&quot;Integer&quot;</span><span class="p">,</span>      <span class="n">index</span> <span class="o">=</span> <span class="n">false</span>                             <span class="p">}</span>
        <span class="p">{</span> <span class="n">name</span> <span class="o">=</span> <span class="s">&quot;name&quot;</span><span class="p">,</span>     <span class="nb">type</span> <span class="o">=</span> <span class="s">&quot;String&quot;</span><span class="p">,</span>       <span class="n">index</span> <span class="o">=</span> <span class="n">true</span>                              <span class="p">}</span>
        <span class="p">{</span> <span class="n">name</span> <span class="o">=</span> <span class="s">&quot;age&quot;</span><span class="p">,</span>      <span class="nb">type</span> <span class="o">=</span> <span class="s">&quot;Integer&quot;</span><span class="p">,</span>      <span class="n">index</span> <span class="o">=</span> <span class="n">false</span>                             <span class="p">}</span>
        <span class="p">{</span> <span class="n">name</span> <span class="o">=</span> <span class="s">&quot;lastseen&quot;</span><span class="p">,</span> <span class="nb">type</span> <span class="o">=</span> <span class="s">&quot;Date&quot;</span><span class="p">,</span>         <span class="n">index</span> <span class="o">=</span> <span class="n">true</span>                              <span class="p">}</span>
        <span class="p">{</span> <span class="n">name</span> <span class="o">=</span> <span class="s">&quot;friends&quot;</span><span class="p">,</span>  <span class="nb">type</span> <span class="o">=</span> <span class="s">&quot;List[String]&quot;</span><span class="p">,</span> <span class="n">index</span> <span class="o">=</span> <span class="n">true</span>                              <span class="p">}</span>
        <span class="p">{</span> <span class="n">name</span> <span class="o">=</span> <span class="s">&quot;geom&quot;</span><span class="p">,</span>     <span class="nb">type</span> <span class="o">=</span> <span class="s">&quot;Point&quot;</span><span class="p">,</span>        <span class="n">index</span> <span class="o">=</span> <span class="n">true</span><span class="p">,</span> <span class="n">srid</span> <span class="o">=</span> <span class="mi">4326</span><span class="p">,</span> <span class="n">default</span> <span class="o">=</span> <span class="n">true</span> <span class="p">}</span>
      <span class="p">]</span>
    <span class="p">}</span>
  <span class="p">}</span>
  <span class="n">converters</span> <span class="p">{</span>
    <span class="n">renegades</span><span class="o">-</span><span class="n">csv</span> <span class="o">=</span> <span class="p">{</span>
      <span class="nb">type</span>   <span class="o">=</span> <span class="s">&quot;delimited-text&quot;</span>
      <span class="nb">format</span> <span class="o">=</span> <span class="s">&quot;CSV&quot;</span>
      <span class="n">options</span> <span class="p">{</span>
        <span class="n">skip</span><span class="o">-</span><span class="n">lines</span> <span class="o">=</span> <span class="mi">1</span> <span class="o">//</span><span class="n">skip</span> <span class="n">the</span> <span class="n">header</span>
      <span class="p">}</span>
      <span class="nb">id</span><span class="o">-</span><span class="n">field</span> <span class="o">=</span> <span class="s">&quot;toString($fid)&quot;</span>
      <span class="n">fields</span> <span class="o">=</span> <span class="p">[</span>
        <span class="p">{</span> <span class="n">name</span> <span class="o">=</span> <span class="s">&quot;fid&quot;</span><span class="p">,</span>      <span class="n">transform</span> <span class="o">=</span> <span class="s">&quot;$1::int&quot;</span>                 <span class="p">}</span>
        <span class="p">{</span> <span class="n">name</span> <span class="o">=</span> <span class="s">&quot;name&quot;</span><span class="p">,</span>     <span class="n">transform</span> <span class="o">=</span> <span class="s">&quot;$2::string&quot;</span>              <span class="p">}</span>
        <span class="p">{</span> <span class="n">name</span> <span class="o">=</span> <span class="s">&quot;age&quot;</span><span class="p">,</span>      <span class="n">transform</span> <span class="o">=</span> <span class="s">&quot;$3::int&quot;</span>                 <span class="p">}</span>
        <span class="p">{</span> <span class="n">name</span> <span class="o">=</span> <span class="s">&quot;lastseen&quot;</span><span class="p">,</span> <span class="n">transform</span> <span class="o">=</span> <span class="s">&quot;date(&#39;YYYY-MM-dd&#39;, $4)&quot;</span>  <span class="p">}</span>
        <span class="p">{</span> <span class="n">name</span> <span class="o">=</span> <span class="s">&quot;friends&quot;</span><span class="p">,</span>  <span class="n">transform</span> <span class="o">=</span> <span class="s">&quot;parseList(&#39;string&#39;, $5)&quot;</span> <span class="p">}</span>
        <span class="p">{</span> <span class="n">name</span> <span class="o">=</span> <span class="s">&quot;lon&quot;</span><span class="p">,</span>      <span class="n">transform</span> <span class="o">=</span> <span class="s">&quot;$6::double&quot;</span>              <span class="p">}</span>
        <span class="p">{</span> <span class="n">name</span> <span class="o">=</span> <span class="s">&quot;lat&quot;</span><span class="p">,</span>      <span class="n">transform</span> <span class="o">=</span> <span class="s">&quot;$7::double&quot;</span>              <span class="p">}</span>
        <span class="p">{</span> <span class="n">name</span> <span class="o">=</span> <span class="s">&quot;geom&quot;</span><span class="p">,</span>     <span class="n">transform</span> <span class="o">=</span> <span class="s">&quot;point($lon, $lat)&quot;</span>       <span class="p">}</span>
      <span class="p">]</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>The SFT and Converter can be referenced by name and the following commands can ingest the file:</p>
<div class="highlight-default"><div class="highlight"><pre>$ geomesa ingest -u username -p password \
  -c geomesa_catalog -i instance --threads 1 \
  -s renegades -C renegades-csv example.csv
# use the Hadoop file system instead
$ geomesa ingest -u username -p password \
  -c geomesa_catalog -i instance \
  -s renegades -C renegades-csv hdfs:///some/hdfs/path/to/example.csv
</pre></div>
</div>
<p>SFT and Converter configs can also be provided as strings or filenames to the <code class="docutils literal"><span class="pre">-s</span></code> and <code class="docutils literal"><span class="pre">-C</span></code> arguments. The syntax is
very similar to the <code class="docutils literal"><span class="pre">application.conf</span></code> and <code class="docutils literal"><span class="pre">reference.conf</span></code> format. Config specifications must be nested using the
paths <code class="docutils literal"><span class="pre">geomesa.converters.&lt;convertername&gt;</span></code> and <code class="docutils literal"><span class="pre">geomesa.sfts.&lt;typename&gt;</span></code> as shown below:</p>
<div class="highlight-default"><div class="highlight"><pre><span class="c"># A nested SFT config provided as a string or file to the -s argument specifying</span>
<span class="c"># a type named &quot;renegades&quot;</span>
<span class="c">#</span>
<span class="c"># cat /tmp/renegades.sft</span>
<span class="n">geomesa</span><span class="o">.</span><span class="n">sfts</span><span class="o">.</span><span class="n">renegades</span> <span class="o">=</span> <span class="p">{</span>
  <span class="n">attributes</span> <span class="o">=</span> <span class="p">[</span>
    <span class="p">{</span> <span class="n">name</span> <span class="o">=</span> <span class="s">&quot;fid&quot;</span><span class="p">,</span>      <span class="nb">type</span> <span class="o">=</span> <span class="s">&quot;Integer&quot;</span><span class="p">,</span>      <span class="n">index</span> <span class="o">=</span> <span class="n">false</span>                             <span class="p">}</span>
    <span class="p">{</span> <span class="n">name</span> <span class="o">=</span> <span class="s">&quot;name&quot;</span><span class="p">,</span>     <span class="nb">type</span> <span class="o">=</span> <span class="s">&quot;String&quot;</span><span class="p">,</span>       <span class="n">index</span> <span class="o">=</span> <span class="n">true</span>                              <span class="p">}</span>
    <span class="p">{</span> <span class="n">name</span> <span class="o">=</span> <span class="s">&quot;age&quot;</span><span class="p">,</span>      <span class="nb">type</span> <span class="o">=</span> <span class="s">&quot;Integer&quot;</span><span class="p">,</span>      <span class="n">index</span> <span class="o">=</span> <span class="n">false</span>                             <span class="p">}</span>
    <span class="p">{</span> <span class="n">name</span> <span class="o">=</span> <span class="s">&quot;lastseen&quot;</span><span class="p">,</span> <span class="nb">type</span> <span class="o">=</span> <span class="s">&quot;Date&quot;</span><span class="p">,</span>         <span class="n">index</span> <span class="o">=</span> <span class="n">true</span>                              <span class="p">}</span>
    <span class="p">{</span> <span class="n">name</span> <span class="o">=</span> <span class="s">&quot;friends&quot;</span><span class="p">,</span>  <span class="nb">type</span> <span class="o">=</span> <span class="s">&quot;List[String]&quot;</span><span class="p">,</span> <span class="n">index</span> <span class="o">=</span> <span class="n">true</span>                              <span class="p">}</span>
    <span class="p">{</span> <span class="n">name</span> <span class="o">=</span> <span class="s">&quot;geom&quot;</span><span class="p">,</span>     <span class="nb">type</span> <span class="o">=</span> <span class="s">&quot;Point&quot;</span><span class="p">,</span>        <span class="n">index</span> <span class="o">=</span> <span class="n">true</span><span class="p">,</span> <span class="n">srid</span> <span class="o">=</span> <span class="mi">4326</span><span class="p">,</span> <span class="n">default</span> <span class="o">=</span> <span class="n">true</span> <span class="p">}</span>
  <span class="p">]</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Similarly, converter configurations must be nested when passing them directly to the <code class="docutils literal"><span class="pre">-C</span></code> argument:</p>
<div class="highlight-default"><div class="highlight"><pre><span class="c"># a nested converter definition</span>
<span class="c"># cat /tmp/renegades.convert</span>
<span class="n">geomesa</span><span class="o">.</span><span class="n">converters</span><span class="o">.</span><span class="n">renegades</span><span class="o">-</span><span class="n">csv</span> <span class="o">=</span> <span class="p">{</span>
  <span class="nb">type</span>   <span class="o">=</span> <span class="s">&quot;delimited-text&quot;</span>
  <span class="nb">format</span> <span class="o">=</span> <span class="s">&quot;CSV&quot;</span>
  <span class="n">options</span> <span class="p">{</span>
    <span class="n">skip</span><span class="o">-</span><span class="n">lines</span> <span class="o">=</span> <span class="mi">0</span> <span class="o">//</span> <span class="n">don</span><span class="s">&#39;t skip lines in distributed ingest</span>
  <span class="p">}</span>
  <span class="nb">id</span><span class="o">-</span><span class="n">field</span> <span class="o">=</span> <span class="s">&quot;toString($fid)&quot;</span>
  <span class="n">fields</span> <span class="o">=</span> <span class="p">[</span>
    <span class="p">{</span> <span class="n">name</span> <span class="o">=</span> <span class="s">&quot;fid&quot;</span><span class="p">,</span>      <span class="n">transform</span> <span class="o">=</span> <span class="s">&quot;$1::int&quot;</span>                 <span class="p">}</span>
    <span class="p">{</span> <span class="n">name</span> <span class="o">=</span> <span class="s">&quot;name&quot;</span><span class="p">,</span>     <span class="n">transform</span> <span class="o">=</span> <span class="s">&quot;$2::string&quot;</span>              <span class="p">}</span>
    <span class="p">{</span> <span class="n">name</span> <span class="o">=</span> <span class="s">&quot;age&quot;</span><span class="p">,</span>      <span class="n">transform</span> <span class="o">=</span> <span class="s">&quot;$3::int&quot;</span>                 <span class="p">}</span>
    <span class="p">{</span> <span class="n">name</span> <span class="o">=</span> <span class="s">&quot;lastseen&quot;</span><span class="p">,</span> <span class="n">transform</span> <span class="o">=</span> <span class="s">&quot;date(&#39;YYYY-MM-dd&#39;, $4)&quot;</span>  <span class="p">}</span>
    <span class="p">{</span> <span class="n">name</span> <span class="o">=</span> <span class="s">&quot;friends&quot;</span><span class="p">,</span>  <span class="n">transform</span> <span class="o">=</span> <span class="s">&quot;parseList(&#39;string&#39;, $5)&quot;</span> <span class="p">}</span>
    <span class="p">{</span> <span class="n">name</span> <span class="o">=</span> <span class="s">&quot;lon&quot;</span><span class="p">,</span>      <span class="n">transform</span> <span class="o">=</span> <span class="s">&quot;$6::double&quot;</span>              <span class="p">}</span>
    <span class="p">{</span> <span class="n">name</span> <span class="o">=</span> <span class="s">&quot;lat&quot;</span><span class="p">,</span>      <span class="n">transform</span> <span class="o">=</span> <span class="s">&quot;$7::double&quot;</span>              <span class="p">}</span>
    <span class="p">{</span> <span class="n">name</span> <span class="o">=</span> <span class="s">&quot;geom&quot;</span><span class="p">,</span>     <span class="n">transform</span> <span class="o">=</span> <span class="s">&quot;point($lon, $lat)&quot;</span>       <span class="p">}</span>
  <span class="p">]</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Using the SFT and Converter config files we can then ingest our csv file with this command:</p>
<div class="highlight-default"><div class="highlight"><pre># ingest command
$ geomesa ingest -u username -p password \
  -c geomesa_catalog -i instance \
  -s /tmp/renegades.sft \
  -C /tmp/renegades.convert hdfs:///some/hdfs/path/to/example.csv
</pre></div>
</div>
<p>For more documentation on converter configuration, see <a class="reference internal" href="../convert/index.html"><span class="doc">GeoMesa Convert</span></a>.</p>
<p>Shape files may also be ingested:</p>
<div class="highlight-default"><div class="highlight"><pre>$ geomesa ingest -u username -p password \
  -c test_catalog -f shapeFileFeatureName /some/path/to/file.shp
</pre></div>
</div>
</div>
</div>
<div class="section" id="enabling-s3-ingest">
<h3>7.3.3.5. Enabling S3 Ingest<a class="headerlink" href="#enabling-s3-ingest" title="Permalink to this headline">¶</a></h3>
<p>Hadoop ships with implementations of S3-based filesystems, which can be enabled in the Hadoop configuration used with
GeoMesa tools. Specifically, GeoMesa tools can perform ingests using both the second-generation (<cite>s3n</cite>) and
third-generation (<cite>s3a</cite>) filesystems. Edit the <code class="docutils literal"><span class="pre">$HADOOP_CONF_DIR/core-site.xml</span></code> file in your Hadoop installation,
as shown below (these instructions apply to Hadoop 2.5.0 and higher). Note that you must have the environment variable
<code class="docutils literal"><span class="pre">$HADOOP_MAPRED_HOME</span></code> set properly in your environment. Some configurations
can substitute <code class="docutils literal"><span class="pre">$HADOOP_PREFIX</span></code> in the classpath values below.</p>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">AWS credentials are valuable! They pay for services and control read and write protection for data. If you are
running GeoMesa on AWS EC2 instances, it is recommended to use the <code class="docutils literal"><span class="pre">s3a</span></code> filesystem. With <code class="docutils literal"><span class="pre">s3a</span></code>, you can omit the
Access Key Id and Secret Access keys from <cite>core-site.xml</cite> and rely on IAM roles.</p>
</div>
<p>For <code class="docutils literal"><span class="pre">s3a</span></code>:</p>
<div class="highlight-xml"><div class="highlight"><pre><span class="c">&lt;!-- core-site.xml --&gt;</span>
<span class="nt">&lt;property&gt;</span>
    <span class="nt">&lt;name&gt;</span>mapreduce.application.classpath<span class="nt">&lt;/name&gt;</span>
    <span class="nt">&lt;value&gt;</span>$HADOOP_MAPRED_HOME/share/hadoop/mapreduce/*:$HADOOP_MAPRED_HOME/share/hadoop/mapreduce/lib/*:$HADOOP_MAPRED_HOME/share/hadoop/tools/lib/*<span class="nt">&lt;/value&gt;</span>
    <span class="nt">&lt;description&gt;</span>The classpath specifically for Map-Reduce jobs. This override is needed so that s3 URLs work on Hadoop 2.6.0+<span class="nt">&lt;/description&gt;</span>
<span class="nt">&lt;/property&gt;</span>

<span class="c">&lt;!-- OMIT these keys if running on AWS EC2; use IAM roles instead --&gt;</span>
<span class="nt">&lt;property&gt;</span>
    <span class="nt">&lt;name&gt;</span>fs.s3a.access.key<span class="nt">&lt;/name&gt;</span>
    <span class="nt">&lt;value&gt;</span>XXXX YOURS HERE<span class="nt">&lt;/value&gt;</span>
<span class="nt">&lt;/property&gt;</span>
<span class="nt">&lt;property&gt;</span>
    <span class="nt">&lt;name&gt;</span>fs.s3a.secret.key<span class="nt">&lt;/name&gt;</span>
    <span class="nt">&lt;value&gt;</span>XXXX YOURS HERE<span class="nt">&lt;/value&gt;</span>
    <span class="nt">&lt;description&gt;</span>Valuable credential - do not commit to CM<span class="nt">&lt;/description&gt;</span>
<span class="nt">&lt;/property&gt;</span>
</pre></div>
</div>
<p>After you have enabled S3 in your Hadoop configuration you can ingest with GeoMesa tools. Note that you can still
use the Kleene star (*) with S3.:</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span>geomesa ingest -u username -p password -c geomesa_catalog -i instance -s yourspec -C convert s3a://bucket/path/file*
</pre></div>
</div>
<p>For <code class="docutils literal"><span class="pre">s3n</span></code>:</p>
<div class="highlight-xml"><div class="highlight"><pre><span class="c">&lt;!-- core-site.xml --&gt;</span>
<span class="c">&lt;!-- Note that you need to make sure HADOOP_MAPRED_HOME is set or some other way of getting this on the classpath --&gt;</span>
<span class="nt">&lt;property&gt;</span>
    <span class="nt">&lt;name&gt;</span>mapreduce.application.classpath<span class="nt">&lt;/name&gt;</span>
    <span class="nt">&lt;value&gt;</span>$HADOOP_MAPRED_HOME/share/hadoop/mapreduce/*:$HADOOP_MAPRED_HOME/share/hadoop/mapreduce/lib/*:$HADOOP_MAPRED_HOME/share/hadoop/tools/lib/*<span class="nt">&lt;/value&gt;</span>
    <span class="nt">&lt;description&gt;</span>The classpath specifically for mapreduce jobs. This override is needed so that s3 URLs work on hadoop 2.6.0+<span class="nt">&lt;/description&gt;</span>
<span class="nt">&lt;/property&gt;</span>
<span class="nt">&lt;property&gt;</span>
    <span class="nt">&lt;name&gt;</span>fs.s3n.impl<span class="nt">&lt;/name&gt;</span>
    <span class="nt">&lt;value&gt;</span>org.apache.hadoop.fs.s3native.NativeS3FileSystem<span class="nt">&lt;/value&gt;</span>
    <span class="nt">&lt;description&gt;</span>Tell hadoop which class to use to access s3 URLs. This change became necessary in hadoop 2.6.0<span class="nt">&lt;/description&gt;</span>
<span class="nt">&lt;/property&gt;</span>
<span class="nt">&lt;property&gt;</span>
    <span class="nt">&lt;name&gt;</span>fs.s3n.awsAccessKeyId<span class="nt">&lt;/name&gt;</span>
    <span class="nt">&lt;value&gt;</span>XXXX YOURS HERE<span class="nt">&lt;/value&gt;</span>
<span class="nt">&lt;/property&gt;</span>
<span class="nt">&lt;property&gt;</span>
    <span class="nt">&lt;name&gt;</span>fs.s3n.awsSecretAccessKey<span class="nt">&lt;/name&gt;</span>
    <span class="nt">&lt;value&gt;</span>XXXX YOURS HERE<span class="nt">&lt;/value&gt;</span>
<span class="nt">&lt;/property&gt;</span>
</pre></div>
</div>
<p>S3n paths are prefixed in hadoop with <code class="docutils literal"><span class="pre">s3n://</span></code> as shown below:</p>
<div class="highlight-default"><div class="highlight"><pre>$ geomesa ingest -u username -p password \
  -c geomesa_catalog -i instance -s yourspec \
  -C convert s3n://bucket/path/file s3n://bucket/path/*
</pre></div>
</div>
</div>
<div class="section" id="enabling-azure-ingest">
<h3>7.3.3.6. Enabling Azure Ingest<a class="headerlink" href="#enabling-azure-ingest" title="Permalink to this headline">¶</a></h3>
<p>Hadoop ships with implementations of Azure-based filesystems, which can be enabled in the Hadoop configuration used with
GeoMesa tools. Specifically, GeoMesa tools can perform ingests using the (<cite>wasb</cite>) and (<cite>wasbs</cite>) filesystems.
Edit the <code class="docutils literal"><span class="pre">$HADOOP_CONF_DIR/core-site.xml</span></code> file in your Hadoop installation as shown below
(these instructions apply to Hadoop 2.5.0 and higher). In addition, the hadoop-azure and azure-storage jars need to be
available.</p>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">Azure credentials are valuable! They pay for services and control read and write protection for data. Be sure to keep
your core-site.xml configuration file safe. It is recommended that you use Azure&#8217;s SSL enable file protocal
variant <cite>wasbs</cite> where possible.</p>
</div>
<p>Configuration:</p>
<p>To enable, place the following in your Hadoop Installation&#8217;s core-site.xml.</p>
<div class="highlight-xml"><div class="highlight"><pre><span class="c">&lt;!-- core-site.xml --&gt;</span>
<span class="nt">&lt;property&gt;</span>
  <span class="nt">&lt;name&gt;</span>fs.azure.account.key.ACCOUNTNAME.blob.core.windows.net<span class="nt">&lt;/name&gt;</span>
  <span class="nt">&lt;value&gt;</span>XXXX YOUR ACCOUNT KEY<span class="nt">&lt;/value&gt;</span>
<span class="nt">&lt;/property&gt;</span>
</pre></div>
</div>
<p>After you have enabled Azure in your Hadoop configuration you can ingest with GeoMesa tools. Note that you can still
use the Kleene star (*) with Azure.:</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span>geomesa ingest -u username -p password <span class="se">\</span>
  -c geomesa_catalog -i instance -s yourspec <span class="se">\</span>
  -C convert wasb://CONTAINER@ACCOUNTNAME.blob.core.windows.net/files/*
</pre></div>
</div>
</div>
<div class="section" id="working-with-raster-data">
<span id="accumulo-tools-raster"></span><h3>7.3.3.7. Working with raster data<a class="headerlink" href="#working-with-raster-data" title="Permalink to this headline">¶</a></h3>
<div class="section" id="delete-raster">
<h4>7.3.3.7.1. delete-raster<a class="headerlink" href="#delete-raster" title="Permalink to this headline">¶</a></h4>
<p>Delete a given GeoMesa raster table:</p>
<div class="highlight-default"><div class="highlight"><pre>$ geomesa delete-raster -u username -p password -t somerastertable -f
</pre></div>
</div>
</div>
<div class="section" id="ingest-raster">
<h4>7.3.3.7.2. ingest-raster<a class="headerlink" href="#ingest-raster" title="Permalink to this headline">¶</a></h4>
<p>Ingest one or multiple raster image files into Geomesa. Input files, GeoTIFF or
DTED, should be located on the local file system.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p>Make sure GDAL is installed when doing chunking, which depends on the GDAL utility <code class="docutils literal"><span class="pre">gdal_translate</span></code>.</p>
<p class="last">Input raster files are assumed to have CRS set to EPSG:4326. For non-EPSG:4326 files, they need to be converted into
EPSG:4326 raster files before ingestion. An example of doing conversion with GDAL utility is <code class="docutils literal"><span class="pre">gdalwarp</span> <span class="pre">-t_srs</span> <span class="pre">EPSG:4326</span>
<span class="pre">input_file</span> <span class="pre">out_file</span></code>.</p>
</div>
<p>Example usage:</p>
<div class="highlight-default"><div class="highlight"><pre>$ geomesa ingest-raster -u username -p password \
  -t geomesa_raster -f /some/local/path/to/raster.tif
</pre></div>
</div>
</div>
<div class="section" id="query-rasterstats">
<h4>7.3.3.7.3. query-rasterstats<a class="headerlink" href="#query-rasterstats" title="Permalink to this headline">¶</a></h4>
<p>Export queries and statistics about the <cite>n</cite> most recent raster queries to a CSV file:</p>
<div class="highlight-default"><div class="highlight"><pre>$ geomesa query-rasterstats -u username -p password -t somerastertable -n 10
</pre></div>
</div>
</div>
</div>
<div class="section" id="performing-system-administration-tasks">
<h3>7.3.3.8. Performing system administration tasks<a class="headerlink" href="#performing-system-administration-tasks" title="Permalink to this headline">¶</a></h3>
<div class="section" id="add-index">
<span id="add-index-command"></span><h4>7.3.3.8.1. add-index<a class="headerlink" href="#add-index" title="Permalink to this headline">¶</a></h4>
<p>Add or update indices for an existing feature type. This can be used to upgrade-in-place, converting an older
index format into the latest. See <a class="reference internal" href="data_management.html#index-upgrades"><span class="std std-ref">Upgrading Existing Indices</span></a> for more information.</p>
<p>Example usage:</p>
<div class="highlight-default"><div class="highlight"><pre>$ geomesa add-index -u username -p password -i instance \
  -z zoo1,zoo2,zoo3 -c test_catalog -f test_feature --index xz3
</pre></div>
</div>
</div>
<div class="section" id="delete-catalog">
<h4>7.3.3.8.2. delete-catalog<a class="headerlink" href="#delete-catalog" title="Permalink to this headline">¶</a></h4>
<p>Delete a GeoMesa catalog table completely, along with all features in it.</p>
<p>Example usage:</p>
<div class="highlight-default"><div class="highlight"><pre>$ geomesa delete-catalog -u username -p password \
  -i instance -z zoo1,zoo2,zoo3 -c test_catalog
</pre></div>
</div>
</div>
<div class="section" id="delete-features">
<h4>7.3.3.8.3. delete-features<a class="headerlink" href="#delete-features" title="Permalink to this headline">¶</a></h4>
<p>Delete features from a table in GeoMesa. Does not delete any tables or schema information.</p>
<p>Example usage:</p>
<div class="highlight-default"><div class="highlight"><pre>$ geomesa delete-features -u username -p password \
  -i instance -z zoo1,zoo2,zoo3 -c test_catalog \
  -q &#39;dtg DURING 2016-02-02T00:00:00.000Z/2016-02-03T00:00:00.000Z&#39;
</pre></div>
</div>
</div>
<div class="section" id="add-attribute-index">
<h4>7.3.3.8.4. add-attribute-index<a class="headerlink" href="#add-attribute-index" title="Permalink to this headline">¶</a></h4>
<p>Add attribute indices for a specified list of attributes.:</p>
<div class="highlight-default"><div class="highlight"><pre>$ geomesa add-attribute-index -u username -p password -i instance -z zoo1,zoo2,zoo3 -c test_catalog \
  -f test_feature -a attribute1,attribute2 --coverage full
</pre></div>
</div>
<p>This will launch a map-reduce job creating attribute indices for each attribute listed in <code class="docutils literal"><span class="pre">-a</span></code>. This is essentially a convenience wrapper for invoking the job described in <a class="reference internal" href="jobs.html#attribute-indexing-job"><span class="std std-ref">Attribute Indexing</span></a>.</p>
</div>
<div class="section" id="env">
<h4>7.3.3.8.5. env<a class="headerlink" href="#env" title="Permalink to this headline">¶</a></h4>
<p>Examines the current GeoMesa tools environment, and prints out simple feature types converters that
are available on the current classpath. The available types can be used for ingestion; see the <a class="reference internal" href="#ingest"><span class="std std-ref">ingest</span></a> command.
Use of this command without parameters will result in behavior similar to when the help command is used.</p>
<p>Parameters allow you to specify what to print to out. These give you the ability to view a list of all simple
feature types and converters, describe all the feature types and converters, or review a subset of these simple feature
types and converters. There are a few options that permit you to specify the desired format when describing simple
feature types.</p>
<p>There are a few commands pertaining to the format of describing simple feature types.</p>
<p>Example usage:</p>
<div class="highlight-default"><div class="highlight"><pre>$ geomesa env --list-sfts
</pre></div>
</div>
</div>
<div class="section" id="explain">
<h4>7.3.3.8.6. explain<a class="headerlink" href="#explain" title="Permalink to this headline">¶</a></h4>
<p>Explain how a given GeoMesa query will be executed:</p>
<div class="highlight-default"><div class="highlight"><pre>$ geomesa explain -u username -p password \
  -c test_catalog -f test_feature \
  -q &quot;INTERSECTS(geom, POLYGON ((41 28, 42 28, 42 29, 41 29, 41 28)))&quot;
</pre></div>
</div>
</div>
<div class="section" id="stats-analyze">
<span id="accumulo-tools-stats-analyze"></span><h4>7.3.3.8.7. stats-analyze<a class="headerlink" href="#stats-analyze" title="Permalink to this headline">¶</a></h4>
<p>Analyze statistics for your data set. This may improve query planning.</p>
<p>Example usage:</p>
<div class="highlight-default"><div class="highlight"><pre>$ geomesa stats-analyze -u username -p password -c geomesa.data -f twitter
  Running stat analysis for feature type twitter...
  Stats analyzed:
    Total features: 8852601
    Bounds for geom: [ -171.75, -45.5903996, 157.7302, 89.99997102 ] cardinality: 2119237
    Bounds for dtg: [ &#39;2016-02-01T00:09:12.000Z&#39; to &#39;2016-03-01T00:21:02.000Z&#39; ] cardinality: 2161132
    Bounds for user_id: [ &#39;100000215&#39; to &#39;99999502&#39; ] cardinality: 861283
  Use &#39;stats-histogram&#39; or &#39;stats-count&#39; commands for more details
</pre></div>
</div>
</div>
<div class="section" id="stats-bounds">
<h4>7.3.3.8.8. stats-bounds<a class="headerlink" href="#stats-bounds" title="Permalink to this headline">¶</a></h4>
<p>Displays the bounds of your data for different attributes. You can use pre-calculated stats for a quick
estimation, or get the definitive result by querying the data set using the &#8216;&#8211;no-cache&#8217; flag.</p>
<p>Example usage:</p>
<div class="highlight-default"><div class="highlight"><pre>$ geomesa stats-bounds -u username -p password -i instance -z zoo1,zoo2,zoo3 \
    -c geomesa.data -f twitter
  user_id [ 100000215 to 99999502 ] cardinality: 861283
  user_name [ unavailable ]
  text [ unavailable ]
  dtg [ 2016-02-01T00:09:12.000Z to 2016-03-01T00:21:02.000Z ] cardinality: 2161132
  geom [ -171.75, -45.5903996, 157.7302, 89.99997102 ] cardinality: 2119237

$ geomesa stats-bounds -u username -p password -i instance -z zoo1,zoo2,zoo3 \
    -c geomesa.data -f twitter --no-cache \
    -q &#39;BBOX(geom,-70,45,-60,55) AND dtg DURING 2016-02-02T00:00:00.000Z/2016-02-03T00:00:00.000Z&#39;
  Running stat query...
    user_id [ 1011811424 to 99124417 ] cardinality: 115
    user_name [ bar_user to foo_user ] cardinality: 113
    text [ bar to foo ] cardinality: 180
    dtg [ 2016-02-02T00:01:07.000Z to 2016-02-02T23:59:41.000Z ] cardinality: 178
    geom [ -69.87212338, 45.01259299, -60.08925, 53.8868369 ] cardinality: 155
</pre></div>
</div>
</div>
<div class="section" id="stats-count">
<h4>7.3.3.8.9. stats-count<a class="headerlink" href="#stats-count" title="Permalink to this headline">¶</a></h4>
<p>Counts the features in your data set. You can count total features, or features that match a CQL filter.
You can use pre-calculated stats for a quick estimation, or get the definitive result by querying the
data set using the &#8216;&#8211;no-cache&#8217; flag.</p>
<p>Example usage:</p>
<div class="highlight-default"><div class="highlight"><pre>$ geomesa stats-count -u username -p password -i instance -z zoo1,zoo2,zoo3 \
    -c geomesa.data -f twitter
  Estimated count: 8852601

$ geomesa stats-count -u username -p password -i instance -z zoo1,zoo2,zoo3 \
    -c geomesa.data -f twitter \
    -q &#39;BBOX(geom,-70,45,-60,55) AND dtg DURING 2016-02-02T00:00:00.000Z/2016-02-03T00:00:00.000Z&#39;
  Estimated count: 2681

$ geomesa stats-count -u username -p password -i instance -z zoo1,zoo2,zoo3 \
    -c geomesa.data -f twitter --no-cache \
    -q &#39;BBOX(geom,-70,45,-60,55) AND dtg DURING 2016-02-02T00:00:00.000Z/2016-02-03T00:00:00.000Z&#39;
  Running stat query...
  Count: 182
</pre></div>
</div>
</div>
<div class="section" id="stats-top-k">
<h4>7.3.3.8.10. stats-top-k<a class="headerlink" href="#stats-top-k" title="Permalink to this headline">¶</a></h4>
<p>Enumerates the values for attributes in your data set. You can enumerate all values for all features,
or only values for features that match a CQL filter.</p>
<p>Example usage:</p>
<div class="highlight-default"><div class="highlight"><pre>$ geomesa stats-top-k -u username -p password -i instance -z zoo1,zoo2,zoo3 \
    -c geomesa.data -f twitter -a user_id -k 10
  Top values for &#39;user_id&#39;:
    3144822634 (26681)
    388009236 (20553)
    497145453 (19858)
    563319506 (15848)
    2841269945 (15763)
    2924224280 (15731)
    141302910 (15240)
    2587789764 (14811)
    56266341 (14487)
    889599440 (14330)
</pre></div>
</div>
</div>
<div class="section" id="stats-histogram">
<h4>7.3.3.8.11. stats-histogram<a class="headerlink" href="#stats-histogram" title="Permalink to this headline">¶</a></h4>
<p>Counts the features in your data set, grouped into sorted bins. You may specify the number of bins to group
attribute into. You can count total features, or features that match a CQL filter. You can use
pre-calculated stats for a quick estimation, or get the definitive result by querying the
data set using the &#8216;&#8211;no-cache&#8217; flag.</p>
<p>If you query a histogram for a geometry attribute, the result will be displayed in an ASCII heatmap.</p>
<p>Example usage:</p>
<div class="highlight-default"><div class="highlight"><pre>$ geomesa stats-histogram -u username -p password -i instance -z zoo1,zoo2,zoo3 \
    -c geomesa.data -f twitter -a dtg --bins 10
  Binned histogram for &#39;dtg&#39;:
    [ 2016-02-01T00:09:12.000Z to 2016-02-03T21:46:23.000Z ] 798968
    [ 2016-02-03T21:46:23.000Z to 2016-02-06T19:23:34.000Z ] 868019
    [ 2016-02-06T19:23:34.000Z to 2016-02-09T17:00:45.000Z ] 861720
    [ 2016-02-09T17:00:45.000Z to 2016-02-12T14:37:56.000Z ] 833473
    [ 2016-02-12T14:37:56.000Z to 2016-02-15T12:15:07.000Z ] 990292
    [ 2016-02-15T12:15:07.000Z to 2016-02-18T09:52:18.000Z ] 842434
    [ 2016-02-18T09:52:18.000Z to 2016-02-21T07:29:29.000Z ] 968936
    [ 2016-02-21T07:29:29.000Z to 2016-02-24T05:06:40.000Z ] 862808
    [ 2016-02-24T05:06:40.000Z to 2016-02-27T02:43:51.000Z ] 869208
    [ 2016-02-27T02:43:51.000Z to 2016-03-01T00:21:02.000Z ] 956743

$ geomesa stats-histogram -u username -p password -i instance -z zoo1,zoo2,zoo3 \
    -c geomesa.data -f twitter -a dtg --bins 10 --no-cache
  Running stat query...
  Binned histogram for &#39;dtg&#39;:
    [ 2016-02-01T00:09:12.000Z to 2016-02-03T21:46:23.000Z ] 805620
    [ 2016-02-03T21:46:23.000Z to 2016-02-06T19:23:34.000Z ] 869361
    [ 2016-02-06T19:23:34.000Z to 2016-02-09T17:00:45.000Z ] 859868
    [ 2016-02-09T17:00:45.000Z to 2016-02-12T14:37:56.000Z ] 832458
    [ 2016-02-12T14:37:56.000Z to 2016-02-15T12:15:07.000Z ] 986829
    [ 2016-02-15T12:15:07.000Z to 2016-02-18T09:52:18.000Z ] 841580
    [ 2016-02-18T09:52:18.000Z to 2016-02-21T07:29:29.000Z ] 970460
    [ 2016-02-21T07:29:29.000Z to 2016-02-24T05:06:40.000Z ] 863484
    [ 2016-02-24T05:06:40.000Z to 2016-02-27T02:43:51.000Z ] 871742
    [ 2016-02-27T02:43:51.000Z to 2016-03-01T00:21:02.000Z ] 951199
</pre></div>
</div>
</div>
<div class="section" id="config-table">
<h4>7.3.3.8.12. config-table<a class="headerlink" href="#config-table" title="Permalink to this headline">¶</a></h4>
<p>Perform various table configuration tasks. There are three sub-arguments:</p>
<blockquote>
<div><ul class="simple">
<li><strong>list</strong> - List the configuration options for a GeoMesa table</li>
<li><strong>describe</strong> - Describe a given configuration option for a table</li>
<li><strong>update</strong> - Update a given configuration option for a table</li>
</ul>
</div></blockquote>
<p>Example commands:</p>
<div class="highlight-default"><div class="highlight"><pre>$ geomesa config-table list -u username -p password \
  -c test_catalog -f test_feature -t st_idx
$ geomesa config-table describe -u username -p password \
  -c test_catalog -f test_feature -t attr_idx \
  --param table.bloom.enabled
$ geomesa config-table update -u username -p password \
  -c test_catalog -f test_feature -t records \
  --param table.bloom.enabled -n true
</pre></div>
</div>
</div>
<div class="section" id="configure-age-off">
<h4>7.3.3.8.13. configure-age-off<a class="headerlink" href="#configure-age-off" title="Permalink to this headline">¶</a></h4>
<p>List, add or remove age-off on a given feature type.</p>
<p>Age-off can be configured based on ingest time, or on a date-type simple feature attribute with the <code class="docutils literal"><span class="pre">--dtg</span></code> option.
See <a class="reference internal" href="ageoff.html#ageoff-accumulo"><span class="std std-ref">Age-Off Iterators</span></a> for more information.</p>
<p>Example commands:</p>
<div class="highlight-default"><div class="highlight"><pre>$ geomesa configure-age-off -c test_catalog -f test_feature --list

$ geomesa configure-age-off -c test_catalog -f test_feature --set --expiry &#39;1 day&#39;

$ geomesa configure-age-off -c test_catalog -f test_feature --set --expiry &#39;1 day&#39; --dtg dtg

$ geomesa configure-age-off -c test_catalog -f test_feature --remove
</pre></div>
</div>
</div>
<div class="section" id="version">
<h4>7.3.3.8.14. version<a class="headerlink" href="#version" title="Permalink to this headline">¶</a></h4>
<p>Prints out the version, git branch, and commit ID that the tools were built with:</p>
<div class="highlight-default"><div class="highlight"><pre>$ geomesa version
</pre></div>
</div>
</div>
</div>
</div>
</div>


           </div>
           <div class="articleComments">
            
           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="examples.html" class="btn btn-neutral float-right" title="7.4. Command Line Examples" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="configuration.html" class="btn btn-neutral" title="7.2. Accumulo Configuration" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>

    </p>
  </div>

<div role="contentinfo">
  <p>
    &copy; Copyright 2013-2017 <a href="https://www.ccri.com/">Commonwealth Computer Research, Inc.</a>
    <br/>
    Licensed under the <a href="http://www.opensource.org/licenses/apache2.0.php">Apache License, Version 2.0</a>
  </p>
</div>

Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>



</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../../',
            VERSION:'1.4.0-SNAPSHOT',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="../../_static/jquery.js"></script>
      <script type="text/javascript" src="../../_static/underscore.js"></script>
      <script type="text/javascript" src="../../_static/doctools.js"></script>
      <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
      <script type="text/javascript" src="../../_static/sphinx_tabs/tabs.js"></script>
      <script type="text/javascript" src="../../_static/sphinx_tabs/semantic-ui-2.2.7/tab.min.js"></script>

  

  
  
    <script type="text/javascript" src="../../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>