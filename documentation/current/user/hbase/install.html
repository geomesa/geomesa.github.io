

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>14.1. Installing GeoMesa HBase &mdash; GeoMesa 3.2.0-SNAPSHOT Manuals</title>
  

  
  
  
  
    <link rel="canonical" href="https://www.geomesa.org/documentation/user/hbase/install.html"/>
  

  

  
  
    

  

  <link rel="stylesheet" href="../../_static/css/theme_custom.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/sphinx_tabs/tabs.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/sphinx_tabs/semantic-ui-2.2.10/segment.min.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/sphinx_tabs/semantic-ui-2.2.10/menu.min.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/sphinx_tabs/semantic-ui-2.2.10/tab.min.css" type="text/css" />
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:400,700" type="text/css" />
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="14.2. Manual Coprocessors Registration" href="coprocessor_install.html" />
    <link rel="prev" title="14. HBase Data Store" href="index.html" /> 

  
  <script src="../../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../../index.html" class="icon icon-home"> GeoMesa
          

          
          </a>

          
            
            
              <div class="version">
                3.2.0-SNAPSHOT
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="../index.html">User Manual</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../introduction.html">1. Introduction</a></li>
<li class="toctree-l2"><a class="reference internal" href="../download.html">2. Versions and Downloads</a></li>
<li class="toctree-l2"><a class="reference internal" href="../install.html">3. Installation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../getting_started.html">4. Getting Started</a></li>
<li class="toctree-l2"><a class="reference internal" href="../geotools.html">5. GeoTools Overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="../architecture.html">6. Architecture Overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="../datastores/index.html">7. GeoMesa Data Stores</a></li>
<li class="toctree-l2"><a class="reference internal" href="../cli/index.html">8. Command-Line Tools</a></li>
<li class="toctree-l2"><a class="reference internal" href="../convert/index.html">9. GeoMesa Convert</a></li>
<li class="toctree-l2"><a class="reference internal" href="../geoserver.html">10. GeoServer Plugins</a></li>
<li class="toctree-l2"><a class="reference internal" href="../spark/index.html">11. GeoMesa Spark</a></li>
<li class="toctree-l2"><a class="reference internal" href="../nifi/index.html">12. GeoMesa NiFi Bundle</a></li>
<li class="toctree-l2"><a class="reference internal" href="../process.html">13. GeoMesa Processes</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="index.html">14. HBase Data Store</a><ul class="current">
<li class="toctree-l3 current"><a class="current reference internal" href="#">14.1. Installing GeoMesa HBase</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#installing-the-binary-distribution">14.1.1. Installing the Binary Distribution</a></li>
<li class="toctree-l4"><a class="reference internal" href="#building-from-source">14.1.2. Building from Source</a></li>
<li class="toctree-l4"><a class="reference internal" href="#installing-the-geomesa-distributed-runtime-jar">14.1.3. Installing the GeoMesa Distributed Runtime JAR</a></li>
<li class="toctree-l4"><a class="reference internal" href="#setting-up-the-hbase-command-line-tools">14.1.4. Setting up the HBase Command Line Tools</a></li>
<li class="toctree-l4"><a class="reference internal" href="#installing-geomesa-hbase-in-geoserver">14.1.5. Installing GeoMesa HBase in GeoServer</a></li>
<li class="toctree-l4"><a class="reference internal" href="#connecting-to-external-hbase-clusters-backed-by-s3">14.1.6. Connecting to External HBase Clusters Backed By S3</a></li>
<li class="toctree-l4"><a class="reference internal" href="#configuring-hbase-on-azure-hdinsight">14.1.7. Configuring HBase on Azure HDInsight</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="coprocessor_install.html">14.2. Manual Coprocessors Registration</a></li>
<li class="toctree-l3"><a class="reference internal" href="usage.html">14.3. Using the HBase Data Store Programmatically</a></li>
<li class="toctree-l3"><a class="reference internal" href="geoserver.html">14.4. Using the HBase Data Store in GeoServer</a></li>
<li class="toctree-l3"><a class="reference internal" href="commandline.html">14.5. HBase Command-Line Tools</a></li>
<li class="toctree-l3"><a class="reference internal" href="configuration.html">14.6. HBase Configuration</a></li>
<li class="toctree-l3"><a class="reference internal" href="index_config.html">14.7. HBase Index Configuration</a></li>
<li class="toctree-l3"><a class="reference internal" href="visibilities.html">14.8. HBase Visibilities</a></li>
<li class="toctree-l3"><a class="reference internal" href="kerberos.html">14.9. Kerberos</a></li>
<li class="toctree-l3"><a class="reference internal" href="heatmaps.html">14.10. HBase Heatmaps</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../accumulo/index.html">15. Accumulo Data Store</a></li>
<li class="toctree-l2"><a class="reference internal" href="../cassandra/index.html">16. Cassandra Data Store</a></li>
<li class="toctree-l2"><a class="reference internal" href="../bigtable/index.html">17. Bigtable Data Store</a></li>
<li class="toctree-l2"><a class="reference internal" href="../kafka/index.html">18. Kafka Data Store</a></li>
<li class="toctree-l2"><a class="reference internal" href="../redis/index.html">19. Redis Data Store</a></li>
<li class="toctree-l2"><a class="reference internal" href="../filesystem/index.html">20. FileSystem Data Store</a></li>
<li class="toctree-l2"><a class="reference internal" href="../kudu/index.html">21. Kudu Data Store</a></li>
<li class="toctree-l2"><a class="reference internal" href="../lambda/index.html">22. Lambda Data Store</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ds_views.html">23. Combined Data Store Views</a></li>
<li class="toctree-l2"><a class="reference internal" href="../geojson.html">24. GeoMesa GeoJSON</a></li>
<li class="toctree-l2"><a class="reference internal" href="../stream.html">25. GeoMesa Stream Processing</a></li>
<li class="toctree-l2"><a class="reference internal" href="../upgrade.html">26. Upgrade Guide</a></li>
<li class="toctree-l2"><a class="reference internal" href="../index.html#appendix">Appendix</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../developer/index.html">Developer Manual</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../tutorials/index.html">Tutorials</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">GeoMesa</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../index.html">Docs</a> &raquo;</li>
        
          <li><a href="../index.html">User Manual</a> &raquo;</li>
        
          <li><a href="index.html">14. HBase Data Store</a> &raquo;</li>
        
      <li>14.1. Installing GeoMesa HBase</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="installing-geomesa-hbase">
<h1>14.1. Installing GeoMesa HBase<a class="headerlink" href="#installing-geomesa-hbase" title="Permalink to this headline">¶</a></h1>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">GeoMesa currently supports HBase versions 1.4.x and 2.2.x.</p>
</div>
<p>GeoMesa supports traditional HBase installations as well as HBase running on <a class="reference external" href="https://aws.amazon.com/emr/">Amazon’s EMR</a>
, <a class="reference external" href="https://hortonworks.com/products/data-center/hdp/">Hortonworks’ Data Platform (HDP)</a>, and the
<a class="reference external" href="https://www.cloudera.com/products/enterprise-data-hub.html">Cloudera Distribution of Hadoop (CDH)</a>. For details
on bootstrapping an EMR cluster, see <a class="reference internal" href="../../tutorials/geomesa-hbase-s3-on-aws.html"><span class="doc">Bootstrapping GeoMesa HBase on AWS S3</span></a>. For details on deploying to
Cloudera CDH, see <a class="reference internal" href="../../tutorials/geomesa-hbase-on-cdh.html"><span class="doc">Deploying GeoMesa HBase on Cloudera CDH 5.X</span></a>.</p>
<div class="section" id="installing-the-binary-distribution">
<h2>14.1.1. Installing the Binary Distribution<a class="headerlink" href="#installing-the-binary-distribution" title="Permalink to this headline">¶</a></h2>
<p>GeoMesa HBase artifacts are available for download or can be built from source.
The easiest way to get started is to download the most recent binary version
(3.2.0-SNAPSHOT) from <a class="reference external" href="https://github.com/locationtech/geomesa/releases">GitHub</a>.</p>
<p>Extract it somewhere convenient:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># download and unpackage the most recent distribution:</span>
$ wget <span class="s2">&quot;https://github.com/locationtech/geomesa/releases/download/geomesa_2.11-</span><span class="nv">$VERSION</span><span class="s2">/geomesa-hbase_2.11-</span><span class="nv">$VERSION</span><span class="s2">-bin.tar.gz&quot;</span>
$ tar xvf geomesa-hbase_2.11-<span class="nv">$VERSION</span>-bin.tar.gz
$ <span class="nb">cd</span> geomesa-hbase_2.11-<span class="nv">$VERSION</span>
$ ls
bin/  conf/  dist/  docs/  examples/  lib/  LICENSE.txt  logs/
</pre></div>
</div>
</div>
<div class="section" id="building-from-source">
<span id="hbase-install-source"></span><h2>14.1.2. Building from Source<a class="headerlink" href="#building-from-source" title="Permalink to this headline">¶</a></h2>
<p>GeoMesa HBase may also be built from source. For more information refer to <a class="reference internal" href="../../developer/introduction.html#building-from-source"><span class="std std-ref">Building from Source</span></a>
in the developer manual, or to the <code class="docutils literal notranslate"><span class="pre">README.md</span></code> file in the the source distribution.
The remainder of the instructions in this chapter assume the use of the binary GeoMesa HBase
distribution. If you have built from source, the distribution is created in the <code class="docutils literal notranslate"><span class="pre">target</span></code> directory of
<code class="docutils literal notranslate"><span class="pre">geomesa-hbase/geomesa-hbase-dist</span></code>.</p>
<p>More information about developing with GeoMesa may be found in the <a class="reference internal" href="../../developer/index.html"><span class="doc">Developer Manual</span></a>.</p>
</div>
<div class="section" id="installing-the-geomesa-distributed-runtime-jar">
<span id="hbase-deploy-distributed-runtime"></span><h2>14.1.3. Installing the GeoMesa Distributed Runtime JAR<a class="headerlink" href="#installing-the-geomesa-distributed-runtime-jar" title="Permalink to this headline">¶</a></h2>
<p>GeoMesa uses custom HBase filters and coprocessors to speed up queries. There are two distributed runtime JARs
provided by GeoMesa, one for HBase 1.x and one for HBase 2.x.</p>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">Make sure that you use the correct GeoMesa distributed JAR for your HBase version</p>
</div>
<p>You must deploy the distributed runtime jar to the directory specified by the HBase configuration variable
<code class="docutils literal notranslate"><span class="pre">hbase.dynamic.jars.dir</span></code>.  This is set to <code class="docutils literal notranslate"><span class="pre">${hbase.rootdir}/lib</span></code> by default. Copy the distribute runtime jar to
this directory as follows:</p>
<div class="sphinx-tabs docutils container">
<div class="ui top attached tabular menu sphinx-menu docutils container">
<div class="active item sphinx-data-tab-SEJhc2UgMi54 docutils container">
<div class="docutils container">
HBase 2.x</div>
</div>
<div class="item sphinx-data-tab-SEJhc2UgMS54 docutils container">
<div class="docutils container">
HBase 1.x</div>
</div>
</div>
<div class="ui bottom attached sphinx-tab tab segment sphinx-data-tab-SEJhc2UgMi54 active docutils container">
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>hadoop fs -put <span class="si">${</span><span class="nv">GEOMESA_HBASE_HOME</span><span class="si">}</span>/dist/hbase/geomesa-hbase-distributed-runtime-hbase2_2.11-<span class="nv">$VERSION</span>.jar <span class="si">${</span><span class="nv">hbase</span><span class="p">.dynamic.jars.dir</span><span class="si">}</span>/
</pre></div>
</div>
</div>
<div class="ui bottom attached sphinx-tab tab segment sphinx-data-tab-SEJhc2UgMS54 docutils container">
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>hadoop fs -put <span class="si">${</span><span class="nv">GEOMESA_HBASE_HOME</span><span class="si">}</span>/dist/hbase/geomesa-hbase-distributed-runtime-hbase1_2.11-<span class="nv">$VERSION</span>.jar <span class="si">${</span><span class="nv">hbase</span><span class="p">.dynamic.jars.dir</span><span class="si">}</span>/
</pre></div>
</div>
</div>
</div>
<p>If running on top of Amazon S3, you will need to use the <code class="docutils literal notranslate"><span class="pre">aws</span> <span class="pre">s3</span></code> command line tool.</p>
<div class="sphinx-tabs docutils container">
<div class="ui top attached tabular menu sphinx-menu docutils container">
<div class="active item sphinx-data-tab-SEJhc2UgMi54 docutils container">
<div class="docutils container">
HBase 2.x</div>
</div>
<div class="item sphinx-data-tab-SEJhc2UgMS54 docutils container">
<div class="docutils container">
HBase 1.x</div>
</div>
</div>
<div class="ui bottom attached sphinx-tab tab segment sphinx-data-tab-SEJhc2UgMi54 active docutils container">
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>aws s3 cp <span class="si">${</span><span class="nv">GEOMESA_HBASE_HOME</span><span class="si">}</span>/dist/hbase/geomesa-hbase-distributed-runtime-hbase2_2.11-<span class="nv">$VERSION</span>.jar s3://<span class="si">${</span><span class="nv">hbase</span><span class="p">.dynamic.jars.dir</span><span class="si">}</span>/
</pre></div>
</div>
</div>
<div class="ui bottom attached sphinx-tab tab segment sphinx-data-tab-SEJhc2UgMS54 docutils container">
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>aws s3 cp <span class="si">${</span><span class="nv">GEOMESA_HBASE_HOME</span><span class="si">}</span>/dist/hbase/geomesa-hbase-distributed-runtime-hbase1_2.11-<span class="nv">$VERSION</span>.jar s3://<span class="si">${</span><span class="nv">hbase</span><span class="p">.dynamic.jars.dir</span><span class="si">}</span>/
</pre></div>
</div>
</div>
</div>
<p>If required, you may disable distributed processing by setting the system property <code class="docutils literal notranslate"><span class="pre">geomesa.hbase.remote.filtering</span></code>
to <code class="docutils literal notranslate"><span class="pre">false</span></code>. Note that this may have an adverse effect on performance.</p>
<div class="section" id="register-the-coprocessors">
<span id="registering-coprocessors"></span><h3>14.1.3.1. Register the Coprocessors<a class="headerlink" href="#register-the-coprocessors" title="Permalink to this headline">¶</a></h3>
<p>Assuming that you have installed the distributed runtime JAR under <code class="docutils literal notranslate"><span class="pre">hbase.dynamic.jars.dir</span></code>, coprocessors will be
registered automatically when you call <code class="docutils literal notranslate"><span class="pre">createSchema</span></code> on a data store. Alternatively, the coprocessors may be
registered manually. See <a class="reference internal" href="coprocessor_install.html#coprocessor-alternate"><span class="std std-ref">Manual Coprocessors Registration</span></a> for details.</p>
<p>For more information on managing coprocessors see
<a class="reference external" href="https://blogs.apache.org/hbase/entry/coprocessor_introduction">Coprocessor Introduction</a> on Apache’s Blog.</p>
</div>
</div>
<div class="section" id="setting-up-the-hbase-command-line-tools">
<span id="setting-up-hbase-commandline"></span><h2>14.1.4. Setting up the HBase Command Line Tools<a class="headerlink" href="#setting-up-the-hbase-command-line-tools" title="Permalink to this headline">¶</a></h2>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">To use the HBase data store with the command line tools, you need to install
the distributed runtime first. See <a class="reference internal" href="#hbase-deploy-distributed-runtime"><span class="std std-ref">Installing the GeoMesa Distributed Runtime JAR</span></a>.</p>
</div>
<p>GeoMesa comes with a set of command line tools for managing HBase features located in
<code class="docutils literal notranslate"><span class="pre">geomesa-hbase_2.11-$VERSION/bin/</span></code> of the binary distribution.</p>
<p>GeoMesa requires <code class="docutils literal notranslate"><span class="pre">java</span></code> to be available on the default path.</p>
<div class="section" id="configuring-the-classpath">
<h3>14.1.4.1. Configuring the Classpath<a class="headerlink" href="#configuring-the-classpath" title="Permalink to this headline">¶</a></h3>
<p>GeoMesa needs HBase and Hadoop JARs on the classpath. These are not bundled by default, as they should match
the versions installed on the target system.</p>
<p>If the environment variables <code class="docutils literal notranslate"><span class="pre">HBASE_HOME</span></code> and <code class="docutils literal notranslate"><span class="pre">HADOOP_HOME</span></code> are set, then GeoMesa will load the appropriate
JARs and configuration files from those locations and no further configuration is required. Otherwise, you will
be prompted to download the appropriate JARs the first time you invoke the tools. Environment variables can be
specified in <code class="docutils literal notranslate"><span class="pre">conf/*-env.sh</span></code> and dependency versions can be specified in <code class="docutils literal notranslate"><span class="pre">conf/dependencies.sh</span></code>.</p>
<p>For advanced scenarios, the environmental variables <code class="docutils literal notranslate"><span class="pre">GEOMESA_HADOOP_CLASSPATH</span></code> and <code class="docutils literal notranslate"><span class="pre">GEOMESA_HBASE_CLASSPATH</span></code>
can be set to override all other logic.</p>
<p>If no environment variables are set but the <code class="docutils literal notranslate"><span class="pre">hbase</span></code> and <code class="docutils literal notranslate"><span class="pre">hadoop</span></code> commands are available, then
GeoMesa will interrogate them for their classpaths by running the <code class="docutils literal notranslate"><span class="pre">hadoop</span> <span class="pre">classpath</span></code> and <code class="docutils literal notranslate"><span class="pre">hbase</span> <span class="pre">classpath</span></code>
commands. Note that this can be slow, so it is usually better to use <code class="docutils literal notranslate"><span class="pre">GEOMESA_HADOOP_CLASSPATH</span></code> and
<code class="docutils literal notranslate"><span class="pre">GEOMESA_HBASE_CLASSPATH</span></code> as described above.</p>
<div class="sphinx-tabs docutils container">
<div class="ui top attached tabular menu sphinx-menu docutils container">
<div class="active item sphinx-data-tab-U3RhbmRhcmQ= docutils container">
<div class="docutils container">
Standard</div>
</div>
<div class="item sphinx-data-tab-QW1hem9uIEVNUg== docutils container">
<div class="docutils container">
Amazon EMR</div>
</div>
<div class="item sphinx-data-tab-SERQ docutils container">
<div class="docutils container">
HDP</div>
</div>
<div class="item sphinx-data-tab-U3RhbmRhbG9uZQ== docutils container">
<div class="docutils container">
Standalone</div>
</div>
</div>
<div class="ui bottom attached sphinx-tab tab segment sphinx-data-tab-U3RhbmRhcmQ= active docutils container">
<p>Configure GeoMesa to use pre-installed HBase and Hadoop distributions:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">export</span> <span class="nv">HADOOP_HOME</span><span class="o">=</span>/path/to/hadoop
<span class="nb">export</span> <span class="nv">HBASE_HOME</span><span class="o">=</span>/path/to/hbase
<span class="nb">export</span> <span class="nv">GEOMESA_HBASE_HOME</span><span class="o">=</span>/opt/geomesa
<span class="nb">export</span> <span class="nv">PATH</span><span class="o">=</span><span class="s2">&quot;</span><span class="si">${</span><span class="nv">PATH</span><span class="si">}</span><span class="s2">:</span><span class="si">${</span><span class="nv">GEOMESA_HOME</span><span class="si">}</span><span class="s2">/bin&quot;</span>
</pre></div>
</div>
</div>
<div class="ui bottom attached sphinx-tab tab segment sphinx-data-tab-QW1hem9uIEVNUg== docutils container">
<p>When using EMR to install HBase or Hadoop there are AWS specific jars that need to be used (e.g. EMR FS).
It is recommended to use EMR to install Hadoop and/or HBase in order to properly configure and install these
dependencies (especially when using HBase on S3).</p>
<p>If you used EMR to install Hadoop and HBase, you can view their classpaths using the <code class="docutils literal notranslate"><span class="pre">hadoop</span> <span class="pre">classpath</span></code> and
<code class="docutils literal notranslate"><span class="pre">hbase</span> <span class="pre">classpath</span></code> commands to build an appropriate classpath to include jars and configuration files for
GeoMesa HBase:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">export</span> <span class="nv">GEOMESA_HADOOP_CLASSPATH</span><span class="o">=</span><span class="k">$(</span>hadoop classpath<span class="k">)</span>
<span class="nb">export</span> <span class="nv">GEOMESA_HBASE_CLASSPATH</span><span class="o">=</span><span class="k">$(</span>hbase classpath<span class="k">)</span>
<span class="nb">export</span> <span class="nv">GEOMESA_HBASE_HOME</span><span class="o">=</span>/opt/geomesa
<span class="nb">export</span> <span class="nv">PATH</span><span class="o">=</span><span class="s2">&quot;</span><span class="si">${</span><span class="nv">PATH</span><span class="si">}</span><span class="s2">:</span><span class="si">${</span><span class="nv">GEOMESA_HBASE_HOME</span><span class="si">}</span><span class="s2">/bin&quot;</span>
</pre></div>
</div>
</div>
<div class="ui bottom attached sphinx-tab tab segment sphinx-data-tab-SERQ docutils container">
<p>Configure the environment to use an HDP install:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">export</span> <span class="nv">HADOOP_HOME</span><span class="o">=</span>/usr/hdp/current/hadoop-client/
<span class="nb">export</span> <span class="nv">HBASE_HOME</span><span class="o">=</span>/usr/hdp/current/hbase-client/
<span class="nb">export</span> <span class="nv">GEOMESA_HBASE_HOME</span><span class="o">=</span>/opt/geomesa
<span class="nb">export</span> <span class="nv">PATH</span><span class="o">=</span><span class="s2">&quot;</span><span class="si">${</span><span class="nv">PATH</span><span class="si">}</span><span class="s2">:</span><span class="si">${</span><span class="nv">GEOMESA_HBASE_HOME</span><span class="si">}</span><span class="s2">/bin&quot;</span>
</pre></div>
</div>
</div>
<div class="ui bottom attached sphinx-tab tab segment sphinx-data-tab-U3RhbmRhbG9uZQ== docutils container">
<p>If there is no local HBase instance, the necessary JARs can be installed by downloading them. Modify the
version numbers in <code class="docutils literal notranslate"><span class="pre">geomesa-hbase_2.11-$VERSION/conf/dependencies.sh</span></code> to match the target system and use
<code class="docutils literal notranslate"><span class="pre">geomesa-hbase_2.11-$VERSION/bin/install-dependencies.sh</span></code> to install them:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ <span class="nb">cd</span> geomesa-hbase_2.11-<span class="nv">$VERSION</span>/bin
$ ./install-dependencies.sh
</pre></div>
</div>
<p>In order to connect to a cluster, an appropriate <code class="docutils literal notranslate"><span class="pre">hbase-site.xml</span></code> is required. Copy it from your cluster
into <code class="docutils literal notranslate"><span class="pre">geomesa-hbase_2.11-$VERSION/conf/</span></code>.</p>
<p>In order to run map/reduce jobs, copy the Hadoop <code class="docutils literal notranslate"><span class="pre">*-site.xml</span></code> configuration files
from your Hadoop installation into <code class="docutils literal notranslate"><span class="pre">geomesa-hbase_2.11-$VERSION/conf</span></code>.</p>
</div>
</div>
<p>In order to run map/reduce and Spark jobs, you will need to put <code class="docutils literal notranslate"><span class="pre">hbase-site.xml</span></code> into a JAR on the distributed
classpath. Add it at the root level of the <code class="docutils literal notranslate"><span class="pre">geomesa-hbase-datastore</span></code> JAR in the <code class="docutils literal notranslate"><span class="pre">lib</span></code> folder:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ zip -r lib/geomesa-hbase-datastore_2.11-<span class="nv">$VERSION</span>.jar hbase-site.xml
</pre></div>
</div>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">Ensure that the <code class="docutils literal notranslate"><span class="pre">hbase-site.xml</span></code> is at the root (top) level of your JAR, otherwise it will not be picked up.</p>
</div>
<p>GeoMesa also provides the ability to add additional JARs to the classpath using the environmental variable
<code class="docutils literal notranslate"><span class="pre">$GEOMESA_EXTRA_CLASSPATHS</span></code>. GeoMesa will prepend the contents of this environmental variable  to the computed
classpath, giving it highest precedence in the classpath. Users can provide directories of jar files or individual
files using a colon (<code class="docutils literal notranslate"><span class="pre">:</span></code>) as a delimiter. These entries will also be added the the map-reduce libjars variable.</p>
<p>Due to licensing restrictions, dependencies for shape file support must be separately installed.
Do this with the following command:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ ./bin/install-shapefile-support.sh
</pre></div>
</div>
<p>For logging, see <a class="reference internal" href="../cli/logging.html#slf4j-configuration"><span class="std std-ref">Logging Configuration</span></a> for information about configuring the SLF4J implementation.</p>
<p>Use the <code class="docutils literal notranslate"><span class="pre">geomesa-hbase</span> <span class="pre">classpath</span></code> command to print the final classpath that will be used when executing GeoMesa
commands.</p>
</div>
<div class="section" id="configuring-the-path">
<h3>14.1.4.2. Configuring the Path<a class="headerlink" href="#configuring-the-path" title="Permalink to this headline">¶</a></h3>
<p>In order to be able to run the <code class="docutils literal notranslate"><span class="pre">geomesa-hbase</span></code> command from anywhere, you can set the environment
variable <code class="docutils literal notranslate"><span class="pre">GEOMESA_HBASE_HOME</span></code> and add it to your path by modifying your bashrc file:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ <span class="nb">echo</span> <span class="s1">&#39;export GEOMESA_HBASE_HOME=/path/to/geomesa-hbase_2.11-$VERSION&#39;</span> &gt;&gt; ~/.bashrc
$ <span class="nb">echo</span> <span class="s1">&#39;export PATH=${GEOMESA_HBASE_HOME}/bin:$PATH&#39;</span> &gt;&gt; ~/.bashrc
$ <span class="nb">source</span> ~/.bashrc
$ which geomesa-hbae
/path/to/geomesa-hbase_2.11-<span class="nv">$VERSION</span>/bin/geomesa-hbase
</pre></div>
</div>
</div>
<div class="section" id="running-commands">
<h3>14.1.4.3. Running Commands<a class="headerlink" href="#running-commands" title="Permalink to this headline">¶</a></h3>
<p>Test the command that invokes the GeoMesa Tools:</p>
<div class="code highlight-default notranslate"><div class="highlight"><pre><span></span>$ geomesa-hbase
Usage: geomesa-hbase [command] [command options]
  Commands:
  ...
</pre></div>
</div>
<p>For details on the available commands, see <a class="reference internal" href="commandline.html#hbase-tools"><span class="std std-ref">HBase Command-Line Tools</span></a>.</p>
</div>
</div>
<div class="section" id="installing-geomesa-hbase-in-geoserver">
<span id="install-hbase-geoserver"></span><h2>14.1.5. Installing GeoMesa HBase in GeoServer<a class="headerlink" href="#installing-geomesa-hbase-in-geoserver" title="Permalink to this headline">¶</a></h2>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">See <a class="reference internal" href="../geoserver.html#geoserver-versions"><span class="std std-ref">GeoServer Versions</span></a> to ensure that GeoServer is compatible with your GeoMesa version.</p>
</div>
<p>The HBase GeoServer plugin is bundled by default in a GeoMesa binary distribution. To install, extract
<code class="docutils literal notranslate"><span class="pre">$GEOMESA_HBASE_HOME/dist/gs-plugins/geomesa-hbase-gs-plugin_2.11-$VERSION-install.tar.gz</span></code> into GeoServer’s
<code class="docutils literal notranslate"><span class="pre">WEB-INF/lib</span></code> directory.</p>
<p>This distribution does not include the HBase client, Hadoop or Zookeeper JARs. These JARs can be installed
using the <code class="docutils literal notranslate"><span class="pre">bin/install-dependencies.sh</span></code> script included in the binary distribution. Before
running, set the version numbers in <code class="docutils literal notranslate"><span class="pre">conf/dependencies.sh</span></code> to match your target installation as needed.</p>
<p>The HBase data store requires the configuration file <code class="docutils literal notranslate"><span class="pre">hbase-site.xml</span></code> to be on the classpath. This can
be accomplished by placing the file in <code class="docutils literal notranslate"><span class="pre">geoserver/WEB-INF/classes</span></code> (you should make the directory if it
doesn’t exist).</p>
<p>The specific JARs needed for some common configurations are listed below:</p>
<div class="sphinx-tabs docutils container">
<div class="ui top attached tabular menu sphinx-menu docutils container">
<div class="active item sphinx-data-tab-3-0 docutils container">
<div class="docutils container">
HBase 2.2</div>
</div>
<div class="item sphinx-data-tab-3-1 docutils container">
<div class="docutils container">
HBase 1.4</div>
</div>
</div>
<div class="ui bottom attached sphinx-tab tab segment sphinx-data-tab-3-0 active docutils container">
<ul class="simple">
<li>commons-cli-1.2.jar</li>
<li>commons-configuration-1.6.jar</li>
<li>commons-io-2.5.jar</li>
<li>commons-logging-1.1.3.jar</li>
<li>hadoop-auth-2.8.5.jar</li>
<li>hadoop-client-2.8.5.jar</li>
<li>hadoop-common-2.8.5.jar</li>
<li>hadoop-hdfs-2.8.5.jar</li>
<li>hadoop-hdfs-client-2.8.5.jar</li>
<li>hadoop-mapreduce-client-core-2.8.5.jar</li>
<li>hbase-client-2.2.3.jar</li>
<li>hbase-common-2.2.3.jar</li>
<li>hbase-hadoop-compat-2.2.3.jar</li>
<li>hbase-mapreduce-2.2.3.jar</li>
<li>hbase-protocol-2.2.3.jar</li>
<li>hbase-protocol-shaded-2.2.3.jar</li>
<li>hbase-shaded-miscellaneous-2.2.1.jar</li>
<li>hbase-shaded-netty-2.2.1.jar</li>
<li>hbase-shaded-protobuf-2.2.1.jar</li>
<li>htrace-core4-4.1.0-incubating.jar</li>
<li>metrics-core-2.2.0.jar</li>
<li>metrics-core-3.2.6.jar</li>
<li>netty-3.6.2.Final.jar</li>
<li>netty-all-4.1.48.Final.jar</li>
<li>protobuf-java-2.5.0.jar</li>
<li>zookeeper-3.4.14.jar</li>
</ul>
</div>
<div class="ui bottom attached sphinx-tab tab segment sphinx-data-tab-3-1 docutils container">
<ul class="simple">
<li>commons-cli-1.2.jar</li>
<li>commons-configuration-1.6.jar</li>
<li>commons-io-2.5.jar</li>
<li>commons-logging-1.1.3.jar</li>
<li>hadoop-auth-2.8.5.jar</li>
<li>hadoop-client-2.8.5.jar</li>
<li>hadoop-common-2.8.5.jar</li>
<li>hadoop-hdfs-2.8.5.jar</li>
<li>hadoop-hdfs-client-2.8.5.jar</li>
<li>hadoop-mapreduce-client-core-2.8.5.jar</li>
<li>hbase-client-1.4.13.jar</li>
<li>hbase-common-1.4.13.jar</li>
<li>hbase-hadoop-compat-1.4.13.jar</li>
<li>hbase-protocol-1.4.13.jar</li>
<li>htrace-core-3.1.0-incubating.jar</li>
<li>htrace-core4-4.1.0-incubating.jar</li>
<li>metrics-core-2.2.0.jar</li>
<li>netty-3.6.2.Final.jar</li>
<li>netty-all-4.1.48.Final.jar</li>
<li>protobuf-java-2.5.0.jar</li>
<li>zookeeper-3.4.14.jar</li>
</ul>
</div>
</div>
<p>Restart GeoServer after the JARs are installed.</p>
</div>
<div class="section" id="connecting-to-external-hbase-clusters-backed-by-s3">
<h2>14.1.6. Connecting to External HBase Clusters Backed By S3<a class="headerlink" href="#connecting-to-external-hbase-clusters-backed-by-s3" title="Permalink to this headline">¶</a></h2>
<p>To use a EMR cluster to connect to an existing, external HBase Cluster first follow the above instructions to setup the
new cluster and install GeoMesa.</p>
<p>The next step is to obtain the <code class="docutils literal notranslate"><span class="pre">hbase-site.xml</span></code> for the external HBase Cluster, copy to the new EMR cluster and
copy it into <code class="docutils literal notranslate"><span class="pre">${GEOMESA_HBASE_HOME}/conf</span></code>. At this point you may run the <code class="docutils literal notranslate"><span class="pre">geomesa-hbase</span></code> command line tools.
In order to run Spark or Map/Reduce jobs, ensure that <code class="docutils literal notranslate"><span class="pre">hbase-site.xml</span></code> is zipped into a JAR, as described above.</p>
</div>
<div class="section" id="configuring-hbase-on-azure-hdinsight">
<h2>14.1.7. Configuring HBase on Azure HDInsight<a class="headerlink" href="#configuring-hbase-on-azure-hdinsight" title="Permalink to this headline">¶</a></h2>
<p>HDInsight generally creates <code class="docutils literal notranslate"><span class="pre">HBASE_HOME</span></code> in HDFS under the path <code class="docutils literal notranslate"><span class="pre">/hbase</span></code>. In order to make the GeoMesa
coprocessors and filters available to the region servers, use the <code class="docutils literal notranslate"><span class="pre">hadoop</span></code> filesystem command to put
the GeoMesa JAR there:</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>hadoop fs -mkdir /hbase/lib
hadoop fs -put geomesa-hbase-distributed-runtime-hbase1-<span class="nv">$VERSION</span>.jar /hbase/lib/
</pre></div>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="coprocessor_install.html" class="btn btn-neutral float-right" title="14.2. Manual Coprocessors Registration" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="index.html" class="btn btn-neutral" title="14. HBase Data Store" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>

    </p>
  </div>

<div role="contentinfo">
  <p>
    &copy; Copyright 2013-2021 <a href="https://www.ccri.com/">Commonwealth Computer Research, Inc.</a>
    <br/>
    Licensed under the <a href="http://www.opensource.org/licenses/apache2.0.php">Apache License, Version 2.0</a>
  </p>
</div>

<div role="contentinfo">
  <p>
    Built with <a href="http://sphinx-doc.org/">Sphinx</a>
    using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>
    
    - view <a href="../../_sources/user/hbase/install.rst.txt" rel="nofollow">page source</a>
    
  </p>
</div>



</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
        <script type="text/javascript" src="../../_static/jquery.js"></script>
        <script type="text/javascript" src="../../_static/underscore.js"></script>
        <script type="text/javascript" src="../../_static/doctools.js"></script>
        <script type="text/javascript" src="../../_static/sphinx_tabs/tabs.js"></script>
        <script type="text/javascript" src="../../_static/sphinx_tabs/semantic-ui-2.2.10/tab.min.js"></script>
    

  

  <script type="text/javascript" src="../../_static/js/theme.js"></script>

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>
 

<!-- analytics -->
<script>
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
ga('create', 'UA-53087457-1', 'auto');
ga('send', 'pageview');
</script>




</body>
</html>