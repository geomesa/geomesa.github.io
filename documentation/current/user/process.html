

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>12. GeoMesa Processes &mdash; GeoMesa 3.0.0-SNAPSHOT Manuals</title>
  

  
  
  
  
    <link rel="canonical" href="https://www.geomesa.org/documentation/user/process.html"/>
  

  

  
  
    

  

  <link rel="stylesheet" href="../_static/css/theme_custom.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:400,700" type="text/css" />
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="13. HBase Data Store" href="hbase/index.html" />
    <link rel="prev" title="11. GeoMesa NiFi Bundle" href="nifi.html" /> 

  
  <script src="../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../index.html" class="icon icon-home"> GeoMesa
          

          
          </a>

          
            
            
              <div class="version">
                3.0.0-SNAPSHOT
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="index.html">User Manual</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="introduction.html">1. Introduction</a></li>
<li class="toctree-l2"><a class="reference internal" href="download.html">2. Versions and Downloads</a></li>
<li class="toctree-l2"><a class="reference internal" href="install.html">3. Installation</a></li>
<li class="toctree-l2"><a class="reference internal" href="getting_started.html">4. Getting Started</a></li>
<li class="toctree-l2"><a class="reference internal" href="architecture.html">5. Architecture Overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="datastores/index.html">6. GeoMesa Data Stores</a></li>
<li class="toctree-l2"><a class="reference internal" href="cli/index.html">7. Command-Line Tools</a></li>
<li class="toctree-l2"><a class="reference internal" href="convert/index.html">8. GeoMesa Convert</a></li>
<li class="toctree-l2"><a class="reference internal" href="geoserver.html">9. GeoServer Plugins</a></li>
<li class="toctree-l2"><a class="reference internal" href="spark/index.html">10. GeoMesa Spark</a></li>
<li class="toctree-l2"><a class="reference internal" href="nifi.html">11. GeoMesa NiFi Bundle</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">12. GeoMesa Processes</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#installation">12.1. Installation</a></li>
<li class="toctree-l3"><a class="reference internal" href="#processors">12.2. Processors</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#arrowconversionprocess">12.2.1. ArrowConversionProcess</a></li>
<li class="toctree-l4"><a class="reference internal" href="#binconversionprocess">12.2.2. BinConversionProcess</a></li>
<li class="toctree-l4"><a class="reference internal" href="#densityprocess">12.2.3. DensityProcess</a></li>
<li class="toctree-l4"><a class="reference internal" href="#dateoffsetprocess">12.2.4. DateOffsetProcess</a></li>
<li class="toctree-l4"><a class="reference internal" href="#hashattributeprocess">12.2.5. HashAttributeProcess</a></li>
<li class="toctree-l4"><a class="reference internal" href="#hashattributecolorprocess">12.2.6. HashAttributeColorProcess</a></li>
<li class="toctree-l4"><a class="reference internal" href="#joinprocess">12.2.7. JoinProcess</a></li>
<li class="toctree-l4"><a class="reference internal" href="#knearestneighborsearchprocess">12.2.8. KNearestNeighborSearchProcess</a></li>
<li class="toctree-l4"><a class="reference internal" href="#point2pointprocess">12.2.9. Point2PointProcess</a></li>
<li class="toctree-l4"><a class="reference internal" href="#proximitysearchprocess">12.2.10. ProximitySearchProcess</a></li>
<li class="toctree-l4"><a class="reference internal" href="#routesearchprocess">12.2.11. RouteSearchProcess</a></li>
<li class="toctree-l4"><a class="reference internal" href="#samplingprocess">12.2.12. SamplingProcess</a></li>
<li class="toctree-l4"><a class="reference internal" href="#statsprocess">12.2.13. StatsProcess</a></li>
<li class="toctree-l4"><a class="reference internal" href="#tracklabelprocess">12.2.14. TrackLabelProcess</a></li>
<li class="toctree-l4"><a class="reference internal" href="#tubeselectprocess">12.2.15. TubeSelectProcess</a></li>
<li class="toctree-l4"><a class="reference internal" href="#queryprocess">12.2.16. QueryProcess</a></li>
<li class="toctree-l4"><a class="reference internal" href="#uniqueprocess">12.2.17. UniqueProcess</a></li>
<li class="toctree-l4"><a class="reference internal" href="#chaining-processes">12.2.18. Chaining Processes</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="hbase/index.html">13. HBase Data Store</a></li>
<li class="toctree-l2"><a class="reference internal" href="accumulo/index.html">14. Accumulo Data Store</a></li>
<li class="toctree-l2"><a class="reference internal" href="cassandra/index.html">15. Cassandra Data Store</a></li>
<li class="toctree-l2"><a class="reference internal" href="bigtable/index.html">16. Bigtable Data Store</a></li>
<li class="toctree-l2"><a class="reference internal" href="kafka/index.html">17. Kafka Data Store</a></li>
<li class="toctree-l2"><a class="reference internal" href="redis/index.html">18. Redis Data Store</a></li>
<li class="toctree-l2"><a class="reference internal" href="filesystem/index.html">19. FileSystem Data Store</a></li>
<li class="toctree-l2"><a class="reference internal" href="kudu/index.html">20. Kudu Data Store</a></li>
<li class="toctree-l2"><a class="reference internal" href="lambda/index.html">21. Lambda Data Store</a></li>
<li class="toctree-l2"><a class="reference internal" href="ds_views.html">22. Combined Data Store Views</a></li>
<li class="toctree-l2"><a class="reference internal" href="geojson.html">23. GeoMesa GeoJSON</a></li>
<li class="toctree-l2"><a class="reference internal" href="blobstore.html">24. GeoMesa Blob Store</a></li>
<li class="toctree-l2"><a class="reference internal" href="stream.html">25. GeoMesa Stream Processing</a></li>
<li class="toctree-l2"><a class="reference internal" href="upgrade.html">26. Upgrade Guide</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#appendix">Appendix</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../developer/index.html">Developer Manual</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tutorials/index.html">Tutorials</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">GeoMesa</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html">Docs</a> &raquo;</li>
        
          <li><a href="index.html">User Manual</a> &raquo;</li>
        
      <li>12. GeoMesa Processes</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="geomesa-processes">
<span id="geomesa-process"></span><h1>12. GeoMesa Processes<a class="headerlink" href="#geomesa-processes" title="Permalink to this headline">¶</a></h1>
<p>The following analytic processes are available and optimized on GeoMesa
data stores, found in the <code class="docutils literal notranslate"><span class="pre">geomesa-process</span></code> module:</p>
<ul class="simple">
<li><a class="reference internal" href="#arrow-conversion-process"><span class="std std-ref">ArrowConversionProcess</span></a> - encodes simple features in the <a class="reference external" href="https://arrow.apache.org/">Apache Arrow</a> format</li>
<li><a class="reference internal" href="#bin-conversion-process"><span class="std std-ref">BinConversionProcess</span></a> - encodes simple features in a minimized 16-byte format</li>
<li><a class="reference internal" href="#density-process"><span class="std std-ref">DensityProcess</span></a> - computes a density heatmap for a CQL query</li>
<li><a class="reference internal" href="#date-offset-process"><span class="std std-ref">DateOffsetProcess</span></a> - modifies the specified date field in a feature collection by an input time period.</li>
<li><a class="reference internal" href="#hash-process"><span class="std std-ref">HashAttributeProcess</span></a>/<a class="reference internal" href="#hash-color-process"><span class="std std-ref">HashAttributeColorProcess</span></a> - computes an additional ‘hash’ attribute which is useful for styling.</li>
<li><a class="reference internal" href="#join-process"><span class="std std-ref">JoinProcess</span></a> - merges features from two different schemas using a common attribute field</li>
<li><a class="reference internal" href="#knn-process"><span class="std std-ref">KNearestNeighborSearchProcess</span></a> - performs a KNN search</li>
<li><a class="reference internal" href="#point2point-process"><span class="std std-ref">Point2PointProcess</span></a> - aggregates a collection of points into a collection of line segments</li>
<li><a class="reference internal" href="#proximity-process"><span class="std std-ref">ProximitySearchProcess</span></a> - searches near a set input features</li>
<li><a class="reference internal" href="#query-process"><span class="std std-ref">QueryProcess</span></a> - performs a Geomesa query, useful as input for nested requests</li>
<li><a class="reference internal" href="#routesearch-process"><span class="std std-ref">RouteSearchProcess</span></a> - matches features traveling along a given route</li>
<li><a class="reference internal" href="#sampling-process"><span class="std std-ref">SamplingProcess</span></a> - uses statistical sampling to reduces the features returned by a query</li>
<li><a class="reference internal" href="#statsiterator-process"><span class="std std-ref">StatsProcess</span></a> - returns various stats for a CQL query</li>
<li><a class="reference internal" href="#tracklabel-process"><span class="std std-ref">TrackLabelProcess</span></a> - selects the last feature in a track based on a common attribute, useful for styling</li>
<li><a class="reference internal" href="#tubeselect-process"><span class="std std-ref">TubeSelectProcess</span></a> - performs a correlated search across time and space</li>
<li><a class="reference internal" href="#unique-process"><span class="std std-ref">UniqueProcess</span></a> - identifies unique values for an attribute</li>
</ul>
<p>Where possible, the calculations are pushed out to a distributed system for faster performance. Currently
this has been implemented in the Accumulo data store and partially in the HBase data store. Other
back-ends can still be used, but local processing will be used.</p>
<div class="section" id="installation">
<h2>12.1. Installation<a class="headerlink" href="#installation" title="Permalink to this headline">¶</a></h2>
<p>While they can be used independently, the common use case is to use them
with GeoServer. To deploy them in GeoServer requires:</p>
<ol class="arabic simple">
<li>a GeoMesa datastore plugin</li>
<li>the GeoServer WPS extension</li>
<li>the <code class="docutils literal notranslate"><span class="pre">geomesa-process-wps_2.11-&lt;version&gt;.jar</span></code> deployed in <code class="docutils literal notranslate"><span class="pre">${GEOSERVER_HOME}/WEB-INF/lib</span></code></li>
</ol>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Some processes also require custom output formats, available separately in the GPL licensed
<a class="reference external" href="https://github.com/geomesa/geomesa-geoserver">GeoMesa GeoServer WFS module</a></p>
</div>
<p>The GeoMesa datastore plugin and GeoMesa process jars are both
available in the binary distribution in the gs-plugins directory.</p>
<p>Documentation about the GeoServer WPS Extension (including download
instructions) is available <a class="reference external" href="http://docs.geoserver.org/stable/en/user/services/wps/install.html">here</a>.</p>
<p>To verify the install, start GeoServer, and you should see a line like
<code class="docutils literal notranslate"><span class="pre">INFO</span> <span class="pre">[geoserver.wps]</span> <span class="pre">-</span> <span class="pre">Found</span> <span class="pre">15</span> <span class="pre">bindable</span> <span class="pre">processes</span> <span class="pre">in</span> <span class="pre">GeoMesa</span> <span class="pre">Process</span> <span class="pre">Factory</span></code>.</p>
<p>In the GeoServer web UI, click ‘Demos’ and then ‘WPS request builder’.
From the request builder, under ‘Choose Process’, click on any of the
‘geomesa:’ options to build up example requests and in some cases see
results.</p>
</div>
<div class="section" id="processors">
<h2>12.2. Processors<a class="headerlink" href="#processors" title="Permalink to this headline">¶</a></h2>
<div class="section" id="arrowconversionprocess">
<span id="arrow-conversion-process"></span><h3>12.2.1. ArrowConversionProcess<a class="headerlink" href="#arrowconversionprocess" title="Permalink to this headline">¶</a></h3>
<p>The <code class="docutils literal notranslate"><span class="pre">ArrowConversionProcess</span></code> converts an input feature collection to arrow format.</p>
<table border="1" class="docutils">
<colgroup>
<col width="19%" />
<col width="81%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Parameters</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>features</td>
<td>Input feature collection to encode.</td>
</tr>
<tr class="row-odd"><td>includeFids</td>
<td>Include feature IDs in arrow file.</td>
</tr>
<tr class="row-even"><td>dictionaryFields</td>
<td>Attributes to dictionary encode.</td>
</tr>
<tr class="row-odd"><td>useCachedDictionaries</td>
<td>Use cached top-k stats (if available), or run a dynamic stats query to build dictionaries.</td>
</tr>
<tr class="row-even"><td>sortField</td>
<td>Attribute to sort by.</td>
</tr>
<tr class="row-odd"><td>sortReverse</td>
<td>Reverse the default sort order.</td>
</tr>
<tr class="row-even"><td>batchSize</td>
<td>Number of features to include in each record batch.</td>
</tr>
<tr class="row-odd"><td>doublePass</td>
<td>Build dictionaries first, then query results in a separate scan.</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="binconversionprocess">
<span id="bin-conversion-process"></span><h3>12.2.2. BinConversionProcess<a class="headerlink" href="#binconversionprocess" title="Permalink to this headline">¶</a></h3>
<p>The <code class="docutils literal notranslate"><span class="pre">BinConversionProcess</span></code> converts an input feature collection to BIN format.</p>
<table border="1" class="docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Parameters</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>features</td>
<td>Input feature collection to query.</td>
</tr>
<tr class="row-odd"><td>track</td>
<td>Track field to use for BIN records.</td>
</tr>
<tr class="row-even"><td>geom</td>
<td>Geometry field to use for BIN records.</td>
</tr>
<tr class="row-odd"><td>dtg</td>
<td>Use cached top-k stats (if available), or run a dynamic stats query to build dictionaries.</td>
</tr>
<tr class="row-even"><td>label</td>
<td>Attribute to sort by.</td>
</tr>
<tr class="row-odd"><td>axisOrder</td>
<td>Reverse the default sort order.</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="densityprocess">
<span id="density-process"></span><h3>12.2.3. DensityProcess<a class="headerlink" href="#densityprocess" title="Permalink to this headline">¶</a></h3>
<p>The <code class="docutils literal notranslate"><span class="pre">DensityProcess</span></code> computes a density map over a set of features stored in GeoMesa. A raster image is returned.</p>
<table border="1" class="docutils">
<colgroup>
<col width="13%" />
<col width="88%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Parameters</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>data</td>
<td>Input Simple Feature Collection to run the density process over.</td>
</tr>
<tr class="row-odd"><td>radiusPixels</td>
<td>Radius of the density kernel in pixels. Controls the “fuzziness” of the density map.</td>
</tr>
<tr class="row-even"><td>weightAttr</td>
<td>Name of the attribute to use for data point weights.</td>
</tr>
<tr class="row-odd"><td>outputBBOX</td>
<td>Bounding box and CRS of the output raster.</td>
</tr>
<tr class="row-even"><td>outputWidth</td>
<td>Width of the output raster in pixels.</td>
</tr>
<tr class="row-odd"><td>outputHeight</td>
<td>Height of the output raster in pixels.</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="dateoffsetprocess">
<span id="date-offset-process"></span><h3>12.2.4. DateOffsetProcess<a class="headerlink" href="#dateoffsetprocess" title="Permalink to this headline">¶</a></h3>
<p>The <code class="docutils literal notranslate"><span class="pre">DateOffsetProcess</span></code> modifies the specified date field in a feature collection by an input time period.</p>
<table border="1" class="docutils">
<colgroup>
<col width="29%" />
<col width="71%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Parameters</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>data</td>
<td>Input features.</td>
</tr>
<tr class="row-odd"><td>dateField</td>
<td>The date attribute to modify.</td>
</tr>
<tr class="row-even"><td>timeOffset</td>
<td>Time offset (e.g. P1D).</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="hashattributeprocess">
<span id="hash-process"></span><h3>12.2.5. HashAttributeProcess<a class="headerlink" href="#hashattributeprocess" title="Permalink to this headline">¶</a></h3>
<p>The <code class="docutils literal notranslate"><span class="pre">HashAttributeProcess</span></code> adds an attribute to each SimpleFeature that hashes the configured attribute modulo the configured param.</p>
<table border="1" class="docutils">
<colgroup>
<col width="16%" />
<col width="84%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Parameters</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>data</td>
<td>Input Simple Feature Collection to run the hash process over.</td>
</tr>
<tr class="row-odd"><td>attribute</td>
<td>The attribute to hash on.</td>
</tr>
<tr class="row-even"><td>modulo</td>
<td>The divisor.</td>
</tr>
</tbody>
</table>
<div class="section" id="hash-example-xml">
<span id="hashexamplexml"></span><h4>12.2.5.1. Hash example (XML)<a class="headerlink" href="#hash-example-xml" title="Permalink to this headline">¶</a></h4>
<p><a class="reference download internal" download="" href="../_downloads/302583b7a477a19d5d7b851aa048cb29/HashProcess_wps.xml"><code class="xref download docutils literal notranslate"><span class="pre">HashAttributeProcess_wps.xml</span></code></a> is a geoserver WPS call to the GeoMesa HashAttributeProcess. It can be run with the following curl call:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>curl -v -u admin:geoserver -H <span class="s2">&quot;Content-Type: text/xml&quot;</span> -d@HashAttributeProcess_wps.xml localhost:8080/geoserver/wps
</pre></div>
</div>
<p>The query should generate results that look like <a class="reference download internal" download="" href="../_downloads/e70ac3114f632ebc4a9af71bdb2367e3/HashProcess_results.json"><code class="xref download docutils literal notranslate"><span class="pre">this</span></code></a>:</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="nt">&quot;id&quot;</span> <span class="p">:</span> <span class="s2">&quot;d0971735-f8fe-47ed-a7cd-2e12280e8ac1&quot;</span><span class="p">,</span>
    <span class="nt">&quot;geometry&quot;</span> <span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;coordinates&quot;</span> <span class="p">:</span> <span class="p">[</span>
            <span class="mf">151.1554</span><span class="p">,</span>
            <span class="mf">18.2014</span>
        <span class="p">],</span>
        <span class="nt">&quot;type&quot;</span> <span class="p">:</span> <span class="s2">&quot;Point&quot;</span>
    <span class="p">},</span>
    <span class="nt">&quot;type&quot;</span> <span class="p">:</span> <span class="s2">&quot;Feature&quot;</span><span class="p">,</span>
    <span class="nt">&quot;properties&quot;</span> <span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;Vitesse&quot;</span> <span class="p">:</span> <span class="mi">614</span><span class="p">,</span>
        <span class="nt">&quot;Heading&quot;</span> <span class="p">:</span> <span class="mi">244</span><span class="p">,</span>
        <span class="nt">&quot;Date&quot;</span> <span class="p">:</span> <span class="s2">&quot;2016-05-02T18:00:44.030+0000&quot;</span><span class="p">,</span>
        <span class="nt">&quot;hash&quot;</span> <span class="p">:</span> <span class="mi">237</span><span class="p">,</span>
        <span class="nt">&quot;CabId&quot;</span> <span class="p">:</span> <span class="mi">150002</span><span class="p">,</span>
     <span class="p">}</span>
 <span class="p">}</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="hashattributecolorprocess">
<span id="hash-color-process"></span><h3>12.2.6. HashAttributeColorProcess<a class="headerlink" href="#hashattributecolorprocess" title="Permalink to this headline">¶</a></h3>
<p>The <code class="docutils literal notranslate"><span class="pre">HashAttributeColorProcess</span></code> adds an attribute to each SimpleFeature that hashes the configured attribute modulo the configured param and emit a color.</p>
<table border="1" class="docutils">
<colgroup>
<col width="16%" />
<col width="84%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Parameters</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>data</td>
<td>Input Simple Feature Collection to run the hash process over.</td>
</tr>
<tr class="row-odd"><td>attribute</td>
<td>The attribute to hash on.</td>
</tr>
<tr class="row-even"><td>modulo</td>
<td>The divisor.</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="joinprocess">
<span id="join-process"></span><h3>12.2.7. JoinProcess<a class="headerlink" href="#joinprocess" title="Permalink to this headline">¶</a></h3>
<p>The <code class="docutils literal notranslate"><span class="pre">JoinProcess</span></code> queries a feature type based on attributes from a second feature type.</p>
<table border="1" class="docutils">
<colgroup>
<col width="12%" />
<col width="88%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Parameters</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>primary</td>
<td>Primary feature collection being queried.</td>
</tr>
<tr class="row-odd"><td>secondary</td>
<td>Secondary feature collection to be joined.</td>
</tr>
<tr class="row-even"><td>joinAttribute</td>
<td>Attribute field to join on.</td>
</tr>
<tr class="row-odd"><td>joinFilter</td>
<td>Additional filter to apply to joined features.</td>
</tr>
<tr class="row-even"><td>attributes</td>
<td>Attributes to return. Attribute names should be qualified with the schema name, e.g. foo.bar.</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="knearestneighborsearchprocess">
<span id="knn-process"></span><h3>12.2.8. KNearestNeighborSearchProcess<a class="headerlink" href="#knearestneighborsearchprocess" title="Permalink to this headline">¶</a></h3>
<p>The <code class="docutils literal notranslate"><span class="pre">KNearestNeighborSearchProcess</span></code> performs a K-nearest-neighbor search on a feature collection using a second
feature collection as input. It returns <code class="docutils literal notranslate"><span class="pre">k</span></code> neighbors for each point in the input data set. Note that if a feature
is the nearest neighbor of multiple points in the input data set, it is returned only once.</p>
<table border="1" class="docutils">
<colgroup>
<col width="14%" />
<col width="86%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Parameter</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>inputFeatures</td>
<td>Input feature collection. The geometries of the features defines the KNN search.</td>
</tr>
<tr class="row-odd"><td>dataFeatures</td>
<td>The data set to query for neighbors.</td>
</tr>
<tr class="row-even"><td>numDesired</td>
<td><code class="docutils literal notranslate"><span class="pre">k</span></code>, number of nearest neighbors to return.</td>
</tr>
<tr class="row-odd"><td>estimatedDistance</td>
<td>Estimate of the distance in meters for the <code class="docutils literal notranslate"><span class="pre">k</span></code>-th nearest neighbor, used for the initial query window.</td>
</tr>
<tr class="row-even"><td>maxSearchDistance</td>
<td>Maximum search distance in meters, used to prevent runaway queries of the entire data set.</td>
</tr>
</tbody>
</table>
<div class="section" id="k-nearest-neighbor-example-xml">
<span id="knnexamplexml"></span><h4>12.2.8.1. K-Nearest-Neighbor Example (XML)<a class="headerlink" href="#k-nearest-neighbor-example-xml" title="Permalink to this headline">¶</a></h4>
<p><a class="reference download internal" download="" href="../_downloads/440e3d87173d0ff2e8ed155c6dbb4e75/KNNProcess_wps.xml"><code class="xref download docutils literal notranslate"><span class="pre">KNNProcess_wps.xml</span></code></a> is a geoserver WPS call to the GeoMesa
KNearestNeighborSearchProcess. In this example, it is chained with a Query process (see <a class="reference internal" href="#chaining-processes"><span class="std std-ref">Chaining Processes</span></a>),
in order to avoid returning the query features as data. It can be run with the following curl call:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>curl -v -u admin:geoserver -H <span class="s2">&quot;Content-Type: text/xml&quot;</span> -d@KNNProcess_wps.xml localhost:8080/geoserver/wps
</pre></div>
</div>
</div>
</div>
<div class="section" id="point2pointprocess">
<span id="point2point-process"></span><h3>12.2.9. Point2PointProcess<a class="headerlink" href="#point2pointprocess" title="Permalink to this headline">¶</a></h3>
<p>The <code class="docutils literal notranslate"><span class="pre">Point2PointProcess</span></code> aggregates a collection of points into a collection of line segments.</p>
<table border="1" class="docutils">
<colgroup>
<col width="30%" />
<col width="70%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Parameters</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>data</td>
<td>Input feature collection.</td>
</tr>
<tr class="row-odd"><td>groupingField</td>
<td>Field on which to group.</td>
</tr>
<tr class="row-even"><td>sortField</td>
<td>Field on which to sort (must be Date type).</td>
</tr>
<tr class="row-odd"><td>minimumNumberOfPoints</td>
<td>Minimum number of points.</td>
</tr>
<tr class="row-even"><td>breakOnDay</td>
<td>Break connections on day marks.</td>
</tr>
<tr class="row-odd"><td>filterSingularPoints</td>
<td>Filter out segments that fall on the same point.</td>
</tr>
</tbody>
</table>
<div class="section" id="point2point-example-xml">
<span id="point2pointexamplexml"></span><h4>12.2.9.1. Point2Point example (XML)<a class="headerlink" href="#point2point-example-xml" title="Permalink to this headline">¶</a></h4>
<p><a class="reference download internal" download="" href="../_downloads/eefdb6d239336c783b8a5bdf02559e98/Point2PointProcess_wps.xml"><code class="xref download docutils literal notranslate"><span class="pre">Point2PointProcess_wps.xml</span></code></a> is a geoserver WPS call to the GeoMesa Point2PointProcess. It can be run with the following curl call:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>curl -v -u admin:geoserver -H <span class="s2">&quot;Content-Type: text/xml&quot;</span> -d@Point2PointProcess_wps.xml localhost:8080/geoserver/wps
</pre></div>
</div>
<p id="point2pointexampleresults">The query should generate results that look like <a class="reference download internal" download="" href="../_downloads/85383666a81c4f965de7f24dc6083fc4/Point2PointProcess_results.json"><code class="xref download docutils literal notranslate"><span class="pre">this</span></code></a>:</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="nt">&quot;id&quot;</span> <span class="p">:</span> <span class="s2">&quot;367152240-4&quot;</span><span class="p">,</span>
    <span class="nt">&quot;geometry&quot;</span> <span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;coordinates&quot;</span> <span class="p">:</span> <span class="p">[</span>
            <span class="p">[</span>
                <span class="mf">-13.4041</span><span class="p">,</span>
                <span class="mf">37.8067</span>
            <span class="p">],</span>
            <span class="p">[</span>
                <span class="mf">-13.4041</span><span class="p">,</span>
                <span class="mf">37.8068</span>
            <span class="p">]</span>
        <span class="p">],</span>
        <span class="nt">&quot;type&quot;</span> <span class="p">:</span> <span class="s2">&quot;LineString&quot;</span>
    <span class="p">},</span>
    <span class="nt">&quot;type&quot;</span> <span class="p">:</span> <span class="s2">&quot;Feature&quot;</span><span class="p">,</span>
    <span class="nt">&quot;properties&quot;</span> <span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;Date_end&quot;</span> <span class="p">:</span> <span class="s2">&quot;2018-02-05T14:54:36.598+0000&quot;</span><span class="p">,</span>
        <span class="nt">&quot;CabId&quot;</span> <span class="p">:</span> <span class="mi">367152240</span><span class="p">,</span>
        <span class="nt">&quot;Date_start&quot;</span> <span class="p">:</span> <span class="s2">&quot;2018-02-05T14:53:58.078+0000&quot;</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="proximitysearchprocess">
<span id="proximity-process"></span><h3>12.2.10. ProximitySearchProcess<a class="headerlink" href="#proximitysearchprocess" title="Permalink to this headline">¶</a></h3>
<p>The <code class="docutils literal notranslate"><span class="pre">ProximitySearchProcess</span></code> performs a proximity search on a Geomesa feature collection using another feature collection as input.</p>
<table border="1" class="docutils">
<colgroup>
<col width="26%" />
<col width="74%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Parameters</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>inputFeatures</td>
<td>Input feature collection that defines the proximity search.</td>
</tr>
<tr class="row-odd"><td>dataFeatures</td>
<td>The data set to query for matching features.</td>
</tr>
<tr class="row-even"><td>bufferDistance</td>
<td>Buffer size in meters.</td>
</tr>
</tbody>
</table>
<div class="section" id="proximity-search-example-xml">
<span id="proximityexamplexml"></span><h4>12.2.10.1. Proximity search example (XML)<a class="headerlink" href="#proximity-search-example-xml" title="Permalink to this headline">¶</a></h4>
<p><a class="reference download internal" download="" href="../_downloads/d19af53f28cd6533c331203ae7268679/ProximitySearchProcess_wps.xml"><code class="xref download docutils literal notranslate"><span class="pre">ProximitySearchProcess_wps.xml</span></code></a> is a geoserver WPS call to the GeoMesa ProximitySearchProcess. It can be run with the following curl call:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>curl -v -u admin:geoserver -H <span class="s2">&quot;Content-Type: text/xml&quot;</span> -d@ProximitySearchProcess_wps.xml localhost:8080/geoserver/wps
</pre></div>
</div>
</div>
</div>
<div class="section" id="routesearchprocess">
<span id="routesearch-process"></span><h3>12.2.11. RouteSearchProcess<a class="headerlink" href="#routesearchprocess" title="Permalink to this headline">¶</a></h3>
<p>The <code class="docutils literal notranslate"><span class="pre">RouteSearchProcess</span></code> finds features around a route that are heading along the route and not just crossing over it.</p>
<table border="1" class="docutils">
<colgroup>
<col width="11%" />
<col width="89%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Parameters</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>features</td>
<td>Input feature collection to query.</td>
</tr>
<tr class="row-odd"><td>routes</td>
<td>Routes to search along. Features must have a geometry of LineString.</td>
</tr>
<tr class="row-even"><td>bufferSize</td>
<td>Buffer size (in meters) to search around the route.</td>
</tr>
<tr class="row-odd"><td>headingThreshold</td>
<td>Threshold for comparing headings, in degrees.</td>
</tr>
<tr class="row-even"><td>routeGeomField</td>
<td>Attribute that will be examined for routes to match. Must be a LineString.</td>
</tr>
<tr class="row-odd"><td>geomField</td>
<td>Attribute that will be examined for route matching.</td>
</tr>
<tr class="row-even"><td>bidirectional</td>
<td>Consider the direction of the route or just the path of the route.</td>
</tr>
<tr class="row-odd"><td>headingField</td>
<td>Attribute that will be examined for heading in the input features. If not provided, input features geometries must be LineStrings.</td>
</tr>
</tbody>
</table>
<div class="section" id="route-search-example-xml">
<span id="routesearchexamplexml"></span><h4>12.2.11.1. Route search example (XML)<a class="headerlink" href="#route-search-example-xml" title="Permalink to this headline">¶</a></h4>
<p><a class="reference download internal" download="" href="../_downloads/ccdf8cf4c356045aed569c3b1d40d508/RouteSearchProcess_wps.xml"><code class="xref download docutils literal notranslate"><span class="pre">RouteSearchProcess_wps.xml</span></code></a> is a geoserver WPS call to the GeoMesa RouteSearchProcess. It can be run with the following curl call:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>curl -v -u admin:geoserver -H <span class="s2">&quot;Content-Type: text/xml&quot;</span> -d@RouteSearchProcess_wps.xml localhost:8080/geoserver/wps
</pre></div>
</div>
</div>
</div>
<div class="section" id="samplingprocess">
<span id="sampling-process"></span><h3>12.2.12. SamplingProcess<a class="headerlink" href="#samplingprocess" title="Permalink to this headline">¶</a></h3>
<p>The <code class="docutils literal notranslate"><span class="pre">SamplingProcess</span></code> uses statistical sampling to reduces the features returned by a query.</p>
<table border="1" class="docutils">
<colgroup>
<col width="19%" />
<col width="81%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Parameters</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>data</td>
<td>Input features.</td>
</tr>
<tr class="row-odd"><td>samplePercent</td>
<td>Percent of features to return, between 0 and 1.</td>
</tr>
<tr class="row-even"><td>threadBy</td>
<td>Attribute field to link associated features for sampling.</td>
</tr>
</tbody>
</table>
<div class="section" id="sampling-example-xml">
<span id="samplingexamplexml"></span><h4>12.2.12.1. Sampling example (XML)<a class="headerlink" href="#sampling-example-xml" title="Permalink to this headline">¶</a></h4>
<p><a class="reference download internal" download="" href="../_downloads/f880bb0a1c10b43f4389983af286cf0f/SamplingProcess_wps.xml"><code class="xref download docutils literal notranslate"><span class="pre">SamplingProcess_wps.xml</span></code></a> is a geoserver WPS call to the GeoMesa SamplingProcess. It can be run with the following curl call:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>curl -v -u admin:geoserver -H <span class="s2">&quot;Content-Type: text/xml&quot;</span> -d@SamplingProcess_wps.xml localhost:8080/geoserver/wps
</pre></div>
</div>
</div>
</div>
<div class="section" id="statsprocess">
<span id="statsiterator-process"></span><h3>12.2.13. StatsProcess<a class="headerlink" href="#statsprocess" title="Permalink to this headline">¶</a></h3>
<p>The <code class="docutils literal notranslate"><span class="pre">StatsProcess</span></code> allows the running of statistics on a given feature set.</p>
<table border="1" class="docutils">
<colgroup>
<col width="8%" />
<col width="92%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Parameters</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>features</td>
<td>The feature set on which to query. Can be a raw text input, reference to a remote URL, a subquery or a vector layer.</td>
</tr>
<tr class="row-odd"><td>statString</td>
<td>Stat string indicating which stats to instantiate. More info here <a class="reference internal" href="#statstring"><span class="std std-ref">Stat Strings</span></a>.</td>
</tr>
<tr class="row-even"><td>encode</td>
<td>Return the values encoded as json. Must be <code class="docutils literal notranslate"><span class="pre">true</span></code> or <code class="docutils literal notranslate"><span class="pre">false</span></code>; empty values will not work.</td>
</tr>
<tr class="row-odd"><td>properties</td>
<td>The properties / transforms to apply before gathering stats.</td>
</tr>
</tbody>
</table>
<div class="section" id="stat-strings">
<span id="statstring"></span><h4>12.2.13.1. Stat Strings<a class="headerlink" href="#stat-strings" title="Permalink to this headline">¶</a></h4>
<p>Stat strings are a GeoMesa domain specific language (DSL) that allows the specification of stats for the iterators
to collect. The available stat function are listed below:</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Items marked with <code class="docutils literal notranslate"><span class="pre">*</span></code> are the name of an attribute, either in your sft or as the result of a transformation or projection.</p>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">A TimePeriod is defined as one of the following strings: “day”, “week”, “month”, “year”</p>
</div>
<table border="1" class="docutils">
<colgroup>
<col width="46%" />
<col width="15%" />
<col width="39%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Syntax</th>
<th class="head">Parameters</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td colspan="3">Count</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">Count()</span></code></td>
<td>&#160;</td>
<td>Counts the number of features.</td>
</tr>
<tr class="row-even"><td colspan="3">MinMax</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">MinMax(attribute)</span></code></td>
<td><ul class="first last simple">
<li>attribute*: String</li>
</ul>
</td>
<td>Finds the min and max values of the given attribute.</td>
</tr>
<tr class="row-even"><td colspan="3">GroupBy</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">GroupBy(attribute,stat)</span></code></td>
<td><ul class="first last simple">
<li>attribute*: String</li>
<li>stat: Stat String</li>
</ul>
</td>
<td>Groups stats by the given attribute and then runs
the given stat on each group. Any stat can be provided.</td>
</tr>
<tr class="row-even"><td colspan="3">Descriptive Stats</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">DescriptiveStats(attribute)</span></code></td>
<td><ul class="first last simple">
<li>attribute*: String</li>
</ul>
</td>
<td>Runs single pass stats on the given attribute
calculating stats describing the attribute such as:
count; min; max; mean; and population and sample
versions of variance, standard deviation, kurtosis,
excess kurtosis, covariance, and correlation.</td>
</tr>
<tr class="row-even"><td colspan="3">Enumeration</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">Enumeration(attribute)</span></code></td>
<td><ul class="first last simple">
<li>attribute*: String</li>
</ul>
</td>
<td>Enumerates the values in the give attribute and the
number of occurrences.</td>
</tr>
<tr class="row-even"><td colspan="3">TopK</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">TopK(attribute)</span></code></td>
<td><ul class="first last simple">
<li>attribute*: String</li>
</ul>
</td>
<td>TopK of the given attribute</td>
</tr>
<tr class="row-even"><td colspan="3">Histogram</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">Histogram(attribute,numBins,lower,upper)</span></code></td>
<td><ul class="first last simple">
<li>attribute*: String</li>
<li>numBins: Int</li>
<li>lower: Int</li>
<li>upper: Int</li>
</ul>
</td>
<td>Provides a histogram of the given attribute, binning
the results into a binned array using the numBins as
the number of bins and lower and upper as the bounds
of the binned array.</td>
</tr>
<tr class="row-even"><td colspan="3">Frequency</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">Frequency(attribute,dtg,period,precision)</span></code></td>
<td><ul class="first last simple">
<li>attribute*: String</li>
<li>dtg*: String</li>
<li>period: TimePeriod</li>
<li>precision: Int</li>
</ul>
</td>
<td>Estimates frequency counts at scale.</td>
</tr>
<tr class="row-even"><td colspan="3">z3Histogram</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">Z3Histogram(geom,dtg,period,length)</span></code></td>
<td><ul class="first last simple">
<li>geom*: String</li>
<li>dtg*: String</li>
<li>period: TimePeriod</li>
<li>length: Int</li>
</ul>
</td>
<td>Provides a histogram similar to <code class="docutils literal notranslate"><span class="pre">Histogram</span></code> but
treats the geometry and date attributes as a single
value.</td>
</tr>
<tr class="row-even"><td colspan="3">z3Frequency</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">Z3Frequency(geom,dtg,period,precision)</span></code></td>
<td><ul class="first last simple">
<li>geom*: String</li>
<li>dtg*: String</li>
<li>period: TimePeriod</li>
<li>precision: Int</li>
</ul>
</td>
<td>Provides a freqency estimate similar to <code class="docutils literal notranslate"><span class="pre">Frequency</span></code>
but treats the geometry and date attributes as a
single value.</td>
</tr>
<tr class="row-even"><td colspan="3">Iterator Stack</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">IteratorStackCount()</span></code></td>
<td>&#160;</td>
<td>IteratorStackCount keeps track of the number of times
Accumulo sets up an iterator stack as a result of a
query.</td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="section" id="tracklabelprocess">
<span id="tracklabel-process"></span><h3>12.2.14. TrackLabelProcess<a class="headerlink" href="#tracklabelprocess" title="Permalink to this headline">¶</a></h3>
<p>The <code class="docutils literal notranslate"><span class="pre">TrackLabelProcess</span></code> returns a single feature that is the head of a track of related simple features.</p>
<table border="1" class="docutils">
<colgroup>
<col width="18%" />
<col width="82%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Parameters</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>data</td>
<td>Input features.</td>
</tr>
<tr class="row-odd"><td>track</td>
<td>Track attribute to use for grouping features.</td>
</tr>
<tr class="row-even"><td>dtg</td>
<td>Date attribute to use for ordering tracks.</td>
</tr>
</tbody>
</table>
<div class="section" id="tracklabel-example-xml">
<span id="tracklabelexamplexml"></span><h4>12.2.14.1. TrackLabel example (XML)<a class="headerlink" href="#tracklabel-example-xml" title="Permalink to this headline">¶</a></h4>
<p><a class="reference download internal" download="" href="../_downloads/a4c61a1fb91db5de9ca511ee141bdcb1/TrackLabelProcess_wps.xml"><code class="xref download docutils literal notranslate"><span class="pre">TrackLabelProcess_wps.xml</span></code></a> is a geoserver WPS call to the GeoMesa TrackLabelProcess. It can be run with the following curl call:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>curl -v -u admin:geoserver -H <span class="s2">&quot;Content-Type: text/xml&quot;</span> -d@TrackLabelProcess_wps.xml localhost:8080/geoserver/wps
</pre></div>
</div>
</div>
</div>
<div class="section" id="tubeselectprocess">
<span id="tubeselect-process"></span><h3>12.2.15. TubeSelectProcess<a class="headerlink" href="#tubeselectprocess" title="Permalink to this headline">¶</a></h3>
<p>The <code class="docutils literal notranslate"><span class="pre">TubeSelectProcess</span></code> performs a tube select on a Geomesa feature collection based on another feature collection. To get more informations on <code class="docutils literal notranslate"><span class="pre">TubeSelectProcess</span></code> and how to use it, you can read <a class="reference external" href="http://www.geomesa.org/documentation/tutorials/geomesa-tubeselect.html">this tutorial</a>.</p>
<table border="1" class="docutils">
<colgroup>
<col width="20%" />
<col width="80%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Parameters</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>tubeFeatures</td>
<td>Input feature collection (must have geometry and datetime).</td>
</tr>
<tr class="row-odd"><td>featureCollection</td>
<td>The data set to query for matching features.</td>
</tr>
<tr class="row-even"><td>filter</td>
<td>The filter to apply to the featureCollection.</td>
</tr>
<tr class="row-odd"><td>maxSpeed</td>
<td>Max speed of the object in m/s for nofill &amp; line gapfill methods.</td>
</tr>
<tr class="row-even"><td>maxTime</td>
<td>Time as seconds for nofill &amp; line gapfill methods.</td>
</tr>
<tr class="row-odd"><td>bufferSize</td>
<td>Buffer size in meters to use instead of maxSpeed/maxTime calculation.</td>
</tr>
<tr class="row-even"><td>maxBins</td>
<td>Number of bins to use for breaking up query into individual queries.</td>
</tr>
<tr class="row-odd"><td>gapFill</td>
<td>Method of filling gap (nofill, line).</td>
</tr>
</tbody>
</table>
<div class="section" id="tubeselect-example-xml">
<span id="tubeselectexamplexml"></span><h4>12.2.15.1. TubeSelect example (XML)<a class="headerlink" href="#tubeselect-example-xml" title="Permalink to this headline">¶</a></h4>
<p><a class="reference download internal" download="" href="../_downloads/147be59d31515230ca2ad20f0c7c07f3/TubeSelectProcess_wps.xml"><code class="xref download docutils literal notranslate"><span class="pre">TubeSelectProcess_wps.xml</span></code></a> is a geoserver WPS call to the GeoMesa TubeSelectProcess. It can be run with the following curl call:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>curl -v -u admin:geoserver -H <span class="s2">&quot;Content-Type: text/xml&quot;</span> -d@TubeSelectProcess_wps.xml localhost:8080/geoserver/wps
</pre></div>
</div>
</div>
</div>
<div class="section" id="queryprocess">
<span id="query-process"></span><h3>12.2.16. QueryProcess<a class="headerlink" href="#queryprocess" title="Permalink to this headline">¶</a></h3>
<p>The <code class="docutils literal notranslate"><span class="pre">QueryProcess</span></code> takes an (E)CQL query/filter for a given feature set as a text object and returns
the result as a json object.</p>
<table border="1" class="docutils">
<colgroup>
<col width="9%" />
<col width="91%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Parameters</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>features</td>
<td><dl class="first last docutils">
<dt>The data source feature collection to query. Reference as <code class="docutils literal notranslate"><span class="pre">store:layername</span></code>.</dt>
<dd>For an XML file enter <code class="docutils literal notranslate"><span class="pre">&lt;wfs:Query</span> <span class="pre">typeName=store:layername</span> <span class="pre">/&gt;</span></code>
For interactive WPS request builder select <code class="docutils literal notranslate"><span class="pre">VECTOR_LAYER</span></code> &amp; choose <code class="docutils literal notranslate"><span class="pre">store:layername</span></code></dd>
</dl>
</td>
</tr>
<tr class="row-odd"><td>filter</td>
<td><dl class="first docutils">
<dt>The filter to apply to the feature collection.</dt>
<dd>For an XML file enter:</dd>
</dl>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;wps:ComplexData</span> <span class="na">mimeType=</span><span class="s">&quot;text/plain; subtype=cql&quot;</span><span class="nt">&gt;</span>
   <span class="cp">&lt;![CDATA[some-query-text]]</span>
<span class="cp">&lt;/wps:ComplexData&gt;</span>
</pre></div>
</div>
<dl class="last docutils">
<dt>For interactive WPS request builder select TEXT &amp; choose <code class="docutils literal notranslate"><span class="pre">&quot;text/plain;</span> <span class="pre">subtype=cql&quot;</span></code></dt>
<dd>enter the query text in the text box</dd>
</dl>
</td>
</tr>
<tr class="row-even"><td>output</td>
<td><dl class="first docutils">
<dt>Specify how the output feature collection will be presented.</dt>
<dd>For an XML file enter:</dd>
</dl>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;wps:ResponseForm&gt;</span>
   <span class="nt">&lt;wps:RawDataOutput</span> <span class="na">mimeType=</span><span class="s">&quot;application/json&quot;</span><span class="nt">&gt;</span>
      <span class="nt">&lt;ows:Identifier&gt;</span>result<span class="nt">&lt;/ows:Identifier&gt;</span>
   <span class="nt">&lt;/wps:RawDataOutput&gt;</span>
<span class="nt">&lt;/wps:ResponseForm&gt;</span>
</pre></div>
</div>
<p class="last">For interactive WPS request builder check the Generate box and choose “application/json”</p>
</td>
</tr>
<tr class="row-odd"><td>properties</td>
<td>The properties / transforms to apply before gathering stats.</td>
</tr>
</tbody>
</table>
<div class="section" id="query-example-xml">
<span id="queryexamplexml"></span><h4>12.2.16.1. Query example (XML)<a class="headerlink" href="#query-example-xml" title="Permalink to this headline">¶</a></h4>
<p><a class="reference download internal" download="" href="../_downloads/4083ac44c97f859bff9107c8baf809c2/QueryProcess_wps.xml"><code class="xref download docutils literal notranslate"><span class="pre">QueryProcess_wps.xml</span></code></a> is a geoserver WPS call to the GeoMesa QueryProcess that performs the same query shown
in the <a class="reference external" href="http://www.geomesa.org/documentation/tutorials/geomesa-quickstart-accumulo.html">Accumulo-quickstart</a>. It can be run with the following curl call:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>curl -v -u admin:geoserver -H <span class="s2">&quot;Content-Type: text/xml&quot;</span> -d@QueryProcess_wps.xml localhost:8080/geoserver/wps
</pre></div>
</div>
<p>The query should generate results that look like <a class="reference download internal" download="" href="../_downloads/9412b9701428c00d2d9d21091f1b4ad3/QueryProcess_results.json"><code class="xref download docutils literal notranslate"><span class="pre">this</span></code></a>:</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;FeatureCollection&quot;</span><span class="p">,</span>
  <span class="nt">&quot;features&quot;</span><span class="p">:</span> <span class="p">[</span>
    <span class="p">{</span>
      <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;Feature&quot;</span><span class="p">,</span>
      <span class="nt">&quot;geometry&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;Point&quot;</span><span class="p">,</span>
        <span class="nt">&quot;coordinates&quot;</span><span class="p">:</span> <span class="p">[</span>
          <span class="mf">-76.513</span><span class="p">,</span>
          <span class="mf">-37.4941</span>
        <span class="p">]</span>
      <span class="p">},</span>
      <span class="nt">&quot;properties&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;Who&quot;</span><span class="p">:</span> <span class="s2">&quot;Bierce&quot;</span><span class="p">,</span>
        <span class="nt">&quot;What&quot;</span><span class="p">:</span> <span class="mi">931</span><span class="p">,</span>
        <span class="nt">&quot;When&quot;</span><span class="p">:</span> <span class="s2">&quot;2014-07-04T22:25:38.000+0000&quot;</span>
      <span class="p">},</span>
      <span class="nt">&quot;id&quot;</span><span class="p">:</span> <span class="s2">&quot;Observation.931&quot;</span>
    <span class="p">}</span>
  <span class="p">]</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="uniqueprocess">
<span id="unique-process"></span><h3>12.2.17. UniqueProcess<a class="headerlink" href="#uniqueprocess" title="Permalink to this headline">¶</a></h3>
<p>The <code class="docutils literal notranslate"><span class="pre">UniqueProcess</span></code> class is optimized for GeoMesa to find unique attributes values for a feature collection,
which are returned as a json object.</p>
<table border="1" class="docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Parameters</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>features</td>
<td><dl class="first last docutils">
<dt>The data source feature collection to query. Reference as <code class="docutils literal notranslate"><span class="pre">store:layername</span></code>.</dt>
<dd>For an XML file enter <code class="docutils literal notranslate"><span class="pre">&lt;wfs:Query</span> <span class="pre">typeName=store:layername</span> <span class="pre">/&gt;</span></code>
For interactive WPS request builder select <code class="docutils literal notranslate"><span class="pre">VECTOR_LAYER</span></code> &amp; choose <code class="docutils literal notranslate"><span class="pre">store:layername</span></code></dd>
</dl>
</td>
</tr>
<tr class="row-odd"><td>attribute</td>
<td><dl class="first last docutils">
<dt>The attribute for which unique values will be extracted. Attributes are expressed as a string.</dt>
<dd>For an XML file enter <code class="docutils literal notranslate"><span class="pre">&lt;wps:LiteralData&gt;attribute-name&lt;/wps:LiteralData&gt;</span></code></dd>
</dl>
</td>
</tr>
<tr class="row-even"><td>filter</td>
<td><dl class="first docutils">
<dt>The filter to apply to the feature collection.</dt>
<dd>For an XML file enter:</dd>
</dl>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;wps:ComplexData</span> <span class="na">mimeType=</span><span class="s">&quot;text/plain; subtype=cql&quot;</span><span class="nt">&gt;</span>
   <span class="cp">&lt;![CDATA[some-query-text]]</span>
<span class="cp">&lt;/wps:ComplexData&gt;</span>
</pre></div>
</div>
<dl class="last docutils">
<dt>For interactive WPS request builder select TEXT &amp; choose <code class="docutils literal notranslate"><span class="pre">&quot;text/plain;</span> <span class="pre">subtype=cql&quot;</span></code></dt>
<dd>enter the query text in the text box.</dd>
</dl>
</td>
</tr>
<tr class="row-odd"><td>histogram</td>
<td><dl class="first last docutils">
<dt>Create a histogram of attribute values. Expressed as a boolean (true/false).</dt>
<dd>For an XML file enter <code class="docutils literal notranslate"><span class="pre">&lt;wps:LiteralData&gt;true/false&lt;/wps:LiteralData&gt;</span></code></dd>
</dl>
</td>
</tr>
<tr class="row-even"><td>sort</td>
<td><dl class="first last docutils">
<dt>Sort the results. Expressed as a string; allowed values are ASC or DESC.</dt>
<dd>For an XML file enter <code class="docutils literal notranslate"><span class="pre">&lt;wps:LiteralData&gt;ASC/DESC&lt;/wps:LiteralData&gt;</span></code></dd>
</dl>
</td>
</tr>
<tr class="row-odd"><td>sortByCount</td>
<td><dl class="first last docutils">
<dt>Sort by histogram counts instead of attribute values. Expressed as a boolean (true/false).</dt>
<dd>For an XML file enter <code class="docutils literal notranslate"><span class="pre">&lt;wps:LiteralData&gt;true/false&lt;/wps:LiteralData&gt;</span></code></dd>
</dl>
</td>
</tr>
<tr class="row-even"><td>output</td>
<td><dl class="first docutils">
<dt>Specify how the output feature collection will be presented.</dt>
<dd>For an XML file enter:</dd>
</dl>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;wps:ResponseForm&gt;</span>
   <span class="nt">&lt;wps:RawDataOutput</span> <span class="na">mimeType=</span><span class="s">&quot;application/json&quot;</span><span class="nt">&gt;</span>
      <span class="nt">&lt;ows:Identifier&gt;</span>result<span class="nt">&lt;/ows:Identifier&gt;</span>
   <span class="nt">&lt;/wps:RawDataOutput&gt;</span>
<span class="nt">&lt;/wps:ResponseForm&gt;</span>
</pre></div>
</div>
<p class="last">For interactive WPS request builder check the Generate box and choose “application/json”</p>
</td>
</tr>
</tbody>
</table>
<div class="section" id="unique-example-xml">
<span id="uniqueexamplexml"></span><h4>12.2.17.1. Unique example (XML)<a class="headerlink" href="#unique-example-xml" title="Permalink to this headline">¶</a></h4>
<p><a class="reference download internal" download="" href="../_downloads/dbba7fe101187f501a46e2898e76a8a3/UniqueProcess_wps.xml"><code class="xref download docutils literal notranslate"><span class="pre">UniqueProcess_wps.xml</span></code></a> is a geoserver WPS call to the GeoMesa UniqueProcess that reports the unique names
in in the ‘Who’ field of the Accumulo quickstart data for a restricted bounding box (-77.5, -37.5, -76.5, -36.5)). It can be run with the following curl call:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>curl -v -u admin:geoserver -H <span class="s2">&quot;Content-Type: text/xml&quot;</span> -d@UniqueProcess_wps.xml localhost:8080/geoserver/wps
</pre></div>
</div>
<p id="uniqueexampleresults">The query should generate results that look like this:</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;FeatureCollection&quot;</span><span class="p">,</span>
  <span class="nt">&quot;features&quot;</span><span class="p">:</span> <span class="p">[</span>
    <span class="p">{</span>
      <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;Feature&quot;</span><span class="p">,</span>
      <span class="nt">&quot;properties&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;value&quot;</span><span class="p">:</span> <span class="s2">&quot;Addams&quot;</span><span class="p">,</span>
        <span class="nt">&quot;count&quot;</span><span class="p">:</span> <span class="mi">37</span>
      <span class="p">},</span>
      <span class="nt">&quot;id&quot;</span><span class="p">:</span> <span class="s2">&quot;fid--21d4eb0_15b68e0e8ca_-7fd6&quot;</span>
    <span class="p">},</span>
    <span class="p">{</span>
      <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;Feature&quot;</span><span class="p">,</span>
      <span class="nt">&quot;properties&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;value&quot;</span><span class="p">:</span> <span class="s2">&quot;Bierce&quot;</span><span class="p">,</span>
        <span class="nt">&quot;count&quot;</span><span class="p">:</span> <span class="mi">43</span>
      <span class="p">},</span>
      <span class="nt">&quot;id&quot;</span><span class="p">:</span> <span class="s2">&quot;fid--21d4eb0_15b68e0e8ca_-7fd5&quot;</span>
    <span class="p">},</span>
    <span class="p">{</span>
      <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;Feature&quot;</span><span class="p">,</span>
      <span class="nt">&quot;properties&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;value&quot;</span><span class="p">:</span> <span class="s2">&quot;Clemens&quot;</span><span class="p">,</span>
        <span class="nt">&quot;count&quot;</span><span class="p">:</span> <span class="mi">48</span>
      <span class="p">},</span>
      <span class="nt">&quot;id&quot;</span><span class="p">:</span> <span class="s2">&quot;fid--21d4eb0_15b68e0e8ca_-7fd4&quot;</span>
    <span class="p">}</span>
  <span class="p">]</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="chaining-processes">
<span id="id1"></span><h3>12.2.18. Chaining Processes<a class="headerlink" href="#chaining-processes" title="Permalink to this headline">¶</a></h3>
<p>WPS processes can be chained, using the result of one process as the input for another. For example, a bounding box
in a GeoMesa <a class="reference internal" href="#query-process"><span class="std std-ref">QueryProcess</span></a> can be used to restrict data sent to <a class="reference internal" href="#statsiterator-process"><span class="std std-ref">StatsProcess</span></a>.
<a class="reference download internal" download="" href="../_downloads/8fb8c203a931c0704b7be02af0918e57/GeoMesa_WPS_chain_example.xml"><code class="xref download docutils literal notranslate"><span class="pre">GeoMesa_WPS_chain_example.xml</span></code></a> will get all points from
the AccumuloQuickStart table that are within a specified bounding box (-77.5, -37.5, -76.5, -36.5), and calculate
descriptive statistics on the ‘What’ attribute of the results.</p>
<p>The query should generate results that look like this:</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;FeatureCollection&quot;</span><span class="p">,</span>
  <span class="nt">&quot;features&quot;</span><span class="p">:</span> <span class="p">[</span>
    <span class="p">{</span>
      <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;Feature&quot;</span><span class="p">,</span>
      <span class="nt">&quot;geometry&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;Point&quot;</span><span class="p">,</span>
        <span class="nt">&quot;coordinates&quot;</span><span class="p">:</span> <span class="p">[</span>
          <span class="mi">0</span><span class="p">,</span>
          <span class="mi">0</span>
        <span class="p">]</span>
      <span class="p">},</span>
      <span class="nt">&quot;properties&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;stats&quot;</span><span class="p">:</span> <span class="s2">&quot;{\&quot;count\&quot;:128,\&quot;minimum\&quot;:[29.0],\&quot;maximum\&quot;:[991.0],\&quot;mean\&quot;:[508.5781249999999],\&quot;population_variance\&quot;:[85116.25952148438],\&quot;population_standard_deviation\&quot;:[291.74691004616375],\&quot;population_skewness\&quot;:[-0.11170819256679464],\&quot;population_kurtosis\&quot;:[1.7823482287566166],\&quot;population_excess_kurtosis\&quot;:[-1.2176517712433834],\&quot;sample_variance\&quot;:[85786.46628937007],\&quot;sample_standard_deviation\&quot;:[292.893267743337],\&quot;sample_skewness\&quot;:[-0.11303718280959842],\&quot;sample_kurtosis\&quot;:[1.8519712064424219],\&quot;sample_excess_kurtosis\&quot;:[-1.1480287935575781],\&quot;population_covariance\&quot;:[85116.25952148438],\&quot;population_correlation\&quot;:[1.0],\&quot;sample_covariance\&quot;:[85786.46628937007],\&quot;sample_correlation\&quot;:[1.0]}&quot;</span>
      <span class="p">},</span>
      <span class="nt">&quot;id&quot;</span><span class="p">:</span> <span class="s2">&quot;stat&quot;</span>
    <span class="p">}</span>
  <span class="p">]</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="hbase/index.html" class="btn btn-neutral float-right" title="13. HBase Data Store" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="nifi.html" class="btn btn-neutral" title="11. GeoMesa NiFi Bundle" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>

    </p>
  </div>

<div role="contentinfo">
  <p>
    &copy; Copyright 2013-2020 <a href="https://www.ccri.com/">Commonwealth Computer Research, Inc.</a>
    <br/>
    Licensed under the <a href="http://www.opensource.org/licenses/apache2.0.php">Apache License, Version 2.0</a>
  </p>
</div>

<div role="contentinfo">
  <p>
    Built with <a href="http://sphinx-doc.org/">Sphinx</a>
    using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>
    
    - view <a href="../_sources/user/process.rst.txt" rel="nofollow">page source</a>
    
  </p>
</div>



</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script type="text/javascript" src="../_static/jquery.js"></script>
        <script type="text/javascript" src="../_static/underscore.js"></script>
        <script type="text/javascript" src="../_static/doctools.js"></script>
    

  

  <script type="text/javascript" src="../_static/js/theme.js"></script>

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>
 

<!-- analytics -->
<script>
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
ga('create', 'UA-53087457-1', 'auto');
ga('send', 'pageview');
</script>




</body>
</html>