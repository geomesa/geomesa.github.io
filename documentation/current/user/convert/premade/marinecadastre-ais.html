<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>9.16.9. Marine Cadastre AIS &mdash; GeoMesa 4.0.1 Manuals</title>
      <link rel="stylesheet" href="../../../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../../../_static/css/theme_custom.css" type="text/css" />
      <link rel="stylesheet" href="../../../_static/copybutton.css" type="text/css" />
      <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:400,700" type="text/css" />
      <link rel="stylesheet" href="../../../_static/tabs.css" type="text/css" />
    <link rel="canonical" href="https://www.geomesa.org/documentation/user/convert/premade/marinecadastre-ais.html"/>
  <!--[if lt IE 9]>
    <script src="../../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../../../" id="documentation_options" src="../../../_static/documentation_options.js"></script>
        <script src="../../../_static/jquery.js"></script>
        <script src="../../../_static/underscore.js"></script>
        <script src="../../../_static/doctools.js"></script>
        <script src="../../../_static/clipboard.min.js"></script>
        <script src="../../../_static/copybutton.js"></script>
    <script src="../../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" />
    <link rel="next" title="9.16.10. T-Drive Trajectory Data" href="tdrive.html" />
    <link rel="prev" title="9.16.8. OpenStreetMap GPX Data" href="osm-gpx.html" />


</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="../../../index.html" class="icon icon-home"> GeoMesa
          </a>
              <div class="version">
                4.1.0-SNAPSHOT
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="../../index.html">User Manual</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../../introduction.html">1. Introduction</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../getting_started.html">2. Getting Started</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../download.html">3. Versions and Downloads</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../install.html">4. Installation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../architecture.html">5. Architecture Overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../geotools.html">6. GeoTools Overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../datastores/index.html">7. GeoMesa Data Stores</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../cli/index.html">8. Command-Line Tools</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../index.html">9. GeoMesa Converters</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="../common.html">9.1. Converter Basics</a></li>
<li class="toctree-l3"><a class="reference internal" href="../parsing_and_validation.html">9.2. Parsing and Validation</a></li>
<li class="toctree-l3"><a class="reference internal" href="../cache.html">9.3. Using Caches for Enrichment</a></li>
<li class="toctree-l3"><a class="reference internal" href="../usage_tools.html">9.4. Using Converters with the Command-Line Tools</a></li>
<li class="toctree-l3"><a class="reference internal" href="../usage_code.html">9.5. Using Converters Programmatically</a></li>
<li class="toctree-l3"><a class="reference internal" href="../delimited_text.html">9.6. Delimited Text Converter</a></li>
<li class="toctree-l3"><a class="reference internal" href="../json.html">9.7. JSON Converter</a></li>
<li class="toctree-l3"><a class="reference internal" href="../xml.html">9.8. XML Converter</a></li>
<li class="toctree-l3"><a class="reference internal" href="../avro.html">9.9. Avro Converter</a></li>
<li class="toctree-l3"><a class="reference internal" href="../avro_schema_registry.html">9.10. Avro Schema Registry Converter</a></li>
<li class="toctree-l3"><a class="reference internal" href="../parquet.html">9.11. Parquet Converter</a></li>
<li class="toctree-l3"><a class="reference internal" href="../shp.html">9.12. Shapefile Converter</a></li>
<li class="toctree-l3"><a class="reference internal" href="../fixed_width.html">9.13. Fixed-Width Text Converter</a></li>
<li class="toctree-l3"><a class="reference internal" href="../jdbc.html">9.14. JDBC Converter</a></li>
<li class="toctree-l3"><a class="reference internal" href="../composite.html">9.15. Composite Converters</a></li>
<li class="toctree-l3 current"><a class="reference internal" href="index.html">9.16. Prepackaged Converter Definitions</a><ul class="current">
<li class="toctree-l4"><a class="reference internal" href="adsbx.html">9.16.1. ADS-B Exchange (ADSBx)</a></li>
<li class="toctree-l4"><a class="reference internal" href="gdelt.html">9.16.2. Global Database of Events, Language, and Tone (GDELT)</a></li>
<li class="toctree-l4"><a class="reference internal" href="geolife.html">9.16.3. GeoLife GPS Trajectory Data</a></li>
<li class="toctree-l4"><a class="reference internal" href="geonames.html">9.16.4. GeoNames</a></li>
<li class="toctree-l4"><a class="reference internal" href="gtd.html">9.16.5. Global Terrorism Database (GTD)</a></li>
<li class="toctree-l4"><a class="reference internal" href="nyctaxi.html">9.16.6. NYC Taxi</a></li>
<li class="toctree-l4"><a class="reference internal" href="osm.html">9.16.7. OpenStreetMap Data</a></li>
<li class="toctree-l4"><a class="reference internal" href="osm-gpx.html">9.16.8. OpenStreetMap GPX Data</a></li>
<li class="toctree-l4 current"><a class="current reference internal" href="#">9.16.9. Marine Cadastre AIS</a></li>
<li class="toctree-l4"><a class="reference internal" href="tdrive.html">9.16.10. T-Drive Trajectory Data</a></li>
<li class="toctree-l4"><a class="reference internal" href="twitter.html">9.16.11. Twitter</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../function_overview.html">9.17. Transformation Function Overview</a></li>
<li class="toctree-l3"><a class="reference internal" href="../function_usage.html">9.18. Transformation Function Usage</a></li>
<li class="toctree-l3"><a class="reference internal" href="../extending.html">9.19. Extending the Converter Library</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../geoserver.html">10. GeoServer Plugins</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../spark/index.html">11. GeoMesa Spark</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../nifi/index.html">12. GeoMesa NiFi Bundle</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../process.html">13. GeoMesa Processes</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../hbase/index.html">14. HBase Data Store</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../accumulo/index.html">15. Accumulo Data Store</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../cassandra/index.html">16. Cassandra Data Store</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../kafka/index.html">17. Kafka Data Store</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../redis/index.html">18. Redis Data Store</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../filesystem/index.html">19. FileSystem Data Store</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../postgis/index.html">20. Partitioned PostGIS Data Store</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../lambda/index.html">21. Lambda Data Store</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../ds_views.html">22. Combined Data Store Views</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../upgrade.html">23. Upgrade Guide</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../index.html#appendix">Appendix</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../tutorials/index.html">Tutorials</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../index.html">GeoMesa</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../../index.html" class="icon icon-home"></a></li>
          <li class="breadcrumb-item"><a href="../../index.html">User Manual</a></li>
          <li class="breadcrumb-item"><a href="../index.html"><span class="section-number">9. </span>GeoMesa Converters</a></li>
          <li class="breadcrumb-item"><a href="index.html"><span class="section-number">9.16. </span>Prepackaged Converter Definitions</a></li>
      <li class="breadcrumb-item active"><span class="section-number">9.16.9. </span>Marine Cadastre AIS</li>
      <li class="wy-breadcrumbs-aside">
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="marine-cadastre-ais">
<h1><span class="section-number">9.16.9. </span>Marine Cadastre AIS<a class="headerlink" href="#marine-cadastre-ais" title="Permalink to this headline">¶</a></h1>
<p><a class="reference external" href="https://en.wikipedia.org/wiki/Automatic_identification_system">Automated Identification System</a> is a global system to
track ships, with each vessel beaconing its position to other (nearby) vessels. While various commercial data providers
exist, this converter is intended for data collected by the U.S. Coast Guard around the USA and openly published by
<a class="reference external" href="https://marinecadastre.gov/ais/">Marine Cadastre</a>.</p>
<p>Prior to 2015, the data is disseminated as zipped ESRI File Geodatabases containing a number of tables. Only the
<code class="docutils literal notranslate"><span class="pre">broadcast</span></code> table is considered here, which consists of vessel locations over time. Note that “Ship name and call sign
fields have been removed, and the MMSI (Maritime Mobile Service Identity) field has been encrypted for the 2010 through
2014 data at the request of the U.S. Coast Guard.”</p>
<p>For 2015 and later, the data is disseminated as zipped Comma Separated Values (CSV) files which have been enriched with
additional vessel data (e.g., vessel name) and include unencrypted MMSI values.</p>
<section id="getting-the-data">
<h2><span class="section-number">9.16.9.1. </span>Getting the Data<a class="headerlink" href="#getting-the-data" title="Permalink to this headline">¶</a></h2>
<p>Machine-friendly links for bulk data download can be found
<a class="reference external" href="https://coast.noaa.gov/htdata/CMSP/AISDataHandler/2009/index.html">here</a>. Replace the four digit year with that
desired (2009-2017), data is then split into month and
<a class="reference external" href="https://marinecadastre.gov/ais/AIS%20Documents/UTMZoneMap2014.png">UTM Zone</a>. Once data is downloaded, it must be
unzipped e.g.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">find</span> <span class="o">.</span> <span class="o">-</span><span class="n">name</span> <span class="s2">&quot;*.zip&quot;</span> <span class="o">-</span><span class="n">exec</span> <span class="n">unzip</span> <span class="p">{}</span> \<span class="p">;</span>
</pre></div>
</div>
</section>
<section id="converting-the-pre-2015-data">
<h2><span class="section-number">9.16.9.2. </span>Converting the pre-2015 Data<a class="headerlink" href="#converting-the-pre-2015-data" title="Permalink to this headline">¶</a></h2>
<p>GeoMesa does not currently support ESRI File Geodatabases (FileGDB), so an external tool is required to convert the data
into a suitable format. <code class="docutils literal notranslate"><span class="pre">ogr2ogr</span></code> from <a class="reference external" href="https://www.gdal.org/">GDAL</a> can convert from FileGDB into Comma Separated
Value (CSV) format e.g.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">find</span> <span class="o">.</span> <span class="o">-</span><span class="n">name</span> <span class="s2">&quot;*.gdb&quot;</span> <span class="o">-</span><span class="n">exec</span> <span class="n">sh</span> <span class="o">-</span><span class="n">c</span> <span class="s2">&quot;ogr2ogr -f CSV /dev/stdout </span><span class="si">{}</span><span class="s2"> Broadcast -lco GEOMETRY=AS_XY | tail -n +2 &gt; </span><span class="si">{}</span><span class="s2">.csv&quot;</span> \<span class="p">;</span>
</pre></div>
</div>
<p>Note that the <code class="docutils literal notranslate"><span class="pre">tail</span></code> command removes the header row from the output file, making ingest more amenable to processing
using HDFS or similar. Also note that the resulting CSV files may be very large – 264 GB for the 2009 &amp; 2019 data.</p>
</section>
<section id="sample-ingest-command">
<h2><span class="section-number">9.16.9.3. </span>Sample Ingest Command<a class="headerlink" href="#sample-ingest-command" title="Permalink to this headline">¶</a></h2>
<p>Due to the two different formats, two different simple feature types (SFTs) and converters are required, both of which
are defined in the same file. <code class="docutils literal notranslate"><span class="pre">marinecadastre-ais</span></code> defines the SFT and converter for data converted to CSV from
FileGDB format (prior to 2015), while <code class="docutils literal notranslate"><span class="pre">marinecadastre-ais-csv</span></code> defines the SFT and converter for data natively in the
newer CSV format (2015 and later).</p>
<p>Check that the desired simple feature type and converter are available on the GeoMesa tools classpath.
This is the default case. Note that you will need to use the command specific to your back-end e.g.
<code class="docutils literal notranslate"><span class="pre">geomesa-accumulo</span></code>.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">geomesa</span> <span class="n">env</span> <span class="o">|</span> <span class="n">grep</span> <span class="s1">&#39;marinecadastre-ais&#39;</span>
</pre></div>
</div>
<p>If they are not, merge the contents of <code class="docutils literal notranslate"><span class="pre">reference.conf</span></code> with <code class="docutils literal notranslate"><span class="pre">$GEOMESA_HOME/conf/application.conf</span></code>, or ensure that
<code class="docutils literal notranslate"><span class="pre">reference.conf</span></code> is in <code class="docutils literal notranslate"><span class="pre">$GEOMESA_HOME/conf/sfts/marinecadastre-ais</span></code>.</p>
<p>To ingest using the GeoMesa command line interface:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ geomesa ingest -u username -c catalogName -s marinecadastre-ais -C marinecadastre-ais -t 8 /path/to/data/*.csv
</pre></div>
</div>
<p>You should replace <code class="docutils literal notranslate"><span class="pre">marinecadastre-ais</span></code> with <code class="docutils literal notranslate"><span class="pre">marinecadastre-ais-csv</span></code> if using 2015 or later data.</p>
<p>This example uses 8 threads, which for all of the 2009 &amp; 2010 data (approx 3.5B records) took 15h on a 5 node cluster.</p>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="osm-gpx.html" class="btn btn-neutral float-left" title="9.16.8. OpenStreetMap GPX Data" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="tdrive.html" class="btn btn-neutral float-right" title="9.16.10. T-Drive Trajectory Data" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p></p>
  </div>

  

<div role="contentinfo">
  <p>
    &copy; Copyright 2013-2023 <a href="https://www.ccri.com/">Commonwealth Computer Research, Inc.</a>
    <br/>
    Licensed under the <a href="https://www.opensource.org/licenses/apache2.0.php">Apache License, Version 2.0</a>
  </p>
</div>

<div role="contentinfo">
  <p>
    Built with <a href="https://www.sphinx-doc.org/">Sphinx</a>
    using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>
    - contribute to this page on
    <a href="https://github.com/locationtech/geomesa/edit/main/docs/user/convert/premade/marinecadastre-ais.rst">GitHub <img src="../../../_static/launch.svg"/></a>
  </p>

</div>



</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>