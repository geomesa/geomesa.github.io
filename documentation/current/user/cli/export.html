<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>8.4. Query and Export Commands &mdash; GeoMesa 4.0.0 Manuals</title>
      <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/css/theme_custom.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/copybutton.css" type="text/css" />
      <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:400,700" type="text/css" />
      <link rel="stylesheet" href="../../_static/tabs.css" type="text/css" />
    <link rel="canonical" href="https://www.geomesa.org/documentation/user/cli/export.html"/>
  <!--[if lt IE 9]>
    <script src="../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
        <script src="../../_static/jquery.js"></script>
        <script src="../../_static/underscore.js"></script>
        <script src="../../_static/doctools.js"></script>
        <script src="../../_static/clipboard.min.js"></script>
        <script src="../../_static/copybutton.js"></script>
    <script src="../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="8.5. Analytic Commands" href="analytic.html" />
    <link rel="prev" title="8.3. Ingest Commands" href="ingest.html" />


</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="../../index.html" class="icon icon-home"> GeoMesa
          </a>
              <div class="version">
                4.1.0-SNAPSHOT
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="../index.html">User Manual</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../introduction.html">1. Introduction</a></li>
<li class="toctree-l2"><a class="reference internal" href="../getting_started.html">2. Getting Started</a></li>
<li class="toctree-l2"><a class="reference internal" href="../download.html">3. Versions and Downloads</a></li>
<li class="toctree-l2"><a class="reference internal" href="../install.html">4. Installation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../architecture.html">5. Architecture Overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="../geotools.html">6. GeoTools Overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="../datastores/index.html">7. GeoMesa Data Stores</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="index.html">8. Command-Line Tools</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="status.html">8.1. Environment and Status Commands</a></li>
<li class="toctree-l3"><a class="reference internal" href="schemas.html">8.2. Schema Commands</a></li>
<li class="toctree-l3"><a class="reference internal" href="ingest.html">8.3. Ingest Commands</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">8.4. Query and Export Commands</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#convert">8.4.1. <code class="docutils literal notranslate"><span class="pre">convert</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#explain">8.4.2. <code class="docutils literal notranslate"><span class="pre">explain</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#export">8.4.3. <code class="docutils literal notranslate"><span class="pre">export</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#playback">8.4.4. <code class="docutils literal notranslate"><span class="pre">playback</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="analytic.html">8.5. Analytic Commands</a></li>
<li class="toctree-l3"><a class="reference internal" href="sfts.html">8.6. Defining Simple Feature Types</a></li>
<li class="toctree-l3"><a class="reference internal" href="converters.html">8.7. Defining Simple Feature Converters</a></li>
<li class="toctree-l3"><a class="reference internal" href="logging.html">8.8. Logging Configuration</a></li>
<li class="toctree-l3"><a class="reference internal" href="filesystems.html">8.9. Remote File System Support</a></li>
<li class="toctree-l3"><a class="reference internal" href="console.html">8.10. GeoMesa Scala Console</a></li>
<li class="toctree-l3"><a class="reference internal" href="nailgun.html">8.11. Nailgun Server</a></li>
<li class="toctree-l3"><a class="reference internal" href="geotools.html">8.12. GeoTools Command-Line Tools</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../convert/index.html">9. GeoMesa Converters</a></li>
<li class="toctree-l2"><a class="reference internal" href="../geoserver.html">10. GeoServer Plugins</a></li>
<li class="toctree-l2"><a class="reference internal" href="../spark/index.html">11. GeoMesa Spark</a></li>
<li class="toctree-l2"><a class="reference internal" href="../nifi/index.html">12. GeoMesa NiFi Bundle</a></li>
<li class="toctree-l2"><a class="reference internal" href="../process.html">13. GeoMesa Processes</a></li>
<li class="toctree-l2"><a class="reference internal" href="../hbase/index.html">14. HBase Data Store</a></li>
<li class="toctree-l2"><a class="reference internal" href="../accumulo/index.html">15. Accumulo Data Store</a></li>
<li class="toctree-l2"><a class="reference internal" href="../cassandra/index.html">16. Cassandra Data Store</a></li>
<li class="toctree-l2"><a class="reference internal" href="../kafka/index.html">17. Kafka Data Store</a></li>
<li class="toctree-l2"><a class="reference internal" href="../redis/index.html">18. Redis Data Store</a></li>
<li class="toctree-l2"><a class="reference internal" href="../filesystem/index.html">19. FileSystem Data Store</a></li>
<li class="toctree-l2"><a class="reference internal" href="../postgis/index.html">20. Partitioned PostGIS Data Store</a></li>
<li class="toctree-l2"><a class="reference internal" href="../lambda/index.html">21. Lambda Data Store</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ds_views.html">22. Combined Data Store Views</a></li>
<li class="toctree-l2"><a class="reference internal" href="../upgrade.html">23. Upgrade Guide</a></li>
<li class="toctree-l2"><a class="reference internal" href="../index.html#appendix">Appendix</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../tutorials/index.html">Tutorials</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">GeoMesa</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../index.html" class="icon icon-home"></a></li>
          <li class="breadcrumb-item"><a href="../index.html">User Manual</a></li>
          <li class="breadcrumb-item"><a href="index.html"><span class="section-number">8. </span>Command-Line Tools</a></li>
      <li class="breadcrumb-item active"><span class="section-number">8.4. </span>Query and Export Commands</li>
      <li class="wy-breadcrumbs-aside">
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="query-and-export-commands">
<h1><span class="section-number">8.4. </span>Query and Export Commands<a class="headerlink" href="#query-and-export-commands" title="Permalink to this headline">¶</a></h1>
<p>These commands are used to query and export simple features. Required parameters are indicated with a <code class="docutils literal notranslate"><span class="pre">*</span></code>.</p>
<section id="convert">
<h2><span class="section-number">8.4.1. </span><code class="docutils literal notranslate"><span class="pre">convert</span></code><a class="headerlink" href="#convert" title="Permalink to this headline">¶</a></h2>
<p>The convert command is used to directly transform data in one format into another, without ingesting them
into GeoMesa. For example, it could be used to convert CSV files to GeoJSON.</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 24%" />
<col style="width: 76%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Argument</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">-f,</span> <span class="pre">--feature-name</span></code></p></td>
<td><p>The name of the schema</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">-s,</span> <span class="pre">--spec</span></code></p></td>
<td><p>The <code class="docutils literal notranslate"><span class="pre">SimpleFeatureType</span></code> specification to create</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">-C,</span> <span class="pre">--converter</span></code></p></td>
<td><p>The GeoMesa converter used to create <code class="docutils literal notranslate"><span class="pre">SimpleFeature</span></code>s</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">--converter-error-mode</span></code></p></td>
<td><p>Override the error mode defined by the converter</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">-q,</span> <span class="pre">--cql</span></code></p></td>
<td><p>CQL filter to select features to export</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">-m,</span> <span class="pre">--max-features</span></code></p></td>
<td><p>Limit the number of features exported</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">-F,</span> <span class="pre">--output-format</span></code></p></td>
<td><p>Output format used for export</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">-o,</span> <span class="pre">--output</span></code></p></td>
<td><p>Output to a file instead of standard out</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">--input-format</span></code></p></td>
<td><p>File format of input files (shp, csv, tsv, avro, etc)</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">--hints</span></code></p></td>
<td><p>Query hints used to modify the query</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">--gzip</span></code></p></td>
<td><p>Level of gzip compression to use for output, from 1-9</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">--no-header</span></code></p></td>
<td><p>Don’t export the type header, for CSV and TSV formats</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">--suppress-empty</span></code></p></td>
<td><p>If no features are converted, don’t write any headers or other output</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">--force</span></code></p></td>
<td><p>Force execution without prompt</p></td>
</tr>
</tbody>
</table>
<p>See <a class="reference internal" href="#cli-export"><span class="std std-ref">export</span></a> and <a class="reference internal" href="ingest.html#cli-ingest"><span class="std std-ref">ingest</span></a> for a description of the arguments.</p>
</section>
<section id="explain">
<span id="cli-explain"></span><h2><span class="section-number">8.4.2. </span><code class="docutils literal notranslate"><span class="pre">explain</span></code><a class="headerlink" href="#explain" title="Permalink to this headline">¶</a></h2>
<p>The explain command can be used to debug queries that are slow or problematic. Without actually running the query,
it will show a variety of data, including the index being used, any query hints extracted, the exact ranges being
scanned and filters being applied.</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 30%" />
<col style="width: 70%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Argument</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">-c,</span> <span class="pre">--catalog</span> <span class="pre">*</span></code></p></td>
<td><p>The catalog table containing schema metadata</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">-f,</span> <span class="pre">--feature-name</span> <span class="pre">*</span></code></p></td>
<td><p>The name of the schema</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">-q,</span> <span class="pre">--cql</span> <span class="pre">*</span></code></p></td>
<td><p>CQL filter to select features to export</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">-a,</span> <span class="pre">--attributes</span></code></p></td>
<td><p>Specific attributes to export</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">--hints</span></code></p></td>
<td><p>Query hints used to modify the query</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">--index</span></code></p></td>
<td><p>Specific index used to run the query</p></td>
</tr>
</tbody>
</table>
<p>See <a class="reference internal" href="#cli-export"><span class="std std-ref">export</span></a> for a description of the arguments.</p>
</section>
<section id="export">
<span id="cli-export"></span><h2><span class="section-number">8.4.3. </span><code class="docutils literal notranslate"><span class="pre">export</span></code><a class="headerlink" href="#export" title="Permalink to this headline">¶</a></h2>
<p>Export features in a variety of formats.</p>
<p>See <a class="reference internal" href="../datastores/data.html#data-migration"><span class="std std-ref">Moving and Migrating Data</span></a> for details on how the export/import commands can be used to move data between clusters.</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 26%" />
<col style="width: 74%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Argument</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">-c,</span> <span class="pre">--catalog</span> <span class="pre">*</span></code></p></td>
<td><p>The catalog table containing schema metadata</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">-f,</span> <span class="pre">--feature-name</span> <span class="pre">*</span></code></p></td>
<td><p>The name of the schema</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">-q,</span> <span class="pre">--cql</span></code></p></td>
<td><p>CQL filter to select features to export</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">-a,</span> <span class="pre">--attributes</span></code></p></td>
<td><p>Comma-separated list of attributes to export</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">--attribute</span></code></p></td>
<td><p>Complex attribute transforms to export</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">-m,</span> <span class="pre">--max-features</span></code></p></td>
<td><p>Limit the number of features exported</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">-F,</span> <span class="pre">--output-format</span></code></p></td>
<td><p>Output format used for export</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">-o,</span> <span class="pre">--output</span></code></p></td>
<td><p>Output to a file instead of standard out</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">--sort-by</span></code></p></td>
<td><p>Sort by the specified attributes</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">--sort-descending</span></code></p></td>
<td><p>Sort in descending order, instead of the default ascending order</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">--hints</span></code></p></td>
<td><p>Query hints used to modify the query</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">--index</span></code></p></td>
<td><p>Specific index used to run the query</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">--no-header</span></code></p></td>
<td><p>For CSV and TSV formats, suppress the normal column headers</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">--suppress-empty</span></code></p></td>
<td><p>If no features are exported, don’t write any headers or other output</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">--gzip</span></code></p></td>
<td><p>Level of gzip compression to use for output, from 1-9</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">--chunk-size</span></code></p></td>
<td><p>Split the output into multiple files of the given size</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">--run-mode</span></code></p></td>
<td><p>Run locally or as a distributed map/reduce job</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">--num-reducers</span></code></p></td>
<td><p>Specify the number of reduces, when running in distributed mode</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">--force</span></code></p></td>
<td><p>Force execution without prompts</p></td>
</tr>
</tbody>
</table>
<p>The <code class="docutils literal notranslate"><span class="pre">--attributes</span></code> and <code class="docutils literal notranslate"><span class="pre">--attribute</span></code> parameters can be used to select a subset of attributes to export, or
to transform the returned attributes using filter functions. A simple projection can be specified as a
comma-delimited list:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">--</span><span class="n">attributes</span> <span class="n">name</span><span class="p">,</span><span class="n">age</span><span class="p">,</span><span class="n">geom</span>
</pre></div>
</div>
<p>The feature ID can be specified along with other attribute names, with the reserved word <code class="docutils literal notranslate"><span class="pre">id</span></code>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">--</span><span class="n">attributes</span> <span class="nb">id</span><span class="p">,</span><span class="n">name</span><span class="p">,</span><span class="n">age</span><span class="p">,</span><span class="n">geom</span>
</pre></div>
</div>
<p>Transforms can be accomplished by using <code class="docutils literal notranslate"><span class="pre">--attribute</span></code> to specify transform functions. Note that compared to
<code class="docutils literal notranslate"><span class="pre">--attributes</span></code>, only a single argument can be specified per parameter, and commas will not be interpreted as
a delimiter:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">--</span><span class="n">attribute</span> <span class="nb">id</span> <span class="o">--</span><span class="n">attribute</span> <span class="n">name</span> <span class="o">--</span><span class="n">attribute</span> <span class="s2">&quot;name_transform=strConcat(name, &#39;foo&#39;)&quot;</span>
</pre></div>
</div>
<p>For a full list of transforms, see the GeoTools <a class="reference external" href="https://docs.geotools.org/latest/userguide/library/main/function_list.html">documentation</a>.
Note that not all functions work in transforms, however.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">--output-format</span></code> argument defines the encoding used for export. Currently, it can be one of:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">arrow</span></code> Apache Arrow streaming file format</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">avro</span></code> Apache Avro format</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">bin</span></code> Custom minimal binary encoding</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">csv</span></code> or <code class="docutils literal notranslate"><span class="pre">tsv</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">json</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">gml</span></code> or <code class="docutils literal notranslate"><span class="pre">gml2</span></code> <a class="reference external" href="https://www.opengeospatial.org/standards/gml">Geography Markup Language</a></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">html</span></code> Export data to a Leaflet map and open in the default browser, if possible</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">orc</span></code> Apache Orc files</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">parquet</span></code> Apache Parquet files</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">shp</span></code> ESRI Shapefile</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">null</span></code> suppress output entirely</p></li>
</ul>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The Leaflet format is intended for testing and small scale data exploration and visualization only. For production
map generation it is highly recommended to use GeoServer. Additionally, the resulting file from this command
requires the use of an online browser to open in order to access online resources.</p>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">--output</span></code> argument can be used to export to a file. By default, export data is written to standard output.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">--sort-by</span></code> argument can be used to sort the output by one or more attributes. Note that for local exports,
this will usually be done in-memory, so can be costly for large result sets. By default, output is sorted in
ascending order; <code class="docutils literal notranslate"><span class="pre">--sort-descending</span></code> can be used to reverse the sort order.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">--hints</span></code> argument can be used to set query hints. Hints should be specified as <code class="docutils literal notranslate"><span class="pre">key1=value1;key2=value2</span></code>, etc.
Note that due to shell expansion, the hint string will likely need to be quoted. See <a class="reference internal" href="../datastores/analytic_queries.html#analytic-queries"><span class="std std-ref">Analytic Querying</span></a> for
examples of query hints that can be set. Note that query hints may cause errors if they don’t correspond to the
output format specified.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">--index</span></code> argument can be used to force the query to run against a particular index, instead of using
the best index as determined through query planning. The argument should be the name of an index, e.g. <code class="docutils literal notranslate"><span class="pre">id</span></code>
or <code class="docutils literal notranslate"><span class="pre">z3</span></code>. See <a class="reference internal" href="../datastores/index_overview.html#index-overview"><span class="std std-ref">Index Overview</span></a> for a list of valid indices. Note that not all schemas will
have all index types.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">--gzip</span></code> argument can be used to compress the output through <strong>gzip</strong> encoding. It can be specified
as a number between 1-9. Higher numbers indicate more compression, lower numbers indicate faster compression.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">--chunk-size</span></code> argument can be used to split the output into multiple smaller files. It is specified as
a size in bytes, e.g. <code class="docutils literal notranslate"><span class="pre">10MB</span></code>. Note that due to buffering and metadata, it is generally not feasible to hit
the chunk size exactly. For finer control, the system property <code class="docutils literal notranslate"><span class="pre">org.locationtech.geomesa.export.bytes-per-feature</span></code>
can be used to set an initial number of bytes per feature as a float, i.e. <code class="docutils literal notranslate"><span class="pre">5.5</span></code>. If exporting to multiple
formats at once, the property  <code class="docutils literal notranslate"><span class="pre">org.locationtech.geomesa.export.&lt;name&gt;.bytes-per-feature</span></code> can also be used,
where <code class="docutils literal notranslate"><span class="pre">&lt;name&gt;</span></code> corresponds to one of  the output formats mentioned above (e.g. <code class="docutils literal notranslate"><span class="pre">json</span></code>, <code class="docutils literal notranslate"><span class="pre">parquet</span></code>, etc).</p>
<p>The <code class="docutils literal notranslate"><span class="pre">--run-mode</span> <span class="pre">distributed</span></code> argument can be used to specify a distributed map/reduce export, for data stores
that support it. Distributed exports can be used for data migration or large-scale sorting. When running
in distributed mode, the output file must be in a distributed filesystem (e.g. HDFS or S3). When sorting a
distributed export, <code class="docutils literal notranslate"><span class="pre">--num-reducers</span></code> must be specified to set the number of reducer tasks.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">--force</span></code> argument can be used to suppress prompts, such as a prompt to overwrite an existing file. This
should be used with care, as data loss can occur if you export to an existing directory.</p>
</section>
<section id="playback">
<h2><span class="section-number">8.4.4. </span><code class="docutils literal notranslate"><span class="pre">playback</span></code><a class="headerlink" href="#playback" title="Permalink to this headline">¶</a></h2>
<p>The playback command can simulate a streaming ingestion by replaying features that have already been ingested.
Features are returned based on a date attribute in the feature. For example, if replaying three features that
have dates that are each one second apart, each feature will be emitted after a delay of one second. The rate
of export can be modified to speed up or slow down the original time differences.</p>
<p>In order to simulate a data stream, the output of this command can be piped into another process, for example
to send messages to a Kafka topic or write files to NiFi for ingestion.</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 26%" />
<col style="width: 74%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Argument</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">-c,</span> <span class="pre">--catalog</span> <span class="pre">*</span></code></p></td>
<td><p>The catalog table containing schema metadata</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">-f,</span> <span class="pre">--feature-name</span> <span class="pre">*</span></code></p></td>
<td><p>The name of the schema</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">--interval</span> <span class="pre">*</span></code></p></td>
<td><p>Date interval to replay, in the format
<code class="docutils literal notranslate"><span class="pre">yyyy-MM-dd'T'HH:mm:ss.SSSZ/yyyy-MM-dd'T'HH:mm:ss.SSSZ</span></code></p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">--dtg</span></code></p></td>
<td><p>Date attribute to base playback on. If not specified,
will use the default schema date field</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">--rate</span></code></p></td>
<td><p>Rate multiplier to speed-up (or slow down) features being
returned, as a float</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">--live</span></code></p></td>
<td><p>Will modify the returned dates to match the current time</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">--step-window</span></code></p></td>
<td><p>Query the interval in discrete chunks instead of all at
once (‘10 minutes’, ‘30 seconds’, etc)</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">-q,</span> <span class="pre">--cql</span></code></p></td>
<td><p>Additional CQL filter to select features to export.
Features will automatically be filtered to match the
time interval</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">-a,</span> <span class="pre">--attributes</span></code></p></td>
<td><p>Specific attributes to export</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">-m,</span> <span class="pre">--max-features</span></code></p></td>
<td><p>Limit the number of features exported</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">-F,</span> <span class="pre">--output-format</span></code></p></td>
<td><p>Output format used for export</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">-o,</span> <span class="pre">--output</span></code></p></td>
<td><p>Output to a file instead of standard out</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">--hints</span></code></p></td>
<td><p>Query hints used to modify the query</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">--no-header</span></code></p></td>
<td><p>Don’t export the type header, for CSV and TSV formats</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">--suppress-empty</span></code></p></td>
<td><p>If no features are exported, don’t write any headers or other output</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">--gzip</span></code></p></td>
<td><p>Level of gzip compression to use for output, from 1-9</p></td>
</tr>
</tbody>
</table>
<p>The playback command is an extension of the <a class="reference internal" href="#cli-export"><span class="std std-ref">export</span></a> command, and accepts all the parameters outlined there.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">--interval</span></code> parameter specifies the date range for features to replay, based on the date attribute
specified by <code class="docutils literal notranslate"><span class="pre">--dtg</span></code>, or the default schema date attribute if not specified.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">--rate</span></code> parameter can be used to speed up or slow down the replay. It is specified as a floating point
number. For example <code class="docutils literal notranslate"><span class="pre">--rate</span> <span class="pre">10</span></code> will make replay ten times faster, while <code class="docutils literal notranslate"><span class="pre">--rate</span> <span class="pre">0.1</span></code> will make replay
ten times slower.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">--step-window</span></code> parameter can be used to break up the query into discrete chunks, based on the time interval.
For larger exports, this will save memory overhead when sorting and will likely be faster. The window should be
large enough so that the overhead of creating multiple queries doesn’t slow down the process, but small enough so
that a manageable batch of features is returned for each query. The optimal window size will depend on the
time-based density of features, and the available hardware.</p>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="ingest.html" class="btn btn-neutral float-left" title="8.3. Ingest Commands" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="analytic.html" class="btn btn-neutral float-right" title="8.5. Analytic Commands" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p></p>
  </div>

  

<div role="contentinfo">
  <p>
    &copy; Copyright 2013-2023 <a href="https://www.ccri.com/">Commonwealth Computer Research, Inc.</a>
    <br/>
    Licensed under the <a href="https://www.opensource.org/licenses/apache2.0.php">Apache License, Version 2.0</a>
  </p>
</div>

<div role="contentinfo">
  <p>
    Built with <a href="https://www.sphinx-doc.org/">Sphinx</a>
    using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>
    - contribute to this page on
    <a href="https://github.com/locationtech/geomesa/edit/main/docs/user/cli/export.rst">GitHub <img src="../../_static/launch.svg"/></a>
  </p>

</div>



</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>