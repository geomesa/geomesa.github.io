

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>7.4. Query and Export Commands &mdash; GeoMesa 2.1.0-SNAPSHOT Manuals</title>
  

  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../../_static/css/theme_custom.css" type="text/css" />
  

  

  
        <link rel="index" title="Index"
              href="../../genindex.html"/>
        <link rel="search" title="Search" href="../../search.html"/>
    <link rel="top" title="GeoMesa 2.1.0-SNAPSHOT Manuals" href="../../index.html"/>
        <link rel="up" title="7. Command-Line Tools" href="index.html"/>
        <link rel="next" title="7.5. Analytic Commands" href="analytic.html"/>
        <link rel="prev" title="7.3. Ingest Commands" href="ingest.html"/> 

  
  <script src="../../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../../index.html" class="icon icon-home"> GeoMesa
          

          
          </a>

          
            
            
              <div class="version">
                2.1.0-SNAPSHOT
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
                <ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="../index.html">User Manual</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../introduction.html">1. Introduction</a></li>
<li class="toctree-l2"><a class="reference internal" href="../download.html">2. Versions and Downloads</a></li>
<li class="toctree-l2"><a class="reference internal" href="../install.html">3. Installation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../getting_started.html">4. Getting Started</a></li>
<li class="toctree-l2"><a class="reference internal" href="../architecture.html">5. Architecture Overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="../datastores/index.html">6. GeoMesa Data Stores</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="index.html">7. Command-Line Tools</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="status.html">7.1. Environment and Status Commands</a></li>
<li class="toctree-l3"><a class="reference internal" href="schemas.html">7.2. Schema Commands</a></li>
<li class="toctree-l3"><a class="reference internal" href="ingest.html">7.3. Ingest Commands</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">7.4. Query and Export Commands</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#convert">7.4.1. <code class="docutils literal"><span class="pre">convert</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#explain">7.4.2. <code class="docutils literal"><span class="pre">explain</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#export">7.4.3. <code class="docutils literal"><span class="pre">export</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="analytic.html">7.5. Analytic Commands</a></li>
<li class="toctree-l3"><a class="reference internal" href="sfts.html">7.6. Defining Simple Feature Types</a></li>
<li class="toctree-l3"><a class="reference internal" href="converters.html">7.7. Defining Simple Feature Converters</a></li>
<li class="toctree-l3"><a class="reference internal" href="logging.html">7.8. Logging Configuration</a></li>
<li class="toctree-l3"><a class="reference internal" href="filesystems.html">7.9. Remote File System Support</a></li>
<li class="toctree-l3"><a class="reference internal" href="console.html">7.10. GeoMesa Scala Console</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../accumulo/index.html">8. Accumulo Data Store</a></li>
<li class="toctree-l2"><a class="reference internal" href="../hbase/index.html">9. HBase Data Store</a></li>
<li class="toctree-l2"><a class="reference internal" href="../bigtable/index.html">10. Bigtable Data Store</a></li>
<li class="toctree-l2"><a class="reference internal" href="../cassandra/index.html">11. Cassandra Data Store</a></li>
<li class="toctree-l2"><a class="reference internal" href="../kafka/index.html">12. Kafka Data Store</a></li>
<li class="toctree-l2"><a class="reference internal" href="../lambda/index.html">13. Lambda Data Store</a></li>
<li class="toctree-l2"><a class="reference internal" href="../filesystem/index.html">14. FileSystem Datastore (Amazon S3, HDFS Datastore)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../geoserver.html">15. GeoServer Plugins</a></li>
<li class="toctree-l2"><a class="reference internal" href="../blobstore.html">16. GeoMesa Blob Store</a></li>
<li class="toctree-l2"><a class="reference internal" href="../convert/index.html">17. GeoMesa Convert</a></li>
<li class="toctree-l2"><a class="reference internal" href="../geojson.html">18. GeoMesa GeoJSON</a></li>
<li class="toctree-l2"><a class="reference internal" href="../metrics.html">19. GeoMesa Metrics</a></li>
<li class="toctree-l2"><a class="reference internal" href="../native_api.html">20. GeoMesa Native API</a></li>
<li class="toctree-l2"><a class="reference internal" href="../nifi.html">21. GeoMesa NiFi Bundle</a></li>
<li class="toctree-l2"><a class="reference internal" href="../process.html">22. GeoMesa Processes</a></li>
<li class="toctree-l2"><a class="reference internal" href="../spark/index.html">23. GeoMesa Spark</a></li>
<li class="toctree-l2"><a class="reference internal" href="../stream.html">24. GeoMesa Stream Processing</a></li>
<li class="toctree-l2"><a class="reference internal" href="../web_data.html">25. GeoMesa Web Data</a></li>
<li class="toctree-l2"><a class="reference internal" href="../upgrade.html">26. Upgrade Guide</a></li>
<li class="toctree-l2"><a class="reference internal" href="../index.html#appendix">Appendix</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../developer/index.html">Developer Manual</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../tutorials/index.html">Tutorials</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../../index.html">GeoMesa</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          

 



<div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../../index.html">Docs</a> &raquo;</li>
      
          <li><a href="../index.html">User Manual</a> &raquo;</li>
      
          <li><a href="index.html">7. Command-Line Tools</a> &raquo;</li>
      
    <li>7.4. Query and Export Commands</li>
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="../../_sources/user/cli/export.txt" rel="nofollow"> View page source</a>
          
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="query-and-export-commands">
<h1>7.4. Query and Export Commands<a class="headerlink" href="#query-and-export-commands" title="Permalink to this headline">¶</a></h1>
<p>These commands are used to query and export simple features. Required parameters are indicated with a <code class="docutils literal"><span class="pre">*</span></code>.</p>
<div class="section" id="convert">
<h2>7.4.1. <code class="docutils literal"><span class="pre">convert</span></code><a class="headerlink" href="#convert" title="Permalink to this headline">¶</a></h2>
<p>The convert command is used to directly transform data in one format into another, without ingesting them
into GeoMesa. For example, it could be used to convert CSV files to GeoJSON.</p>
<table border="1" class="docutils">
<colgroup>
<col width="30%" />
<col width="70%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Argument</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><code class="docutils literal"><span class="pre">-C,</span> <span class="pre">--converter</span> <span class="pre">*</span></code></td>
<td>The GeoMesa converter used to create <code class="docutils literal"><span class="pre">SimpleFeature</span></code>s</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal"><span class="pre">-s,</span> <span class="pre">--spec</span> <span class="pre">*</span></code></td>
<td>The <code class="docutils literal"><span class="pre">SimpleFeatureType</span></code> specification to create</td>
</tr>
<tr class="row-even"><td><code class="docutils literal"><span class="pre">-f,</span> <span class="pre">--feature-name</span></code></td>
<td>The name of the schema</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal"><span class="pre">-q,</span> <span class="pre">--cql</span></code></td>
<td>CQL filter to select features to export</td>
</tr>
<tr class="row-even"><td><code class="docutils literal"><span class="pre">-m,</span> <span class="pre">--max-features</span></code></td>
<td>Limit the number of features exported</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal"><span class="pre">-F,</span> <span class="pre">--output-format</span></code></td>
<td>Output format used for export</td>
</tr>
<tr class="row-even"><td><code class="docutils literal"><span class="pre">-o,</span> <span class="pre">--output</span></code></td>
<td>Output to a file instead of standard out</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal"><span class="pre">--hints</span></code></td>
<td>Query hints used to modify the query</td>
</tr>
<tr class="row-even"><td><code class="docutils literal"><span class="pre">--index</span></code></td>
<td>Specific index used to run the query</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal"><span class="pre">--no-header</span></code></td>
<td>Don&#8217;t export the type header, for CSV and TSV formats</td>
</tr>
<tr class="row-even"><td><code class="docutils literal"><span class="pre">--gzip</span></code></td>
<td>Level of gzip compression to use for output, from 1-9</td>
</tr>
</tbody>
</table>
<p>See <a class="reference internal" href="#cli-export"><span class="std std-ref">export</span></a> and <a class="reference internal" href="ingest.html#cli-ingest"><span class="std std-ref">ingest</span></a> for a description of the arguments.</p>
</div>
<div class="section" id="explain">
<span id="cli-explain"></span><h2>7.4.2. <code class="docutils literal"><span class="pre">explain</span></code><a class="headerlink" href="#explain" title="Permalink to this headline">¶</a></h2>
<p>The explain command can be used to debug queries that are slow or problematic. Without actually running the query,
it will show a variety of data, including the index being used, any query hints extracted, the exact ranges being
scanned and filters being applied.</p>
<table border="1" class="docutils">
<colgroup>
<col width="30%" />
<col width="70%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Argument</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><code class="docutils literal"><span class="pre">-c,</span> <span class="pre">--catalog</span> <span class="pre">*</span></code></td>
<td>The catalog table containing schema metadata</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal"><span class="pre">-f,</span> <span class="pre">--feature-name</span> <span class="pre">*</span></code></td>
<td>The name of the schema</td>
</tr>
<tr class="row-even"><td><code class="docutils literal"><span class="pre">-q,</span> <span class="pre">--cql</span> <span class="pre">*</span></code></td>
<td>CQL filter to select features to export</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal"><span class="pre">-a,</span> <span class="pre">--attributes</span></code></td>
<td>Specific attributes to export</td>
</tr>
<tr class="row-even"><td><code class="docutils literal"><span class="pre">--hints</span></code></td>
<td>Query hints used to modify the query</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal"><span class="pre">--index</span></code></td>
<td>Specific index used to run the query</td>
</tr>
</tbody>
</table>
<p>See <a class="reference internal" href="#cli-export"><span class="std std-ref">export</span></a> for a description of the arguments.</p>
</div>
<div class="section" id="export">
<span id="cli-export"></span><h2>7.4.3. <code class="docutils literal"><span class="pre">export</span></code><a class="headerlink" href="#export" title="Permalink to this headline">¶</a></h2>
<p>Export features in a variety of formats.</p>
<table border="1" class="docutils">
<colgroup>
<col width="30%" />
<col width="70%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Argument</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><code class="docutils literal"><span class="pre">-c,</span> <span class="pre">--catalog</span> <span class="pre">*</span></code></td>
<td>The catalog table containing schema metadata</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal"><span class="pre">-f,</span> <span class="pre">--feature-name</span> <span class="pre">*</span></code></td>
<td>The name of the schema</td>
</tr>
<tr class="row-even"><td><code class="docutils literal"><span class="pre">-q,</span> <span class="pre">--cql</span></code></td>
<td>CQL filter to select features to export</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal"><span class="pre">-a,</span> <span class="pre">--attributes</span></code></td>
<td>Specific attributes to export</td>
</tr>
<tr class="row-even"><td><code class="docutils literal"><span class="pre">-m,</span> <span class="pre">--max-features</span></code></td>
<td>Limit the number of features exported</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal"><span class="pre">-F,</span> <span class="pre">--output-format</span></code></td>
<td>Output format used for export</td>
</tr>
<tr class="row-even"><td><code class="docutils literal"><span class="pre">-o,</span> <span class="pre">--output</span></code></td>
<td>Output to a file instead of standard out</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal"><span class="pre">--hints</span></code></td>
<td>Query hints used to modify the query</td>
</tr>
<tr class="row-even"><td><code class="docutils literal"><span class="pre">--index</span></code></td>
<td>Specific index used to run the query</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal"><span class="pre">--no-header</span></code></td>
<td>Don&#8217;t export the type header, for CSV and TSV formats</td>
</tr>
<tr class="row-even"><td><code class="docutils literal"><span class="pre">--gzip</span></code></td>
<td>Level of gzip compression to use for output, from 1-9</td>
</tr>
</tbody>
</table>
<p>The <code class="docutils literal"><span class="pre">--attributes</span></code> argument can be used to select a subset of attributes to export, or to transform
the attributes using filter functions. A simple projection can be specified as a comma-delimited list:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="o">--</span><span class="n">attributes</span> <span class="n">name</span><span class="p">,</span><span class="n">age</span><span class="p">,</span><span class="n">geom</span>
</pre></div>
</div>
<p>The feature ID can be specified along with other attribute names, with the reserved word <code class="docutils literal"><span class="pre">id</span></code>:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="o">--</span><span class="n">attributes</span> <span class="nb">id</span><span class="p">,</span><span class="n">name</span><span class="p">,</span><span class="n">age</span><span class="p">,</span><span class="n">geom</span>
</pre></div>
</div>
<p>Transforms can be accomplished by specifying transform functions:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="o">--</span><span class="n">attributes</span> <span class="nb">id</span><span class="p">,</span><span class="n">name</span><span class="p">,</span><span class="n">name_transform</span><span class="o">=</span><span class="n">strConcat</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="s1">&#39;foo&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>For a full list of transforms, see the GeoTools <a class="reference external" href="http://docs.geotools.org/latest/userguide/library/main/function_list.html">documentation</a>.
Note that not all functions work in transforms, however.</p>
<p>The <code class="docutils literal"><span class="pre">--output-format</span></code> argument defines the encoding used for export. Currently, it can be one of:</p>
<ul class="simple">
<li><code class="docutils literal"><span class="pre">arrow</span></code> Apache Arrow streaming file format</li>
<li><code class="docutils literal"><span class="pre">avro</span></code> Apache Avro format</li>
<li><code class="docutils literal"><span class="pre">bin</span></code> Custom minimal binary encoding</li>
<li><code class="docutils literal"><span class="pre">csv</span></code>, <code class="docutils literal"><span class="pre">tsv</span></code></li>
<li><code class="docutils literal"><span class="pre">geojson</span></code>, <code class="docutils literal"><span class="pre">json</span></code></li>
<li><code class="docutils literal"><span class="pre">gml</span></code> <a class="reference external" href="http://www.opengeospatial.org/standards/gml">Geography Markup Language</a></li>
<li><code class="docutils literal"><span class="pre">shp</span></code> ESRI Shapefile</li>
<li><code class="docutils literal"><span class="pre">leaflet</span></code> Export data to a leaflet map and open in the default browser, if possible</li>
<li><code class="docutils literal"><span class="pre">null</span></code> suppress output entirely</li>
</ul>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The leaflet format is intended for testing and small scale data exploration and visualization only. For production
map generation it is highly recommended to use GeoServer. Additionally, the resulting file from this command
requires the use of an online browser to open in order to access online resources.</p>
</div>
<p>The <code class="docutils literal"><span class="pre">--output</span></code> argument can be used to export to a file. By default, export data is written to the standard
output stream.</p>
<p>The <code class="docutils literal"><span class="pre">--hints</span></code> argument can be used to set query hints. Hints should be specified as <code class="docutils literal"><span class="pre">key1=value1;key2=value2</span></code>, etc.
Note that due to shell expansion, the hint string will likely need to be quoted. See <a class="reference internal" href="../datastores/analytic_queries.html#analytic-queries"><span class="std std-ref">Analytic Querying</span></a> for
examples of query hints that can be set. Note that query hints may cause errors if they don&#8217;t correspond to the
output format specified.</p>
<p>The <code class="docutils literal"><span class="pre">--index</span></code> argument can be used to force the query to run against a particular index, instead of using
the best index as determined through query planning. The argument should be the name of an index, e.g. <code class="docutils literal"><span class="pre">id</span></code>
or <code class="docutils literal"><span class="pre">z3</span></code>. See <a class="reference internal" href="../datastores/index_overview.html#index-overview"><span class="std std-ref">Index Overview</span></a> for a list of valid indices. Note that not all schemas will
have all index types.</p>
<p>The <code class="docutils literal"><span class="pre">--gzip</span></code> argument can be used to compress the output through <strong>gzip</strong> encoding. It can be specified
as a number between 1-9. Higher numbers indicate more compression, lower numbers indicate faster compression.</p>
</div>
</div>


           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="analytic.html" class="btn btn-neutral float-right" title="7.5. Analytic Commands" accesskey="n">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="ingest.html" class="btn btn-neutral" title="7.3. Ingest Commands" accesskey="p"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>

    </p>
  </div>

<div role="contentinfo">
  <p>
    &copy; Copyright 2013-2017 <a href="https://www.ccri.com/">Commonwealth Computer Research, Inc.</a>
    <br/>
    Licensed under the <a href="http://www.opensource.org/licenses/apache2.0.php">Apache License, Version 2.0</a>
  </p>
</div>

Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>



</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../../',
            VERSION:'2.1.0-SNAPSHOT',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="../../_static/jquery.js"></script>
      <script type="text/javascript" src="../../_static/underscore.js"></script>
      <script type="text/javascript" src="../../_static/doctools.js"></script>
      <script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

  

  
  
    <script type="text/javascript" src="../../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>