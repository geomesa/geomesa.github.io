

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>11.3. Cassandra Command Line Tools &mdash; GeoMesa 1.3.0-m3-SNAPSHOT Manuals</title>
  

  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../../_static/css/theme_custom.css" type="text/css" />
  

  

  
    <link rel="top" title="GeoMesa 1.3.0-m3-SNAPSHOT Manuals" href="../../index.html"/>
        <link rel="up" title="11. Cassandra Data Store" href="index.html"/>
        <link rel="next" title="11.4. Using the Cassandra Data Store in GeoServer" href="geoserver.html"/>
        <link rel="prev" title="11.2. Using the Cassandra DataStore Programmatically" href="usage.html"/> 

  
  <script src="../../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../../index.html" class="icon icon-home"> GeoMesa
          

          
          </a>

          
            
            
              <div class="version">
                1.3.0-m3-SNAPSHOT
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
                <ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="../index.html">User Manual</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../introduction.html">1. Introduction</a></li>
<li class="toctree-l2"><a class="reference internal" href="../architecture.html">2. Architecture Overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="../getting_started.html">3. Getting Started</a></li>
<li class="toctree-l2"><a class="reference internal" href="../download.html">4. Versions and Downloads</a></li>
<li class="toctree-l2"><a class="reference internal" href="../install.html">5. Installation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../datastores/index.html">6. GeoMesa Data Stores</a></li>
<li class="toctree-l2"><a class="reference internal" href="../accumulo/index.html">7. Accumulo Data Store</a></li>
<li class="toctree-l2"><a class="reference internal" href="../kafka/index.html">8. Kafka Data Store</a></li>
<li class="toctree-l2"><a class="reference internal" href="../hbase/index.html">9. HBase Data Store</a></li>
<li class="toctree-l2"><a class="reference internal" href="../bigtable/index.html">10. Bigtable Data Store</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="index.html">11. Cassandra Data Store</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="install.html">11.1. Installing GeoMesa Cassandra</a></li>
<li class="toctree-l3"><a class="reference internal" href="usage.html">11.2. Using the Cassandra DataStore Programmatically</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="">11.3. Cassandra Command Line Tools</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#configuring-the-command-line-tools">11.3.1. Configuring the Command Line Tools</a></li>
<li class="toctree-l4"><a class="reference internal" href="#ingesting-other-datasets">11.3.2. Ingesting Other Datasets</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="geoserver.html">11.4. Using the Cassandra Data Store in GeoServer</a></li>
<li class="toctree-l3"><a class="reference internal" href="implementation_details.html">11.5. Implementation Details</a></li>
<li class="toctree-l3"><a class="reference internal" href="contribute.html">11.6. How you can contribute</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../geoserver.html">12. GeoServer Plugins</a></li>
<li class="toctree-l2"><a class="reference internal" href="../blobstore.html">13. GeoMesa Blob Store</a></li>
<li class="toctree-l2"><a class="reference internal" href="../convert/index.html">14. GeoMesa Convert</a></li>
<li class="toctree-l2"><a class="reference internal" href="../geojson.html">15. GeoMesa GeoJSON</a></li>
<li class="toctree-l2"><a class="reference internal" href="../metrics.html">16. GeoMesa Metrics</a></li>
<li class="toctree-l2"><a class="reference internal" href="../native_api.html">17. GeoMesa Native API</a></li>
<li class="toctree-l2"><a class="reference internal" href="../process.html">18. GeoMesa Processes</a></li>
<li class="toctree-l2"><a class="reference internal" href="../spark/index.html">19. GeoMesa Spark</a></li>
<li class="toctree-l2"><a class="reference internal" href="../stream.html">20. GeoMesa Stream Processing</a></li>
<li class="toctree-l2"><a class="reference internal" href="../web_data.html">21. GeoMesa Web Data</a></li>
<li class="toctree-l2"><a class="reference internal" href="../index.html#appendix">Appendix</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../developer/index.html">Developer Manual</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../tutorials/index.html">Tutorials</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../../index.html">GeoMesa</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          

 



<div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../../index.html">Docs</a> &raquo;</li>
      
          <li><a href="../index.html">User Manual</a> &raquo;</li>
      
          <li><a href="index.html">11. Cassandra Data Store</a> &raquo;</li>
      
    <li>11.3. Cassandra Command Line Tools</li>
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="../../_sources/user/cassandra/commandline_tools.txt" rel="nofollow"> View page source</a>
          
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="cassandra-command-line-tools">
<h1>11.3. Cassandra Command Line Tools<a class="headerlink" href="#cassandra-command-line-tools" title="Permalink to this headline">¶</a></h1>
<p>The GeoMesa Cassandra distribution comes with a set of command line tools
for working with GeoMesa and Cassandra. This section shows how to use
the tools.</p>
<p>Before starting, check the following:</p>
<ul class="simple">
<li>Make sure Cassandra is running (check by running <code class="docutils literal"><span class="pre">bin/nodetool</span> <span class="pre">status</span></code> in your
Cassandra installation directory.)</li>
<li>Make sure you&#8217;ve set the <code class="docutils literal"><span class="pre">CASSANDRA_LIB</span></code> environment variable (check by running
<code class="docutils literal"><span class="pre">echo</span> <span class="pre">$CASSANDRA_LIB</span></code>)</li>
<li>Make sure you&#8217;ve created a key space within Cassandra (check by starting <code class="docutils literal"><span class="pre">bin/cqlsh</span></code> in your
Cassandra installation directory, and then by typing <code class="docutils literal"><span class="pre">DESCRIBE</span> <span class="pre">KEYSPACES</span></code>)</li>
</ul>
<p>Then, <code class="docutils literal"><span class="pre">cd</span></code> into the <code class="docutils literal"><span class="pre">GEOMESA_CASSANDRA_HOME</span></code> directory, and type <code class="docutils literal"><span class="pre">bin/geomesa-cassandra</span> <span class="pre">help</span></code>. You should
get a listing of the tools with descriptions.</p>
<p>The first tool we&#8217;ll try is the <code class="docutils literal"><span class="pre">ingest</span></code> command. This command takes data from an external source and
ingests it into the Cassandra database. For this example, we&#8217;ll use some sample data located
at <code class="docutils literal"><span class="pre">examples/ingest/csv/example.csv</span></code> in the <code class="docutils literal"><span class="pre">GEOMESA_CASSANDRA_HOME</span></code> directory. Also, to make
editing and running the command easier, we&#8217;ll use the example bash script at <code class="docutils literal"><span class="pre">examples/ingest/csv/ingest_csv.sh</span></code>.
This is the script:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span>#!/usr/bin/env bash

# spec and converter for example_csv are registered in $GEOMESA_CASSANDRA_HOME/conf/application.conf
bin/geomesa-cassandra ingest \
    --contact-point 127.0.0.1:9042 \
    --key-space mykeyspace \
    --catalog mycatalog \
    --name-space mynamespace \
    --converter example_csv \
    --spec example_csv \
    examples/ingest/csv/example.csv
</pre></div>
</div>
<ul>
<li><p class="first">The <code class="docutils literal"><span class="pre">contact-point</span></code> is the address a Cassandra node. If you&#8217;re running Cassandra locally with
the default configuration, you shouldn&#8217;t have to change this.</p>
</li>
<li><p class="first">The <code class="docutils literal"><span class="pre">key-space</span></code> is the Cassandra key space that you created as part of configuring Cassandra (see above).
Edit this argument if needed to match the name of your key space.</p>
</li>
<li><p class="first">The <code class="docutils literal"><span class="pre">catalog</span></code> argument specifies the name of a Cassandra table that will be created in your name space
by the <code class="docutils literal"><span class="pre">ingest</span></code> command.
You can name the catalog table anything you want.
This table is a metadata table that contains a list of each GeoMesa data table
that you have created. Before you run the <code class="docutils literal"><span class="pre">ingest</span></code> command for the first time, this table does
not exist. When you run <code class="docutils literal"><span class="pre">ingest</span></code> for the first time, GeoMesa creates two tables: this &#8220;catalog&#8221; metadata
table, and the table that actually stores your data. If you run <code class="docutils literal"><span class="pre">ingest</span></code> again with a different dataset,
GeoMesa will append a row to the &#8220;catalog&#8221; table, and also create an additional table for the new data.</p>
</li>
<li><p class="first">The <code class="docutils literal"><span class="pre">name-space</span></code> parameter can be anything you want. (It is used by GeoTools to provide a name space for your feature types.)</p>
</li>
<li><p class="first">The <code class="docutils literal"><span class="pre">converter</span></code> and <code class="docutils literal"><span class="pre">spec</span></code> parameters refer to a specific file located at <code class="docutils literal"><span class="pre">conf/application.conf</span></code> within the
<code class="docutils literal"><span class="pre">GEOMESA_CASSANDRA_HOME</span></code> directory. This file contains specifications for &#8220;converters&#8221; and &#8220;sfts&#8221; (SimpleFeatureTypes) parsed by the <a class="reference internal" href="../convert/index.html#converters"><span>GeoMesa Convert</span></a> library.
In this specific example it only contains one of each: a converter and a SimpleFeatureType which are both called
&#8220;example_csv&#8221;. The converter specifies how a raw data file should be parsed. For example, the converter specifies
that the fourth column of the input file should be converted to a date using a specific date format. The
SimpleFeatureType part specifies how the parsed data should be used to create a SimpleFeatureType. For example, this
files specifies that the SimpleFeatureType&#8217;s first attribute should be one called &#8220;name&#8221;. GeoMesa uses these specifications
to ingest the data from the external data file into the Cassandra database. (For more information on converters see <a class="reference internal" href="../convert/index.html#converters"><span>GeoMesa Convert</span></a>.)</p>
<p>GeoMesa automatically finds the <code class="docutils literal"><span class="pre">conf/application.conf</span></code> file based on its name and location. You can add additional
converters and SFT specifications to it as needed for ingesting other datasets. In addition, you can also
specify converters and SFT specifications by adding directories to the
<code class="docutils literal"><span class="pre">conf/sfts</span></code> directory. For more details see <a class="reference internal" href="../convert/usage_tools.html#installing-sft-and-converter-definitions"><span>Using SFT and Converter Definitions with Command-Line Tools</span></a>.</p>
</li>
<li><p class="first">The last argument is the location of the data file that we want to ingest.</p>
</li>
</ul>
<p>If needed, edit the parameter arguments in the bash script. Then, <code class="docutils literal"><span class="pre">cd</span></code> into the <code class="docutils literal"><span class="pre">GEOMESA_CASSANDRA_HOME</span></code>
directory, and run the script by typing:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span>source examples/ingest/csv/ingest_csv.sh
</pre></div>
</div>
<p>You should see a message indicating that three features have been ingested.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">If you see an error message regarding <code class="docutils literal"><span class="pre">SLF4J</span></code>, find the <code class="docutils literal"><span class="pre">logback-classic-1.1.3.jar</span></code>
file in your <code class="docutils literal"><span class="pre">CASSANDRA_LIB</span></code> directory, and rename it to include a <code class="docutils literal"><span class="pre">.exclude</span></code> extension.</p>
</div>
<p>You can take a look at what happened
by going to the Cassadra CQL shell (<code class="docutils literal"><span class="pre">cqlsh</span></code>) and typing:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span>DESCRIBE KEYSPACE mykeyspace ;
</pre></div>
</div>
<p>This will show that two new tables have been created: <code class="docutils literal"><span class="pre">mycatalog</span></code> and <code class="docutils literal"><span class="pre">example_csv</span></code>. Type:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span>SELECT * FROM mykeyspace.mycatalog ;
</pre></div>
</div>
<p>and</p>
<div class="highlight-python"><div class="highlight"><pre><span></span>SELECT * FROM mykeyspace.example_csv ;
</pre></div>
</div>
<p>to see the contents of the tables.</p>
<p>Now that we&#8217;ve ingested some data into the Cassandra database, we can try using some other commands. For example,
we list the tables (&#8220;feature types&#8221;) that we&#8217;ve ingested:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span>bin/geomesa-cassandra get-type-names \
    --contact-point 127.0.0.1:9042 \
    --key-space mykeyspace \
    --catalog mycatalog \
    --name-space mynamespace \
</pre></div>
</div>
<p>We can also inspect the feature type that we just ingested:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span>bin/geomesa-cassandra describe-schema \
    --contact-point 127.0.0.1:9042 \
    --key-space mykeyspace \
    --catalog mycatalog \
    --name-space mynamespace \
    --feature-name example_csv
</pre></div>
</div>
<div class="section" id="configuring-the-command-line-tools">
<h2>11.3.1. Configuring the Command Line Tools<a class="headerlink" href="#configuring-the-command-line-tools" title="Permalink to this headline">¶</a></h2>
<p>You can configure the command line tools using the
<code class="docutils literal"><span class="pre">conf/geomesa-env.sh</span></code> file in the <code class="docutils literal"><span class="pre">GEOMESA_CASSANDRA_HOME</span></code> directory.
See the comments in that file for instructions.</p>
</div>
<div class="section" id="ingesting-other-datasets">
<h2>11.3.2. Ingesting Other Datasets<a class="headerlink" href="#ingesting-other-datasets" title="Permalink to this headline">¶</a></h2>
<p>To ingest other datasets, you need to provide converter and SimpleFeatureType specifications.
For details on how to provide these specifications, see <a class="reference internal" href="../convert/usage_tools.html#installing-sft-and-converter-definitions"><span>Using SFT and Converter Definitions with Command-Line Tools</span></a>
and <a class="reference internal" href="../accumulo/commandline_tools.html#ingest"><span>ingest</span></a>. For more details on the converter specification syntax see <a class="reference internal" href="../convert/index.html#converters"><span>GeoMesa Convert</span></a>.</p>
<p>When ingesting other datasets, keep the following GeoMesa-Cassandra-specific limitations in mind:</p>
<ul class="simple">
<li>The feature type must have a date/time field in addition to a geometry field.</li>
<li>The geometry type must be &#8220;Point&#8221;. Polygons and other geometry types are not allowed.</li>
<li>The following attribute names may not be used in the feature type specification: <code class="docutils literal"><span class="pre">pkz</span></code>, <code class="docutils literal"><span class="pre">z31</span></code>, and <code class="docutils literal"><span class="pre">fid</span></code> .
However, any field in the original data may be chosen as the ID field. This field will become the
<code class="docutils literal"><span class="pre">fid</span></code> table in the Cassandra table.</li>
<li>The name of the feature type must be a valid Cassandra table name.</li>
<li>Complex field types like lists and maps are not allowed.</li>
</ul>
</div>
</div>


           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="geoserver.html" class="btn btn-neutral float-right" title="11.4. Using the Cassandra Data Store in GeoServer" accesskey="n">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="usage.html" class="btn btn-neutral" title="11.2. Using the Cassandra DataStore Programmatically" accesskey="p"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2013-2016 Commonwealth Computer Research, Inc.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../../',
            VERSION:'1.3.0-m3-SNAPSHOT',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="../../_static/jquery.js"></script>
      <script type="text/javascript" src="../../_static/underscore.js"></script>
      <script type="text/javascript" src="../../_static/doctools.js"></script>
      <script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

  

  
  
    <script type="text/javascript" src="../../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>