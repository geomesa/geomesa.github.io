<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang=""><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>FileSystemDataStoreParams.scala</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">GeoMesa FileSystem DataStore</a> &gt; <a href="index.source.html" class="el_package">org.locationtech.geomesa.fs.data</a> &gt; <span class="el_source">FileSystemDataStoreParams.scala</span></div><h1>FileSystemDataStoreParams.scala</h1><pre class="source lang-java linenums">/***********************************************************************
 * Copyright (c) 2013-2025 General Atomics Integrated Intelligence, Inc.
 * All rights reserved. This program and the accompanying materials
 * are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at
 * https://www.apache.org/licenses/LICENSE-2.0
 ***********************************************************************/

package org.locationtech.geomesa.fs.data

import org.apache.hadoop.conf.Configuration
import org.locationtech.geomesa.fs.storage.api.FileSystemStorageFactory
import org.locationtech.geomesa.index.geotools.GeoMesaDataStoreFactory
import org.locationtech.geomesa.index.geotools.GeoMesaDataStoreFactory.NamespaceParams
import org.locationtech.geomesa.security.SecurityParams
import org.locationtech.geomesa.utils.classpath.ServiceLoader
import org.locationtech.geomesa.utils.conf.GeoMesaSystemProperties.SystemProperty
import org.locationtech.geomesa.utils.geotools.GeoMesaParam
import org.locationtech.geomesa.utils.geotools.GeoMesaParam.{ConvertedParam, ReadWriteFlag, SystemPropertyDurationParam}

import java.io.{StringReader, StringWriter}
import java.util.Properties
import scala.concurrent.duration.Duration

<span class="nc" id="L25">object FileSystemDataStoreParams extends FileSystemDataStoreParams</span>

<span class="nc" id="L27">trait FileSystemDataStoreParams extends SecurityParams with NamespaceParams {</span>

  import scala.collection.JavaConverters._

<span class="nc" id="L31">  val WriterFileTimeout: SystemProperty = SystemProperty(&quot;geomesa.fs.writer.partition.timeout&quot;, &quot;60s&quot;)</span>

<span class="nc" id="L33">  val PathParam =</span>
<span class="nc" id="L34">    new GeoMesaParam[String](</span>
<span class="nc" id="L35">      &quot;fs.path&quot;,</span>
<span class="nc" id="L36">      &quot;Root of the filesystem hierarchy&quot;,</span>
<span class="nc" id="L37">      optional = false,</span>
<span class="nc" id="L38">      supportsNiFiExpressions = true</span>
    )

<span class="nc" id="L41">  val EncodingParam =</span>
<span class="nc" id="L42">    new GeoMesaParam[String](</span>
<span class="nc" id="L43">      &quot;fs.encoding&quot;,</span>
<span class="nc" id="L44">      &quot;Encoding of data&quot;,</span>
<span class="nc" id="L45">      default = &quot;&quot;, // needed to prevent geoserver from selecting something</span>
<span class="nc" id="L46">      enumerations = ServiceLoader.load[FileSystemStorageFactory]().map(_.encoding),</span>
<span class="nc" id="L47">      supportsNiFiExpressions = true,</span>
<span class="nc" id="L48">      readWrite = ReadWriteFlag.WriteOnly</span>
    )

<span class="nc" id="L51">  val ConfigPathsParam =</span>
<span class="nc" id="L52">    new GeoMesaParam[String](</span>
<span class="nc" id="L53">      &quot;fs.config.paths&quot;,</span>
<span class="nc" id="L54">      &quot;Additional Hadoop configuration resource files (comma-delimited)&quot;,</span>
<span class="nc" id="L55">      supportsNiFiExpressions = true</span>
    )

<span class="nc" id="L58">  val ConfigsParam =</span>
<span class="nc" id="L59">    new GeoMesaParam[String](</span>
<span class="nc" id="L60">      &quot;fs.config.xml&quot;,</span>
<span class="nc" id="L61">      &quot;Additional Hadoop configuration properties, as a standard XML `&lt;configuration&gt;` element&quot;,</span>
<span class="nc" id="L62">      largeText = true,</span>
<span class="nc" id="L63">      deprecatedParams = Seq(new ConvertedParam[String, String](&quot;fs.config&quot;, convertPropsToXml)),</span>
<span class="nc" id="L64">      supportsNiFiExpressions = true</span>
    )

<span class="nc" id="L67">  val ReadThreadsParam =</span>
<span class="nc" id="L68">    new GeoMesaParam[Integer](</span>
<span class="nc" id="L69">      &quot;fs.read-threads&quot;,</span>
<span class="nc" id="L70">      &quot;Read Threads&quot;,</span>
<span class="nc" id="L71">      default = 4,</span>
<span class="nc" id="L72">      supportsNiFiExpressions = true,</span>
<span class="nc" id="L73">      readWrite = ReadWriteFlag.ReadOnly</span>
    )

<span class="nc" id="L76">  val WriteTimeoutParam =</span>
<span class="nc" id="L77">    new GeoMesaParam[Duration](</span>
<span class="nc" id="L78">      &quot;fs.writer.partition.timeout&quot;,</span>
<span class="nc" id="L79">      &quot;Timeout for closing a partition file after write, e.g. '60 seconds'&quot;,</span>
<span class="nc" id="L80">      default = Duration(&quot;60s&quot;),</span>
<span class="nc" id="L81">      systemProperty = Some(SystemPropertyDurationParam(WriterFileTimeout)),</span>
<span class="nc" id="L82">      supportsNiFiExpressions = true,</span>
<span class="nc" id="L83">      readWrite = ReadWriteFlag.WriteOnly</span>
    )

<span class="nc" id="L86">  val QueryTimeoutParam: GeoMesaParam[Duration] = GeoMesaDataStoreFactory.QueryTimeoutParam</span>

  @deprecated(&quot;ConfigsParam&quot;)
<span class="nc" id="L89">  val ConfParam =</span>
<span class="nc" id="L90">    new GeoMesaParam[Properties](</span>
<span class="nc" id="L91">      &quot;fs.config&quot;,</span>
<span class="nc" id="L92">      &quot;Values to set in the root Configuration, in Java properties format&quot;,</span>
<span class="nc" id="L93">      largeText = true</span>
    )

  /**
   * Convert java properties format to *-site.xml
   *
   * @param properties props
   * @return
   */
  private def convertPropsToXml(properties: String): String = {
<span class="nc" id="L103">    val conf = new Configuration(false)</span>

<span class="nc" id="L105">    val props = new Properties()</span>
<span class="nc" id="L106">    props.load(new StringReader(properties))</span>
<span class="nc bnc" id="L107" title="All 2 branches missed.">    props.asScala.foreach { case (k, v) =&gt; conf.set(k, v) }</span>

<span class="nc" id="L109">    val out = new StringWriter()</span>
<span class="nc" id="L110">    conf.writeXml(out)</span>
<span class="nc" id="L111">    out.toString</span>
  }
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.14.202510111229</span></div></body></html>