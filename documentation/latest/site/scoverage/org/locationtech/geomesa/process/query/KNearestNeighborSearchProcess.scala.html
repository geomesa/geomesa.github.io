<html>
      <head>
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
        <title id="title">
          org/locationtech/geomesa/process/query/KNearestNeighborSearchProcess.scala.html
        </title>
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/jquery.tablesorter/2.20.1/css/theme.default.min.css" type="text/css"/><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.tablesorter/2.20.1/js/jquery.tablesorter.min.js"></script><link rel="stylesheet" href="https://netdna.bootstrapcdn.com/bootstrap/3.0.3/css/bootstrap.min.css" type="text/css"/><script src="https://netdna.bootstrapcdn.com/bootstrap/3.0.3/js/bootstrap.min.js"></script><script type="text/javascript">
        $(document).ready(function() {$(".tablesorter").tablesorter();});
      </script>
        <style>
          table.codegrid { font-family: monospace; font-size: 12px; width: auto!important; }table.statementlist { width: auto!important; font-size: 13px; } table.codegrid td { padding: 0!important; border: 0!important } table td.linenumber { width: 40px!important; } 
        </style>
      </head>
      <body style="font-family: monospace;">
        <ul class="nav nav-tabs">
          <li>
            <a href="#codegrid" data-toggle="tab">Codegrid</a>
          </li>
          <li>
            <a href="#statementlist" data-toggle="tab">Statement List</a>
          </li>
        </ul>
        <div class="tab-content">
          <div class="tab-pane active" id="codegrid">
            <pre style='font-size: 12pt; font-family: courier, monospace;'>1 <span style=''>/***********************************************************************
</span>2 <span style=''> * Copyright (c) 2013-2025 General Atomics Integrated Intelligence, Inc.
</span>3 <span style=''> * All rights reserved. This program and the accompanying materials
</span>4 <span style=''> * are made available under the terms of the Apache License, Version 2.0
</span>5 <span style=''> * which accompanies this distribution and is available at
</span>6 <span style=''> * https://www.apache.org/licenses/LICENSE-2.0
</span>7 <span style=''> ***********************************************************************/
</span>8 <span style=''>
</span>9 <span style=''>package org.locationtech.geomesa.process.query
</span>10 <span style=''>
</span>11 <span style=''>import com.typesafe.scalalogging.LazyLogging
</span>12 <span style=''>import org.geotools.api.data.{Query, SimpleFeatureSource}
</span>13 <span style=''>import org.geotools.api.feature.Feature
</span>14 <span style=''>import org.geotools.api.feature.simple.SimpleFeature
</span>15 <span style=''>import org.geotools.api.filter.Filter
</span>16 <span style=''>import org.geotools.api.filter.expression.PropertyName
</span>17 <span style=''>import org.geotools.data.simple.SimpleFeatureCollection
</span>18 <span style=''>import org.geotools.feature.DefaultFeatureCollection
</span>19 <span style=''>import org.geotools.filter.text.ecql.ECQL
</span>20 <span style=''>import org.geotools.geometry.jts.ReferencedEnvelope
</span>21 <span style=''>import org.geotools.process.factory.{DescribeParameter, DescribeProcess, DescribeResult}
</span>22 <span style=''>import org.geotools.referencing.GeodeticCalculator
</span>23 <span style=''>import org.geotools.util.factory.Hints
</span>24 <span style=''>import org.locationtech.geomesa.filter.ff
</span>25 <span style=''>import org.locationtech.geomesa.index.geotools.GeoMesaFeatureCollection
</span>26 <span style=''>import org.locationtech.geomesa.index.process.GeoMesaProcessVisitor
</span>27 <span style=''>import org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.KNNVisitor
</span>28 <span style=''>import org.locationtech.geomesa.process.{FeatureResult, GeoMesaProcess}
</span>29 <span style=''>import org.locationtech.geomesa.utils.collection.SelfClosingIterator
</span>30 <span style=''>import org.locationtech.geomesa.utils.concurrent.CachedThreadPool
</span>31 <span style=''>import org.locationtech.geomesa.utils.geometry.DistanceCalculator
</span>32 <span style=''>import org.locationtech.geomesa.utils.geotools.{CRS_EPSG_4326, GeometryUtils}
</span>33 <span style=''>import org.locationtech.geomesa.utils.io.WithClose
</span>34 <span style=''>import org.locationtech.jts.geom.Point
</span>35 <span style=''>
</span>36 <span style=''>@DescribeProcess(
</span>37 <span style=''>  title = &quot;Geomesa-enabled K Nearest Neighbor Search&quot;,
</span>38 <span style=''>  description = &quot;Performs a K-nearest-neighbor search on a feature collection using a second feature collection as input&quot;
</span>39 <span style=''>)
</span>40 <span style=''>class KNearestNeighborSearchProcess extends GeoMesaProcess with LazyLogging {
</span>41 <span style=''>
</span>42 <span style=''>  @DescribeResult(description = &quot;Output feature collection&quot;)
</span>43 <span style=''>  def execute(
</span>44 <span style=''>               @DescribeParameter(
</span>45 <span style=''>                 name = &quot;inputFeatures&quot;,
</span>46 <span style=''>                 description = &quot;Feature collection that defines the points to search&quot;)
</span>47 <span style=''>               inputFeatures: SimpleFeatureCollection,
</span>48 <span style=''>
</span>49 <span style=''>               @DescribeParameter(
</span>50 <span style=''>                 name = &quot;dataFeatures&quot;,
</span>51 <span style=''>                 description = &quot;Feature collection to query for nearest neighbors&quot;)
</span>52 <span style=''>               dataFeatures: SimpleFeatureCollection,
</span>53 <span style=''>
</span>54 <span style=''>               @DescribeParameter(
</span>55 <span style=''>                 name = &quot;numDesired&quot;,
</span>56 <span style=''>                 description = &quot;k, the number of nearest neighbors to return&quot;)
</span>57 <span style=''>               numDesired: java.lang.Integer,
</span>58 <span style=''>
</span>59 <span style=''>               @DescribeParameter(
</span>60 <span style=''>                 name = &quot;estimatedDistance&quot;,
</span>61 <span style=''>                 description = &quot;Estimate of the distance in meters for the k-th nearest neighbor, used for the initial query window&quot;)
</span>62 <span style=''>               estimatedDistance: java.lang.Double,
</span>63 <span style=''>
</span>64 <span style=''>               @DescribeParameter(
</span>65 <span style=''>                 name = &quot;maxSearchDistance&quot;,
</span>66 <span style=''>                 description = &quot;Maximum search distance in meters, used to prevent runaway queries of the entire data set&quot;)
</span>67 <span style=''>               maxSearchDistance: java.lang.Double
</span>68 <span style=''>               ): SimpleFeatureCollection = {
</span>69 <span style=''>
</span>70 <span style=''>    logger.debug(
</span>71 <span style=''>      s&quot;Running KNN query for ${dataFeatures.getClass.getName} with k = $numDesired, &quot; +
</span>72 <span style=''>        s&quot;initial distance = $estimatedDistance, max distance = $maxSearchDistance&quot;)
</span>73 <span style=''>
</span>74 <span style=''>    val visitor = </span><span style='background: #AEF1AE'>new KNNVisitor(inputFeatures, numDesired, estimatedDistance, maxSearchDistance)</span><span style=''>
</span>75 <span style=''>    </span><span style='background: #AEF1AE'>GeoMesaFeatureCollection.visit(dataFeatures, visitor)</span><span style=''>
</span>76 <span style=''>    </span><span style='background: #AEF1AE'>visitor.getResult.results</span><span style=''>
</span>77 <span style=''>  }
</span>78 <span style=''>}
</span>79 <span style=''>
</span>80 <span style=''>object KNearestNeighborSearchProcess {
</span>81 <span style=''>
</span>82 <span style=''>  private val WholeWorldEnvelope = </span><span style='background: #AEF1AE'>Envelope(-180d, 180d, -90d, 90d)</span><span style=''>
</span>83 <span style=''>
</span>84 <span style=''>  /**
</span>85 <span style=''>    * Main visitor class for the KNN search process
</span>86 <span style=''>    *
</span>87 <span style=''>    * @param query query features - geometries will be used as the inputs
</span>88 <span style=''>    * @param k number of neighbors to find
</span>89 <span style=''>    * @param start initial distance to search
</span>90 <span style=''>    * @param threshold max distance to search
</span>91 <span style=''>    */
</span>92 <span style=''>  class KNNVisitor(query: SimpleFeatureCollection, k: Int, start: Double, threshold: Double)
</span>93 <span style=''>      extends GeoMesaProcessVisitor with LazyLogging {
</span>94 <span style=''>
</span>95 <span style=''>    import org.locationtech.geomesa.filter.ff
</span>96 <span style=''>    import org.locationtech.geomesa.utils.geotools.RichSimpleFeatureType.RichSimpleFeatureType
</span>97 <span style=''>
</span>98 <span style=''>    private lazy val queries: Seq[Point] = SelfClosingIterator(query.features()).toList.flatMap { f =&gt;
</span>99 <span style=''>      f.getDefaultGeometry match {
</span>100 <span style=''>        case p: Point =&gt; Some(p)
</span>101 <span style=''>        case g =&gt; logger.warn(s&quot;KNN query not implemented for non-point geometries, skipping this feature: $g&quot;); None
</span>102 <span style=''>      }
</span>103 <span style=''>    }
</span>104 <span style=''>
</span>105 <span style=''>    private lazy val results = Seq.fill(queries.length)(Array.ofDim[FeatureWithDistance](k))
</span>106 <span style=''>    private lazy val calculators = queries.zip(results).map { case (p, r) =&gt; new KnnCalculator(p, k, threshold, r) }
</span>107 <span style=''>
</span>108 <span style=''>    private var result: FeatureResult = _
</span>109 <span style=''>
</span>110 <span style=''>    // called for non-optimized visits
</span>111 <span style=''>    override def visit(feature: Feature): Unit = </span><span style='background: #AEF1AE'>calculators.foreach(_.visit(feature.asInstanceOf[SimpleFeature]))</span><span style=''>
</span>112 <span style=''>
</span>113 <span style=''>    override def getResult: FeatureResult = {
</span>114 <span style=''>      if (</span><span style='background: #AEF1AE'>result == null</span><span style=''>) </span><span style='background: #AEF1AE'>{
</span>115 <span style=''></span><span style='background: #AEF1AE'>        val collection = new DefaultFeatureCollection()
</span>116 <span style=''></span><span style='background: #AEF1AE'>        results.foreach(_.foreach(r =&gt; if (r != null) { collection.add(r.sf) }))
</span>117 <span style=''></span><span style='background: #AEF1AE'>        result = FeatureResult(collection)
</span>118 <span style=''></span><span style='background: #AEF1AE'>      }</span><span style=''>
</span>119 <span style=''>      </span><span style='background: #AEF1AE'>result</span><span style=''>
</span>120 <span style=''>    }
</span>121 <span style=''>
</span>122 <span style=''>    override def execute(source: SimpleFeatureSource, query: Query): Unit = {
</span>123 <span style=''>      logger.debug(s&quot;Running Geomesa KNN process on source type ${source.getClass.getName}&quot;)
</span>124 <span style=''>
</span>125 <span style=''>      // create a new feature collection to hold the results of the KNN search around each point
</span>126 <span style=''>      val collection = </span><span style='background: #AEF1AE'>new DefaultFeatureCollection()</span><span style=''>
</span>127 <span style=''>      val geom = </span><span style='background: #AEF1AE'>ff.property(source.getSchema.getGeomField)</span><span style=''>
</span>128 <span style=''>
</span>129 <span style=''>      // for each entry in the inputFeatures collection:
</span>130 <span style=''>      def run(p: Point): Unit = {
</span>131 <span style=''>        // tracks our nearest neighbors
</span>132 <span style=''>        val results = </span><span style='background: #AEF1AE'>Array.ofDim[FeatureWithDistance](k)</span><span style=''>
</span>133 <span style=''>        // tracks features are in our search envelope but that aren't within our current search distance
</span>134 <span style=''>        // we use a java linked list as scala doesn't have anything with 'iterate and remove' functionality
</span>135 <span style=''>        val overflow = </span><span style='background: #AEF1AE'>new java.util.LinkedList[FeatureWithDistance]()</span><span style=''>
</span>136 <span style=''>
</span>137 <span style=''>        // calculator for expanding window queries
</span>138 <span style=''>        val window = </span><span style='background: #AEF1AE'>new KnnWindow(query, geom, p, k, start, threshold)</span><span style=''>
</span>139 <span style=''>        var found = </span><span style='background: #AEF1AE'>0</span><span style=''> // tracks the number of neighbors we've found so far
</span>140 <span style=''>
</span>141 <span style=''>        val initial = </span><span style='background: #AEF1AE'>window.next(None)</span><span style=''>
</span>142 <span style=''>        logger.trace(s&quot;Current query window:\n  ${window.window.debug.mkString(&quot;\n  &quot;)}&quot;)
</span>143 <span style=''>        logger.trace(s&quot;Current filter: ${ECQL.toCQL(initial.getFilter)}&quot;)
</span>144 <span style=''>
</span>145 <span style=''>        // run our first query against the estimated distance
</span>146 <span style=''>        </span><span style='background: #AEF1AE'>WithClose(source.getFeatures(initial).features()) { iter =&gt;
</span>147 <span style=''></span><span style='background: #AEF1AE'>          // note: the calculator will populate our results array
</span>148 <span style=''></span><span style='background: #AEF1AE'>          val knn = new KnnCalculator(p, k, window.radius, results)
</span>149 <span style=''></span><span style='background: #AEF1AE'>          while (iter.hasNext) {
</span>150 <span style=''></span><span style='background: #AEF1AE'>            val sf = iter.next
</span>151 <span style=''></span><span style='background: #AEF1AE'>            // features that aren't within our query distance are added to the overflow for the next iteration
</span>152 <span style=''></span><span style='background: #AEF1AE'>            knn.visit(sf).foreach(d =&gt; overflow.add(FeatureWithDistance(sf, d)))
</span>153 <span style=''></span><span style='background: #AEF1AE'>          }
</span>154 <span style=''></span><span style='background: #AEF1AE'>          found = knn.size
</span>155 <span style=''></span><span style='background: #AEF1AE'>        }</span><span style=''>
</span>156 <span style=''>
</span>157 <span style=''>        var iteration = </span><span style='background: #AEF1AE'>1</span><span style=''> // tracks the number of queries we've run
</span>158 <span style=''>
</span>159 <span style=''>        // if we haven't found k features, start expanding the search distance
</span>160 <span style=''>        while (</span><span style='background: #AEF1AE'>found &lt; k &amp;&amp; window.hasNext</span><span style=''>) </span><span style='background: #AEF1AE'>{
</span>161 <span style=''></span><span style='background: #AEF1AE'>          val last = window.radius
</span>162 <span style=''></span><span style='background: #AEF1AE'>          // calculate the next query to search, based on how many we've found so far
</span>163 <span style=''></span><span style='background: #AEF1AE'>          val next = window.next(Some(found))
</span>164 <span style=''></span><span style='background: #AEF1AE'>          logger.debug(
</span>165 <span style=''></span><span style='background: #AEF1AE'>            s&quot;Expanding search at (${p.getX} ${p.getY}) from $last to ${window.radius} meters &quot; +
</span>166 <span style=''></span><span style='background: #AEF1AE'>                s&quot;based on finding $found/$k neighbors&quot;)
</span>167 <span style=''></span><span style='background: #AEF1AE'>          logger.trace(s&quot;Current query window:\n  ${window.window.debug.mkString(&quot;\n  &quot;)}&quot;)
</span>168 <span style=''></span><span style='background: #AEF1AE'>          logger.trace(s&quot;Current filter: ${ECQL.toCQL(next.getFilter)}&quot;)
</span>169 <span style=''></span><span style='background: #AEF1AE'>
</span>170 <span style=''></span><span style='background: #AEF1AE'>          // calculator for our new distance, initialized with the neighbors we've already found
</span>171 <span style=''></span><span style='background: #AEF1AE'>          val knn = new KnnCalculator(p, k, window.radius, results, found)
</span>172 <span style=''></span><span style='background: #AEF1AE'>          // re-visit any features that were outside our distance but inside our last envelope
</span>173 <span style=''></span><span style='background: #AEF1AE'>          val iter = overflow.iterator()
</span>174 <span style=''></span><span style='background: #AEF1AE'>          while (iter.hasNext) {
</span>175 <span style=''></span><span style='background: #AEF1AE'>            val FeatureWithDistance(sf, d) = iter.next()
</span>176 <span style=''></span><span style='background: #AEF1AE'>            if (d &lt;= window.radius) {
</span>177 <span style=''></span><span style='background: #AEF1AE'>              knn.visit(sf, d)
</span>178 <span style=''></span><span style='background: #AEF1AE'>              iter.remove()
</span>179 <span style=''></span><span style='background: #AEF1AE'>            }
</span>180 <span style=''></span><span style='background: #AEF1AE'>          }
</span>181 <span style=''></span><span style='background: #AEF1AE'>
</span>182 <span style=''></span><span style='background: #AEF1AE'>          // run the new query
</span>183 <span style=''></span><span style='background: #AEF1AE'>          WithClose(source.getFeatures(next).features()) { iter =&gt;
</span>184 <span style=''></span><span style='background: #AEF1AE'>            while (iter.hasNext) {
</span>185 <span style=''></span><span style='background: #AEF1AE'>              val sf = iter.next
</span>186 <span style=''></span><span style='background: #AEF1AE'>              // features that aren't within our query distance are added to the overflow for the next iteration
</span>187 <span style=''></span><span style='background: #AEF1AE'>              knn.visit(sf).foreach(d =&gt; overflow.add(FeatureWithDistance(sf, d)))
</span>188 <span style=''></span><span style='background: #AEF1AE'>            }
</span>189 <span style=''></span><span style='background: #AEF1AE'>            found = knn.size
</span>190 <span style=''></span><span style='background: #AEF1AE'>          }
</span>191 <span style=''></span><span style='background: #AEF1AE'>
</span>192 <span style=''></span><span style='background: #AEF1AE'>          iteration += 1
</span>193 <span style=''></span><span style='background: #AEF1AE'>        }</span><span style=''>
</span>194 <span style=''>
</span>195 <span style=''>        logger.debug(
</span>196 <span style=''>          s&quot;Found $found/$k neighbors at (${p.getX} ${p.getY}) after $iteration iteration(s) with final search &quot; +
</span>197 <span style=''>              s&quot;distance of ${window.radius} (initial $start, max $threshold)&quot;)
</span>198 <span style=''>        logger.trace(results.take(found).map(_.sf).mkString(&quot;; &quot;))
</span>199 <span style=''>
</span>200 <span style=''>        </span><span style='background: #AEF1AE'>collection.synchronized {
</span>201 <span style=''></span><span style='background: #AEF1AE'>          var i = 0
</span>202 <span style=''></span><span style='background: #AEF1AE'>          while (i &lt; found) {
</span>203 <span style=''></span><span style='background: #AEF1AE'>            collection.add(results(i).sf)
</span>204 <span style=''></span><span style='background: #AEF1AE'>            i += 1
</span>205 <span style=''></span><span style='background: #AEF1AE'>          }
</span>206 <span style=''></span><span style='background: #AEF1AE'>        }</span><span style=''>
</span>207 <span style=''>      }
</span>208 <span style=''>
</span>209 <span style=''>      </span><span style='background: #AEF1AE'>queries.toList.map(p =&gt; CachedThreadPool.submit(() =&gt; run(p))).foreach(_.get)</span><span style=''>
</span>210 <span style=''>
</span>211 <span style=''>      </span><span style='background: #AEF1AE'>this.result = FeatureResult(collection)</span><span style=''>
</span>212 <span style=''>    }
</span>213 <span style=''>  }
</span>214 <span style=''>
</span>215 <span style=''>  /**
</span>216 <span style=''>    * Class for finding window queries around a central point
</span>217 <span style=''>    *
</span>218 <span style=''>    * @param base base query
</span>219 <span style=''>    * @param geom geometry attribute being queried
</span>220 <span style=''>    * @param p central query point
</span>221 <span style=''>    * @param k number of features to find
</span>222 <span style=''>    * @param start initial search distance
</span>223 <span style=''>    * @param threshold max distance to query
</span>224 <span style=''>    */
</span>225 <span style=''>  class KnnWindow(base: Query, geom: PropertyName, p: Point, k: Int, start: Double, threshold: Double) {
</span>226 <span style=''>
</span>227 <span style=''>    private val calc = </span><span style='background: #AEF1AE'>new GeodeticCalculator()</span><span style=''>
</span>228 <span style=''>    private var distance = </span><span style='background: #AEF1AE'>start</span><span style=''>
</span>229 <span style=''>
</span>230 <span style=''>    // our query envelope - this is purely cartesian and not constrained by world bounds
</span>231 <span style=''>    private var envelope = </span><span style='background: #AEF1AE'>QueryEnvelope(Envelope(p, distance, calc), None)</span><span style=''>
</span>232 <span style=''>
</span>233 <span style=''>    /**
</span>234 <span style=''>      * Current search radius, in meters
</span>235 <span style=''>      *
</span>236 <span style=''>      * @return
</span>237 <span style=''>      */
</span>238 <span style=''>    def radius: Double = </span><span style='background: #AEF1AE'>distance</span><span style=''>
</span>239 <span style=''>
</span>240 <span style=''>    /**
</span>241 <span style=''>      * Current search envelope
</span>242 <span style=''>      *
</span>243 <span style=''>      * @return envelope
</span>244 <span style=''>      */
</span>245 <span style=''>    def window: QueryEnvelope = </span><span style='background: #F0ADAD'>envelope</span><span style=''>
</span>246 <span style=''>
</span>247 <span style=''>    /**
</span>248 <span style=''>      * Whether there are more window queries within the threshold
</span>249 <span style=''>      *
</span>250 <span style=''>      * @return
</span>251 <span style=''>      */
</span>252 <span style=''>    def hasNext: Boolean = </span><span style='background: #AEF1AE'>distance &lt; threshold</span><span style=''>
</span>253 <span style=''>
</span>254 <span style=''>    /**
</span>255 <span style=''>      * Get the next query window
</span>256 <span style=''>      *
</span>257 <span style=''>      * @param found number of features found so far, if the query has already been run
</span>258 <span style=''>      * @return
</span>259 <span style=''>      */
</span>260 <span style=''>    def next(found: Option[Int]): Query = {
</span>261 <span style=''>      </span><span style='background: #AEF1AE'>found.foreach(expand)</span><span style=''> // expand our window if we've already run a query
</span>262 <span style=''>
</span>263 <span style=''>      val query = </span><span style='background: #AEF1AE'>new Query(base)</span><span style=''>
</span>264 <span style=''>      </span><span style='background: #AEF1AE'>query.setHints(new Hints(base.getHints))</span><span style=''> // prevent sharing of hints between queries
</span>265 <span style=''>
</span>266 <span style=''>      // remove the hole from our query envelopes so that we don't scan the same area more than once
</span>267 <span style=''>      val filter = </span><span style='background: #AEF1AE'>org.locationtech.geomesa.filter.orFilters(envelope.query.map(_.toFilter(geom)))</span><span style=''>
</span>268 <span style=''>      </span><span style='background: #AEF1AE'>base.getFilter</span><span style=''> match {
</span>269 <span style=''>        case null | Filter.INCLUDE =&gt; </span><span style='background: #AEF1AE'>query.setFilter(filter)</span><span style=''>
</span>270 <span style=''>        case f =&gt; </span><span style='background: #AEF1AE'>query.setFilter(ff.and(f, filter))</span><span style=''>
</span>271 <span style=''>      }
</span>272 <span style=''>
</span>273 <span style=''>      query
</span>274 <span style=''>    }
</span>275 <span style=''>
</span>276 <span style=''>    /**
</span>277 <span style=''>      * Find the next window to search in an attempt to find the knn
</span>278 <span style=''>      *
</span>279 <span style=''>      * @param found number of neighbors found within the previous distance
</span>280 <span style=''>      */
</span>281 <span style=''>    private def expand(found: Int): Unit = {
</span>282 <span style=''>      // expand the window radius. algorithm derived from:
</span>283 <span style=''>      //    Efficient k Nearest Neighbor Queries on Remote Spatial Databases Using Range Estimation
</span>284 <span style=''>      //    Danzhou Liu, Ee-Peng Lim, Wee-Keong Ng
</span>285 <span style=''>      //    Centre for Advanced Information Systems, School of Computer Engineering
</span>286 <span style=''>      //    Nanyang Technological University, Singapore 639798
</span>287 <span style=''>      //    {P149571472, aseplim, awkng}@ntu.edu.sg
</span>288 <span style=''>      //  Available at: http://citeseerx.ist.psu.edu/viewdoc/download?doi=10.1.1.507.4109&amp;rep=rep1&amp;type=pdf
</span>289 <span style=''>
</span>290 <span style=''>      // note that this algorithm is fairly conservative - in their testing (using TIGER road data), it
</span>291 <span style=''>      // generally required 2-3 window expansions after the initial query in order to find the knn
</span>292 <span style=''>
</span>293 <span style=''>      </span><span style='background: #AEF1AE'>distance = if (found == 0) { distance * 2 } else {
</span>294 <span style=''></span><span style='background: #AEF1AE'>        val density = found / math.pow(2 * distance, 2)
</span>295 <span style=''></span><span style='background: #AEF1AE'>        math.sqrt(k / (math.Pi * density))
</span>296 <span style=''></span><span style='background: #AEF1AE'>      }</span><span style=''>
</span>297 <span style=''>      if (</span><span style='background: #AEF1AE'>distance &gt; threshold</span><span style=''>) {
</span>298 <span style=''>        </span><span style='background: #AEF1AE'>distance = threshold</span><span style=''>
</span>299 <span style=''>      }
</span>300 <span style=''>
</span>301 <span style=''>      val hole = </span><span style='background: #AEF1AE'>Some(envelope.envelope)</span><span style=''>
</span>302 <span style=''>      </span><span style='background: #AEF1AE'>envelope = QueryEnvelope(Envelope(p, distance, calc), hole)</span><span style=''>
</span>303 <span style=''>    }
</span>304 <span style=''>  }
</span>305 <span style=''>
</span>306 <span style=''>  /**
</span>307 <span style=''>    * Calculator for finding the k-nearest features
</span>308 <span style=''>    *
</span>309 <span style=''>    * @param query point to find neighbors for
</span>310 <span style=''>    * @param k number of neighbors to find
</span>311 <span style=''>    * @param threshold limit results to within a certain distance in meters
</span>312 <span style=''>    * @param results array of length k, used to hold results
</span>313 <span style=''>    * @param i number of features found so far, maxes out at k
</span>314 <span style=''>    */
</span>315 <span style=''>  class KnnCalculator(
</span>316 <span style=''>      query: Point,
</span>317 <span style=''>      k: Int,
</span>318 <span style=''>      threshold: Double,
</span>319 <span style=''>      results: Array[FeatureWithDistance],
</span>320 <span style=''>      private var i: Int = 0
</span>321 <span style=''>    ) extends LazyLogging {
</span>322 <span style=''>
</span>323 <span style=''>    private val calculator = </span><span style='background: #AEF1AE'>new DistanceCalculator()</span><span style=''>
</span>324 <span style=''>
</span>325 <span style=''>    // tracks the index of our current farthest value
</span>326 <span style=''>    private var fi = if (</span><span style='background: #AEF1AE'>i &lt; k</span><span style=''>) { </span><span style='background: #AEF1AE'>0</span><span style=''> } else { </span><span style='background: #F0ADAD'>farthest</span><span style=''> }
</span>327 <span style=''>
</span>328 <span style=''>    /**
</span>329 <span style=''>      * Number of features found so far
</span>330 <span style=''>      *
</span>331 <span style=''>      * @return
</span>332 <span style=''>      */
</span>333 <span style=''>    def size: Int = </span><span style='background: #AEF1AE'>i</span><span style=''>
</span>334 <span style=''>
</span>335 <span style=''>    /**
</span>336 <span style=''>      * Visit a feature, checking the distance to the query point
</span>337 <span style=''>      *
</span>338 <span style=''>      * @param feature feature
</span>339 <span style=''>      * @return None if the feature is within the threshold, otherwise Some(distance to query point)
</span>340 <span style=''>      */
</span>341 <span style=''>    def visit(feature: SimpleFeature): Option[Double] = {
</span>342 <span style=''>      </span><span style='background: #AEF1AE'>feature.getDefaultGeometry</span><span style=''> match {
</span>343 <span style=''>        case p: Point </span><span style='background: #AEF1AE'>=&gt;
</span>344 <span style=''></span><span style='background: #AEF1AE'>          val meters = calculator.meters(query, p)
</span>345 <span style=''></span><span style='background: #AEF1AE'>          if (meters &gt; threshold) {
</span>346 <span style=''></span><span style='background: #AEF1AE'>            Some(meters)
</span>347 <span style=''></span><span style='background: #AEF1AE'>          } else {
</span>348 <span style=''></span><span style='background: #AEF1AE'>            visit(feature, meters)
</span>349 <span style=''></span><span style='background: #AEF1AE'>            None
</span>350 <span style=''></span><span style='background: #AEF1AE'>          }</span><span style=''>
</span>351 <span style=''>
</span>352 <span style=''>        case g </span><span style='background: #F0ADAD'>=&gt; logger.warn(s&quot;KNN query not implemented for non-point geometries, skipping this feature: $g&quot;); None</span><span style=''>
</span>353 <span style=''>      }
</span>354 <span style=''>    }
</span>355 <span style=''>
</span>356 <span style=''>    /**
</span>357 <span style=''>      * Visit a feature with a known distance
</span>358 <span style=''>      *
</span>359 <span style=''>      * @param feature feature
</span>360 <span style=''>      * @param distance distance from the query point, in meters (assumed to be within the threshold)
</span>361 <span style=''>      */
</span>362 <span style=''>    def visit(feature: SimpleFeature, distance: Double): Unit = {
</span>363 <span style=''>      if (</span><span style='background: #AEF1AE'>i &lt; k</span><span style=''>) </span><span style='background: #AEF1AE'>{
</span>364 <span style=''></span><span style='background: #AEF1AE'>        // if we haven't seen k features yet, then by definition we have a nearest neighbor
</span>365 <span style=''></span><span style='background: #AEF1AE'>        results(i) = FeatureWithDistance(feature, distance)
</span>366 <span style=''></span><span style='background: #AEF1AE'>        i += 1
</span>367 <span style=''></span><span style='background: #AEF1AE'>        if (i == k) {
</span>368 <span style=''></span><span style='background: #AEF1AE'>          // if we have k elements, find the farthest feature so that we can easily check it going forward
</span>369 <span style=''></span><span style='background: #AEF1AE'>          fi = farthest
</span>370 <span style=''></span><span style='background: #AEF1AE'>        }
</span>371 <span style=''></span><span style='background: #AEF1AE'>      }</span><span style=''> else </span><span style='background: #AEF1AE'>if (distance &lt; results(fi).meters) {
</span>372 <span style=''></span><span style='background: #AEF1AE'>        // we have found a new nearest - replace the farthest, then find the new farthest
</span>373 <span style=''></span><span style='background: #AEF1AE'>        results(fi) = FeatureWithDistance(feature, distance)
</span>374 <span style=''></span><span style='background: #AEF1AE'>        fi = farthest
</span>375 <span style=''></span><span style='background: #AEF1AE'>      }</span><span style=''>
</span>376 <span style=''>    }
</span>377 <span style=''>
</span>378 <span style=''>    /**
</span>379 <span style=''>      * Gets the array index of the farthest feature. Note: assumes the result array does not contain nulls
</span>380 <span style=''>      *
</span>381 <span style=''>      * @return
</span>382 <span style=''>      */
</span>383 <span style=''>    private def farthest: Int = {
</span>384 <span style=''>      var max = </span><span style='background: #AEF1AE'>results.head.meters</span><span style=''>
</span>385 <span style=''>      var result = </span><span style='background: #AEF1AE'>0</span><span style=''>
</span>386 <span style=''>      var i = </span><span style='background: #AEF1AE'>1</span><span style=''>
</span>387 <span style=''>      while (</span><span style='background: #AEF1AE'>i &lt; results.length</span><span style=''>) </span><span style='background: #AEF1AE'>{
</span>388 <span style=''></span><span style='background: #AEF1AE'>        if (results(i).meters &gt; max) {
</span>389 <span style=''></span><span style='background: #AEF1AE'>          max = results(i).meters
</span>390 <span style=''></span><span style='background: #AEF1AE'>          result = i
</span>391 <span style=''></span><span style='background: #AEF1AE'>        }
</span>392 <span style=''></span><span style='background: #AEF1AE'>        i += 1
</span>393 <span style=''></span><span style='background: #AEF1AE'>      }</span><span style=''>
</span>394 <span style=''>      result
</span>395 <span style=''>    }
</span>396 <span style=''>  }
</span>397 <span style=''>
</span>398 <span style=''>  /**
</span>399 <span style=''>    * Holder for our ordered features
</span>400 <span style=''>    *
</span>401 <span style=''>    * @param sf simple feature
</span>402 <span style=''>    * @param meters distance in meters from the query point
</span>403 <span style=''>    */
</span>404 <span style=''>  case class FeatureWithDistance(sf: SimpleFeature, meters: Double) extends Comparable[FeatureWithDistance] {
</span>405 <span style=''>    override def compareTo(o: FeatureWithDistance): Int = </span><span style='background: #F0ADAD'>java.lang.Double.compare(meters, o.meters)</span><span style=''>
</span>406 <span style=''>  }
</span>407 <span style=''>
</span>408 <span style=''>  /**
</span>409 <span style=''>    * Holder for a query envelope
</span>410 <span style=''>    *
</span>411 <span style=''>    * @param envelope query envelope, in cartesian space
</span>412 <span style=''>    * @param hole hole covering any previously queried space
</span>413 <span style=''>    */
</span>414 <span style=''>  case class QueryEnvelope(envelope: Envelope, hole: Option[Envelope]) {
</span>415 <span style=''>
</span>416 <span style=''>    /**
</span>417 <span style=''>      * Get the envelopes for a query filter. The envelopes will exclude the hole, if present, to avoid
</span>418 <span style=''>      * returning duplicate results
</span>419 <span style=''>      *
</span>420 <span style=''>      * @return
</span>421 <span style=''>      */
</span>422 <span style=''>    def query: Seq[Envelope] = {
</span>423 <span style=''>      </span><span style='background: #AEF1AE'>hole</span><span style=''> match {
</span>424 <span style=''>        case None =&gt; </span><span style='background: #AEF1AE'>envelope.toWorld</span><span style=''>
</span>425 <span style=''>        case Some(h) </span><span style='background: #AEF1AE'>=&gt;
</span>426 <span style=''></span><span style='background: #AEF1AE'>          val holes = h.toWorld
</span>427 <span style=''></span><span style='background: #AEF1AE'>          envelope.toWorld.flatMap(e =&gt; holes.foldLeft(Seq(e)) { case (r, h) =&gt; r.flatMap(_.minus(h)) })</span><span style=''>
</span>428 <span style=''>      }
</span>429 <span style=''>    }
</span>430 <span style=''>
</span>431 <span style=''>    /**
</span>432 <span style=''>      * Gets a string useful for debugging
</span>433 <span style=''>      *
</span>434 <span style=''>      * @return
</span>435 <span style=''>      */
</span>436 <span style=''>    def debug: Seq[String] = </span><span style='background: #F0ADAD'>hole</span><span style=''> match {
</span>437 <span style=''>      case None =&gt; </span><span style='background: #F0ADAD'>Seq(envelope.debug)</span><span style=''>
</span>438 <span style=''>      case Some(h) </span><span style='background: #F0ADAD'>=&gt;
</span>439 <span style=''></span><span style='background: #F0ADAD'>        val diff = envelope.minus(h)
</span>440 <span style=''></span><span style='background: #F0ADAD'>        if (diff.isEmpty) { Seq(&quot;[empty]&quot;) } else { diff.map(_.debug) }</span><span style=''>
</span>441 <span style=''>    }
</span>442 <span style=''>  }
</span>443 <span style=''>
</span>444 <span style=''>  /**
</span>445 <span style=''>    * Simple envelope class - unlike the jts envelope, does not swap min/max values on creation
</span>446 <span style=''>    *
</span>447 <span style=''>    * @param xmin min x value
</span>448 <span style=''>    * @param xmax max x value
</span>449 <span style=''>    * @param ymin min y value
</span>450 <span style=''>    * @param ymax max y value
</span>451 <span style=''>    */
</span>452 <span style=''>  case class Envelope(xmin: Double, xmax: Double, ymin: Double, ymax: Double) {
</span>453 <span style=''>
</span>454 <span style=''>    </span><span style='background: #AEF1AE'>require(xmin &lt;= xmax &amp;&amp; ymin &lt;= ymax, </span><span style='background: #F0ADAD'>s&quot;Envelope is inverted: [$xmin, $xmax, $ymin, $ymax]&quot;</span><span style='background: #AEF1AE'>)</span><span style=''>
</span>455 <span style=''>
</span>456 <span style=''>    lazy val width: Double = xmax - xmin
</span>457 <span style=''>    lazy val height: Double = ymax - ymin
</span>458 <span style=''>
</span>459 <span style=''>    /**
</span>460 <span style=''>      * Intersection of two envelopes
</span>461 <span style=''>      *
</span>462 <span style=''>      * @param other other envelope
</span>463 <span style=''>      * @return
</span>464 <span style=''>      */
</span>465 <span style=''>    def intersection(other: Envelope): Option[Envelope] = {
</span>466 <span style=''>      val ixmin = </span><span style='background: #AEF1AE'>math.max(xmin, other.xmin)</span><span style=''>
</span>467 <span style=''>      val ixmax = </span><span style='background: #AEF1AE'>math.min(xmax, other.xmax)</span><span style=''>
</span>468 <span style=''>      if (</span><span style='background: #AEF1AE'>ixmin &gt; ixmax</span><span style=''>) { </span><span style='background: #F0ADAD'>None</span><span style=''> } else </span><span style='background: #AEF1AE'>{
</span>469 <span style=''></span><span style='background: #AEF1AE'>        val iymin = math.max(ymin, other.ymin)
</span>470 <span style=''></span><span style='background: #AEF1AE'>        val iymax = math.min(ymax, other.ymax)
</span>471 <span style=''></span><span style='background: #AEF1AE'>        if (iymin &gt; iymax) { </span><span style='background: #F0ADAD'>None</span><span style='background: #AEF1AE'> } else {
</span>472 <span style=''></span><span style='background: #AEF1AE'>          Some(Envelope(ixmin, ixmax, iymin, iymax))
</span>473 <span style=''></span><span style='background: #AEF1AE'>        }
</span>474 <span style=''></span><span style='background: #AEF1AE'>      }</span><span style=''>
</span>475 <span style=''>    }
</span>476 <span style=''>
</span>477 <span style=''>    /**
</span>478 <span style=''>      * Do the two envelopes intersect?
</span>479 <span style=''>      *
</span>480 <span style=''>      * @param other other envelope
</span>481 <span style=''>      * @return
</span>482 <span style=''>      */
</span>483 <span style=''>    def intersects(other: Envelope): Boolean =
</span>484 <span style=''>      </span><span style='background: #AEF1AE'>other.xmin &lt;= xmax &amp;&amp; other.xmax &gt;= xmin &amp;&amp; other.ymin &lt;= ymax &amp;&amp; other.ymax &gt;= ymin</span><span style=''>
</span>485 <span style=''>
</span>486 <span style=''>    /**
</span>487 <span style=''>      * Subtract an envelope from this one.
</span>488 <span style=''>      *
</span>489 <span style=''>      * The result will be 0 to 4 new envelopes. The 'top' and 'bottom' envelopes will contain corner
</span>490 <span style=''>      * intersections, if any, while the 'left' and 'right' envelopes will be trimmed around the top/bottom ones.
</span>491 <span style=''>      *
</span>492 <span style=''>      * @param other envelope to subtract
</span>493 <span style=''>      * @return
</span>494 <span style=''>      */
</span>495 <span style=''>    def minus(other: Envelope): Seq[Envelope] = {
</span>496 <span style=''>      if (</span><span style='background: #AEF1AE'>!intersects(other)</span><span style=''>) { </span><span style='background: #AEF1AE'>Seq(this)</span><span style=''> } else </span><span style='background: #AEF1AE'>{
</span>497 <span style=''></span><span style='background: #AEF1AE'>        val builder = Seq.newBuilder[Envelope]
</span>498 <span style=''></span><span style='background: #AEF1AE'>        // conditionally add top envelope, and determine ymax for left/right envelopes
</span>499 <span style=''></span><span style='background: #AEF1AE'>        val sidemax = if (other.ymax &gt;= ymax) { ymax } else {
</span>500 <span style=''></span><span style='background: #AEF1AE'>          builder += copy(ymin = other.ymax)
</span>501 <span style=''></span><span style='background: #AEF1AE'>          other.ymax
</span>502 <span style=''></span><span style='background: #AEF1AE'>        }
</span>503 <span style=''></span><span style='background: #AEF1AE'>        // conditionally add bottom envelope, and determine ymin for left/right envelopes
</span>504 <span style=''></span><span style='background: #AEF1AE'>        val sidemin = if (other.ymin &lt;= ymin) { ymin } else {
</span>505 <span style=''></span><span style='background: #AEF1AE'>          builder += copy(ymax = other.ymin)
</span>506 <span style=''></span><span style='background: #AEF1AE'>          other.ymin
</span>507 <span style=''></span><span style='background: #AEF1AE'>        }
</span>508 <span style=''></span><span style='background: #AEF1AE'>        // conditionally add left/right envelopes
</span>509 <span style=''></span><span style='background: #AEF1AE'>        if (other.xmin &gt; xmin) {
</span>510 <span style=''></span><span style='background: #AEF1AE'>          builder += copy(xmax = other.xmin, ymin = sidemin, ymax = sidemax)
</span>511 <span style=''></span><span style='background: #AEF1AE'>        }
</span>512 <span style=''></span><span style='background: #AEF1AE'>        if (other.xmax &lt; xmax) {
</span>513 <span style=''></span><span style='background: #AEF1AE'>          builder += copy(xmin = other.xmax, ymin = sidemin, ymax = sidemax)
</span>514 <span style=''></span><span style='background: #AEF1AE'>        }
</span>515 <span style=''></span><span style='background: #AEF1AE'>        builder.result
</span>516 <span style=''></span><span style='background: #AEF1AE'>      }</span><span style=''>
</span>517 <span style=''>    }
</span>518 <span style=''>
</span>519 <span style=''>    /**
</span>520 <span style=''>      * Converts any part of this envelope that extends past [-180,180,-90,90] to handle the anti-meridian and poles.
</span>521 <span style=''>      *
</span>522 <span style=''>      * Envelopes that cross the poles end up wrapping the whole longitude. Envelopes that cross the anti-meridian
</span>523 <span style=''>      * are wrapped to the other side.
</span>524 <span style=''>      *
</span>525 <span style=''>      * @return
</span>526 <span style=''>      */
</span>527 <span style=''>    def toWorld: Seq[Envelope] = {
</span>528 <span style=''>      if (</span><span style='background: #AEF1AE'>ymin &lt; -90d</span><span style=''>) {
</span>529 <span style=''>        </span><span style='background: #AEF1AE'>Seq(Envelope(-180d, 180d, -90, math.min(ymax, 90d)))</span><span style=''>
</span>530 <span style=''>      } else </span><span style='background: #AEF1AE'>if (ymax &gt; 90d) {
</span>531 <span style=''></span><span style='background: #AEF1AE'>        Seq(Envelope(-180d, 180d, math.max(ymin, -90), 90d))
</span>532 <span style=''></span><span style='background: #AEF1AE'>      } else if (width &gt;= 360d) {
</span>533 <span style=''></span><span style='background: #AEF1AE'>        Seq(copy(xmin = -180d, xmax = 180d))
</span>534 <span style=''></span><span style='background: #AEF1AE'>      } else if (xmin &lt; -180d) {
</span>535 <span style=''></span><span style='background: #AEF1AE'>        intersection(WholeWorldEnvelope) match {
</span>536 <span style=''></span><span style='background: #AEF1AE'>          case None =&gt; </span><span style='background: #F0ADAD'>Seq(copy(xmin = xmin + 360d, xmax = xmax + 360d))</span><span style='background: #AEF1AE'>
</span>537 <span style=''></span><span style='background: #AEF1AE'>          case Some(trimmed) =&gt; Seq(trimmed, copy(xmin = xmin + 360d, xmax = 180d))
</span>538 <span style=''></span><span style='background: #AEF1AE'>        }
</span>539 <span style=''></span><span style='background: #AEF1AE'>      } else if (xmax &gt; 180d) {
</span>540 <span style=''></span><span style='background: #AEF1AE'>        intersection(WholeWorldEnvelope) match {
</span>541 <span style=''></span><span style='background: #AEF1AE'>          case None =&gt; </span><span style='background: #F0ADAD'>Seq(copy(xmin = xmin - 360d, xmax = xmax - 360d))</span><span style='background: #AEF1AE'>
</span>542 <span style=''></span><span style='background: #AEF1AE'>          case Some(trimmed) =&gt; Seq(trimmed, copy(xmin = -180d, xmax = xmax - 360d))
</span>543 <span style=''></span><span style='background: #AEF1AE'>        }
</span>544 <span style=''></span><span style='background: #AEF1AE'>      } else {
</span>545 <span style=''></span><span style='background: #AEF1AE'>        Seq(this)
</span>546 <span style=''></span><span style='background: #AEF1AE'>      }</span><span style=''>
</span>547 <span style=''>    }
</span>548 <span style=''>
</span>549 <span style=''>    /**
</span>550 <span style=''>      * Create a geotools filter
</span>551 <span style=''>      *
</span>552 <span style=''>      * @param geom geometry expression
</span>553 <span style=''>      * @return
</span>554 <span style=''>      */
</span>555 <span style=''>    def toFilter(geom: PropertyName): Filter =
</span>556 <span style=''>      </span><span style='background: #AEF1AE'>ff.bbox(geom, new ReferencedEnvelope(xmin, xmax, ymin, ymax, CRS_EPSG_4326))</span><span style=''>
</span>557 <span style=''>
</span>558 <span style=''>    /**
</span>559 <span style=''>      * Convert to a JTS envelope
</span>560 <span style=''>      *
</span>561 <span style=''>      * @return
</span>562 <span style=''>      */
</span>563 <span style=''>    def toJts: org.locationtech.jts.geom.Envelope = </span><span style='background: #AEF1AE'>new org.locationtech.jts.geom.Envelope(xmin, xmax, ymin, ymax)</span><span style=''>
</span>564 <span style=''>
</span>565 <span style=''>    /**
</span>566 <span style=''>      * Debug string
</span>567 <span style=''>      *
</span>568 <span style=''>      * @return
</span>569 <span style=''>      */
</span>570 <span style=''>    def debug: String = </span><span style='background: #F0ADAD'>s&quot;[$xmin, $xmax, $ymin, $ymax]&quot;</span><span style=''>
</span>571 <span style=''>  }
</span>572 <span style=''>
</span>573 <span style=''>  object Envelope {
</span>574 <span style=''>
</span>575 <span style=''>    /**
</span>576 <span style=''>      * Create an envelope by buffering a point to an inscribed circle
</span>577 <span style=''>      *
</span>578 <span style=''>      * @param point center point
</span>579 <span style=''>      * @param buffer buffer distance, in meters
</span>580 <span style=''>      * @param calc geodetic calculator
</span>581 <span style=''>      * @return
</span>582 <span style=''>      */
</span>583 <span style=''>    def apply(point: Point, buffer: Double, calc: GeodeticCalculator): Envelope = {
</span>584 <span style=''>      val (east, north) = GeometryUtils.directionalDegrees(point, buffer, calc)
</span>585 <span style=''>      </span><span style='background: #AEF1AE'>Envelope(point.getX - east, point.getX + east, point.getY - north, point.getY + north)</span><span style=''>
</span>586 <span style=''>    }
</span>587 <span style=''>  }
</span>588 <span style=''>}
</span></pre>
          </div>
          <div class="tab-pane" id="statementlist">
            <table cellspacing="0" cellpadding="0" class="table statementlist">
      <tr>
        <th>Line</th>
        <th>Stmt Id</th>
        <th>Pos</th>
        <th>Tree</th>
        <th>Symbol</th>
        <th>Tests</th>
        <th>Code</th>
      </tr><tr>
        <td>
          74
        </td>
        <td>
          48798
        </td>
        <td>
          3692
          -
          3702
        </td>
        <td>
          ApplyImplicitView
        </td>
        <td>
          scala.Predef.Integer2int
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          scala.Predef.Integer2int(numDesired)
        </td>
      </tr><tr>
        <td>
          74
        </td>
        <td>
          48799
        </td>
        <td>
          3704
          -
          3721
        </td>
        <td>
          ApplyImplicitView
        </td>
        <td>
          scala.Predef.Double2double
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          scala.Predef.Double2double(estimatedDistance)
        </td>
      </tr><tr>
        <td>
          74
        </td>
        <td>
          48800
        </td>
        <td>
          3723
          -
          3740
        </td>
        <td>
          ApplyImplicitView
        </td>
        <td>
          scala.Predef.Double2double
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          scala.Predef.Double2double(maxSearchDistance)
        </td>
      </tr><tr>
        <td>
          74
        </td>
        <td>
          48801
        </td>
        <td>
          3662
          -
          3741
        </td>
        <td>
          Apply
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.KNNVisitor.&lt;init&gt;
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          new org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.KNNVisitor(inputFeatures, scala.Predef.Integer2int(numDesired), scala.Predef.Double2double(estimatedDistance), scala.Predef.Double2double(maxSearchDistance))
        </td>
      </tr><tr>
        <td>
          75
        </td>
        <td>
          48802
        </td>
        <td>
          3746
          -
          3799
        </td>
        <td>
          Apply
        </td>
        <td>
          org.locationtech.geomesa.index.geotools.GeoMesaFeatureCollection.visit
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          org.locationtech.geomesa.index.geotools.GeoMesaFeatureCollection.visit(dataFeatures, visitor, org.locationtech.geomesa.index.geotools.GeoMesaFeatureCollection.visit$default$3)
        </td>
      </tr><tr>
        <td>
          76
        </td>
        <td>
          48803
        </td>
        <td>
          3804
          -
          3829
        </td>
        <td>
          Select
        </td>
        <td>
          org.locationtech.geomesa.process.FeatureResult.results
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          visitor.getResult().results
        </td>
      </tr><tr>
        <td>
          82
        </td>
        <td>
          48804
        </td>
        <td>
          3912
          -
          3944
        </td>
        <td>
          Apply
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope.apply
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          KNearestNeighborSearchProcess.this.Envelope.apply(-180.0, 180.0, -90.0, 90.0)
        </td>
      </tr><tr>
        <td>
          111
        </td>
        <td>
          48805
        </td>
        <td>
          5191
          -
          5226
        </td>
        <td>
          TypeApply
        </td>
        <td>
          scala.Any.asInstanceOf
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          feature.asInstanceOf[org.geotools.api.feature.simple.SimpleFeature]
        </td>
      </tr><tr>
        <td>
          111
        </td>
        <td>
          48806
        </td>
        <td>
          5183
          -
          5227
        </td>
        <td>
          Apply
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.KnnCalculator.visit
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          x$1.visit(feature.asInstanceOf[org.geotools.api.feature.simple.SimpleFeature])
        </td>
      </tr><tr>
        <td>
          111
        </td>
        <td>
          48807
        </td>
        <td>
          5163
          -
          5228
        </td>
        <td>
          Apply
        </td>
        <td>
          scala.collection.IterableLike.foreach
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          KNNVisitor.this.calculators.foreach[Option[Double]](((x$1: org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.KnnCalculator) =&gt; x$1.visit(feature.asInstanceOf[org.geotools.api.feature.simple.SimpleFeature])))
        </td>
      </tr><tr>
        <td>
          114
        </td>
        <td>
          48808
        </td>
        <td>
          5286
          -
          5300
        </td>
        <td>
          Apply
        </td>
        <td>
          java.lang.Object.==
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          KNNVisitor.this.result.==(null)
        </td>
      </tr><tr>
        <td>
          114
        </td>
        <td>
          48820
        </td>
        <td>
          5302
          -
          5491
        </td>
        <td>
          Block
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          {
  val collection: org.geotools.feature.DefaultFeatureCollection = new org.geotools.feature.DefaultFeatureCollection();
  KNNVisitor.this.results.foreach[Unit](((x$2: Array[org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.FeatureWithDistance]) =&gt; scala.Predef.refArrayOps[org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.FeatureWithDistance](x$2).foreach[AnyVal](((r: org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.FeatureWithDistance) =&gt; if (r.!=(null))
    collection.add(r.sf)
  else
    ()))));
  KNNVisitor.this.result_=(org.locationtech.geomesa.process.FeatureResult.apply(collection))
}
        </td>
      </tr><tr>
        <td>
          114
        </td>
        <td>
          48821
        </td>
        <td>
          5282
          -
          5282
        </td>
        <td>
          Literal
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          ()
        </td>
      </tr><tr>
        <td>
          114
        </td>
        <td>
          48822
        </td>
        <td>
          5282
          -
          5282
        </td>
        <td>
          Block
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          ()
        </td>
      </tr><tr>
        <td>
          115
        </td>
        <td>
          48809
        </td>
        <td>
          5329
          -
          5359
        </td>
        <td>
          Apply
        </td>
        <td>
          org.geotools.feature.DefaultFeatureCollection.&lt;init&gt;
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          new org.geotools.feature.DefaultFeatureCollection()
        </td>
      </tr><tr>
        <td>
          116
        </td>
        <td>
          48810
        </td>
        <td>
          5403
          -
          5412
        </td>
        <td>
          Apply
        </td>
        <td>
          java.lang.Object.!=
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          r.!=(null)
        </td>
      </tr><tr>
        <td>
          116
        </td>
        <td>
          48811
        </td>
        <td>
          5431
          -
          5435
        </td>
        <td>
          Select
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.FeatureWithDistance.sf
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          r.sf
        </td>
      </tr><tr>
        <td>
          116
        </td>
        <td>
          48812
        </td>
        <td>
          5416
          -
          5436
        </td>
        <td>
          Apply
        </td>
        <td>
          org.geotools.feature.DefaultFeatureCollection.add
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          collection.add(r.sf)
        </td>
      </tr><tr>
        <td>
          116
        </td>
        <td>
          48813
        </td>
        <td>
          5416
          -
          5436
        </td>
        <td>
          Block
        </td>
        <td>
          org.geotools.feature.DefaultFeatureCollection.add
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          collection.add(r.sf)
        </td>
      </tr><tr>
        <td>
          116
        </td>
        <td>
          48814
        </td>
        <td>
          5399
          -
          5399
        </td>
        <td>
          Literal
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          ()
        </td>
      </tr><tr>
        <td>
          116
        </td>
        <td>
          48815
        </td>
        <td>
          5399
          -
          5399
        </td>
        <td>
          Block
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          ()
        </td>
      </tr><tr>
        <td>
          116
        </td>
        <td>
          48816
        </td>
        <td>
          5384
          -
          5439
        </td>
        <td>
          Apply
        </td>
        <td>
          scala.collection.IndexedSeqOptimized.foreach
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          scala.Predef.refArrayOps[org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.FeatureWithDistance](x$2).foreach[AnyVal](((r: org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.FeatureWithDistance) =&gt; if (r.!=(null))
  collection.add(r.sf)
else
  ()))
        </td>
      </tr><tr>
        <td>
          116
        </td>
        <td>
          48817
        </td>
        <td>
          5368
          -
          5440
        </td>
        <td>
          Apply
        </td>
        <td>
          scala.collection.IterableLike.foreach
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          KNNVisitor.this.results.foreach[Unit](((x$2: Array[org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.FeatureWithDistance]) =&gt; scala.Predef.refArrayOps[org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.FeatureWithDistance](x$2).foreach[AnyVal](((r: org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.FeatureWithDistance) =&gt; if (r.!=(null))
  collection.add(r.sf)
else
  ()))))
        </td>
      </tr><tr>
        <td>
          117
        </td>
        <td>
          48818
        </td>
        <td>
          5458
          -
          5483
        </td>
        <td>
          Apply
        </td>
        <td>
          org.locationtech.geomesa.process.FeatureResult.apply
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          org.locationtech.geomesa.process.FeatureResult.apply(collection)
        </td>
      </tr><tr>
        <td>
          117
        </td>
        <td>
          48819
        </td>
        <td>
          5449
          -
          5483
        </td>
        <td>
          Apply
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.KNNVisitor.result_=
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          KNNVisitor.this.result_=(org.locationtech.geomesa.process.FeatureResult.apply(collection))
        </td>
      </tr><tr>
        <td>
          119
        </td>
        <td>
          48823
        </td>
        <td>
          5498
          -
          5504
        </td>
        <td>
          Select
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.KNNVisitor.result
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          KNNVisitor.this.result
        </td>
      </tr><tr>
        <td>
          126
        </td>
        <td>
          48824
        </td>
        <td>
          5804
          -
          5834
        </td>
        <td>
          Apply
        </td>
        <td>
          org.geotools.feature.DefaultFeatureCollection.&lt;init&gt;
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          new org.geotools.feature.DefaultFeatureCollection()
        </td>
      </tr><tr>
        <td>
          127
        </td>
        <td>
          48825
        </td>
        <td>
          5864
          -
          5880
        </td>
        <td>
          Apply
        </td>
        <td>
          org.geotools.api.data.FeatureSource.getSchema
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          source.getSchema()
        </td>
      </tr><tr>
        <td>
          127
        </td>
        <td>
          48826
        </td>
        <td>
          5864
          -
          5893
        </td>
        <td>
          Select
        </td>
        <td>
          org.locationtech.geomesa.utils.geotools.RichSimpleFeatureType.RichSimpleFeatureType.getGeomField
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          org.locationtech.geomesa.utils.geotools.RichSimpleFeatureType.RichSimpleFeatureType(source.getSchema()).getGeomField
        </td>
      </tr><tr>
        <td>
          127
        </td>
        <td>
          48827
        </td>
        <td>
          5852
          -
          5894
        </td>
        <td>
          Apply
        </td>
        <td>
          org.geotools.api.filter.FilterFactory.property
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          org.locationtech.geomesa.filter.`package`.ff.property(org.locationtech.geomesa.utils.geotools.RichSimpleFeatureType.RichSimpleFeatureType(source.getSchema()).getGeomField)
        </td>
      </tr><tr>
        <td>
          132
        </td>
        <td>
          48828
        </td>
        <td>
          6082
          -
          6083
        </td>
        <td>
          Select
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.KNNVisitor.k
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          KNNVisitor.this.k
        </td>
      </tr><tr>
        <td>
          132
        </td>
        <td>
          48829
        </td>
        <td>
          6049
          -
          6084
        </td>
        <td>
          ApplyToImplicitArgs
        </td>
        <td>
          scala.Array.ofDim
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          scala.Array.ofDim[org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.FeatureWithDistance](KNNVisitor.this.k)((ClassTag.apply[org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.FeatureWithDistance](classOf[org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess$$FeatureWithDistance]): scala.reflect.ClassTag[org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.FeatureWithDistance]))
        </td>
      </tr><tr>
        <td>
          135
        </td>
        <td>
          48830
        </td>
        <td>
          6321
          -
          6368
        </td>
        <td>
          Apply
        </td>
        <td>
          java.util.LinkedList.&lt;init&gt;
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          new java.util.LinkedList[org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.FeatureWithDistance]()
        </td>
      </tr><tr>
        <td>
          138
        </td>
        <td>
          48831
        </td>
        <td>
          6472
          -
          6473
        </td>
        <td>
          Select
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.KNNVisitor.k
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          KNNVisitor.this.k
        </td>
      </tr><tr>
        <td>
          138
        </td>
        <td>
          48832
        </td>
        <td>
          6475
          -
          6480
        </td>
        <td>
          Select
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.KNNVisitor.start
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          KNNVisitor.this.start
        </td>
      </tr><tr>
        <td>
          138
        </td>
        <td>
          48833
        </td>
        <td>
          6482
          -
          6491
        </td>
        <td>
          Select
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.KNNVisitor.threshold
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          KNNVisitor.this.threshold
        </td>
      </tr><tr>
        <td>
          138
        </td>
        <td>
          48834
        </td>
        <td>
          6442
          -
          6492
        </td>
        <td>
          Apply
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.KnnWindow.&lt;init&gt;
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          new KNearestNeighborSearchProcess.this.KnnWindow(query, geom, p, KNNVisitor.this.k, KNNVisitor.this.start, KNNVisitor.this.threshold)
        </td>
      </tr><tr>
        <td>
          139
        </td>
        <td>
          48835
        </td>
        <td>
          6513
          -
          6514
        </td>
        <td>
          Literal
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          0
        </td>
      </tr><tr>
        <td>
          141
        </td>
        <td>
          48836
        </td>
        <td>
          6603
          -
          6607
        </td>
        <td>
          Select
        </td>
        <td>
          scala.None
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          scala.None
        </td>
      </tr><tr>
        <td>
          141
        </td>
        <td>
          48837
        </td>
        <td>
          6591
          -
          6608
        </td>
        <td>
          Apply
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.KnnWindow.next
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          window.next(scala.None)
        </td>
      </tr><tr>
        <td>
          146
        </td>
        <td>
          48838
        </td>
        <td>
          6854
          -
          6892
        </td>
        <td>
          Apply
        </td>
        <td>
          org.geotools.data.simple.SimpleFeatureCollection.features
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          source.getFeatures(initial).features()
        </td>
      </tr><tr>
        <td>
          146
        </td>
        <td>
          48852
        </td>
        <td>
          6894
          -
          6894
        </td>
        <td>
          Select
        </td>
        <td>
          org.locationtech.geomesa.utils.io.IsCloseableImplicits.closeableIsCloseable
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          io.this.IsCloseable.closeableIsCloseable
        </td>
      </tr><tr>
        <td>
          146
        </td>
        <td>
          48853
        </td>
        <td>
          6844
          -
          7342
        </td>
        <td>
          ApplyToImplicitArgs
        </td>
        <td>
          org.locationtech.geomesa.utils.io.WithClose.apply
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          org.locationtech.geomesa.utils.io.`package`.WithClose.apply[org.geotools.data.simple.SimpleFeatureIterator, Unit](source.getFeatures(initial).features())(((iter: org.geotools.data.simple.SimpleFeatureIterator) =&gt; {
  val knn: org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.KnnCalculator = new KNearestNeighborSearchProcess.this.KnnCalculator(p, KNNVisitor.this.k, window.radius, results, KNearestNeighborSearchProcess.this.KnnCalculator.&lt;init&gt;$default$5);
  while$1(){
    if (iter.hasNext())
      {
        {
          val sf: org.geotools.api.feature.simple.SimpleFeature = iter.next();
          knn.visit(sf).foreach[Boolean](((d: Double) =&gt; overflow.add(KNearestNeighborSearchProcess.this.FeatureWithDistance.apply(sf, d))))
        };
        while$1()
      }
    else
      ()
  };
  found = knn.size
}))(io.this.IsCloseable.closeableIsCloseable)
        </td>
      </tr><tr>
        <td>
          148
        </td>
        <td>
          48839
        </td>
        <td>
          7011
          -
          7012
        </td>
        <td>
          Select
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.KNNVisitor.k
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          KNNVisitor.this.k
        </td>
      </tr><tr>
        <td>
          148
        </td>
        <td>
          48840
        </td>
        <td>
          7014
          -
          7027
        </td>
        <td>
          Select
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.KnnWindow.radius
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          window.radius
        </td>
      </tr><tr>
        <td>
          148
        </td>
        <td>
          48841
        </td>
        <td>
          6990
          -
          7037
        </td>
        <td>
          Apply
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.KnnCalculator.&lt;init&gt;
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          new KNearestNeighborSearchProcess.this.KnnCalculator(p, KNNVisitor.this.k, window.radius, results, KNearestNeighborSearchProcess.this.KnnCalculator.&lt;init&gt;$default$5)
        </td>
      </tr><tr>
        <td>
          149
        </td>
        <td>
          48842
        </td>
        <td>
          7055
          -
          7067
        </td>
        <td>
          Apply
        </td>
        <td>
          org.geotools.feature.FeatureIterator.hasNext
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          iter.hasNext()
        </td>
      </tr><tr>
        <td>
          149
        </td>
        <td>
          48847
        </td>
        <td>
          7069
          -
          7069
        </td>
        <td>
          Apply
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.KNNVisitor.while$1
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          while$1()
        </td>
      </tr><tr>
        <td>
          149
        </td>
        <td>
          48848
        </td>
        <td>
          7069
          -
          7305
        </td>
        <td>
          Block
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          {
  {
    val sf: org.geotools.api.feature.simple.SimpleFeature = iter.next();
    knn.visit(sf).foreach[Boolean](((d: Double) =&gt; overflow.add(KNearestNeighborSearchProcess.this.FeatureWithDistance.apply(sf, d))))
  };
  while$1()
}
        </td>
      </tr><tr>
        <td>
          149
        </td>
        <td>
          48849
        </td>
        <td>
          7048
          -
          7048
        </td>
        <td>
          Literal
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          ()
        </td>
      </tr><tr>
        <td>
          149
        </td>
        <td>
          48850
        </td>
        <td>
          7048
          -
          7048
        </td>
        <td>
          Block
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          ()
        </td>
      </tr><tr>
        <td>
          150
        </td>
        <td>
          48843
        </td>
        <td>
          7092
          -
          7101
        </td>
        <td>
          Apply
        </td>
        <td>
          org.geotools.feature.FeatureIterator.next
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          iter.next()
        </td>
      </tr><tr>
        <td>
          152
        </td>
        <td>
          48844
        </td>
        <td>
          7265
          -
          7291
        </td>
        <td>
          Apply
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.FeatureWithDistance.apply
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          KNearestNeighborSearchProcess.this.FeatureWithDistance.apply(sf, d)
        </td>
      </tr><tr>
        <td>
          152
        </td>
        <td>
          48845
        </td>
        <td>
          7252
          -
          7292
        </td>
        <td>
          Apply
        </td>
        <td>
          java.util.LinkedList.add
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          overflow.add(KNearestNeighborSearchProcess.this.FeatureWithDistance.apply(sf, d))
        </td>
      </tr><tr>
        <td>
          152
        </td>
        <td>
          48846
        </td>
        <td>
          7225
          -
          7293
        </td>
        <td>
          Apply
        </td>
        <td>
          scala.Option.foreach
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          knn.visit(sf).foreach[Boolean](((d: Double) =&gt; overflow.add(KNearestNeighborSearchProcess.this.FeatureWithDistance.apply(sf, d))))
        </td>
      </tr><tr>
        <td>
          154
        </td>
        <td>
          48851
        </td>
        <td>
          7324
          -
          7332
        </td>
        <td>
          Select
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.KnnCalculator.size
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          knn.size
        </td>
      </tr><tr>
        <td>
          157
        </td>
        <td>
          48854
        </td>
        <td>
          7368
          -
          7369
        </td>
        <td>
          Literal
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          1
        </td>
      </tr><tr>
        <td>
          160
        </td>
        <td>
          48855
        </td>
        <td>
          7515
          -
          7516
        </td>
        <td>
          Select
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.KNNVisitor.k
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          KNNVisitor.this.k
        </td>
      </tr><tr>
        <td>
          160
        </td>
        <td>
          48856
        </td>
        <td>
          7520
          -
          7534
        </td>
        <td>
          Select
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.KnnWindow.hasNext
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          window.hasNext
        </td>
      </tr><tr>
        <td>
          160
        </td>
        <td>
          48857
        </td>
        <td>
          7507
          -
          7534
        </td>
        <td>
          Apply
        </td>
        <td>
          scala.Boolean.&amp;&amp;
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          found.&lt;(KNNVisitor.this.k).&amp;&amp;(window.hasNext)
        </td>
      </tr><tr>
        <td>
          160
        </td>
        <td>
          48893
        </td>
        <td>
          7536
          -
          7536
        </td>
        <td>
          Apply
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.KNNVisitor.while$4
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          while$4()
        </td>
      </tr><tr>
        <td>
          160
        </td>
        <td>
          48894
        </td>
        <td>
          7536
          -
          9024
        </td>
        <td>
          Block
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          {
  {
    val last: Double = window.radius;
    val next: org.geotools.api.data.Query = window.next(scala.Some.apply[Int](found));
    (if (KNNVisitor.this.logger.underlying.isDebugEnabled())
      KNNVisitor.this.logger.underlying.debug(scala.StringContext.apply(&quot;Expanding search at (&quot;, &quot; &quot;, &quot;) from &quot;, &quot; to &quot;, &quot; meters &quot;).s(p.getX(), p.getY(), last, window.radius).+(scala.StringContext.apply(&quot;based on finding &quot;, &quot;/&quot;, &quot; neighbors&quot;).s(found, KNNVisitor.this.k)))
    else
      (): Unit);
    (if (KNNVisitor.this.logger.underlying.isTraceEnabled())
      KNNVisitor.this.logger.underlying.trace(&quot;Current query window:\n  {}&quot;, (window.window.debug.mkString(&quot;\n  &quot;): AnyRef))
    else
      (): Unit);
    (if (KNNVisitor.this.logger.underlying.isTraceEnabled())
      KNNVisitor.this.logger.underlying.trace(&quot;Current filter: {}&quot;, (org.geotools.filter.text.ecql.ECQL.toCQL(next.getFilter()): AnyRef))
    else
      (): Unit);
    val knn: org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.KnnCalculator = new KNearestNeighborSearchProcess.this.KnnCalculator(p, KNNVisitor.this.k, window.radius, results, found);
    val iter: java.util.Iterator[org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.FeatureWithDistance] = overflow.iterator();
    while$2(){
      if (iter.hasNext())
        {
          {
            &lt;synthetic&gt; &lt;artifact&gt; private[this] val x$3: (org.geotools.api.feature.simple.SimpleFeature, Double) = (iter.next(): org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.FeatureWithDistance @unchecked) match {
              case (sf: org.geotools.api.feature.simple.SimpleFeature, meters: Double)org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.FeatureWithDistance((sf @ _), (d @ _)) =&gt; scala.Tuple2.apply[org.geotools.api.feature.simple.SimpleFeature, Double](sf, d)
            };
            val sf: org.geotools.api.feature.simple.SimpleFeature = x$3._1;
            val d: Double = x$3._2;
            if (d.&lt;=(window.radius))
              {
                knn.visit(sf, d);
                iter.remove()
              }
            else
              ()
          };
          while$2()
        }
      else
        ()
    };
    org.locationtech.geomesa.utils.io.`package`.WithClose.apply[org.geotools.data.simple.SimpleFeatureIterator, Unit](source.getFeatures(next).features())(((iter: org.geotools.data.simple.SimpleFeatureIterator) =&gt; {
      while$3(){
        if (iter.hasNext())
          {
            {
              val sf: org.geotools.api.feature.simple.SimpleFeature = iter.next();
              knn.visit(sf).foreach[Boolean](((d: Double) =&gt; overflow.add(KNearestNeighborSearchProcess.this.FeatureWithDistance.apply(sf, d))))
            };
            while$3()
          }
        else
          ()
      };
      found = knn.size
    }))(io.this.IsCloseable.closeableIsCloseable);
    iteration = iteration.+(1)
  };
  while$4()
}
        </td>
      </tr><tr>
        <td>
          160
        </td>
        <td>
          48895
        </td>
        <td>
          7500
          -
          7500
        </td>
        <td>
          Literal
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          ()
        </td>
      </tr><tr>
        <td>
          160
        </td>
        <td>
          48896
        </td>
        <td>
          7500
          -
          7500
        </td>
        <td>
          Block
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          ()
        </td>
      </tr><tr>
        <td>
          161
        </td>
        <td>
          48858
        </td>
        <td>
          7559
          -
          7572
        </td>
        <td>
          Select
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.KnnWindow.radius
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          window.radius
        </td>
      </tr><tr>
        <td>
          163
        </td>
        <td>
          48859
        </td>
        <td>
          7692
          -
          7703
        </td>
        <td>
          Apply
        </td>
        <td>
          scala.Some.apply
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          scala.Some.apply[Int](found)
        </td>
      </tr><tr>
        <td>
          163
        </td>
        <td>
          48860
        </td>
        <td>
          7680
          -
          7704
        </td>
        <td>
          Apply
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.KnnWindow.next
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          window.next(scala.Some.apply[Int](found))
        </td>
      </tr><tr>
        <td>
          171
        </td>
        <td>
          48861
        </td>
        <td>
          8188
          -
          8189
        </td>
        <td>
          Select
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.KNNVisitor.k
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          KNNVisitor.this.k
        </td>
      </tr><tr>
        <td>
          171
        </td>
        <td>
          48862
        </td>
        <td>
          8191
          -
          8204
        </td>
        <td>
          Select
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.KnnWindow.radius
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          window.radius
        </td>
      </tr><tr>
        <td>
          171
        </td>
        <td>
          48863
        </td>
        <td>
          8167
          -
          8221
        </td>
        <td>
          Apply
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.KnnCalculator.&lt;init&gt;
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          new KNearestNeighborSearchProcess.this.KnnCalculator(p, KNNVisitor.this.k, window.radius, results, found)
        </td>
      </tr><tr>
        <td>
          173
        </td>
        <td>
          48864
        </td>
        <td>
          8338
          -
          8357
        </td>
        <td>
          Apply
        </td>
        <td>
          java.util.AbstractSequentialList.iterator
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          overflow.iterator()
        </td>
      </tr><tr>
        <td>
          174
        </td>
        <td>
          48865
        </td>
        <td>
          8375
          -
          8387
        </td>
        <td>
          Apply
        </td>
        <td>
          java.util.Iterator.hasNext
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          iter.hasNext()
        </td>
      </tr><tr>
        <td>
          174
        </td>
        <td>
          48875
        </td>
        <td>
          8389
          -
          8389
        </td>
        <td>
          Apply
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.KNNVisitor.while$2
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          while$2()
        </td>
      </tr><tr>
        <td>
          174
        </td>
        <td>
          48876
        </td>
        <td>
          8389
          -
          8570
        </td>
        <td>
          Block
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          {
  {
    &lt;synthetic&gt; &lt;artifact&gt; private[this] val x$3: (org.geotools.api.feature.simple.SimpleFeature, Double) = (iter.next(): org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.FeatureWithDistance @unchecked) match {
      case (sf: org.geotools.api.feature.simple.SimpleFeature, meters: Double)org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.FeatureWithDistance((sf @ _), (d @ _)) =&gt; scala.Tuple2.apply[org.geotools.api.feature.simple.SimpleFeature, Double](sf, d)
    };
    val sf: org.geotools.api.feature.simple.SimpleFeature = x$3._1;
    val d: Double = x$3._2;
    if (d.&lt;=(window.radius))
      {
        knn.visit(sf, d);
        iter.remove()
      }
    else
      ()
  };
  while$2()
}
        </td>
      </tr><tr>
        <td>
          174
        </td>
        <td>
          48877
        </td>
        <td>
          8368
          -
          8368
        </td>
        <td>
          Literal
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          ()
        </td>
      </tr><tr>
        <td>
          174
        </td>
        <td>
          48878
        </td>
        <td>
          8368
          -
          8368
        </td>
        <td>
          Block
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          ()
        </td>
      </tr><tr>
        <td>
          175
        </td>
        <td>
          48866
        </td>
        <td>
          8427
          -
          8427
        </td>
        <td>
          Select
        </td>
        <td>
          scala.Tuple2._1
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          x$3._1
        </td>
      </tr><tr>
        <td>
          175
        </td>
        <td>
          48867
        </td>
        <td>
          8431
          -
          8431
        </td>
        <td>
          Select
        </td>
        <td>
          scala.Tuple2._2
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          x$3._2
        </td>
      </tr><tr>
        <td>
          176
        </td>
        <td>
          48868
        </td>
        <td>
          8469
          -
          8482
        </td>
        <td>
          Select
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.KnnWindow.radius
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          window.radius
        </td>
      </tr><tr>
        <td>
          176
        </td>
        <td>
          48869
        </td>
        <td>
          8464
          -
          8482
        </td>
        <td>
          Apply
        </td>
        <td>
          scala.Double.&lt;=
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          d.&lt;=(window.radius)
        </td>
      </tr><tr>
        <td>
          176
        </td>
        <td>
          48872
        </td>
        <td>
          8484
          -
          8558
        </td>
        <td>
          Block
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          {
  knn.visit(sf, d);
  iter.remove()
}
        </td>
      </tr><tr>
        <td>
          176
        </td>
        <td>
          48873
        </td>
        <td>
          8460
          -
          8460
        </td>
        <td>
          Literal
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          ()
        </td>
      </tr><tr>
        <td>
          176
        </td>
        <td>
          48874
        </td>
        <td>
          8460
          -
          8460
        </td>
        <td>
          Block
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          ()
        </td>
      </tr><tr>
        <td>
          177
        </td>
        <td>
          48870
        </td>
        <td>
          8500
          -
          8516
        </td>
        <td>
          Apply
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.KnnCalculator.visit
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          knn.visit(sf, d)
        </td>
      </tr><tr>
        <td>
          178
        </td>
        <td>
          48871
        </td>
        <td>
          8531
          -
          8544
        </td>
        <td>
          Apply
        </td>
        <td>
          java.util.Iterator.remove
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          iter.remove()
        </td>
      </tr><tr>
        <td>
          183
        </td>
        <td>
          48879
        </td>
        <td>
          8623
          -
          8658
        </td>
        <td>
          Apply
        </td>
        <td>
          org.geotools.data.simple.SimpleFeatureCollection.features
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          source.getFeatures(next).features()
        </td>
      </tr><tr>
        <td>
          183
        </td>
        <td>
          48890
        </td>
        <td>
          8660
          -
          8660
        </td>
        <td>
          Select
        </td>
        <td>
          org.locationtech.geomesa.utils.io.IsCloseableImplicits.closeableIsCloseable
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          io.this.IsCloseable.closeableIsCloseable
        </td>
      </tr><tr>
        <td>
          183
        </td>
        <td>
          48891
        </td>
        <td>
          8613
          -
          8988
        </td>
        <td>
          ApplyToImplicitArgs
        </td>
        <td>
          org.locationtech.geomesa.utils.io.WithClose.apply
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          org.locationtech.geomesa.utils.io.`package`.WithClose.apply[org.geotools.data.simple.SimpleFeatureIterator, Unit](source.getFeatures(next).features())(((iter: org.geotools.data.simple.SimpleFeatureIterator) =&gt; {
  while$3(){
    if (iter.hasNext())
      {
        {
          val sf: org.geotools.api.feature.simple.SimpleFeature = iter.next();
          knn.visit(sf).foreach[Boolean](((d: Double) =&gt; overflow.add(KNearestNeighborSearchProcess.this.FeatureWithDistance.apply(sf, d))))
        };
        while$3()
      }
    else
      ()
  };
  found = knn.size
}))(io.this.IsCloseable.closeableIsCloseable)
        </td>
      </tr><tr>
        <td>
          184
        </td>
        <td>
          48880
        </td>
        <td>
          8689
          -
          8701
        </td>
        <td>
          Apply
        </td>
        <td>
          org.geotools.feature.FeatureIterator.hasNext
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          iter.hasNext()
        </td>
      </tr><tr>
        <td>
          184
        </td>
        <td>
          48885
        </td>
        <td>
          8703
          -
          8703
        </td>
        <td>
          Apply
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.KNNVisitor.while$3
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          while$3()
        </td>
      </tr><tr>
        <td>
          184
        </td>
        <td>
          48886
        </td>
        <td>
          8703
          -
          8947
        </td>
        <td>
          Block
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          {
  {
    val sf: org.geotools.api.feature.simple.SimpleFeature = iter.next();
    knn.visit(sf).foreach[Boolean](((d: Double) =&gt; overflow.add(KNearestNeighborSearchProcess.this.FeatureWithDistance.apply(sf, d))))
  };
  while$3()
}
        </td>
      </tr><tr>
        <td>
          184
        </td>
        <td>
          48887
        </td>
        <td>
          8682
          -
          8682
        </td>
        <td>
          Literal
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          ()
        </td>
      </tr><tr>
        <td>
          184
        </td>
        <td>
          48888
        </td>
        <td>
          8682
          -
          8682
        </td>
        <td>
          Block
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          ()
        </td>
      </tr><tr>
        <td>
          185
        </td>
        <td>
          48881
        </td>
        <td>
          8728
          -
          8737
        </td>
        <td>
          Apply
        </td>
        <td>
          org.geotools.feature.FeatureIterator.next
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          iter.next()
        </td>
      </tr><tr>
        <td>
          187
        </td>
        <td>
          48882
        </td>
        <td>
          8905
          -
          8931
        </td>
        <td>
          Apply
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.FeatureWithDistance.apply
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          KNearestNeighborSearchProcess.this.FeatureWithDistance.apply(sf, d)
        </td>
      </tr><tr>
        <td>
          187
        </td>
        <td>
          48883
        </td>
        <td>
          8892
          -
          8932
        </td>
        <td>
          Apply
        </td>
        <td>
          java.util.LinkedList.add
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          overflow.add(KNearestNeighborSearchProcess.this.FeatureWithDistance.apply(sf, d))
        </td>
      </tr><tr>
        <td>
          187
        </td>
        <td>
          48884
        </td>
        <td>
          8865
          -
          8933
        </td>
        <td>
          Apply
        </td>
        <td>
          scala.Option.foreach
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          knn.visit(sf).foreach[Boolean](((d: Double) =&gt; overflow.add(KNearestNeighborSearchProcess.this.FeatureWithDistance.apply(sf, d))))
        </td>
      </tr><tr>
        <td>
          189
        </td>
        <td>
          48889
        </td>
        <td>
          8968
          -
          8976
        </td>
        <td>
          Select
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.KnnCalculator.size
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          knn.size
        </td>
      </tr><tr>
        <td>
          192
        </td>
        <td>
          48892
        </td>
        <td>
          9000
          -
          9014
        </td>
        <td>
          Apply
        </td>
        <td>
          scala.Int.+
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          iteration.+(1)
        </td>
      </tr><tr>
        <td>
          200
        </td>
        <td>
          48906
        </td>
        <td>
          9319
          -
          9477
        </td>
        <td>
          Apply
        </td>
        <td>
          java.lang.Object.synchronized
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          collection.synchronized[Unit]({
  var i: Int = 0;
  while$5(){
    if (i.&lt;(found))
      {
        {
          collection.add(results.apply(i).sf);
          i = i.+(1)
        };
        while$5()
      }
    else
      ()
  }
})
        </td>
      </tr><tr>
        <td>
          201
        </td>
        <td>
          48897
        </td>
        <td>
          9363
          -
          9364
        </td>
        <td>
          Literal
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          0
        </td>
      </tr><tr>
        <td>
          202
        </td>
        <td>
          48898
        </td>
        <td>
          9382
          -
          9391
        </td>
        <td>
          Apply
        </td>
        <td>
          scala.Int.&lt;
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          i.&lt;(found)
        </td>
      </tr><tr>
        <td>
          202
        </td>
        <td>
          48902
        </td>
        <td>
          9393
          -
          9393
        </td>
        <td>
          Apply
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.KNNVisitor.while$5
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          while$5()
        </td>
      </tr><tr>
        <td>
          202
        </td>
        <td>
          48903
        </td>
        <td>
          9393
          -
          9467
        </td>
        <td>
          Block
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          {
  {
    collection.add(results.apply(i).sf);
    i = i.+(1)
  };
  while$5()
}
        </td>
      </tr><tr>
        <td>
          202
        </td>
        <td>
          48904
        </td>
        <td>
          9375
          -
          9375
        </td>
        <td>
          Literal
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          ()
        </td>
      </tr><tr>
        <td>
          202
        </td>
        <td>
          48905
        </td>
        <td>
          9375
          -
          9375
        </td>
        <td>
          Block
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          ()
        </td>
      </tr><tr>
        <td>
          203
        </td>
        <td>
          48899
        </td>
        <td>
          9422
          -
          9435
        </td>
        <td>
          Select
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.FeatureWithDistance.sf
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          results.apply(i).sf
        </td>
      </tr><tr>
        <td>
          203
        </td>
        <td>
          48900
        </td>
        <td>
          9407
          -
          9436
        </td>
        <td>
          Apply
        </td>
        <td>
          org.geotools.feature.DefaultFeatureCollection.add
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          collection.add(results.apply(i).sf)
        </td>
      </tr><tr>
        <td>
          204
        </td>
        <td>
          48901
        </td>
        <td>
          9449
          -
          9455
        </td>
        <td>
          Apply
        </td>
        <td>
          scala.Int.+
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          i.+(1)
        </td>
      </tr><tr>
        <td>
          209
        </td>
        <td>
          48907
        </td>
        <td>
          9547
          -
          9553
        </td>
        <td>
          Apply
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.KNNVisitor.run
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          run(p)
        </td>
      </tr><tr>
        <td>
          209
        </td>
        <td>
          48908
        </td>
        <td>
          9517
          -
          9554
        </td>
        <td>
          Apply
        </td>
        <td>
          org.locationtech.geomesa.utils.concurrent.CachedThreadPool.submit
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          org.locationtech.geomesa.utils.concurrent.CachedThreadPool.submit((() =&gt; run(p)))
        </td>
      </tr><tr>
        <td>
          209
        </td>
        <td>
          48909
        </td>
        <td>
          9511
          -
          9511
        </td>
        <td>
          TypeApply
        </td>
        <td>
          scala.collection.immutable.List.canBuildFrom
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          immutable.this.List.canBuildFrom[java.util.concurrent.Future[_]]
        </td>
      </tr><tr>
        <td>
          209
        </td>
        <td>
          48910
        </td>
        <td>
          9564
          -
          9569
        </td>
        <td>
          Apply
        </td>
        <td>
          java.util.concurrent.Future.get
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          x$5.get()
        </td>
      </tr><tr>
        <td>
          209
        </td>
        <td>
          48911
        </td>
        <td>
          9493
          -
          9570
        </td>
        <td>
          Apply
        </td>
        <td>
          scala.collection.immutable.List.foreach
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          KNNVisitor.this.queries.toList.map[java.util.concurrent.Future[_], List[java.util.concurrent.Future[_]]](((p: org.locationtech.jts.geom.Point) =&gt; org.locationtech.geomesa.utils.concurrent.CachedThreadPool.submit((() =&gt; run(p)))))(immutable.this.List.canBuildFrom[java.util.concurrent.Future[_]]).foreach[Any](((x$5: java.util.concurrent.Future[_]) =&gt; x$5.get()))
        </td>
      </tr><tr>
        <td>
          211
        </td>
        <td>
          48912
        </td>
        <td>
          9592
          -
          9617
        </td>
        <td>
          Apply
        </td>
        <td>
          org.locationtech.geomesa.process.FeatureResult.apply
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          org.locationtech.geomesa.process.FeatureResult.apply(collection)
        </td>
      </tr><tr>
        <td>
          211
        </td>
        <td>
          48913
        </td>
        <td>
          9578
          -
          9617
        </td>
        <td>
          Apply
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.KNNVisitor.result_=
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          this.result_=(org.locationtech.geomesa.process.FeatureResult.apply(collection))
        </td>
      </tr><tr>
        <td>
          227
        </td>
        <td>
          48914
        </td>
        <td>
          10084
          -
          10108
        </td>
        <td>
          Apply
        </td>
        <td>
          org.geotools.referencing.GeodeticCalculator.&lt;init&gt;
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          new org.geotools.referencing.GeodeticCalculator()
        </td>
      </tr><tr>
        <td>
          228
        </td>
        <td>
          48915
        </td>
        <td>
          10136
          -
          10141
        </td>
        <td>
          Select
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.KnnWindow.start
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          KnnWindow.this.start
        </td>
      </tr><tr>
        <td>
          231
        </td>
        <td>
          48916
        </td>
        <td>
          10282
          -
          10283
        </td>
        <td>
          Select
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.KnnWindow.p
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          KnnWindow.this.p
        </td>
      </tr><tr>
        <td>
          231
        </td>
        <td>
          48917
        </td>
        <td>
          10285
          -
          10293
        </td>
        <td>
          Select
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.KnnWindow.distance
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          KnnWindow.this.distance
        </td>
      </tr><tr>
        <td>
          231
        </td>
        <td>
          48918
        </td>
        <td>
          10295
          -
          10299
        </td>
        <td>
          Select
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.KnnWindow.calc
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          KnnWindow.this.calc
        </td>
      </tr><tr>
        <td>
          231
        </td>
        <td>
          48919
        </td>
        <td>
          10273
          -
          10300
        </td>
        <td>
          Apply
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope.apply
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          KNearestNeighborSearchProcess.this.Envelope.apply(KnnWindow.this.p, KnnWindow.this.distance, KnnWindow.this.calc)
        </td>
      </tr><tr>
        <td>
          231
        </td>
        <td>
          48920
        </td>
        <td>
          10302
          -
          10306
        </td>
        <td>
          Select
        </td>
        <td>
          scala.None
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          scala.None
        </td>
      </tr><tr>
        <td>
          231
        </td>
        <td>
          48921
        </td>
        <td>
          10259
          -
          10307
        </td>
        <td>
          Apply
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.QueryEnvelope.apply
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          KNearestNeighborSearchProcess.this.QueryEnvelope.apply(KNearestNeighborSearchProcess.this.Envelope.apply(KnnWindow.this.p, KnnWindow.this.distance, KnnWindow.this.calc), scala.None)
        </td>
      </tr><tr>
        <td>
          238
        </td>
        <td>
          48922
        </td>
        <td>
          10416
          -
          10424
        </td>
        <td>
          Select
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.KnnWindow.distance
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          KnnWindow.this.distance
        </td>
      </tr><tr>
        <td>
          245
        </td>
        <td>
          48923
        </td>
        <td>
          10540
          -
          10548
        </td>
        <td>
          Select
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.KnnWindow.envelope
        </td>
        <td>
          
        </td>
        <td style="background: #F0ADAD">
          KnnWindow.this.envelope
        </td>
      </tr><tr>
        <td>
          252
        </td>
        <td>
          48924
        </td>
        <td>
          10696
          -
          10705
        </td>
        <td>
          Select
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.KnnWindow.threshold
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          KnnWindow.this.threshold
        </td>
      </tr><tr>
        <td>
          252
        </td>
        <td>
          48925
        </td>
        <td>
          10685
          -
          10705
        </td>
        <td>
          Apply
        </td>
        <td>
          scala.Double.&lt;
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          KnnWindow.this.distance.&lt;(KnnWindow.this.threshold)
        </td>
      </tr><tr>
        <td>
          261
        </td>
        <td>
          48926
        </td>
        <td>
          10934
          -
          10940
        </td>
        <td>
          Apply
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.KnnWindow.expand
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          KnnWindow.this.expand(found)
        </td>
      </tr><tr>
        <td>
          261
        </td>
        <td>
          48927
        </td>
        <td>
          10920
          -
          10941
        </td>
        <td>
          Apply
        </td>
        <td>
          scala.Option.foreach
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          found.foreach[Unit]({
  ((found: Int) =&gt; KnnWindow.this.expand(found))
})
        </td>
      </tr><tr>
        <td>
          263
        </td>
        <td>
          48928
        </td>
        <td>
          11021
          -
          11025
        </td>
        <td>
          Select
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.KnnWindow.base
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          KnnWindow.this.base
        </td>
      </tr><tr>
        <td>
          263
        </td>
        <td>
          48929
        </td>
        <td>
          11011
          -
          11026
        </td>
        <td>
          Apply
        </td>
        <td>
          org.geotools.api.data.Query.&lt;init&gt;
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          new org.geotools.api.data.Query(KnnWindow.this.base)
        </td>
      </tr><tr>
        <td>
          264
        </td>
        <td>
          48930
        </td>
        <td>
          11058
          -
          11071
        </td>
        <td>
          Apply
        </td>
        <td>
          org.geotools.api.data.Query.getHints
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          KnnWindow.this.base.getHints()
        </td>
      </tr><tr>
        <td>
          264
        </td>
        <td>
          48931
        </td>
        <td>
          11048
          -
          11072
        </td>
        <td>
          Apply
        </td>
        <td>
          org.geotools.util.factory.Hints.&lt;init&gt;
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          new org.geotools.util.factory.Hints(KnnWindow.this.base.getHints())
        </td>
      </tr><tr>
        <td>
          264
        </td>
        <td>
          48932
        </td>
        <td>
          11033
          -
          11073
        </td>
        <td>
          Apply
        </td>
        <td>
          org.geotools.api.data.Query.setHints
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          query.setHints(new org.geotools.util.factory.Hints(KnnWindow.this.base.getHints()))
        </td>
      </tr><tr>
        <td>
          267
        </td>
        <td>
          48933
        </td>
        <td>
          11311
          -
          11315
        </td>
        <td>
          Select
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.KnnWindow.geom
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          KnnWindow.this.geom
        </td>
      </tr><tr>
        <td>
          267
        </td>
        <td>
          48934
        </td>
        <td>
          11300
          -
          11316
        </td>
        <td>
          Apply
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope.toFilter
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          x$6.toFilter(KnnWindow.this.geom)
        </td>
      </tr><tr>
        <td>
          267
        </td>
        <td>
          48935
        </td>
        <td>
          11299
          -
          11299
        </td>
        <td>
          TypeApply
        </td>
        <td>
          scala.collection.Seq.canBuildFrom
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          collection.this.Seq.canBuildFrom[org.geotools.api.filter.Filter]
        </td>
      </tr><tr>
        <td>
          267
        </td>
        <td>
          48936
        </td>
        <td>
          11281
          -
          11317
        </td>
        <td>
          ApplyToImplicitArgs
        </td>
        <td>
          scala.collection.TraversableLike.map
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          KnnWindow.this.envelope.query.map[org.geotools.api.filter.Filter, Seq[org.geotools.api.filter.Filter]](((x$6: org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope) =&gt; x$6.toFilter(KnnWindow.this.geom)))(collection.this.Seq.canBuildFrom[org.geotools.api.filter.Filter])
        </td>
      </tr><tr>
        <td>
          267
        </td>
        <td>
          48937
        </td>
        <td>
          11280
          -
          11280
        </td>
        <td>
          Select
        </td>
        <td>
          org.locationtech.geomesa.filter.ff
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          org.locationtech.geomesa.filter.`package`.ff
        </td>
      </tr><tr>
        <td>
          267
        </td>
        <td>
          48938
        </td>
        <td>
          11239
          -
          11318
        </td>
        <td>
          ApplyToImplicitArgs
        </td>
        <td>
          org.locationtech.geomesa.filter.orFilters
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          org.locationtech.geomesa.filter.`package`.orFilters(KnnWindow.this.envelope.query.map[org.geotools.api.filter.Filter, Seq[org.geotools.api.filter.Filter]](((x$6: org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope) =&gt; x$6.toFilter(KnnWindow.this.geom)))(collection.this.Seq.canBuildFrom[org.geotools.api.filter.Filter]))(org.locationtech.geomesa.filter.`package`.ff)
        </td>
      </tr><tr>
        <td>
          268
        </td>
        <td>
          48939
        </td>
        <td>
          11325
          -
          11339
        </td>
        <td>
          Apply
        </td>
        <td>
          org.geotools.api.data.Query.getFilter
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          KnnWindow.this.base.getFilter()
        </td>
      </tr><tr>
        <td>
          269
        </td>
        <td>
          48940
        </td>
        <td>
          11386
          -
          11409
        </td>
        <td>
          Apply
        </td>
        <td>
          org.geotools.api.data.Query.setFilter
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          query.setFilter(filter)
        </td>
      </tr><tr>
        <td>
          269
        </td>
        <td>
          48941
        </td>
        <td>
          11386
          -
          11409
        </td>
        <td>
          Block
        </td>
        <td>
          org.geotools.api.data.Query.setFilter
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          query.setFilter(filter)
        </td>
      </tr><tr>
        <td>
          270
        </td>
        <td>
          48942
        </td>
        <td>
          11444
          -
          11461
        </td>
        <td>
          Apply
        </td>
        <td>
          org.geotools.api.filter.FilterFactory.and
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          org.locationtech.geomesa.filter.`package`.ff.and(f, filter)
        </td>
      </tr><tr>
        <td>
          270
        </td>
        <td>
          48943
        </td>
        <td>
          11428
          -
          11462
        </td>
        <td>
          Apply
        </td>
        <td>
          org.geotools.api.data.Query.setFilter
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          query.setFilter(org.locationtech.geomesa.filter.`package`.ff.and(f, filter))
        </td>
      </tr><tr>
        <td>
          270
        </td>
        <td>
          48944
        </td>
        <td>
          11428
          -
          11462
        </td>
        <td>
          Block
        </td>
        <td>
          org.geotools.api.data.Query.setFilter
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          query.setFilter(org.locationtech.geomesa.filter.`package`.ff.and(f, filter))
        </td>
      </tr><tr>
        <td>
          293
        </td>
        <td>
          48945
        </td>
        <td>
          12449
          -
          12459
        </td>
        <td>
          Apply
        </td>
        <td>
          scala.Int.==
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          found.==(0)
        </td>
      </tr><tr>
        <td>
          293
        </td>
        <td>
          48946
        </td>
        <td>
          12463
          -
          12475
        </td>
        <td>
          Apply
        </td>
        <td>
          scala.Double.*
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          KnnWindow.this.distance.*(2)
        </td>
      </tr><tr>
        <td>
          293
        </td>
        <td>
          48947
        </td>
        <td>
          12463
          -
          12475
        </td>
        <td>
          Block
        </td>
        <td>
          scala.Double.*
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          KnnWindow.this.distance.*(2)
        </td>
      </tr><tr>
        <td>
          293
        </td>
        <td>
          48957
        </td>
        <td>
          12483
          -
          12591
        </td>
        <td>
          Block
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          {
  val density: Double = found./(scala.math.`package`.pow(2.*(KnnWindow.this.distance), 2.0));
  scala.math.`package`.sqrt(KnnWindow.this.k./(3.141592653589793.*(density)))
}
        </td>
      </tr><tr>
        <td>
          293
        </td>
        <td>
          48958
        </td>
        <td>
          12434
          -
          12591
        </td>
        <td>
          Apply
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.KnnWindow.distance_=
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          KnnWindow.this.distance_=(if (found.==(0))
  KnnWindow.this.distance.*(2)
else
  {
    val density: Double = found./(scala.math.`package`.pow(2.*(KnnWindow.this.distance), 2.0));
    scala.math.`package`.sqrt(KnnWindow.this.k./(3.141592653589793.*(density)))
  })
        </td>
      </tr><tr>
        <td>
          294
        </td>
        <td>
          48948
        </td>
        <td>
          12524
          -
          12525
        </td>
        <td>
          Literal
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          2
        </td>
      </tr><tr>
        <td>
          294
        </td>
        <td>
          48949
        </td>
        <td>
          12528
          -
          12536
        </td>
        <td>
          Select
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.KnnWindow.distance
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          KnnWindow.this.distance
        </td>
      </tr><tr>
        <td>
          294
        </td>
        <td>
          48950
        </td>
        <td>
          12524
          -
          12536
        </td>
        <td>
          Apply
        </td>
        <td>
          scala.Int.*
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          2.*(KnnWindow.this.distance)
        </td>
      </tr><tr>
        <td>
          294
        </td>
        <td>
          48951
        </td>
        <td>
          12538
          -
          12539
        </td>
        <td>
          Literal
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          2.0
        </td>
      </tr><tr>
        <td>
          294
        </td>
        <td>
          48952
        </td>
        <td>
          12515
          -
          12540
        </td>
        <td>
          Apply
        </td>
        <td>
          scala.math.pow
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          scala.math.`package`.pow(2.*(KnnWindow.this.distance), 2.0)
        </td>
      </tr><tr>
        <td>
          294
        </td>
        <td>
          48953
        </td>
        <td>
          12507
          -
          12540
        </td>
        <td>
          Apply
        </td>
        <td>
          scala.Int./
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          found./(scala.math.`package`.pow(2.*(KnnWindow.this.distance), 2.0))
        </td>
      </tr><tr>
        <td>
          295
        </td>
        <td>
          48954
        </td>
        <td>
          12564
          -
          12581
        </td>
        <td>
          Apply
        </td>
        <td>
          scala.Double.*
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          3.141592653589793.*(density)
        </td>
      </tr><tr>
        <td>
          295
        </td>
        <td>
          48955
        </td>
        <td>
          12559
          -
          12582
        </td>
        <td>
          Apply
        </td>
        <td>
          scala.Int./
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          KnnWindow.this.k./(3.141592653589793.*(density))
        </td>
      </tr><tr>
        <td>
          295
        </td>
        <td>
          48956
        </td>
        <td>
          12549
          -
          12583
        </td>
        <td>
          Apply
        </td>
        <td>
          scala.math.sqrt
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          scala.math.`package`.sqrt(KnnWindow.this.k./(3.141592653589793.*(density)))
        </td>
      </tr><tr>
        <td>
          297
        </td>
        <td>
          48959
        </td>
        <td>
          12613
          -
          12622
        </td>
        <td>
          Select
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.KnnWindow.threshold
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          KnnWindow.this.threshold
        </td>
      </tr><tr>
        <td>
          297
        </td>
        <td>
          48960
        </td>
        <td>
          12602
          -
          12622
        </td>
        <td>
          Apply
        </td>
        <td>
          scala.Double.&gt;
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          KnnWindow.this.distance.&gt;(KnnWindow.this.threshold)
        </td>
      </tr><tr>
        <td>
          297
        </td>
        <td>
          48964
        </td>
        <td>
          12598
          -
          12598
        </td>
        <td>
          Literal
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          ()
        </td>
      </tr><tr>
        <td>
          297
        </td>
        <td>
          48965
        </td>
        <td>
          12598
          -
          12598
        </td>
        <td>
          Block
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          ()
        </td>
      </tr><tr>
        <td>
          298
        </td>
        <td>
          48961
        </td>
        <td>
          12645
          -
          12654
        </td>
        <td>
          Select
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.KnnWindow.threshold
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          KnnWindow.this.threshold
        </td>
      </tr><tr>
        <td>
          298
        </td>
        <td>
          48962
        </td>
        <td>
          12634
          -
          12654
        </td>
        <td>
          Apply
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.KnnWindow.distance_=
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          KnnWindow.this.distance_=(KnnWindow.this.threshold)
        </td>
      </tr><tr>
        <td>
          298
        </td>
        <td>
          48963
        </td>
        <td>
          12634
          -
          12654
        </td>
        <td>
          Block
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.KnnWindow.distance_=
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          KnnWindow.this.distance_=(KnnWindow.this.threshold)
        </td>
      </tr><tr>
        <td>
          301
        </td>
        <td>
          48966
        </td>
        <td>
          12686
          -
          12703
        </td>
        <td>
          Select
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.QueryEnvelope.envelope
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          KnnWindow.this.envelope.envelope
        </td>
      </tr><tr>
        <td>
          301
        </td>
        <td>
          48967
        </td>
        <td>
          12681
          -
          12704
        </td>
        <td>
          Apply
        </td>
        <td>
          scala.Some.apply
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          scala.Some.apply[org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope](KnnWindow.this.envelope.envelope)
        </td>
      </tr><tr>
        <td>
          302
        </td>
        <td>
          48968
        </td>
        <td>
          12745
          -
          12746
        </td>
        <td>
          Select
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.KnnWindow.p
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          KnnWindow.this.p
        </td>
      </tr><tr>
        <td>
          302
        </td>
        <td>
          48969
        </td>
        <td>
          12748
          -
          12756
        </td>
        <td>
          Select
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.KnnWindow.distance
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          KnnWindow.this.distance
        </td>
      </tr><tr>
        <td>
          302
        </td>
        <td>
          48970
        </td>
        <td>
          12758
          -
          12762
        </td>
        <td>
          Select
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.KnnWindow.calc
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          KnnWindow.this.calc
        </td>
      </tr><tr>
        <td>
          302
        </td>
        <td>
          48971
        </td>
        <td>
          12736
          -
          12763
        </td>
        <td>
          Apply
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope.apply
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          KNearestNeighborSearchProcess.this.Envelope.apply(KnnWindow.this.p, KnnWindow.this.distance, KnnWindow.this.calc)
        </td>
      </tr><tr>
        <td>
          302
        </td>
        <td>
          48972
        </td>
        <td>
          12722
          -
          12770
        </td>
        <td>
          Apply
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.QueryEnvelope.apply
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          KNearestNeighborSearchProcess.this.QueryEnvelope.apply(KNearestNeighborSearchProcess.this.Envelope.apply(KnnWindow.this.p, KnnWindow.this.distance, KnnWindow.this.calc), hole)
        </td>
      </tr><tr>
        <td>
          302
        </td>
        <td>
          48973
        </td>
        <td>
          12711
          -
          12770
        </td>
        <td>
          Apply
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.KnnWindow.envelope_=
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          KnnWindow.this.envelope_=(KNearestNeighborSearchProcess.this.QueryEnvelope.apply(KNearestNeighborSearchProcess.this.Envelope.apply(KnnWindow.this.p, KnnWindow.this.distance, KnnWindow.this.calc), hole))
        </td>
      </tr><tr>
        <td>
          323
        </td>
        <td>
          48974
        </td>
        <td>
          13355
          -
          13379
        </td>
        <td>
          Apply
        </td>
        <td>
          org.locationtech.geomesa.utils.geometry.DistanceCalculator.&lt;init&gt;
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          new org.locationtech.geomesa.utils.geometry.DistanceCalculator()
        </td>
      </tr><tr>
        <td>
          326
        </td>
        <td>
          48975
        </td>
        <td>
          13464
          -
          13465
        </td>
        <td>
          Select
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.KnnCalculator.k
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          KnnCalculator.this.k
        </td>
      </tr><tr>
        <td>
          326
        </td>
        <td>
          48976
        </td>
        <td>
          13460
          -
          13465
        </td>
        <td>
          Apply
        </td>
        <td>
          scala.Int.&lt;
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          KnnCalculator.this.i.&lt;(KnnCalculator.this.k)
        </td>
      </tr><tr>
        <td>
          326
        </td>
        <td>
          48977
        </td>
        <td>
          13469
          -
          13470
        </td>
        <td>
          Literal
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          0
        </td>
      </tr><tr>
        <td>
          326
        </td>
        <td>
          48978
        </td>
        <td>
          13469
          -
          13470
        </td>
        <td>
          Block
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          0
        </td>
      </tr><tr>
        <td>
          326
        </td>
        <td>
          48979
        </td>
        <td>
          13480
          -
          13488
        </td>
        <td>
          Select
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.KnnCalculator.farthest
        </td>
        <td>
          
        </td>
        <td style="background: #F0ADAD">
          KnnCalculator.this.farthest
        </td>
      </tr><tr>
        <td>
          326
        </td>
        <td>
          48980
        </td>
        <td>
          13480
          -
          13488
        </td>
        <td>
          Block
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.KnnCalculator.farthest
        </td>
        <td>
          
        </td>
        <td style="background: #F0ADAD">
          KnnCalculator.this.farthest
        </td>
      </tr><tr>
        <td>
          333
        </td>
        <td>
          48981
        </td>
        <td>
          13593
          -
          13594
        </td>
        <td>
          Select
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.KnnCalculator.i
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          KnnCalculator.this.i
        </td>
      </tr><tr>
        <td>
          342
        </td>
        <td>
          48982
        </td>
        <td>
          13883
          -
          13909
        </td>
        <td>
          Apply
        </td>
        <td>
          org.geotools.api.feature.simple.SimpleFeature.getDefaultGeometry
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          feature.getDefaultGeometry()
        </td>
      </tr><tr>
        <td>
          343
        </td>
        <td>
          48992
        </td>
        <td>
          13940
          -
          14137
        </td>
        <td>
          Block
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          {
  val meters: Double = KnnCalculator.this.calculator.meters(KnnCalculator.this.query, p);
  if (meters.&gt;(KnnCalculator.this.threshold))
    scala.Some.apply[Double](meters)
  else
    {
      KnnCalculator.this.visit(feature, meters);
      scala.None
    }
}
        </td>
      </tr><tr>
        <td>
          344
        </td>
        <td>
          48983
        </td>
        <td>
          13984
          -
          13989
        </td>
        <td>
          Select
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.KnnCalculator.query
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          KnnCalculator.this.query
        </td>
      </tr><tr>
        <td>
          344
        </td>
        <td>
          48984
        </td>
        <td>
          13966
          -
          13993
        </td>
        <td>
          Apply
        </td>
        <td>
          org.locationtech.geomesa.utils.geometry.DistanceCalculator.meters
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          KnnCalculator.this.calculator.meters(KnnCalculator.this.query, p)
        </td>
      </tr><tr>
        <td>
          345
        </td>
        <td>
          48985
        </td>
        <td>
          14017
          -
          14026
        </td>
        <td>
          Select
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.KnnCalculator.threshold
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          KnnCalculator.this.threshold
        </td>
      </tr><tr>
        <td>
          345
        </td>
        <td>
          48986
        </td>
        <td>
          14008
          -
          14026
        </td>
        <td>
          Apply
        </td>
        <td>
          scala.Double.&gt;
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          meters.&gt;(KnnCalculator.this.threshold)
        </td>
      </tr><tr>
        <td>
          346
        </td>
        <td>
          48987
        </td>
        <td>
          14042
          -
          14054
        </td>
        <td>
          Apply
        </td>
        <td>
          scala.Some.apply
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          scala.Some.apply[Double](meters)
        </td>
      </tr><tr>
        <td>
          346
        </td>
        <td>
          48988
        </td>
        <td>
          14042
          -
          14054
        </td>
        <td>
          Block
        </td>
        <td>
          scala.Some.apply
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          scala.Some.apply[Double](meters)
        </td>
      </tr><tr>
        <td>
          347
        </td>
        <td>
          48991
        </td>
        <td>
          14072
          -
          14137
        </td>
        <td>
          Block
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          {
  KnnCalculator.this.visit(feature, meters);
  scala.None
}
        </td>
      </tr><tr>
        <td>
          348
        </td>
        <td>
          48989
        </td>
        <td>
          14086
          -
          14108
        </td>
        <td>
          Apply
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.KnnCalculator.visit
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          KnnCalculator.this.visit(feature, meters)
        </td>
      </tr><tr>
        <td>
          349
        </td>
        <td>
          48990
        </td>
        <td>
          14121
          -
          14125
        </td>
        <td>
          Select
        </td>
        <td>
          scala.None
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          scala.None
        </td>
      </tr><tr>
        <td>
          352
        </td>
        <td>
          48993
        </td>
        <td>
          14252
          -
          14256
        </td>
        <td>
          Select
        </td>
        <td>
          scala.None
        </td>
        <td>
          
        </td>
        <td style="background: #F0ADAD">
          scala.None
        </td>
      </tr><tr>
        <td>
          352
        </td>
        <td>
          48994
        </td>
        <td>
          14154
          -
          14256
        </td>
        <td>
          Block
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td>
          
        </td>
        <td style="background: #F0ADAD">
          {
  (if (KnnCalculator.this.logger.underlying.isWarnEnabled())
    KnnCalculator.this.logger.underlying.warn(&quot;KNN query not implemented for non-point geometries, skipping this feature: {}&quot;, (g: AnyRef))
  else
    (): Unit);
  scala.None
}
        </td>
      </tr><tr>
        <td>
          363
        </td>
        <td>
          48995
        </td>
        <td>
          14556
          -
          14557
        </td>
        <td>
          Select
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.KnnCalculator.k
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          KnnCalculator.this.k
        </td>
      </tr><tr>
        <td>
          363
        </td>
        <td>
          48996
        </td>
        <td>
          14552
          -
          14557
        </td>
        <td>
          Apply
        </td>
        <td>
          scala.Int.&lt;
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          KnnCalculator.this.i.&lt;(KnnCalculator.this.k)
        </td>
      </tr><tr>
        <td>
          363
        </td>
        <td>
          49009
        </td>
        <td>
          14559
          -
          14898
        </td>
        <td>
          Block
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          {
  KnnCalculator.this.results.update(KnnCalculator.this.i, KNearestNeighborSearchProcess.this.FeatureWithDistance.apply(feature, distance));
  KnnCalculator.this.i_=(KnnCalculator.this.i.+(1));
  if (KnnCalculator.this.i.==(KnnCalculator.this.k))
    KnnCalculator.this.fi_=(KnnCalculator.this.farthest)
  else
    ()
}
        </td>
      </tr><tr>
        <td>
          365
        </td>
        <td>
          48997
        </td>
        <td>
          14669
          -
          14670
        </td>
        <td>
          Select
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.KnnCalculator.i
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          KnnCalculator.this.i
        </td>
      </tr><tr>
        <td>
          365
        </td>
        <td>
          48998
        </td>
        <td>
          14674
          -
          14712
        </td>
        <td>
          Apply
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.FeatureWithDistance.apply
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          KNearestNeighborSearchProcess.this.FeatureWithDistance.apply(feature, distance)
        </td>
      </tr><tr>
        <td>
          365
        </td>
        <td>
          48999
        </td>
        <td>
          14661
          -
          14712
        </td>
        <td>
          Apply
        </td>
        <td>
          scala.Array.update
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          KnnCalculator.this.results.update(KnnCalculator.this.i, KNearestNeighborSearchProcess.this.FeatureWithDistance.apply(feature, distance))
        </td>
      </tr><tr>
        <td>
          366
        </td>
        <td>
          49000
        </td>
        <td>
          14721
          -
          14727
        </td>
        <td>
          Apply
        </td>
        <td>
          scala.Int.+
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          KnnCalculator.this.i.+(1)
        </td>
      </tr><tr>
        <td>
          366
        </td>
        <td>
          49001
        </td>
        <td>
          14721
          -
          14727
        </td>
        <td>
          Apply
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.KnnCalculator.i_=
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          KnnCalculator.this.i_=(KnnCalculator.this.i.+(1))
        </td>
      </tr><tr>
        <td>
          367
        </td>
        <td>
          49002
        </td>
        <td>
          14745
          -
          14746
        </td>
        <td>
          Select
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.KnnCalculator.k
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          KnnCalculator.this.k
        </td>
      </tr><tr>
        <td>
          367
        </td>
        <td>
          49003
        </td>
        <td>
          14740
          -
          14746
        </td>
        <td>
          Apply
        </td>
        <td>
          scala.Int.==
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          KnnCalculator.this.i.==(KnnCalculator.this.k)
        </td>
      </tr><tr>
        <td>
          367
        </td>
        <td>
          49007
        </td>
        <td>
          14736
          -
          14736
        </td>
        <td>
          Literal
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          ()
        </td>
      </tr><tr>
        <td>
          367
        </td>
        <td>
          49008
        </td>
        <td>
          14736
          -
          14736
        </td>
        <td>
          Block
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          ()
        </td>
      </tr><tr>
        <td>
          369
        </td>
        <td>
          49004
        </td>
        <td>
          14872
          -
          14880
        </td>
        <td>
          Select
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.KnnCalculator.farthest
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          KnnCalculator.this.farthest
        </td>
      </tr><tr>
        <td>
          369
        </td>
        <td>
          49005
        </td>
        <td>
          14867
          -
          14880
        </td>
        <td>
          Apply
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.KnnCalculator.fi_=
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          KnnCalculator.this.fi_=(KnnCalculator.this.farthest)
        </td>
      </tr><tr>
        <td>
          369
        </td>
        <td>
          49006
        </td>
        <td>
          14867
          -
          14880
        </td>
        <td>
          Block
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.KnnCalculator.fi_=
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          KnnCalculator.this.fi_=(KnnCalculator.this.farthest)
        </td>
      </tr><tr>
        <td>
          371
        </td>
        <td>
          49010
        </td>
        <td>
          14927
          -
          14929
        </td>
        <td>
          Select
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.KnnCalculator.fi
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          KnnCalculator.this.fi
        </td>
      </tr><tr>
        <td>
          371
        </td>
        <td>
          49011
        </td>
        <td>
          14919
          -
          14937
        </td>
        <td>
          Select
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.FeatureWithDistance.meters
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          KnnCalculator.this.results.apply(KnnCalculator.this.fi).meters
        </td>
      </tr><tr>
        <td>
          371
        </td>
        <td>
          49012
        </td>
        <td>
          14908
          -
          14937
        </td>
        <td>
          Apply
        </td>
        <td>
          scala.Double.&lt;
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          distance.&lt;(KnnCalculator.this.results.apply(KnnCalculator.this.fi).meters)
        </td>
      </tr><tr>
        <td>
          371
        </td>
        <td>
          49018
        </td>
        <td>
          14939
          -
          15121
        </td>
        <td>
          Block
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          {
  KnnCalculator.this.results.update(KnnCalculator.this.fi, KNearestNeighborSearchProcess.this.FeatureWithDistance.apply(feature, distance));
  KnnCalculator.this.fi_=(KnnCalculator.this.farthest)
}
        </td>
      </tr><tr>
        <td>
          371
        </td>
        <td>
          49019
        </td>
        <td>
          14904
          -
          14904
        </td>
        <td>
          Literal
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          ()
        </td>
      </tr><tr>
        <td>
          371
        </td>
        <td>
          49020
        </td>
        <td>
          14904
          -
          14904
        </td>
        <td>
          Block
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          ()
        </td>
      </tr><tr>
        <td>
          371
        </td>
        <td>
          49021
        </td>
        <td>
          14904
          -
          15121
        </td>
        <td>
          If
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          if (distance.&lt;(KnnCalculator.this.results.apply(KnnCalculator.this.fi).meters))
  {
    KnnCalculator.this.results.update(KnnCalculator.this.fi, KNearestNeighborSearchProcess.this.FeatureWithDistance.apply(feature, distance));
    KnnCalculator.this.fi_=(KnnCalculator.this.farthest)
  }
else
  ()
        </td>
      </tr><tr>
        <td>
          373
        </td>
        <td>
          49013
        </td>
        <td>
          15047
          -
          15049
        </td>
        <td>
          Select
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.KnnCalculator.fi
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          KnnCalculator.this.fi
        </td>
      </tr><tr>
        <td>
          373
        </td>
        <td>
          49014
        </td>
        <td>
          15053
          -
          15091
        </td>
        <td>
          Apply
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.FeatureWithDistance.apply
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          KNearestNeighborSearchProcess.this.FeatureWithDistance.apply(feature, distance)
        </td>
      </tr><tr>
        <td>
          373
        </td>
        <td>
          49015
        </td>
        <td>
          15039
          -
          15091
        </td>
        <td>
          Apply
        </td>
        <td>
          scala.Array.update
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          KnnCalculator.this.results.update(KnnCalculator.this.fi, KNearestNeighborSearchProcess.this.FeatureWithDistance.apply(feature, distance))
        </td>
      </tr><tr>
        <td>
          374
        </td>
        <td>
          49016
        </td>
        <td>
          15105
          -
          15113
        </td>
        <td>
          Select
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.KnnCalculator.farthest
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          KnnCalculator.this.farthest
        </td>
      </tr><tr>
        <td>
          374
        </td>
        <td>
          49017
        </td>
        <td>
          15100
          -
          15113
        </td>
        <td>
          Apply
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.KnnCalculator.fi_=
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          KnnCalculator.this.fi_=(KnnCalculator.this.farthest)
        </td>
      </tr><tr>
        <td>
          384
        </td>
        <td>
          49022
        </td>
        <td>
          15328
          -
          15335
        </td>
        <td>
          Select
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.KnnCalculator.results
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          KnnCalculator.this.results
        </td>
      </tr><tr>
        <td>
          384
        </td>
        <td>
          49023
        </td>
        <td>
          15328
          -
          15347
        </td>
        <td>
          Select
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.FeatureWithDistance.meters
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          scala.Predef.refArrayOps[org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.FeatureWithDistance](KnnCalculator.this.results).head.meters
        </td>
      </tr><tr>
        <td>
          385
        </td>
        <td>
          49024
        </td>
        <td>
          15367
          -
          15368
        </td>
        <td>
          Literal
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          0
        </td>
      </tr><tr>
        <td>
          386
        </td>
        <td>
          49025
        </td>
        <td>
          15383
          -
          15384
        </td>
        <td>
          Literal
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          1
        </td>
      </tr><tr>
        <td>
          387
        </td>
        <td>
          49026
        </td>
        <td>
          15402
          -
          15416
        </td>
        <td>
          Select
        </td>
        <td>
          scala.Array.length
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          KnnCalculator.this.results.length
        </td>
      </tr><tr>
        <td>
          387
        </td>
        <td>
          49027
        </td>
        <td>
          15398
          -
          15416
        </td>
        <td>
          Apply
        </td>
        <td>
          scala.Int.&lt;
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          i.&lt;(KnnCalculator.this.results.length)
        </td>
      </tr><tr>
        <td>
          387
        </td>
        <td>
          49034
        </td>
        <td>
          15418
          -
          15418
        </td>
        <td>
          Apply
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.KnnCalculator.while$6
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          while$6()
        </td>
      </tr><tr>
        <td>
          387
        </td>
        <td>
          49035
        </td>
        <td>
          15418
          -
          15546
        </td>
        <td>
          Block
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          {
  {
    if (KnnCalculator.this.results.apply(i).meters.&gt;(max))
      {
        max = KnnCalculator.this.results.apply(i).meters;
        result = i
      }
    else
      ();
    i = i.+(1)
  };
  while$6()
}
        </td>
      </tr><tr>
        <td>
          387
        </td>
        <td>
          49036
        </td>
        <td>
          15391
          -
          15391
        </td>
        <td>
          Literal
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          ()
        </td>
      </tr><tr>
        <td>
          387
        </td>
        <td>
          49037
        </td>
        <td>
          15391
          -
          15391
        </td>
        <td>
          Block
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          ()
        </td>
      </tr><tr>
        <td>
          388
        </td>
        <td>
          49028
        </td>
        <td>
          15432
          -
          15455
        </td>
        <td>
          Apply
        </td>
        <td>
          scala.Double.&gt;
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          KnnCalculator.this.results.apply(i).meters.&gt;(max)
        </td>
      </tr><tr>
        <td>
          388
        </td>
        <td>
          49030
        </td>
        <td>
          15457
          -
          15523
        </td>
        <td>
          Block
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          {
  max = KnnCalculator.this.results.apply(i).meters;
  result = i
}
        </td>
      </tr><tr>
        <td>
          388
        </td>
        <td>
          49031
        </td>
        <td>
          15428
          -
          15428
        </td>
        <td>
          Literal
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          ()
        </td>
      </tr><tr>
        <td>
          388
        </td>
        <td>
          49032
        </td>
        <td>
          15428
          -
          15428
        </td>
        <td>
          Block
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          ()
        </td>
      </tr><tr>
        <td>
          389
        </td>
        <td>
          49029
        </td>
        <td>
          15475
          -
          15492
        </td>
        <td>
          Select
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.FeatureWithDistance.meters
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          KnnCalculator.this.results.apply(i).meters
        </td>
      </tr><tr>
        <td>
          392
        </td>
        <td>
          49033
        </td>
        <td>
          15532
          -
          15538
        </td>
        <td>
          Apply
        </td>
        <td>
          scala.Int.+
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          i.+(1)
        </td>
      </tr><tr>
        <td>
          405
        </td>
        <td>
          49038
        </td>
        <td>
          15912
          -
          15918
        </td>
        <td>
          Select
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.FeatureWithDistance.meters
        </td>
        <td>
          
        </td>
        <td style="background: #F0ADAD">
          FeatureWithDistance.this.meters
        </td>
      </tr><tr>
        <td>
          405
        </td>
        <td>
          49039
        </td>
        <td>
          15920
          -
          15928
        </td>
        <td>
          Select
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.FeatureWithDistance.meters
        </td>
        <td>
          
        </td>
        <td style="background: #F0ADAD">
          o.meters
        </td>
      </tr><tr>
        <td>
          405
        </td>
        <td>
          49040
        </td>
        <td>
          15887
          -
          15929
        </td>
        <td>
          Apply
        </td>
        <td>
          java.lang.Double.compare
        </td>
        <td>
          
        </td>
        <td style="background: #F0ADAD">
          java.lang.Double.compare(FeatureWithDistance.this.meters, o.meters)
        </td>
      </tr><tr>
        <td>
          423
        </td>
        <td>
          49041
        </td>
        <td>
          16400
          -
          16404
        </td>
        <td>
          Select
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.QueryEnvelope.hole
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          QueryEnvelope.this.hole
        </td>
      </tr><tr>
        <td>
          424
        </td>
        <td>
          49042
        </td>
        <td>
          16434
          -
          16450
        </td>
        <td>
          Select
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope.toWorld
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          QueryEnvelope.this.envelope.toWorld
        </td>
      </tr><tr>
        <td>
          424
        </td>
        <td>
          49043
        </td>
        <td>
          16434
          -
          16450
        </td>
        <td>
          Block
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope.toWorld
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          QueryEnvelope.this.envelope.toWorld
        </td>
      </tr><tr>
        <td>
          425
        </td>
        <td>
          49053
        </td>
        <td>
          16472
          -
          16611
        </td>
        <td>
          Block
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          {
  val holes: Seq[org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope] = h.toWorld;
  QueryEnvelope.this.envelope.toWorld.flatMap[org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope, Seq[org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope]](((e: org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope) =&gt; holes.foldLeft[Seq[org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope]](scala.collection.Seq.apply[org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope](e))(((x0$1: Seq[org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope], x1$1: org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope) =&gt; scala.Tuple2.apply[Seq[org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope], org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope](x0$1, x1$1) match {
    case (_1: Seq[org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope], _2: org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope)(Seq[org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope], org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope)((r @ _), (h @ _)) =&gt; r.flatMap[org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope, Seq[org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope]](((x$7: org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope) =&gt; x$7.minus(h)))(collection.this.Seq.canBuildFrom[org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope])
  }))))(collection.this.Seq.canBuildFrom[org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope])
}
        </td>
      </tr><tr>
        <td>
          426
        </td>
        <td>
          49044
        </td>
        <td>
          16497
          -
          16506
        </td>
        <td>
          Select
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope.toWorld
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          h.toWorld
        </td>
      </tr><tr>
        <td>
          427
        </td>
        <td>
          49045
        </td>
        <td>
          16562
          -
          16568
        </td>
        <td>
          Apply
        </td>
        <td>
          scala.collection.generic.GenericCompanion.apply
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          scala.collection.Seq.apply[org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope](e)
        </td>
      </tr><tr>
        <td>
          427
        </td>
        <td>
          49046
        </td>
        <td>
          16597
          -
          16607
        </td>
        <td>
          Apply
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope.minus
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          x$7.minus(h)
        </td>
      </tr><tr>
        <td>
          427
        </td>
        <td>
          49047
        </td>
        <td>
          16596
          -
          16596
        </td>
        <td>
          TypeApply
        </td>
        <td>
          scala.collection.Seq.canBuildFrom
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          collection.this.Seq.canBuildFrom[org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope]
        </td>
      </tr><tr>
        <td>
          427
        </td>
        <td>
          49048
        </td>
        <td>
          16587
          -
          16608
        </td>
        <td>
          ApplyToImplicitArgs
        </td>
        <td>
          scala.collection.TraversableLike.flatMap
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          r.flatMap[org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope, Seq[org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope]](((x$7: org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope) =&gt; x$7.minus(h)))(collection.this.Seq.canBuildFrom[org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope])
        </td>
      </tr><tr>
        <td>
          427
        </td>
        <td>
          49049
        </td>
        <td>
          16587
          -
          16608
        </td>
        <td>
          Block
        </td>
        <td>
          scala.collection.TraversableLike.flatMap
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          r.flatMap[org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope, Seq[org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope]](((x$7: org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope) =&gt; x$7.minus(h)))(collection.this.Seq.canBuildFrom[org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope])
        </td>
      </tr><tr>
        <td>
          427
        </td>
        <td>
          49050
        </td>
        <td>
          16547
          -
          16610
        </td>
        <td>
          Apply
        </td>
        <td>
          scala.collection.TraversableOnce.foldLeft
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          holes.foldLeft[Seq[org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope]](scala.collection.Seq.apply[org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope](e))(((x0$1: Seq[org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope], x1$1: org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope) =&gt; scala.Tuple2.apply[Seq[org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope], org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope](x0$1, x1$1) match {
  case (_1: Seq[org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope], _2: org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope)(Seq[org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope], org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope)((r @ _), (h @ _)) =&gt; r.flatMap[org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope, Seq[org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope]](((x$7: org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope) =&gt; x$7.minus(h)))(collection.this.Seq.canBuildFrom[org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope])
}))
        </td>
      </tr><tr>
        <td>
          427
        </td>
        <td>
          49051
        </td>
        <td>
          16541
          -
          16541
        </td>
        <td>
          TypeApply
        </td>
        <td>
          scala.collection.Seq.canBuildFrom
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          collection.this.Seq.canBuildFrom[org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope]
        </td>
      </tr><tr>
        <td>
          427
        </td>
        <td>
          49052
        </td>
        <td>
          16517
          -
          16611
        </td>
        <td>
          ApplyToImplicitArgs
        </td>
        <td>
          scala.collection.TraversableLike.flatMap
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          QueryEnvelope.this.envelope.toWorld.flatMap[org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope, Seq[org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope]](((e: org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope) =&gt; holes.foldLeft[Seq[org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope]](scala.collection.Seq.apply[org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope](e))(((x0$1: Seq[org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope], x1$1: org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope) =&gt; scala.Tuple2.apply[Seq[org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope], org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope](x0$1, x1$1) match {
  case (_1: Seq[org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope], _2: org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope)(Seq[org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope], org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope)((r @ _), (h @ _)) =&gt; r.flatMap[org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope, Seq[org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope]](((x$7: org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope) =&gt; x$7.minus(h)))(collection.this.Seq.canBuildFrom[org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope])
}))))(collection.this.Seq.canBuildFrom[org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope])
        </td>
      </tr><tr>
        <td>
          436
        </td>
        <td>
          49054
        </td>
        <td>
          16740
          -
          16744
        </td>
        <td>
          Select
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.QueryEnvelope.hole
        </td>
        <td>
          
        </td>
        <td style="background: #F0ADAD">
          QueryEnvelope.this.hole
        </td>
      </tr><tr>
        <td>
          437
        </td>
        <td>
          49055
        </td>
        <td>
          16776
          -
          16790
        </td>
        <td>
          Select
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope.debug
        </td>
        <td>
          
        </td>
        <td style="background: #F0ADAD">
          QueryEnvelope.this.envelope.debug
        </td>
      </tr><tr>
        <td>
          437
        </td>
        <td>
          49056
        </td>
        <td>
          16772
          -
          16791
        </td>
        <td>
          Apply
        </td>
        <td>
          scala.collection.generic.GenericCompanion.apply
        </td>
        <td>
          
        </td>
        <td style="background: #F0ADAD">
          scala.collection.Seq.apply[String](QueryEnvelope.this.envelope.debug)
        </td>
      </tr><tr>
        <td>
          437
        </td>
        <td>
          49057
        </td>
        <td>
          16772
          -
          16791
        </td>
        <td>
          Block
        </td>
        <td>
          scala.collection.generic.GenericCompanion.apply
        </td>
        <td>
          
        </td>
        <td style="background: #F0ADAD">
          scala.collection.Seq.apply[String](QueryEnvelope.this.envelope.debug)
        </td>
      </tr><tr>
        <td>
          438
        </td>
        <td>
          49066
        </td>
        <td>
          16811
          -
          16922
        </td>
        <td>
          Block
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td>
          
        </td>
        <td style="background: #F0ADAD">
          {
  val diff: Seq[org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope] = QueryEnvelope.this.envelope.minus(h);
  if (diff.isEmpty)
    scala.collection.Seq.apply[String](&quot;[empty]&quot;)
  else
    diff.map[String, Seq[String]](((x$8: org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope) =&gt; x$8.debug))(collection.this.Seq.canBuildFrom[String])
}
        </td>
      </tr><tr>
        <td>
          439
        </td>
        <td>
          49058
        </td>
        <td>
          16833
          -
          16850
        </td>
        <td>
          Apply
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope.minus
        </td>
        <td>
          
        </td>
        <td style="background: #F0ADAD">
          QueryEnvelope.this.envelope.minus(h)
        </td>
      </tr><tr>
        <td>
          440
        </td>
        <td>
          49059
        </td>
        <td>
          16863
          -
          16875
        </td>
        <td>
          Select
        </td>
        <td>
          scala.collection.SeqLike.isEmpty
        </td>
        <td>
          
        </td>
        <td style="background: #F0ADAD">
          diff.isEmpty
        </td>
      </tr><tr>
        <td>
          440
        </td>
        <td>
          49060
        </td>
        <td>
          16879
          -
          16893
        </td>
        <td>
          Apply
        </td>
        <td>
          scala.collection.generic.GenericCompanion.apply
        </td>
        <td>
          
        </td>
        <td style="background: #F0ADAD">
          scala.collection.Seq.apply[String](&quot;[empty]&quot;)
        </td>
      </tr><tr>
        <td>
          440
        </td>
        <td>
          49061
        </td>
        <td>
          16879
          -
          16893
        </td>
        <td>
          Block
        </td>
        <td>
          scala.collection.generic.GenericCompanion.apply
        </td>
        <td>
          
        </td>
        <td style="background: #F0ADAD">
          scala.collection.Seq.apply[String](&quot;[empty]&quot;)
        </td>
      </tr><tr>
        <td>
          440
        </td>
        <td>
          49062
        </td>
        <td>
          16912
          -
          16919
        </td>
        <td>
          Select
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope.debug
        </td>
        <td>
          
        </td>
        <td style="background: #F0ADAD">
          x$8.debug
        </td>
      </tr><tr>
        <td>
          440
        </td>
        <td>
          49063
        </td>
        <td>
          16911
          -
          16911
        </td>
        <td>
          TypeApply
        </td>
        <td>
          scala.collection.Seq.canBuildFrom
        </td>
        <td>
          
        </td>
        <td style="background: #F0ADAD">
          collection.this.Seq.canBuildFrom[String]
        </td>
      </tr><tr>
        <td>
          440
        </td>
        <td>
          49064
        </td>
        <td>
          16903
          -
          16920
        </td>
        <td>
          ApplyToImplicitArgs
        </td>
        <td>
          scala.collection.TraversableLike.map
        </td>
        <td>
          
        </td>
        <td style="background: #F0ADAD">
          diff.map[String, Seq[String]](((x$8: org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope) =&gt; x$8.debug))(collection.this.Seq.canBuildFrom[String])
        </td>
      </tr><tr>
        <td>
          440
        </td>
        <td>
          49065
        </td>
        <td>
          16903
          -
          16920
        </td>
        <td>
          Block
        </td>
        <td>
          scala.collection.TraversableLike.map
        </td>
        <td>
          
        </td>
        <td style="background: #F0ADAD">
          diff.map[String, Seq[String]](((x$8: org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope) =&gt; x$8.debug))(collection.this.Seq.canBuildFrom[String])
        </td>
      </tr><tr>
        <td>
          454
        </td>
        <td>
          49067
        </td>
        <td>
          17270
          -
          17274
        </td>
        <td>
          Select
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope.xmax
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          Envelope.this.xmax
        </td>
      </tr><tr>
        <td>
          454
        </td>
        <td>
          49068
        </td>
        <td>
          17286
          -
          17290
        </td>
        <td>
          Select
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope.ymax
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          Envelope.this.ymax
        </td>
      </tr><tr>
        <td>
          454
        </td>
        <td>
          49069
        </td>
        <td>
          17278
          -
          17290
        </td>
        <td>
          Apply
        </td>
        <td>
          scala.Double.&lt;=
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          Envelope.this.ymin.&lt;=(Envelope.this.ymax)
        </td>
      </tr><tr>
        <td>
          454
        </td>
        <td>
          49070
        </td>
        <td>
          17262
          -
          17290
        </td>
        <td>
          Apply
        </td>
        <td>
          scala.Boolean.&amp;&amp;
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          Envelope.this.xmin.&lt;=(Envelope.this.xmax).&amp;&amp;(Envelope.this.ymin.&lt;=(Envelope.this.ymax))
        </td>
      </tr><tr>
        <td>
          454
        </td>
        <td>
          49071
        </td>
        <td>
          17294
          -
          17318
        </td>
        <td>
          Literal
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td>
          
        </td>
        <td style="background: #F0ADAD">
          &quot;Envelope is inverted: [&quot;
        </td>
      </tr><tr>
        <td>
          454
        </td>
        <td>
          49072
        </td>
        <td>
          17322
          -
          17325
        </td>
        <td>
          Literal
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td>
          
        </td>
        <td style="background: #F0ADAD">
          &quot;, &quot;
        </td>
      </tr><tr>
        <td>
          454
        </td>
        <td>
          49073
        </td>
        <td>
          17329
          -
          17332
        </td>
        <td>
          Literal
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td>
          
        </td>
        <td style="background: #F0ADAD">
          &quot;, &quot;
        </td>
      </tr><tr>
        <td>
          454
        </td>
        <td>
          49074
        </td>
        <td>
          17336
          -
          17339
        </td>
        <td>
          Literal
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td>
          
        </td>
        <td style="background: #F0ADAD">
          &quot;, &quot;
        </td>
      </tr><tr>
        <td>
          454
        </td>
        <td>
          49075
        </td>
        <td>
          17343
          -
          17345
        </td>
        <td>
          Literal
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td>
          
        </td>
        <td style="background: #F0ADAD">
          &quot;]&quot;
        </td>
      </tr><tr>
        <td>
          454
        </td>
        <td>
          49076
        </td>
        <td>
          17318
          -
          17322
        </td>
        <td>
          Select
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope.xmin
        </td>
        <td>
          
        </td>
        <td style="background: #F0ADAD">
          Envelope.this.xmin
        </td>
      </tr><tr>
        <td>
          454
        </td>
        <td>
          49077
        </td>
        <td>
          17325
          -
          17329
        </td>
        <td>
          Select
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope.xmax
        </td>
        <td>
          
        </td>
        <td style="background: #F0ADAD">
          Envelope.this.xmax
        </td>
      </tr><tr>
        <td>
          454
        </td>
        <td>
          49078
        </td>
        <td>
          17332
          -
          17336
        </td>
        <td>
          Select
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope.ymin
        </td>
        <td>
          
        </td>
        <td style="background: #F0ADAD">
          Envelope.this.ymin
        </td>
      </tr><tr>
        <td>
          454
        </td>
        <td>
          49079
        </td>
        <td>
          17339
          -
          17343
        </td>
        <td>
          Select
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope.ymax
        </td>
        <td>
          
        </td>
        <td style="background: #F0ADAD">
          Envelope.this.ymax
        </td>
      </tr><tr>
        <td>
          454
        </td>
        <td>
          49080
        </td>
        <td>
          17292
          -
          17345
        </td>
        <td>
          Apply
        </td>
        <td>
          scala.StringContext.s
        </td>
        <td>
          
        </td>
        <td style="background: #F0ADAD">
          scala.StringContext.apply(&quot;Envelope is inverted: [&quot;, &quot;, &quot;, &quot;, &quot;, &quot;, &quot;, &quot;]&quot;).s(Envelope.this.xmin, Envelope.this.xmax, Envelope.this.ymin, Envelope.this.ymax)
        </td>
      </tr><tr>
        <td>
          454
        </td>
        <td>
          49081
        </td>
        <td>
          17254
          -
          17346
        </td>
        <td>
          Apply
        </td>
        <td>
          scala.Predef.require
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          scala.Predef.require(Envelope.this.xmin.&lt;=(Envelope.this.xmax).&amp;&amp;(Envelope.this.ymin.&lt;=(Envelope.this.ymax)), scala.StringContext.apply(&quot;Envelope is inverted: [&quot;, &quot;, &quot;, &quot;, &quot;, &quot;, &quot;, &quot;]&quot;).s(Envelope.this.xmin, Envelope.this.xmax, Envelope.this.ymin, Envelope.this.ymax))
        </td>
      </tr><tr>
        <td>
          466
        </td>
        <td>
          49082
        </td>
        <td>
          17634
          -
          17638
        </td>
        <td>
          Select
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope.xmin
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          Envelope.this.xmin
        </td>
      </tr><tr>
        <td>
          466
        </td>
        <td>
          49083
        </td>
        <td>
          17640
          -
          17650
        </td>
        <td>
          Select
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope.xmin
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          other.xmin
        </td>
      </tr><tr>
        <td>
          466
        </td>
        <td>
          49084
        </td>
        <td>
          17625
          -
          17651
        </td>
        <td>
          Apply
        </td>
        <td>
          scala.math.max
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          scala.math.`package`.max(Envelope.this.xmin, other.xmin)
        </td>
      </tr><tr>
        <td>
          467
        </td>
        <td>
          49085
        </td>
        <td>
          17679
          -
          17683
        </td>
        <td>
          Select
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope.xmax
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          Envelope.this.xmax
        </td>
      </tr><tr>
        <td>
          467
        </td>
        <td>
          49086
        </td>
        <td>
          17685
          -
          17695
        </td>
        <td>
          Select
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope.xmax
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          other.xmax
        </td>
      </tr><tr>
        <td>
          467
        </td>
        <td>
          49087
        </td>
        <td>
          17670
          -
          17696
        </td>
        <td>
          Apply
        </td>
        <td>
          scala.math.min
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          scala.math.`package`.min(Envelope.this.xmax, other.xmax)
        </td>
      </tr><tr>
        <td>
          468
        </td>
        <td>
          49088
        </td>
        <td>
          17707
          -
          17720
        </td>
        <td>
          Apply
        </td>
        <td>
          scala.Double.&gt;
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          ixmin.&gt;(ixmax)
        </td>
      </tr><tr>
        <td>
          468
        </td>
        <td>
          49089
        </td>
        <td>
          17724
          -
          17728
        </td>
        <td>
          Select
        </td>
        <td>
          scala.None
        </td>
        <td>
          
        </td>
        <td style="background: #F0ADAD">
          scala.None
        </td>
      </tr><tr>
        <td>
          468
        </td>
        <td>
          49090
        </td>
        <td>
          17724
          -
          17728
        </td>
        <td>
          Block
        </td>
        <td>
          scala.None
        </td>
        <td>
          
        </td>
        <td style="background: #F0ADAD">
          scala.None
        </td>
      </tr><tr>
        <td>
          468
        </td>
        <td>
          49103
        </td>
        <td>
          17736
          -
          17945
        </td>
        <td>
          Block
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          {
  val iymin: Double = scala.math.`package`.max(Envelope.this.ymin, other.ymin);
  val iymax: Double = scala.math.`package`.min(Envelope.this.ymax, other.ymax);
  if (iymin.&gt;(iymax))
    scala.None
  else
    scala.Some.apply[org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope](KNearestNeighborSearchProcess.this.Envelope.apply(ixmin, ixmax, iymin, iymax))
}
        </td>
      </tr><tr>
        <td>
          469
        </td>
        <td>
          49091
        </td>
        <td>
          17767
          -
          17771
        </td>
        <td>
          Select
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope.ymin
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          Envelope.this.ymin
        </td>
      </tr><tr>
        <td>
          469
        </td>
        <td>
          49092
        </td>
        <td>
          17773
          -
          17783
        </td>
        <td>
          Select
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope.ymin
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          other.ymin
        </td>
      </tr><tr>
        <td>
          469
        </td>
        <td>
          49093
        </td>
        <td>
          17758
          -
          17784
        </td>
        <td>
          Apply
        </td>
        <td>
          scala.math.max
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          scala.math.`package`.max(Envelope.this.ymin, other.ymin)
        </td>
      </tr><tr>
        <td>
          470
        </td>
        <td>
          49094
        </td>
        <td>
          17814
          -
          17818
        </td>
        <td>
          Select
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope.ymax
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          Envelope.this.ymax
        </td>
      </tr><tr>
        <td>
          470
        </td>
        <td>
          49095
        </td>
        <td>
          17820
          -
          17830
        </td>
        <td>
          Select
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope.ymax
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          other.ymax
        </td>
      </tr><tr>
        <td>
          470
        </td>
        <td>
          49096
        </td>
        <td>
          17805
          -
          17831
        </td>
        <td>
          Apply
        </td>
        <td>
          scala.math.min
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          scala.math.`package`.min(Envelope.this.ymax, other.ymax)
        </td>
      </tr><tr>
        <td>
          471
        </td>
        <td>
          49097
        </td>
        <td>
          17844
          -
          17857
        </td>
        <td>
          Apply
        </td>
        <td>
          scala.Double.&gt;
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          iymin.&gt;(iymax)
        </td>
      </tr><tr>
        <td>
          471
        </td>
        <td>
          49098
        </td>
        <td>
          17861
          -
          17865
        </td>
        <td>
          Select
        </td>
        <td>
          scala.None
        </td>
        <td>
          
        </td>
        <td style="background: #F0ADAD">
          scala.None
        </td>
      </tr><tr>
        <td>
          471
        </td>
        <td>
          49099
        </td>
        <td>
          17861
          -
          17865
        </td>
        <td>
          Block
        </td>
        <td>
          scala.None
        </td>
        <td>
          
        </td>
        <td style="background: #F0ADAD">
          scala.None
        </td>
      </tr><tr>
        <td>
          472
        </td>
        <td>
          49100
        </td>
        <td>
          17890
          -
          17926
        </td>
        <td>
          Apply
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope.apply
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          KNearestNeighborSearchProcess.this.Envelope.apply(ixmin, ixmax, iymin, iymax)
        </td>
      </tr><tr>
        <td>
          472
        </td>
        <td>
          49101
        </td>
        <td>
          17885
          -
          17927
        </td>
        <td>
          Apply
        </td>
        <td>
          scala.Some.apply
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          scala.Some.apply[org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope](KNearestNeighborSearchProcess.this.Envelope.apply(ixmin, ixmax, iymin, iymax))
        </td>
      </tr><tr>
        <td>
          472
        </td>
        <td>
          49102
        </td>
        <td>
          17885
          -
          17927
        </td>
        <td>
          Block
        </td>
        <td>
          scala.Some.apply
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          scala.Some.apply[org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope](KNearestNeighborSearchProcess.this.Envelope.apply(ixmin, ixmax, iymin, iymax))
        </td>
      </tr><tr>
        <td>
          484
        </td>
        <td>
          49104
        </td>
        <td>
          18137
          -
          18141
        </td>
        <td>
          Select
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope.xmax
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          Envelope.this.xmax
        </td>
      </tr><tr>
        <td>
          484
        </td>
        <td>
          49105
        </td>
        <td>
          18159
          -
          18163
        </td>
        <td>
          Select
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope.xmin
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          Envelope.this.xmin
        </td>
      </tr><tr>
        <td>
          484
        </td>
        <td>
          49106
        </td>
        <td>
          18145
          -
          18163
        </td>
        <td>
          Apply
        </td>
        <td>
          scala.Double.&gt;=
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          other.xmax.&gt;=(Envelope.this.xmin)
        </td>
      </tr><tr>
        <td>
          484
        </td>
        <td>
          49107
        </td>
        <td>
          18181
          -
          18185
        </td>
        <td>
          Select
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope.ymax
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          Envelope.this.ymax
        </td>
      </tr><tr>
        <td>
          484
        </td>
        <td>
          49108
        </td>
        <td>
          18167
          -
          18185
        </td>
        <td>
          Apply
        </td>
        <td>
          scala.Double.&lt;=
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          other.ymin.&lt;=(Envelope.this.ymax)
        </td>
      </tr><tr>
        <td>
          484
        </td>
        <td>
          49109
        </td>
        <td>
          18203
          -
          18207
        </td>
        <td>
          Select
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope.ymin
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          Envelope.this.ymin
        </td>
      </tr><tr>
        <td>
          484
        </td>
        <td>
          49110
        </td>
        <td>
          18189
          -
          18207
        </td>
        <td>
          Apply
        </td>
        <td>
          scala.Double.&gt;=
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          other.ymax.&gt;=(Envelope.this.ymin)
        </td>
      </tr><tr>
        <td>
          484
        </td>
        <td>
          49111
        </td>
        <td>
          18123
          -
          18207
        </td>
        <td>
          Apply
        </td>
        <td>
          scala.Boolean.&amp;&amp;
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          other.xmin.&lt;=(Envelope.this.xmax).&amp;&amp;(other.xmax.&gt;=(Envelope.this.xmin)).&amp;&amp;(other.ymin.&lt;=(Envelope.this.ymax)).&amp;&amp;(other.ymax.&gt;=(Envelope.this.ymin))
        </td>
      </tr><tr>
        <td>
          496
        </td>
        <td>
          49112
        </td>
        <td>
          18620
          -
          18638
        </td>
        <td>
          Select
        </td>
        <td>
          scala.Boolean.unary_!
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          Envelope.this.intersects(other).unary_!
        </td>
      </tr><tr>
        <td>
          496
        </td>
        <td>
          49113
        </td>
        <td>
          18642
          -
          18651
        </td>
        <td>
          Apply
        </td>
        <td>
          scala.collection.generic.GenericCompanion.apply
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          scala.collection.Seq.apply[org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope](this)
        </td>
      </tr><tr>
        <td>
          496
        </td>
        <td>
          49114
        </td>
        <td>
          18642
          -
          18651
        </td>
        <td>
          Block
        </td>
        <td>
          scala.collection.generic.GenericCompanion.apply
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          scala.collection.Seq.apply[org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope](this)
        </td>
      </tr><tr>
        <td>
          496
        </td>
        <td>
          49151
        </td>
        <td>
          18659
          -
          19481
        </td>
        <td>
          Block
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          {
  val builder: scala.collection.mutable.Builder[org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope,Seq[org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope]] = scala.collection.Seq.newBuilder[org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope];
  val sidemax: Double = if (other.ymax.&gt;=(Envelope.this.ymax))
    Envelope.this.ymax
  else
    {
      builder.+=({
        &lt;artifact&gt; val x$1: Double = other.ymax;
        &lt;artifact&gt; val x$2: Double = Envelope.this.copy$default$1;
        &lt;artifact&gt; val x$3: Double = Envelope.this.copy$default$2;
        &lt;artifact&gt; val x$4: Double = Envelope.this.copy$default$4;
        Envelope.this.copy(x$2, x$3, x$1, x$4)
      });
      other.ymax
    };
  val sidemin: Double = if (other.ymin.&lt;=(Envelope.this.ymin))
    Envelope.this.ymin
  else
    {
      builder.+=({
        &lt;artifact&gt; val x$5: Double = other.ymin;
        &lt;artifact&gt; val x$6: Double = Envelope.this.copy$default$1;
        &lt;artifact&gt; val x$7: Double = Envelope.this.copy$default$2;
        &lt;artifact&gt; val x$8: Double = Envelope.this.copy$default$3;
        Envelope.this.copy(x$6, x$7, x$8, x$5)
      });
      other.ymin
    };
  if (other.xmin.&gt;(Envelope.this.xmin))
    builder.+=({
      &lt;artifact&gt; val x$9: Double = other.xmin;
      &lt;artifact&gt; val x$10: Double = sidemin;
      &lt;artifact&gt; val x$11: Double = sidemax;
      &lt;artifact&gt; val x$12: Double = Envelope.this.copy$default$1;
      Envelope.this.copy(x$12, x$9, x$10, x$11)
    })
  else
    ();
  if (other.xmax.&lt;(Envelope.this.xmax))
    builder.+=({
      &lt;artifact&gt; val x$13: Double = other.xmax;
      &lt;artifact&gt; val x$14: Double = sidemin;
      &lt;artifact&gt; val x$15: Double = sidemax;
      &lt;artifact&gt; val x$16: Double = Envelope.this.copy$default$2;
      Envelope.this.copy(x$13, x$16, x$14, x$15)
    })
  else
    ();
  builder.result()
}
        </td>
      </tr><tr>
        <td>
          497
        </td>
        <td>
          49115
        </td>
        <td>
          18683
          -
          18707
        </td>
        <td>
          TypeApply
        </td>
        <td>
          scala.collection.Seq.newBuilder
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          scala.collection.Seq.newBuilder[org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope]
        </td>
      </tr><tr>
        <td>
          499
        </td>
        <td>
          49116
        </td>
        <td>
          18835
          -
          18839
        </td>
        <td>
          Select
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope.ymax
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          Envelope.this.ymax
        </td>
      </tr><tr>
        <td>
          499
        </td>
        <td>
          49117
        </td>
        <td>
          18821
          -
          18839
        </td>
        <td>
          Apply
        </td>
        <td>
          scala.Double.&gt;=
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          other.ymax.&gt;=(Envelope.this.ymax)
        </td>
      </tr><tr>
        <td>
          499
        </td>
        <td>
          49118
        </td>
        <td>
          18843
          -
          18847
        </td>
        <td>
          Select
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope.ymax
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          Envelope.this.ymax
        </td>
      </tr><tr>
        <td>
          499
        </td>
        <td>
          49119
        </td>
        <td>
          18843
          -
          18847
        </td>
        <td>
          Block
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope.ymax
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          Envelope.this.ymax
        </td>
      </tr><tr>
        <td>
          499
        </td>
        <td>
          49124
        </td>
        <td>
          18855
          -
          18932
        </td>
        <td>
          Block
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          {
  builder.+=({
    &lt;artifact&gt; val x$1: Double = other.ymax;
    &lt;artifact&gt; val x$2: Double = Envelope.this.copy$default$1;
    &lt;artifact&gt; val x$3: Double = Envelope.this.copy$default$2;
    &lt;artifact&gt; val x$4: Double = Envelope.this.copy$default$4;
    Envelope.this.copy(x$2, x$3, x$1, x$4)
  });
  other.ymax
}
        </td>
      </tr><tr>
        <td>
          500
        </td>
        <td>
          49120
        </td>
        <td>
          18890
          -
          18900
        </td>
        <td>
          Select
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope.ymax
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          other.ymax
        </td>
      </tr><tr>
        <td>
          500
        </td>
        <td>
          49121
        </td>
        <td>
          18878
          -
          18901
        </td>
        <td>
          Apply
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope.copy
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          Envelope.this.copy(x$2, x$3, x$1, x$4)
        </td>
      </tr><tr>
        <td>
          500
        </td>
        <td>
          49122
        </td>
        <td>
          18867
          -
          18901
        </td>
        <td>
          Apply
        </td>
        <td>
          scala.collection.mutable.Builder.+=
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          builder.+=({
  &lt;artifact&gt; val x$1: Double = other.ymax;
  &lt;artifact&gt; val x$2: Double = Envelope.this.copy$default$1;
  &lt;artifact&gt; val x$3: Double = Envelope.this.copy$default$2;
  &lt;artifact&gt; val x$4: Double = Envelope.this.copy$default$4;
  Envelope.this.copy(x$2, x$3, x$1, x$4)
})
        </td>
      </tr><tr>
        <td>
          501
        </td>
        <td>
          49123
        </td>
        <td>
          18912
          -
          18922
        </td>
        <td>
          Select
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope.ymax
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          other.ymax
        </td>
      </tr><tr>
        <td>
          504
        </td>
        <td>
          49125
        </td>
        <td>
          19063
          -
          19067
        </td>
        <td>
          Select
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope.ymin
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          Envelope.this.ymin
        </td>
      </tr><tr>
        <td>
          504
        </td>
        <td>
          49126
        </td>
        <td>
          19049
          -
          19067
        </td>
        <td>
          Apply
        </td>
        <td>
          scala.Double.&lt;=
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          other.ymin.&lt;=(Envelope.this.ymin)
        </td>
      </tr><tr>
        <td>
          504
        </td>
        <td>
          49127
        </td>
        <td>
          19071
          -
          19075
        </td>
        <td>
          Select
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope.ymin
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          Envelope.this.ymin
        </td>
      </tr><tr>
        <td>
          504
        </td>
        <td>
          49128
        </td>
        <td>
          19071
          -
          19075
        </td>
        <td>
          Block
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope.ymin
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          Envelope.this.ymin
        </td>
      </tr><tr>
        <td>
          504
        </td>
        <td>
          49133
        </td>
        <td>
          19083
          -
          19160
        </td>
        <td>
          Block
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          {
  builder.+=({
    &lt;artifact&gt; val x$5: Double = other.ymin;
    &lt;artifact&gt; val x$6: Double = Envelope.this.copy$default$1;
    &lt;artifact&gt; val x$7: Double = Envelope.this.copy$default$2;
    &lt;artifact&gt; val x$8: Double = Envelope.this.copy$default$3;
    Envelope.this.copy(x$6, x$7, x$8, x$5)
  });
  other.ymin
}
        </td>
      </tr><tr>
        <td>
          505
        </td>
        <td>
          49129
        </td>
        <td>
          19118
          -
          19128
        </td>
        <td>
          Select
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope.ymin
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          other.ymin
        </td>
      </tr><tr>
        <td>
          505
        </td>
        <td>
          49130
        </td>
        <td>
          19106
          -
          19129
        </td>
        <td>
          Apply
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope.copy
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          Envelope.this.copy(x$6, x$7, x$8, x$5)
        </td>
      </tr><tr>
        <td>
          505
        </td>
        <td>
          49131
        </td>
        <td>
          19095
          -
          19129
        </td>
        <td>
          Apply
        </td>
        <td>
          scala.collection.mutable.Builder.+=
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          builder.+=({
  &lt;artifact&gt; val x$5: Double = other.ymin;
  &lt;artifact&gt; val x$6: Double = Envelope.this.copy$default$1;
  &lt;artifact&gt; val x$7: Double = Envelope.this.copy$default$2;
  &lt;artifact&gt; val x$8: Double = Envelope.this.copy$default$3;
  Envelope.this.copy(x$6, x$7, x$8, x$5)
})
        </td>
      </tr><tr>
        <td>
          506
        </td>
        <td>
          49132
        </td>
        <td>
          19140
          -
          19150
        </td>
        <td>
          Select
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope.ymin
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          other.ymin
        </td>
      </tr><tr>
        <td>
          509
        </td>
        <td>
          49134
        </td>
        <td>
          19236
          -
          19240
        </td>
        <td>
          Select
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope.xmin
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          Envelope.this.xmin
        </td>
      </tr><tr>
        <td>
          509
        </td>
        <td>
          49135
        </td>
        <td>
          19223
          -
          19240
        </td>
        <td>
          Apply
        </td>
        <td>
          scala.Double.&gt;
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          other.xmin.&gt;(Envelope.this.xmin)
        </td>
      </tr><tr>
        <td>
          509
        </td>
        <td>
          49140
        </td>
        <td>
          19219
          -
          19219
        </td>
        <td>
          Literal
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          ()
        </td>
      </tr><tr>
        <td>
          509
        </td>
        <td>
          49141
        </td>
        <td>
          19219
          -
          19219
        </td>
        <td>
          Block
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          ()
        </td>
      </tr><tr>
        <td>
          510
        </td>
        <td>
          49136
        </td>
        <td>
          19277
          -
          19287
        </td>
        <td>
          Select
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope.xmin
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          other.xmin
        </td>
      </tr><tr>
        <td>
          510
        </td>
        <td>
          49137
        </td>
        <td>
          19265
          -
          19320
        </td>
        <td>
          Apply
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope.copy
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          Envelope.this.copy(x$12, x$9, x$10, x$11)
        </td>
      </tr><tr>
        <td>
          510
        </td>
        <td>
          49138
        </td>
        <td>
          19254
          -
          19320
        </td>
        <td>
          Apply
        </td>
        <td>
          scala.collection.mutable.Builder.+=
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          builder.+=({
  &lt;artifact&gt; val x$9: Double = other.xmin;
  &lt;artifact&gt; val x$10: Double = sidemin;
  &lt;artifact&gt; val x$11: Double = sidemax;
  &lt;artifact&gt; val x$12: Double = Envelope.this.copy$default$1;
  Envelope.this.copy(x$12, x$9, x$10, x$11)
})
        </td>
      </tr><tr>
        <td>
          510
        </td>
        <td>
          49139
        </td>
        <td>
          19254
          -
          19320
        </td>
        <td>
          Block
        </td>
        <td>
          scala.collection.mutable.Builder.+=
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          builder.+=({
  &lt;artifact&gt; val x$9: Double = other.xmin;
  &lt;artifact&gt; val x$10: Double = sidemin;
  &lt;artifact&gt; val x$11: Double = sidemax;
  &lt;artifact&gt; val x$12: Double = Envelope.this.copy$default$1;
  Envelope.this.copy(x$12, x$9, x$10, x$11)
})
        </td>
      </tr><tr>
        <td>
          512
        </td>
        <td>
          49142
        </td>
        <td>
          19356
          -
          19360
        </td>
        <td>
          Select
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope.xmax
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          Envelope.this.xmax
        </td>
      </tr><tr>
        <td>
          512
        </td>
        <td>
          49143
        </td>
        <td>
          19343
          -
          19360
        </td>
        <td>
          Apply
        </td>
        <td>
          scala.Double.&lt;
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          other.xmax.&lt;(Envelope.this.xmax)
        </td>
      </tr><tr>
        <td>
          512
        </td>
        <td>
          49148
        </td>
        <td>
          19339
          -
          19339
        </td>
        <td>
          Literal
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          ()
        </td>
      </tr><tr>
        <td>
          512
        </td>
        <td>
          49149
        </td>
        <td>
          19339
          -
          19339
        </td>
        <td>
          Block
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          ()
        </td>
      </tr><tr>
        <td>
          513
        </td>
        <td>
          49144
        </td>
        <td>
          19397
          -
          19407
        </td>
        <td>
          Select
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope.xmax
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          other.xmax
        </td>
      </tr><tr>
        <td>
          513
        </td>
        <td>
          49145
        </td>
        <td>
          19385
          -
          19440
        </td>
        <td>
          Apply
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope.copy
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          Envelope.this.copy(x$13, x$16, x$14, x$15)
        </td>
      </tr><tr>
        <td>
          513
        </td>
        <td>
          49146
        </td>
        <td>
          19374
          -
          19440
        </td>
        <td>
          Apply
        </td>
        <td>
          scala.collection.mutable.Builder.+=
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          builder.+=({
  &lt;artifact&gt; val x$13: Double = other.xmax;
  &lt;artifact&gt; val x$14: Double = sidemin;
  &lt;artifact&gt; val x$15: Double = sidemax;
  &lt;artifact&gt; val x$16: Double = Envelope.this.copy$default$2;
  Envelope.this.copy(x$13, x$16, x$14, x$15)
})
        </td>
      </tr><tr>
        <td>
          513
        </td>
        <td>
          49147
        </td>
        <td>
          19374
          -
          19440
        </td>
        <td>
          Block
        </td>
        <td>
          scala.collection.mutable.Builder.+=
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          builder.+=({
  &lt;artifact&gt; val x$13: Double = other.xmax;
  &lt;artifact&gt; val x$14: Double = sidemin;
  &lt;artifact&gt; val x$15: Double = sidemax;
  &lt;artifact&gt; val x$16: Double = Envelope.this.copy$default$2;
  Envelope.this.copy(x$13, x$16, x$14, x$15)
})
        </td>
      </tr><tr>
        <td>
          515
        </td>
        <td>
          49150
        </td>
        <td>
          19459
          -
          19473
        </td>
        <td>
          Apply
        </td>
        <td>
          scala.collection.mutable.Builder.result
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          builder.result()
        </td>
      </tr><tr>
        <td>
          528
        </td>
        <td>
          49152
        </td>
        <td>
          19855
          -
          19866
        </td>
        <td>
          Apply
        </td>
        <td>
          scala.Double.&lt;
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          Envelope.this.ymin.&lt;(-90.0)
        </td>
      </tr><tr>
        <td>
          529
        </td>
        <td>
          49153
        </td>
        <td>
          19891
          -
          19896
        </td>
        <td>
          Literal
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          -180.0
        </td>
      </tr><tr>
        <td>
          529
        </td>
        <td>
          49154
        </td>
        <td>
          19898
          -
          19902
        </td>
        <td>
          Literal
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          180.0
        </td>
      </tr><tr>
        <td>
          529
        </td>
        <td>
          49155
        </td>
        <td>
          19904
          -
          19907
        </td>
        <td>
          Literal
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          -90.0
        </td>
      </tr><tr>
        <td>
          529
        </td>
        <td>
          49156
        </td>
        <td>
          19918
          -
          19922
        </td>
        <td>
          Select
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope.ymax
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          Envelope.this.ymax
        </td>
      </tr><tr>
        <td>
          529
        </td>
        <td>
          49157
        </td>
        <td>
          19924
          -
          19927
        </td>
        <td>
          Literal
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          90.0
        </td>
      </tr><tr>
        <td>
          529
        </td>
        <td>
          49158
        </td>
        <td>
          19909
          -
          19928
        </td>
        <td>
          Apply
        </td>
        <td>
          scala.math.min
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          scala.math.`package`.min(Envelope.this.ymax, 90.0)
        </td>
      </tr><tr>
        <td>
          529
        </td>
        <td>
          49159
        </td>
        <td>
          19882
          -
          19929
        </td>
        <td>
          Apply
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope.apply
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          KNearestNeighborSearchProcess.this.Envelope.apply(-180.0, 180.0, -90.0, scala.math.`package`.min(Envelope.this.ymax, 90.0))
        </td>
      </tr><tr>
        <td>
          529
        </td>
        <td>
          49160
        </td>
        <td>
          19878
          -
          19930
        </td>
        <td>
          Apply
        </td>
        <td>
          scala.collection.generic.GenericCompanion.apply
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          scala.collection.Seq.apply[org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope](KNearestNeighborSearchProcess.this.Envelope.apply(-180.0, 180.0, -90.0, scala.math.`package`.min(Envelope.this.ymax, 90.0)))
        </td>
      </tr><tr>
        <td>
          529
        </td>
        <td>
          49161
        </td>
        <td>
          19878
          -
          19930
        </td>
        <td>
          Block
        </td>
        <td>
          scala.collection.generic.GenericCompanion.apply
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          scala.collection.Seq.apply[org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope](KNearestNeighborSearchProcess.this.Envelope.apply(-180.0, 180.0, -90.0, scala.math.`package`.min(Envelope.this.ymax, 90.0)))
        </td>
      </tr><tr>
        <td>
          530
        </td>
        <td>
          49162
        </td>
        <td>
          19948
          -
          19958
        </td>
        <td>
          Apply
        </td>
        <td>
          scala.Double.&gt;
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          Envelope.this.ymax.&gt;(90.0)
        </td>
      </tr><tr>
        <td>
          530
        </td>
        <td>
          49211
        </td>
        <td>
          19944
          -
          20640
        </td>
        <td>
          If
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          if (Envelope.this.ymax.&gt;(90.0))
  scala.collection.Seq.apply[org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope](KNearestNeighborSearchProcess.this.Envelope.apply(-180.0, 180.0, scala.math.`package`.max(Envelope.this.ymin, -90.0), 90.0))
else
  if (Envelope.this.width.&gt;=(360.0))
    scala.collection.Seq.apply[org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope](Envelope.this.copy(-180.0, 180.0, Envelope.this.copy$default$3, Envelope.this.copy$default$4))
  else
    if (Envelope.this.xmin.&lt;(-180.0))
      Envelope.this.intersection(KNearestNeighborSearchProcess.this.WholeWorldEnvelope) match {
        case scala.None =&gt; scala.collection.Seq.apply[org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope](Envelope.this.copy(Envelope.this.xmin.+(360.0), Envelope.this.xmax.+(360.0), Envelope.this.copy$default$3, Envelope.this.copy$default$4))
        case (value: org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope)Some[org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope]((trimmed @ _)) =&gt; scala.collection.Seq.apply[org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope](trimmed, Envelope.this.copy(Envelope.this.xmin.+(360.0), 180.0, Envelope.this.copy$default$3, Envelope.this.copy$default$4))
      }
    else
      if (Envelope.this.xmax.&gt;(180.0))
        Envelope.this.intersection(KNearestNeighborSearchProcess.this.WholeWorldEnvelope) match {
          case scala.None =&gt; scala.collection.Seq.apply[org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope](Envelope.this.copy(Envelope.this.xmin.-(360.0), Envelope.this.xmax.-(360.0), Envelope.this.copy$default$3, Envelope.this.copy$default$4))
          case (value: org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope)Some[org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope]((trimmed @ _)) =&gt; scala.collection.Seq.apply[org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope](trimmed, Envelope.this.copy(-180.0, Envelope.this.xmax.-(360.0), Envelope.this.copy$default$3, Envelope.this.copy$default$4))
        }
      else
        scala.collection.Seq.apply[org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope](this)
        </td>
      </tr><tr>
        <td>
          531
        </td>
        <td>
          49163
        </td>
        <td>
          19983
          -
          19988
        </td>
        <td>
          Literal
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          -180.0
        </td>
      </tr><tr>
        <td>
          531
        </td>
        <td>
          49164
        </td>
        <td>
          19990
          -
          19994
        </td>
        <td>
          Literal
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          180.0
        </td>
      </tr><tr>
        <td>
          531
        </td>
        <td>
          49165
        </td>
        <td>
          20005
          -
          20009
        </td>
        <td>
          Select
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope.ymin
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          Envelope.this.ymin
        </td>
      </tr><tr>
        <td>
          531
        </td>
        <td>
          49166
        </td>
        <td>
          20011
          -
          20014
        </td>
        <td>
          Literal
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          -90.0
        </td>
      </tr><tr>
        <td>
          531
        </td>
        <td>
          49167
        </td>
        <td>
          19996
          -
          20015
        </td>
        <td>
          Apply
        </td>
        <td>
          scala.math.max
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          scala.math.`package`.max(Envelope.this.ymin, -90.0)
        </td>
      </tr><tr>
        <td>
          531
        </td>
        <td>
          49168
        </td>
        <td>
          20017
          -
          20020
        </td>
        <td>
          Literal
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          90.0
        </td>
      </tr><tr>
        <td>
          531
        </td>
        <td>
          49169
        </td>
        <td>
          19974
          -
          20021
        </td>
        <td>
          Apply
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope.apply
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          KNearestNeighborSearchProcess.this.Envelope.apply(-180.0, 180.0, scala.math.`package`.max(Envelope.this.ymin, -90.0), 90.0)
        </td>
      </tr><tr>
        <td>
          531
        </td>
        <td>
          49170
        </td>
        <td>
          19970
          -
          20022
        </td>
        <td>
          Apply
        </td>
        <td>
          scala.collection.generic.GenericCompanion.apply
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          scala.collection.Seq.apply[org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope](KNearestNeighborSearchProcess.this.Envelope.apply(-180.0, 180.0, scala.math.`package`.max(Envelope.this.ymin, -90.0), 90.0))
        </td>
      </tr><tr>
        <td>
          531
        </td>
        <td>
          49171
        </td>
        <td>
          19970
          -
          20022
        </td>
        <td>
          Block
        </td>
        <td>
          scala.collection.generic.GenericCompanion.apply
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          scala.collection.Seq.apply[org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope](KNearestNeighborSearchProcess.this.Envelope.apply(-180.0, 180.0, scala.math.`package`.max(Envelope.this.ymin, -90.0), 90.0))
        </td>
      </tr><tr>
        <td>
          532
        </td>
        <td>
          49172
        </td>
        <td>
          20040
          -
          20053
        </td>
        <td>
          Apply
        </td>
        <td>
          scala.Double.&gt;=
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          Envelope.this.width.&gt;=(360.0)
        </td>
      </tr><tr>
        <td>
          532
        </td>
        <td>
          49210
        </td>
        <td>
          20036
          -
          20640
        </td>
        <td>
          If
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          if (Envelope.this.width.&gt;=(360.0))
  scala.collection.Seq.apply[org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope](Envelope.this.copy(-180.0, 180.0, Envelope.this.copy$default$3, Envelope.this.copy$default$4))
else
  if (Envelope.this.xmin.&lt;(-180.0))
    Envelope.this.intersection(KNearestNeighborSearchProcess.this.WholeWorldEnvelope) match {
      case scala.None =&gt; scala.collection.Seq.apply[org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope](Envelope.this.copy(Envelope.this.xmin.+(360.0), Envelope.this.xmax.+(360.0), Envelope.this.copy$default$3, Envelope.this.copy$default$4))
      case (value: org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope)Some[org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope]((trimmed @ _)) =&gt; scala.collection.Seq.apply[org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope](trimmed, Envelope.this.copy(Envelope.this.xmin.+(360.0), 180.0, Envelope.this.copy$default$3, Envelope.this.copy$default$4))
    }
  else
    if (Envelope.this.xmax.&gt;(180.0))
      Envelope.this.intersection(KNearestNeighborSearchProcess.this.WholeWorldEnvelope) match {
        case scala.None =&gt; scala.collection.Seq.apply[org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope](Envelope.this.copy(Envelope.this.xmin.-(360.0), Envelope.this.xmax.-(360.0), Envelope.this.copy$default$3, Envelope.this.copy$default$4))
        case (value: org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope)Some[org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope]((trimmed @ _)) =&gt; scala.collection.Seq.apply[org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope](trimmed, Envelope.this.copy(-180.0, Envelope.this.xmax.-(360.0), Envelope.this.copy$default$3, Envelope.this.copy$default$4))
      }
    else
      scala.collection.Seq.apply[org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope](this)
        </td>
      </tr><tr>
        <td>
          533
        </td>
        <td>
          49173
        </td>
        <td>
          20081
          -
          20086
        </td>
        <td>
          Literal
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          -180.0
        </td>
      </tr><tr>
        <td>
          533
        </td>
        <td>
          49174
        </td>
        <td>
          20095
          -
          20099
        </td>
        <td>
          Literal
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          180.0
        </td>
      </tr><tr>
        <td>
          533
        </td>
        <td>
          49175
        </td>
        <td>
          20069
          -
          20100
        </td>
        <td>
          Apply
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope.copy
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          Envelope.this.copy(-180.0, 180.0, Envelope.this.copy$default$3, Envelope.this.copy$default$4)
        </td>
      </tr><tr>
        <td>
          533
        </td>
        <td>
          49176
        </td>
        <td>
          20065
          -
          20101
        </td>
        <td>
          Apply
        </td>
        <td>
          scala.collection.generic.GenericCompanion.apply
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          scala.collection.Seq.apply[org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope](Envelope.this.copy(-180.0, 180.0, Envelope.this.copy$default$3, Envelope.this.copy$default$4))
        </td>
      </tr><tr>
        <td>
          533
        </td>
        <td>
          49177
        </td>
        <td>
          20065
          -
          20101
        </td>
        <td>
          Block
        </td>
        <td>
          scala.collection.generic.GenericCompanion.apply
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          scala.collection.Seq.apply[org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope](Envelope.this.copy(-180.0, 180.0, Envelope.this.copy$default$3, Envelope.this.copy$default$4))
        </td>
      </tr><tr>
        <td>
          534
        </td>
        <td>
          49178
        </td>
        <td>
          20119
          -
          20131
        </td>
        <td>
          Apply
        </td>
        <td>
          scala.Double.&lt;
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          Envelope.this.xmin.&lt;(-180.0)
        </td>
      </tr><tr>
        <td>
          534
        </td>
        <td>
          49209
        </td>
        <td>
          20115
          -
          20640
        </td>
        <td>
          If
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          if (Envelope.this.xmin.&lt;(-180.0))
  Envelope.this.intersection(KNearestNeighborSearchProcess.this.WholeWorldEnvelope) match {
    case scala.None =&gt; scala.collection.Seq.apply[org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope](Envelope.this.copy(Envelope.this.xmin.+(360.0), Envelope.this.xmax.+(360.0), Envelope.this.copy$default$3, Envelope.this.copy$default$4))
    case (value: org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope)Some[org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope]((trimmed @ _)) =&gt; scala.collection.Seq.apply[org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope](trimmed, Envelope.this.copy(Envelope.this.xmin.+(360.0), 180.0, Envelope.this.copy$default$3, Envelope.this.copy$default$4))
  }
else
  if (Envelope.this.xmax.&gt;(180.0))
    Envelope.this.intersection(KNearestNeighborSearchProcess.this.WholeWorldEnvelope) match {
      case scala.None =&gt; scala.collection.Seq.apply[org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope](Envelope.this.copy(Envelope.this.xmin.-(360.0), Envelope.this.xmax.-(360.0), Envelope.this.copy$default$3, Envelope.this.copy$default$4))
      case (value: org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope)Some[org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope]((trimmed @ _)) =&gt; scala.collection.Seq.apply[org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope](trimmed, Envelope.this.copy(-180.0, Envelope.this.xmax.-(360.0), Envelope.this.copy$default$3, Envelope.this.copy$default$4))
    }
  else
    scala.collection.Seq.apply[org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope](this)
        </td>
      </tr><tr>
        <td>
          535
        </td>
        <td>
          49179
        </td>
        <td>
          20156
          -
          20174
        </td>
        <td>
          Select
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.WholeWorldEnvelope
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          KNearestNeighborSearchProcess.this.WholeWorldEnvelope
        </td>
      </tr><tr>
        <td>
          535
        </td>
        <td>
          49180
        </td>
        <td>
          20143
          -
          20175
        </td>
        <td>
          Apply
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope.intersection
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          Envelope.this.intersection(KNearestNeighborSearchProcess.this.WholeWorldEnvelope)
        </td>
      </tr><tr>
        <td>
          535
        </td>
        <td>
          49191
        </td>
        <td>
          20143
          -
          20350
        </td>
        <td>
          Match
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          Envelope.this.intersection(KNearestNeighborSearchProcess.this.WholeWorldEnvelope) match {
  case scala.None =&gt; scala.collection.Seq.apply[org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope](Envelope.this.copy(Envelope.this.xmin.+(360.0), Envelope.this.xmax.+(360.0), Envelope.this.copy$default$3, Envelope.this.copy$default$4))
  case (value: org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope)Some[org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope]((trimmed @ _)) =&gt; scala.collection.Seq.apply[org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope](trimmed, Envelope.this.copy(Envelope.this.xmin.+(360.0), 180.0, Envelope.this.copy$default$3, Envelope.this.copy$default$4))
}
        </td>
      </tr><tr>
        <td>
          536
        </td>
        <td>
          49181
        </td>
        <td>
          20223
          -
          20234
        </td>
        <td>
          Apply
        </td>
        <td>
          scala.Double.+
        </td>
        <td>
          
        </td>
        <td style="background: #F0ADAD">
          Envelope.this.xmin.+(360.0)
        </td>
      </tr><tr>
        <td>
          536
        </td>
        <td>
          49182
        </td>
        <td>
          20243
          -
          20254
        </td>
        <td>
          Apply
        </td>
        <td>
          scala.Double.+
        </td>
        <td>
          
        </td>
        <td style="background: #F0ADAD">
          Envelope.this.xmax.+(360.0)
        </td>
      </tr><tr>
        <td>
          536
        </td>
        <td>
          49183
        </td>
        <td>
          20211
          -
          20255
        </td>
        <td>
          Apply
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope.copy
        </td>
        <td>
          
        </td>
        <td style="background: #F0ADAD">
          Envelope.this.copy(Envelope.this.xmin.+(360.0), Envelope.this.xmax.+(360.0), Envelope.this.copy$default$3, Envelope.this.copy$default$4)
        </td>
      </tr><tr>
        <td>
          536
        </td>
        <td>
          49184
        </td>
        <td>
          20207
          -
          20256
        </td>
        <td>
          Apply
        </td>
        <td>
          scala.collection.generic.GenericCompanion.apply
        </td>
        <td>
          
        </td>
        <td style="background: #F0ADAD">
          scala.collection.Seq.apply[org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope](Envelope.this.copy(Envelope.this.xmin.+(360.0), Envelope.this.xmax.+(360.0), Envelope.this.copy$default$3, Envelope.this.copy$default$4))
        </td>
      </tr><tr>
        <td>
          536
        </td>
        <td>
          49185
        </td>
        <td>
          20207
          -
          20256
        </td>
        <td>
          Block
        </td>
        <td>
          scala.collection.generic.GenericCompanion.apply
        </td>
        <td>
          
        </td>
        <td style="background: #F0ADAD">
          scala.collection.Seq.apply[org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope](Envelope.this.copy(Envelope.this.xmin.+(360.0), Envelope.this.xmax.+(360.0), Envelope.this.copy$default$3, Envelope.this.copy$default$4))
        </td>
      </tr><tr>
        <td>
          537
        </td>
        <td>
          49186
        </td>
        <td>
          20314
          -
          20325
        </td>
        <td>
          Apply
        </td>
        <td>
          scala.Double.+
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          Envelope.this.xmin.+(360.0)
        </td>
      </tr><tr>
        <td>
          537
        </td>
        <td>
          49187
        </td>
        <td>
          20334
          -
          20338
        </td>
        <td>
          Literal
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          180.0
        </td>
      </tr><tr>
        <td>
          537
        </td>
        <td>
          49188
        </td>
        <td>
          20302
          -
          20339
        </td>
        <td>
          Apply
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope.copy
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          Envelope.this.copy(Envelope.this.xmin.+(360.0), 180.0, Envelope.this.copy$default$3, Envelope.this.copy$default$4)
        </td>
      </tr><tr>
        <td>
          537
        </td>
        <td>
          49189
        </td>
        <td>
          20289
          -
          20340
        </td>
        <td>
          Apply
        </td>
        <td>
          scala.collection.generic.GenericCompanion.apply
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          scala.collection.Seq.apply[org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope](trimmed, Envelope.this.copy(Envelope.this.xmin.+(360.0), 180.0, Envelope.this.copy$default$3, Envelope.this.copy$default$4))
        </td>
      </tr><tr>
        <td>
          537
        </td>
        <td>
          49190
        </td>
        <td>
          20289
          -
          20340
        </td>
        <td>
          Block
        </td>
        <td>
          scala.collection.generic.GenericCompanion.apply
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          scala.collection.Seq.apply[org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope](trimmed, Envelope.this.copy(Envelope.this.xmin.+(360.0), 180.0, Envelope.this.copy$default$3, Envelope.this.copy$default$4))
        </td>
      </tr><tr>
        <td>
          539
        </td>
        <td>
          49192
        </td>
        <td>
          20368
          -
          20379
        </td>
        <td>
          Apply
        </td>
        <td>
          scala.Double.&gt;
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          Envelope.this.xmax.&gt;(180.0)
        </td>
      </tr><tr>
        <td>
          539
        </td>
        <td>
          49208
        </td>
        <td>
          20364
          -
          20640
        </td>
        <td>
          If
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          if (Envelope.this.xmax.&gt;(180.0))
  Envelope.this.intersection(KNearestNeighborSearchProcess.this.WholeWorldEnvelope) match {
    case scala.None =&gt; scala.collection.Seq.apply[org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope](Envelope.this.copy(Envelope.this.xmin.-(360.0), Envelope.this.xmax.-(360.0), Envelope.this.copy$default$3, Envelope.this.copy$default$4))
    case (value: org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope)Some[org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope]((trimmed @ _)) =&gt; scala.collection.Seq.apply[org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope](trimmed, Envelope.this.copy(-180.0, Envelope.this.xmax.-(360.0), Envelope.this.copy$default$3, Envelope.this.copy$default$4))
  }
else
  scala.collection.Seq.apply[org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope](this)
        </td>
      </tr><tr>
        <td>
          540
        </td>
        <td>
          49193
        </td>
        <td>
          20404
          -
          20422
        </td>
        <td>
          Select
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.WholeWorldEnvelope
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          KNearestNeighborSearchProcess.this.WholeWorldEnvelope
        </td>
      </tr><tr>
        <td>
          540
        </td>
        <td>
          49194
        </td>
        <td>
          20391
          -
          20423
        </td>
        <td>
          Apply
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope.intersection
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          Envelope.this.intersection(KNearestNeighborSearchProcess.this.WholeWorldEnvelope)
        </td>
      </tr><tr>
        <td>
          540
        </td>
        <td>
          49205
        </td>
        <td>
          20391
          -
          20599
        </td>
        <td>
          Match
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          Envelope.this.intersection(KNearestNeighborSearchProcess.this.WholeWorldEnvelope) match {
  case scala.None =&gt; scala.collection.Seq.apply[org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope](Envelope.this.copy(Envelope.this.xmin.-(360.0), Envelope.this.xmax.-(360.0), Envelope.this.copy$default$3, Envelope.this.copy$default$4))
  case (value: org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope)Some[org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope]((trimmed @ _)) =&gt; scala.collection.Seq.apply[org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope](trimmed, Envelope.this.copy(-180.0, Envelope.this.xmax.-(360.0), Envelope.this.copy$default$3, Envelope.this.copy$default$4))
}
        </td>
      </tr><tr>
        <td>
          541
        </td>
        <td>
          49195
        </td>
        <td>
          20471
          -
          20482
        </td>
        <td>
          Apply
        </td>
        <td>
          scala.Double.-
        </td>
        <td>
          
        </td>
        <td style="background: #F0ADAD">
          Envelope.this.xmin.-(360.0)
        </td>
      </tr><tr>
        <td>
          541
        </td>
        <td>
          49196
        </td>
        <td>
          20491
          -
          20502
        </td>
        <td>
          Apply
        </td>
        <td>
          scala.Double.-
        </td>
        <td>
          
        </td>
        <td style="background: #F0ADAD">
          Envelope.this.xmax.-(360.0)
        </td>
      </tr><tr>
        <td>
          541
        </td>
        <td>
          49197
        </td>
        <td>
          20459
          -
          20503
        </td>
        <td>
          Apply
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope.copy
        </td>
        <td>
          
        </td>
        <td style="background: #F0ADAD">
          Envelope.this.copy(Envelope.this.xmin.-(360.0), Envelope.this.xmax.-(360.0), Envelope.this.copy$default$3, Envelope.this.copy$default$4)
        </td>
      </tr><tr>
        <td>
          541
        </td>
        <td>
          49198
        </td>
        <td>
          20455
          -
          20504
        </td>
        <td>
          Apply
        </td>
        <td>
          scala.collection.generic.GenericCompanion.apply
        </td>
        <td>
          
        </td>
        <td style="background: #F0ADAD">
          scala.collection.Seq.apply[org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope](Envelope.this.copy(Envelope.this.xmin.-(360.0), Envelope.this.xmax.-(360.0), Envelope.this.copy$default$3, Envelope.this.copy$default$4))
        </td>
      </tr><tr>
        <td>
          541
        </td>
        <td>
          49199
        </td>
        <td>
          20455
          -
          20504
        </td>
        <td>
          Block
        </td>
        <td>
          scala.collection.generic.GenericCompanion.apply
        </td>
        <td>
          
        </td>
        <td style="background: #F0ADAD">
          scala.collection.Seq.apply[org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope](Envelope.this.copy(Envelope.this.xmin.-(360.0), Envelope.this.xmax.-(360.0), Envelope.this.copy$default$3, Envelope.this.copy$default$4))
        </td>
      </tr><tr>
        <td>
          542
        </td>
        <td>
          49200
        </td>
        <td>
          20562
          -
          20567
        </td>
        <td>
          Literal
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          -180.0
        </td>
      </tr><tr>
        <td>
          542
        </td>
        <td>
          49201
        </td>
        <td>
          20576
          -
          20587
        </td>
        <td>
          Apply
        </td>
        <td>
          scala.Double.-
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          Envelope.this.xmax.-(360.0)
        </td>
      </tr><tr>
        <td>
          542
        </td>
        <td>
          49202
        </td>
        <td>
          20550
          -
          20588
        </td>
        <td>
          Apply
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope.copy
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          Envelope.this.copy(-180.0, Envelope.this.xmax.-(360.0), Envelope.this.copy$default$3, Envelope.this.copy$default$4)
        </td>
      </tr><tr>
        <td>
          542
        </td>
        <td>
          49203
        </td>
        <td>
          20537
          -
          20589
        </td>
        <td>
          Apply
        </td>
        <td>
          scala.collection.generic.GenericCompanion.apply
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          scala.collection.Seq.apply[org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope](trimmed, Envelope.this.copy(-180.0, Envelope.this.xmax.-(360.0), Envelope.this.copy$default$3, Envelope.this.copy$default$4))
        </td>
      </tr><tr>
        <td>
          542
        </td>
        <td>
          49204
        </td>
        <td>
          20537
          -
          20589
        </td>
        <td>
          Block
        </td>
        <td>
          scala.collection.generic.GenericCompanion.apply
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          scala.collection.Seq.apply[org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope](trimmed, Envelope.this.copy(-180.0, Envelope.this.xmax.-(360.0), Envelope.this.copy$default$3, Envelope.this.copy$default$4))
        </td>
      </tr><tr>
        <td>
          545
        </td>
        <td>
          49206
        </td>
        <td>
          20623
          -
          20632
        </td>
        <td>
          Apply
        </td>
        <td>
          scala.collection.generic.GenericCompanion.apply
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          scala.collection.Seq.apply[org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope](this)
        </td>
      </tr><tr>
        <td>
          545
        </td>
        <td>
          49207
        </td>
        <td>
          20623
          -
          20632
        </td>
        <td>
          Block
        </td>
        <td>
          scala.collection.generic.GenericCompanion.apply
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          scala.collection.Seq.apply[org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope](this)
        </td>
      </tr><tr>
        <td>
          556
        </td>
        <td>
          49212
        </td>
        <td>
          20852
          -
          20856
        </td>
        <td>
          Select
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope.xmin
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          Envelope.this.xmin
        </td>
      </tr><tr>
        <td>
          556
        </td>
        <td>
          49213
        </td>
        <td>
          20858
          -
          20862
        </td>
        <td>
          Select
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope.xmax
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          Envelope.this.xmax
        </td>
      </tr><tr>
        <td>
          556
        </td>
        <td>
          49214
        </td>
        <td>
          20864
          -
          20868
        </td>
        <td>
          Select
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope.ymin
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          Envelope.this.ymin
        </td>
      </tr><tr>
        <td>
          556
        </td>
        <td>
          49215
        </td>
        <td>
          20870
          -
          20874
        </td>
        <td>
          Select
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope.ymax
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          Envelope.this.ymax
        </td>
      </tr><tr>
        <td>
          556
        </td>
        <td>
          49216
        </td>
        <td>
          20829
          -
          20890
        </td>
        <td>
          Apply
        </td>
        <td>
          org.geotools.geometry.jts.ReferencedEnvelope.&lt;init&gt;
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          new org.geotools.geometry.jts.ReferencedEnvelope(Envelope.this.xmin, Envelope.this.xmax, Envelope.this.ymin, Envelope.this.ymax, org.locationtech.geomesa.utils.geotools.`package`.CRS_EPSG_4326)
        </td>
      </tr><tr>
        <td>
          556
        </td>
        <td>
          49217
        </td>
        <td>
          20815
          -
          20891
        </td>
        <td>
          Apply
        </td>
        <td>
          org.geotools.api.filter.FilterFactory.bbox
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          org.locationtech.geomesa.filter.`package`.ff.bbox(geom, new org.geotools.geometry.jts.ReferencedEnvelope(Envelope.this.xmin, Envelope.this.xmax, Envelope.this.ymin, Envelope.this.ymax, org.locationtech.geomesa.utils.geotools.`package`.CRS_EPSG_4326))
        </td>
      </tr><tr>
        <td>
          563
        </td>
        <td>
          49218
        </td>
        <td>
          21059
          -
          21063
        </td>
        <td>
          Select
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope.xmin
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          Envelope.this.xmin
        </td>
      </tr><tr>
        <td>
          563
        </td>
        <td>
          49219
        </td>
        <td>
          21065
          -
          21069
        </td>
        <td>
          Select
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope.xmax
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          Envelope.this.xmax
        </td>
      </tr><tr>
        <td>
          563
        </td>
        <td>
          49220
        </td>
        <td>
          21071
          -
          21075
        </td>
        <td>
          Select
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope.ymin
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          Envelope.this.ymin
        </td>
      </tr><tr>
        <td>
          563
        </td>
        <td>
          49221
        </td>
        <td>
          21077
          -
          21081
        </td>
        <td>
          Select
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope.ymax
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          Envelope.this.ymax
        </td>
      </tr><tr>
        <td>
          563
        </td>
        <td>
          49222
        </td>
        <td>
          21020
          -
          21082
        </td>
        <td>
          Apply
        </td>
        <td>
          org.locationtech.jts.geom.Envelope.&lt;init&gt;
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          new org.locationtech.jts.geom.Envelope(Envelope.this.xmin, Envelope.this.xmax, Envelope.this.ymin, Envelope.this.ymax)
        </td>
      </tr><tr>
        <td>
          570
        </td>
        <td>
          49223
        </td>
        <td>
          21172
          -
          21174
        </td>
        <td>
          Literal
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td>
          
        </td>
        <td style="background: #F0ADAD">
          &quot;[&quot;
        </td>
      </tr><tr>
        <td>
          570
        </td>
        <td>
          49224
        </td>
        <td>
          21178
          -
          21181
        </td>
        <td>
          Literal
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td>
          
        </td>
        <td style="background: #F0ADAD">
          &quot;, &quot;
        </td>
      </tr><tr>
        <td>
          570
        </td>
        <td>
          49225
        </td>
        <td>
          21185
          -
          21188
        </td>
        <td>
          Literal
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td>
          
        </td>
        <td style="background: #F0ADAD">
          &quot;, &quot;
        </td>
      </tr><tr>
        <td>
          570
        </td>
        <td>
          49226
        </td>
        <td>
          21192
          -
          21195
        </td>
        <td>
          Literal
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td>
          
        </td>
        <td style="background: #F0ADAD">
          &quot;, &quot;
        </td>
      </tr><tr>
        <td>
          570
        </td>
        <td>
          49227
        </td>
        <td>
          21199
          -
          21201
        </td>
        <td>
          Literal
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td>
          
        </td>
        <td style="background: #F0ADAD">
          &quot;]&quot;
        </td>
      </tr><tr>
        <td>
          570
        </td>
        <td>
          49228
        </td>
        <td>
          21174
          -
          21178
        </td>
        <td>
          Select
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope.xmin
        </td>
        <td>
          
        </td>
        <td style="background: #F0ADAD">
          Envelope.this.xmin
        </td>
      </tr><tr>
        <td>
          570
        </td>
        <td>
          49229
        </td>
        <td>
          21181
          -
          21185
        </td>
        <td>
          Select
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope.xmax
        </td>
        <td>
          
        </td>
        <td style="background: #F0ADAD">
          Envelope.this.xmax
        </td>
      </tr><tr>
        <td>
          570
        </td>
        <td>
          49230
        </td>
        <td>
          21188
          -
          21192
        </td>
        <td>
          Select
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope.ymin
        </td>
        <td>
          
        </td>
        <td style="background: #F0ADAD">
          Envelope.this.ymin
        </td>
      </tr><tr>
        <td>
          570
        </td>
        <td>
          49231
        </td>
        <td>
          21195
          -
          21199
        </td>
        <td>
          Select
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope.ymax
        </td>
        <td>
          
        </td>
        <td style="background: #F0ADAD">
          Envelope.this.ymax
        </td>
      </tr><tr>
        <td>
          570
        </td>
        <td>
          49232
        </td>
        <td>
          21170
          -
          21201
        </td>
        <td>
          Apply
        </td>
        <td>
          scala.StringContext.s
        </td>
        <td>
          
        </td>
        <td style="background: #F0ADAD">
          scala.StringContext.apply(&quot;[&quot;, &quot;, &quot;, &quot;, &quot;, &quot;, &quot;, &quot;]&quot;).s(Envelope.this.xmin, Envelope.this.xmax, Envelope.this.ymin, Envelope.this.ymax)
        </td>
      </tr><tr>
        <td>
          584
        </td>
        <td>
          49233
        </td>
        <td>
          21558
          -
          21558
        </td>
        <td>
          Select
        </td>
        <td>
          scala.Tuple2._1
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          x$9._1
        </td>
      </tr><tr>
        <td>
          584
        </td>
        <td>
          49234
        </td>
        <td>
          21564
          -
          21564
        </td>
        <td>
          Select
        </td>
        <td>
          scala.Tuple2._2
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          x$9._2
        </td>
      </tr><tr>
        <td>
          585
        </td>
        <td>
          49235
        </td>
        <td>
          21642
          -
          21659
        </td>
        <td>
          Apply
        </td>
        <td>
          scala.Double.-
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          point.getX().-(east)
        </td>
      </tr><tr>
        <td>
          585
        </td>
        <td>
          49236
        </td>
        <td>
          21661
          -
          21678
        </td>
        <td>
          Apply
        </td>
        <td>
          scala.Double.+
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          point.getX().+(east)
        </td>
      </tr><tr>
        <td>
          585
        </td>
        <td>
          49237
        </td>
        <td>
          21680
          -
          21698
        </td>
        <td>
          Apply
        </td>
        <td>
          scala.Double.-
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          point.getY().-(north)
        </td>
      </tr><tr>
        <td>
          585
        </td>
        <td>
          49238
        </td>
        <td>
          21700
          -
          21718
        </td>
        <td>
          Apply
        </td>
        <td>
          scala.Double.+
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          point.getY().+(north)
        </td>
      </tr><tr>
        <td>
          585
        </td>
        <td>
          49239
        </td>
        <td>
          21633
          -
          21719
        </td>
        <td>
          Apply
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope.apply
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          KNearestNeighborSearchProcess.this.Envelope.apply(point.getX().-(east), point.getX().+(east), point.getY().-(north), point.getY().+(north))
        </td>
      </tr>
    </table>
          </div>
        </div>
      </body>
    </html>