<html>
      <head>
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
        <title id="title">
          org/locationtech/geomesa/process/query/KNearestNeighborSearchProcess.scala.html
        </title>
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/jquery.tablesorter/2.20.1/css/theme.default.min.css" type="text/css"/><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.tablesorter/2.20.1/js/jquery.tablesorter.min.js"></script><link rel="stylesheet" href="https://netdna.bootstrapcdn.com/bootstrap/3.0.3/css/bootstrap.min.css" type="text/css"/><script src="https://netdna.bootstrapcdn.com/bootstrap/3.0.3/js/bootstrap.min.js"></script><script type="text/javascript">
        $(document).ready(function() {$(".tablesorter").tablesorter();});
      </script>
        <style>
          table.codegrid { font-family: monospace; font-size: 12px; width: auto!important; }table.statementlist { width: auto!important; font-size: 13px; } table.codegrid td { padding: 0!important; border: 0!important } table td.linenumber { width: 40px!important; } 
        </style>
      </head>
      <body style="font-family: monospace;">
        <ul class="nav nav-tabs">
          <li>
            <a href="#codegrid" data-toggle="tab">Codegrid</a>
          </li>
          <li>
            <a href="#statementlist" data-toggle="tab">Statement List</a>
          </li>
        </ul>
        <div class="tab-content">
          <div class="tab-pane active" id="codegrid">
            <pre style='font-size: 12pt; font-family: courier, monospace;'>1 <span style=''>/***********************************************************************
</span>2 <span style=''> * Copyright (c) 2013-2024 Commonwealth Computer Research, Inc.
</span>3 <span style=''> * All rights reserved. This program and the accompanying materials
</span>4 <span style=''> * are made available under the terms of the Apache License, Version 2.0
</span>5 <span style=''> * which accompanies this distribution and is available at
</span>6 <span style=''> * http://www.opensource.org/licenses/apache2.0.php.
</span>7 <span style=''> ***********************************************************************/
</span>8 <span style=''>
</span>9 <span style=''>package org.locationtech.geomesa.process.query
</span>10 <span style=''>
</span>11 <span style=''>import com.typesafe.scalalogging.LazyLogging
</span>12 <span style=''>import org.geotools.api.data.{Query, SimpleFeatureSource}
</span>13 <span style=''>import org.geotools.api.feature.Feature
</span>14 <span style=''>import org.geotools.api.feature.simple.SimpleFeature
</span>15 <span style=''>import org.geotools.api.filter.Filter
</span>16 <span style=''>import org.geotools.api.filter.expression.PropertyName
</span>17 <span style=''>import org.geotools.data.simple.SimpleFeatureCollection
</span>18 <span style=''>import org.geotools.feature.DefaultFeatureCollection
</span>19 <span style=''>import org.geotools.filter.text.ecql.ECQL
</span>20 <span style=''>import org.geotools.geometry.jts.ReferencedEnvelope
</span>21 <span style=''>import org.geotools.process.factory.{DescribeParameter, DescribeProcess, DescribeResult}
</span>22 <span style=''>import org.geotools.referencing.GeodeticCalculator
</span>23 <span style=''>import org.geotools.util.factory.Hints
</span>24 <span style=''>import org.locationtech.geomesa.filter.ff
</span>25 <span style=''>import org.locationtech.geomesa.index.geotools.GeoMesaFeatureCollection
</span>26 <span style=''>import org.locationtech.geomesa.index.process.GeoMesaProcessVisitor
</span>27 <span style=''>import org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.KNNVisitor
</span>28 <span style=''>import org.locationtech.geomesa.process.{FeatureResult, GeoMesaProcess}
</span>29 <span style=''>import org.locationtech.geomesa.utils.collection.SelfClosingIterator
</span>30 <span style=''>import org.locationtech.geomesa.utils.concurrent.CachedThreadPool
</span>31 <span style=''>import org.locationtech.geomesa.utils.geometry.DistanceCalculator
</span>32 <span style=''>import org.locationtech.geomesa.utils.geotools.{CRS_EPSG_4326, GeometryUtils}
</span>33 <span style=''>import org.locationtech.geomesa.utils.io.WithClose
</span>34 <span style=''>import org.locationtech.jts.geom.Point
</span>35 <span style=''>
</span>36 <span style=''>@DescribeProcess(
</span>37 <span style=''>  title = &quot;Geomesa-enabled K Nearest Neighbor Search&quot;,
</span>38 <span style=''>  description = &quot;Performs a K-nearest-neighbor search on a feature collection using a second feature collection as input&quot;
</span>39 <span style=''>)
</span>40 <span style=''>class KNearestNeighborSearchProcess extends GeoMesaProcess with LazyLogging {
</span>41 <span style=''>
</span>42 <span style=''>  @DescribeResult(description = &quot;Output feature collection&quot;)
</span>43 <span style=''>  def execute(
</span>44 <span style=''>               @DescribeParameter(
</span>45 <span style=''>                 name = &quot;inputFeatures&quot;,
</span>46 <span style=''>                 description = &quot;Feature collection that defines the points to search&quot;)
</span>47 <span style=''>               inputFeatures: SimpleFeatureCollection,
</span>48 <span style=''>
</span>49 <span style=''>               @DescribeParameter(
</span>50 <span style=''>                 name = &quot;dataFeatures&quot;,
</span>51 <span style=''>                 description = &quot;Feature collection to query for nearest neighbors&quot;)
</span>52 <span style=''>               dataFeatures: SimpleFeatureCollection,
</span>53 <span style=''>
</span>54 <span style=''>               @DescribeParameter(
</span>55 <span style=''>                 name = &quot;numDesired&quot;,
</span>56 <span style=''>                 description = &quot;k, the number of nearest neighbors to return&quot;)
</span>57 <span style=''>               numDesired: java.lang.Integer,
</span>58 <span style=''>
</span>59 <span style=''>               @DescribeParameter(
</span>60 <span style=''>                 name = &quot;estimatedDistance&quot;,
</span>61 <span style=''>                 description = &quot;Estimate of the distance in meters for the k-th nearest neighbor, used for the initial query window&quot;)
</span>62 <span style=''>               estimatedDistance: java.lang.Double,
</span>63 <span style=''>
</span>64 <span style=''>               @DescribeParameter(
</span>65 <span style=''>                 name = &quot;maxSearchDistance&quot;,
</span>66 <span style=''>                 description = &quot;Maximum search distance in meters, used to prevent runaway queries of the entire data set&quot;)
</span>67 <span style=''>               maxSearchDistance: java.lang.Double
</span>68 <span style=''>               ): SimpleFeatureCollection = {
</span>69 <span style=''>
</span>70 <span style=''>    logger.debug(
</span>71 <span style=''>      s&quot;Running KNN query for ${dataFeatures.getClass.getName} with k = $numDesired, &quot; +
</span>72 <span style=''>        s&quot;initial distance = $estimatedDistance, max distance = $maxSearchDistance&quot;)
</span>73 <span style=''>
</span>74 <span style=''>    val visitor = </span><span style='background: #AEF1AE'>new KNNVisitor(inputFeatures, numDesired, estimatedDistance, maxSearchDistance)</span><span style=''>
</span>75 <span style=''>    </span><span style='background: #AEF1AE'>GeoMesaFeatureCollection.visit(dataFeatures, visitor)</span><span style=''>
</span>76 <span style=''>    </span><span style='background: #AEF1AE'>visitor.getResult.results</span><span style=''>
</span>77 <span style=''>  }
</span>78 <span style=''>}
</span>79 <span style=''>
</span>80 <span style=''>object KNearestNeighborSearchProcess {
</span>81 <span style=''>
</span>82 <span style=''>  private val WholeWorldEnvelope = </span><span style='background: #AEF1AE'>Envelope(-180d, 180d, -90d, 90d)</span><span style=''>
</span>83 <span style=''>
</span>84 <span style=''>  /**
</span>85 <span style=''>    * Main visitor class for the KNN search process
</span>86 <span style=''>    *
</span>87 <span style=''>    * @param query query features - geometries will be used as the inputs
</span>88 <span style=''>    * @param k number of neighbors to find
</span>89 <span style=''>    * @param start initial distance to search
</span>90 <span style=''>    * @param threshold max distance to search
</span>91 <span style=''>    */
</span>92 <span style=''>  class KNNVisitor(query: SimpleFeatureCollection, k: Int, start: Double, threshold: Double)
</span>93 <span style=''>      extends GeoMesaProcessVisitor with LazyLogging {
</span>94 <span style=''>
</span>95 <span style=''>    import org.locationtech.geomesa.filter.ff
</span>96 <span style=''>    import org.locationtech.geomesa.utils.geotools.RichSimpleFeatureType.RichSimpleFeatureType
</span>97 <span style=''>
</span>98 <span style=''>    private lazy val queries: Seq[Point] = SelfClosingIterator(query.features()).toList.flatMap { f =&gt;
</span>99 <span style=''>      f.getDefaultGeometry match {
</span>100 <span style=''>        case p: Point =&gt; Some(p)
</span>101 <span style=''>        case g =&gt; logger.warn(s&quot;KNN query not implemented for non-point geometries, skipping this feature: $g&quot;); None
</span>102 <span style=''>      }
</span>103 <span style=''>    }
</span>104 <span style=''>
</span>105 <span style=''>    private lazy val results = Seq.fill(queries.length)(Array.ofDim[FeatureWithDistance](k))
</span>106 <span style=''>    private lazy val calculators = queries.zip(results).map { case (p, r) =&gt; new KnnCalculator(p, k, threshold, r) }
</span>107 <span style=''>
</span>108 <span style=''>    private var result: FeatureResult = _
</span>109 <span style=''>
</span>110 <span style=''>    // called for non-optimized visits
</span>111 <span style=''>    override def visit(feature: Feature): Unit = </span><span style='background: #AEF1AE'>calculators.foreach(_.visit(feature.asInstanceOf[SimpleFeature]))</span><span style=''>
</span>112 <span style=''>
</span>113 <span style=''>    override def getResult: FeatureResult = {
</span>114 <span style=''>      if (</span><span style='background: #AEF1AE'>result == null</span><span style=''>) </span><span style='background: #AEF1AE'>{
</span>115 <span style=''></span><span style='background: #AEF1AE'>        val collection = new DefaultFeatureCollection()
</span>116 <span style=''></span><span style='background: #AEF1AE'>        results.foreach(_.foreach(r =&gt; if (r != null) { collection.add(r.sf) }))
</span>117 <span style=''></span><span style='background: #AEF1AE'>        result = FeatureResult(collection)
</span>118 <span style=''></span><span style='background: #AEF1AE'>      }</span><span style=''>
</span>119 <span style=''>      </span><span style='background: #AEF1AE'>result</span><span style=''>
</span>120 <span style=''>    }
</span>121 <span style=''>
</span>122 <span style=''>    override def execute(source: SimpleFeatureSource, query: Query): Unit = {
</span>123 <span style=''>      logger.debug(s&quot;Running Geomesa KNN process on source type ${source.getClass.getName}&quot;)
</span>124 <span style=''>
</span>125 <span style=''>      // create a new feature collection to hold the results of the KNN search around each point
</span>126 <span style=''>      val collection = </span><span style='background: #F0ADAD'>new DefaultFeatureCollection()</span><span style=''>
</span>127 <span style=''>      val geom = </span><span style='background: #F0ADAD'>ff.property(source.getSchema.getGeomField)</span><span style=''>
</span>128 <span style=''>
</span>129 <span style=''>      // for each entry in the inputFeatures collection:
</span>130 <span style=''>      def run(p: Point): Unit = {
</span>131 <span style=''>        // tracks our nearest neighbors
</span>132 <span style=''>        val results = </span><span style='background: #F0ADAD'>Array.ofDim[FeatureWithDistance](k)</span><span style=''>
</span>133 <span style=''>        // tracks features are in our search envelope but that aren't within our current search distance
</span>134 <span style=''>        // we use a java linked list as scala doesn't have anything with 'iterate and remove' functionality
</span>135 <span style=''>        val overflow = </span><span style='background: #F0ADAD'>new java.util.LinkedList[FeatureWithDistance]()</span><span style=''>
</span>136 <span style=''>
</span>137 <span style=''>        // calculator for expanding window queries
</span>138 <span style=''>        val window = </span><span style='background: #F0ADAD'>new KnnWindow(query, geom, p, k, start, threshold)</span><span style=''>
</span>139 <span style=''>        var found = </span><span style='background: #F0ADAD'>0</span><span style=''> // tracks the number of neighbors we've found so far
</span>140 <span style=''>
</span>141 <span style=''>        val initial = </span><span style='background: #F0ADAD'>window.next(None)</span><span style=''>
</span>142 <span style=''>        logger.trace(s&quot;Current query window:\n  ${window.window.debug.mkString(&quot;\n  &quot;)}&quot;)
</span>143 <span style=''>        logger.trace(s&quot;Current filter: ${ECQL.toCQL(initial.getFilter)}&quot;)
</span>144 <span style=''>
</span>145 <span style=''>        // run our first query against the estimated distance
</span>146 <span style=''>        </span><span style='background: #F0ADAD'>WithClose(source.getFeatures(initial).features()) { iter =&gt;
</span>147 <span style=''></span><span style='background: #F0ADAD'>          // note: the calculator will populate our results array
</span>148 <span style=''></span><span style='background: #F0ADAD'>          val knn = new KnnCalculator(p, k, window.radius, results)
</span>149 <span style=''></span><span style='background: #F0ADAD'>          while (iter.hasNext) {
</span>150 <span style=''></span><span style='background: #F0ADAD'>            val sf = iter.next
</span>151 <span style=''></span><span style='background: #F0ADAD'>            // features that aren't within our query distance are added to the overflow for the next iteration
</span>152 <span style=''></span><span style='background: #F0ADAD'>            knn.visit(sf).foreach(d =&gt; overflow.add(FeatureWithDistance(sf, d)))
</span>153 <span style=''></span><span style='background: #F0ADAD'>          }
</span>154 <span style=''></span><span style='background: #F0ADAD'>          found = knn.size
</span>155 <span style=''></span><span style='background: #F0ADAD'>        }</span><span style=''>
</span>156 <span style=''>
</span>157 <span style=''>        var iteration = </span><span style='background: #F0ADAD'>1</span><span style=''> // tracks the number of queries we've run
</span>158 <span style=''>
</span>159 <span style=''>        // if we haven't found k features, start expanding the search distance
</span>160 <span style=''>        while (</span><span style='background: #F0ADAD'>found &lt; k &amp;&amp; window.hasNext</span><span style=''>) </span><span style='background: #F0ADAD'>{
</span>161 <span style=''></span><span style='background: #F0ADAD'>          val last = window.radius
</span>162 <span style=''></span><span style='background: #F0ADAD'>          // calculate the next query to search, based on how many we've found so far
</span>163 <span style=''></span><span style='background: #F0ADAD'>          val next = window.next(Some(found))
</span>164 <span style=''></span><span style='background: #F0ADAD'>          logger.debug(
</span>165 <span style=''></span><span style='background: #F0ADAD'>            s&quot;Expanding search at (${p.getX} ${p.getY}) from $last to ${window.radius} meters &quot; +
</span>166 <span style=''></span><span style='background: #F0ADAD'>                s&quot;based on finding $found/$k neighbors&quot;)
</span>167 <span style=''></span><span style='background: #F0ADAD'>          logger.trace(s&quot;Current query window:\n  ${window.window.debug.mkString(&quot;\n  &quot;)}&quot;)
</span>168 <span style=''></span><span style='background: #F0ADAD'>          logger.trace(s&quot;Current filter: ${ECQL.toCQL(next.getFilter)}&quot;)
</span>169 <span style=''></span><span style='background: #F0ADAD'>
</span>170 <span style=''></span><span style='background: #F0ADAD'>          // calculator for our new distance, initialized with the neighbors we've already found
</span>171 <span style=''></span><span style='background: #F0ADAD'>          val knn = new KnnCalculator(p, k, window.radius, results, found)
</span>172 <span style=''></span><span style='background: #F0ADAD'>          // re-visit any features that were outside our distance but inside our last envelope
</span>173 <span style=''></span><span style='background: #F0ADAD'>          val iter = overflow.iterator()
</span>174 <span style=''></span><span style='background: #F0ADAD'>          while (iter.hasNext) {
</span>175 <span style=''></span><span style='background: #F0ADAD'>            val FeatureWithDistance(sf, d) = iter.next()
</span>176 <span style=''></span><span style='background: #F0ADAD'>            if (d &lt;= window.radius) {
</span>177 <span style=''></span><span style='background: #F0ADAD'>              knn.visit(sf, d)
</span>178 <span style=''></span><span style='background: #F0ADAD'>              iter.remove()
</span>179 <span style=''></span><span style='background: #F0ADAD'>            }
</span>180 <span style=''></span><span style='background: #F0ADAD'>          }
</span>181 <span style=''></span><span style='background: #F0ADAD'>
</span>182 <span style=''></span><span style='background: #F0ADAD'>          // run the new query
</span>183 <span style=''></span><span style='background: #F0ADAD'>          WithClose(source.getFeatures(next).features()) { iter =&gt;
</span>184 <span style=''></span><span style='background: #F0ADAD'>            while (iter.hasNext) {
</span>185 <span style=''></span><span style='background: #F0ADAD'>              val sf = iter.next
</span>186 <span style=''></span><span style='background: #F0ADAD'>              // features that aren't within our query distance are added to the overflow for the next iteration
</span>187 <span style=''></span><span style='background: #F0ADAD'>              knn.visit(sf).foreach(d =&gt; overflow.add(FeatureWithDistance(sf, d)))
</span>188 <span style=''></span><span style='background: #F0ADAD'>            }
</span>189 <span style=''></span><span style='background: #F0ADAD'>            found = knn.size
</span>190 <span style=''></span><span style='background: #F0ADAD'>          }
</span>191 <span style=''></span><span style='background: #F0ADAD'>
</span>192 <span style=''></span><span style='background: #F0ADAD'>          iteration += 1
</span>193 <span style=''></span><span style='background: #F0ADAD'>        }</span><span style=''>
</span>194 <span style=''>
</span>195 <span style=''>        logger.debug(
</span>196 <span style=''>          s&quot;Found $found/$k neighbors at (${p.getX} ${p.getY}) after $iteration iteration(s) with final search &quot; +
</span>197 <span style=''>              s&quot;distance of ${window.radius} (initial $start, max $threshold)&quot;)
</span>198 <span style=''>        logger.trace(results.take(found).map(_.sf).mkString(&quot;; &quot;))
</span>199 <span style=''>
</span>200 <span style=''>        </span><span style='background: #F0ADAD'>collection.synchronized {
</span>201 <span style=''></span><span style='background: #F0ADAD'>          var i = 0
</span>202 <span style=''></span><span style='background: #F0ADAD'>          while (i &lt; found) {
</span>203 <span style=''></span><span style='background: #F0ADAD'>            collection.add(results(i).sf)
</span>204 <span style=''></span><span style='background: #F0ADAD'>            i += 1
</span>205 <span style=''></span><span style='background: #F0ADAD'>          }
</span>206 <span style=''></span><span style='background: #F0ADAD'>        }</span><span style=''>
</span>207 <span style=''>      }
</span>208 <span style=''>
</span>209 <span style=''>      </span><span style='background: #F0ADAD'>queries.toList.map(p =&gt; CachedThreadPool.submit(() =&gt; run(p))).foreach(_.get)</span><span style=''>
</span>210 <span style=''>
</span>211 <span style=''>      </span><span style='background: #F0ADAD'>this.result = FeatureResult(collection)</span><span style=''>
</span>212 <span style=''>    }
</span>213 <span style=''>  }
</span>214 <span style=''>
</span>215 <span style=''>  /**
</span>216 <span style=''>    * Class for finding window queries around a central point
</span>217 <span style=''>    *
</span>218 <span style=''>    * @param base base query
</span>219 <span style=''>    * @param geom geometry attribute being queried
</span>220 <span style=''>    * @param p central query point
</span>221 <span style=''>    * @param k number of features to find
</span>222 <span style=''>    * @param start initial search distance
</span>223 <span style=''>    * @param threshold max distance to query
</span>224 <span style=''>    */
</span>225 <span style=''>  class KnnWindow(base: Query, geom: PropertyName, p: Point, k: Int, start: Double, threshold: Double) {
</span>226 <span style=''>
</span>227 <span style=''>    private val calc = </span><span style='background: #AEF1AE'>new GeodeticCalculator()</span><span style=''>
</span>228 <span style=''>    private var distance = </span><span style='background: #AEF1AE'>start</span><span style=''>
</span>229 <span style=''>
</span>230 <span style=''>    // our query envelope - this is purely cartesian and not constrained by world bounds
</span>231 <span style=''>    private var envelope = </span><span style='background: #AEF1AE'>QueryEnvelope(Envelope(p, distance, calc), None)</span><span style=''>
</span>232 <span style=''>
</span>233 <span style=''>    /**
</span>234 <span style=''>      * Current search radius, in meters
</span>235 <span style=''>      *
</span>236 <span style=''>      * @return
</span>237 <span style=''>      */
</span>238 <span style=''>    def radius: Double = </span><span style='background: #AEF1AE'>distance</span><span style=''>
</span>239 <span style=''>
</span>240 <span style=''>    /**
</span>241 <span style=''>      * Current search envelope
</span>242 <span style=''>      *
</span>243 <span style=''>      * @return envelope
</span>244 <span style=''>      */
</span>245 <span style=''>    def window: QueryEnvelope = </span><span style='background: #F0ADAD'>envelope</span><span style=''>
</span>246 <span style=''>
</span>247 <span style=''>    /**
</span>248 <span style=''>      * Whether there are more window queries within the threshold
</span>249 <span style=''>      *
</span>250 <span style=''>      * @return
</span>251 <span style=''>      */
</span>252 <span style=''>    def hasNext: Boolean = </span><span style='background: #AEF1AE'>distance &lt; threshold</span><span style=''>
</span>253 <span style=''>
</span>254 <span style=''>    /**
</span>255 <span style=''>      * Get the next query window
</span>256 <span style=''>      *
</span>257 <span style=''>      * @param found number of features found so far, if the query has already been run
</span>258 <span style=''>      * @return
</span>259 <span style=''>      */
</span>260 <span style=''>    def next(found: Option[Int]): Query = {
</span>261 <span style=''>      </span><span style='background: #AEF1AE'>found.foreach(expand)</span><span style=''> // expand our window if we've already run a query
</span>262 <span style=''>
</span>263 <span style=''>      val query = </span><span style='background: #AEF1AE'>new Query(base)</span><span style=''>
</span>264 <span style=''>      </span><span style='background: #AEF1AE'>query.setHints(new Hints(base.getHints))</span><span style=''> // prevent sharing of hints between queries
</span>265 <span style=''>
</span>266 <span style=''>      // remove the hole from our query envelopes so that we don't scan the same area more than once
</span>267 <span style=''>      val filter = </span><span style='background: #AEF1AE'>org.locationtech.geomesa.filter.orFilters(envelope.query.map(_.toFilter(geom)))</span><span style=''>
</span>268 <span style=''>      </span><span style='background: #AEF1AE'>base.getFilter</span><span style=''> match {
</span>269 <span style=''>        case null | Filter.INCLUDE =&gt; </span><span style='background: #AEF1AE'>query.setFilter(filter)</span><span style=''>
</span>270 <span style=''>        case f =&gt; </span><span style='background: #AEF1AE'>query.setFilter(ff.and(f, filter))</span><span style=''>
</span>271 <span style=''>      }
</span>272 <span style=''>
</span>273 <span style=''>      query
</span>274 <span style=''>    }
</span>275 <span style=''>
</span>276 <span style=''>    /**
</span>277 <span style=''>      * Find the next window to search in an attempt to find the knn
</span>278 <span style=''>      *
</span>279 <span style=''>      * @param found number of neighbors found within the previous distance
</span>280 <span style=''>      */
</span>281 <span style=''>    private def expand(found: Int): Unit = {
</span>282 <span style=''>      // expand the window radius. algorithm derived from:
</span>283 <span style=''>      //    Efficient k Nearest Neighbor Queries on Remote Spatial Databases Using Range Estimation
</span>284 <span style=''>      //    Danzhou Liu, Ee-Peng Lim, Wee-Keong Ng
</span>285 <span style=''>      //    Centre for Advanced Information Systems, School of Computer Engineering
</span>286 <span style=''>      //    Nanyang Technological University, Singapore 639798
</span>287 <span style=''>      //    {P149571472, aseplim, awkng}@ntu.edu.sg
</span>288 <span style=''>      //  Available at: http://citeseerx.ist.psu.edu/viewdoc/download?doi=10.1.1.507.4109&amp;rep=rep1&amp;type=pdf
</span>289 <span style=''>
</span>290 <span style=''>      // note that this algorithm is fairly conservative - in their testing (using TIGER road data), it
</span>291 <span style=''>      // generally required 2-3 window expansions after the initial query in order to find the knn
</span>292 <span style=''>
</span>293 <span style=''>      </span><span style='background: #AEF1AE'>distance = if (found == 0) { distance * 2 } else {
</span>294 <span style=''></span><span style='background: #AEF1AE'>        val density = found / math.pow(2 * distance, 2)
</span>295 <span style=''></span><span style='background: #AEF1AE'>        math.sqrt(k / (math.Pi * density))
</span>296 <span style=''></span><span style='background: #AEF1AE'>      }</span><span style=''>
</span>297 <span style=''>      if (</span><span style='background: #AEF1AE'>distance &gt; threshold</span><span style=''>) {
</span>298 <span style=''>        </span><span style='background: #AEF1AE'>distance = threshold</span><span style=''>
</span>299 <span style=''>      }
</span>300 <span style=''>
</span>301 <span style=''>      val hole = </span><span style='background: #AEF1AE'>Some(envelope.envelope)</span><span style=''>
</span>302 <span style=''>      </span><span style='background: #AEF1AE'>envelope = QueryEnvelope(Envelope(p, distance, calc), hole)</span><span style=''>
</span>303 <span style=''>    }
</span>304 <span style=''>  }
</span>305 <span style=''>
</span>306 <span style=''>  /**
</span>307 <span style=''>    * Calculator for finding the k-nearest features
</span>308 <span style=''>    *
</span>309 <span style=''>    * @param query point to find neighbors for
</span>310 <span style=''>    * @param k number of neighbors to find
</span>311 <span style=''>    * @param threshold limit results to within a certain distance in meters
</span>312 <span style=''>    * @param results array of length k, used to hold results
</span>313 <span style=''>    * @param i number of features found so far, maxes out at k
</span>314 <span style=''>    */
</span>315 <span style=''>  class KnnCalculator(
</span>316 <span style=''>      query: Point,
</span>317 <span style=''>      k: Int,
</span>318 <span style=''>      threshold: Double,
</span>319 <span style=''>      results: Array[FeatureWithDistance],
</span>320 <span style=''>      private var i: Int = 0
</span>321 <span style=''>    ) extends LazyLogging {
</span>322 <span style=''>
</span>323 <span style=''>    private val calculator = </span><span style='background: #AEF1AE'>new DistanceCalculator()</span><span style=''>
</span>324 <span style=''>
</span>325 <span style=''>    // tracks the index of our current farthest value
</span>326 <span style=''>    private var fi = if (</span><span style='background: #AEF1AE'>i &lt; k</span><span style=''>) { </span><span style='background: #AEF1AE'>0</span><span style=''> } else { </span><span style='background: #F0ADAD'>farthest</span><span style=''> }
</span>327 <span style=''>
</span>328 <span style=''>    /**
</span>329 <span style=''>      * Number of features found so far
</span>330 <span style=''>      *
</span>331 <span style=''>      * @return
</span>332 <span style=''>      */
</span>333 <span style=''>    def size: Int = </span><span style='background: #F0ADAD'>i</span><span style=''>
</span>334 <span style=''>
</span>335 <span style=''>    /**
</span>336 <span style=''>      * Visit a feature, checking the distance to the query point
</span>337 <span style=''>      *
</span>338 <span style=''>      * @param feature feature
</span>339 <span style=''>      * @return None if the feature is within the threshold, otherwise Some(distance to query point)
</span>340 <span style=''>      */
</span>341 <span style=''>    def visit(feature: SimpleFeature): Option[Double] = {
</span>342 <span style=''>      </span><span style='background: #AEF1AE'>feature.getDefaultGeometry</span><span style=''> match {
</span>343 <span style=''>        case p: Point </span><span style='background: #AEF1AE'>=&gt;
</span>344 <span style=''></span><span style='background: #AEF1AE'>          val meters = calculator.meters(query, p)
</span>345 <span style=''></span><span style='background: #AEF1AE'>          if (meters &gt; threshold) {
</span>346 <span style=''></span><span style='background: #AEF1AE'>            </span><span style='background: #F0ADAD'>Some(meters)</span><span style='background: #AEF1AE'>
</span>347 <span style=''></span><span style='background: #AEF1AE'>          } else {
</span>348 <span style=''></span><span style='background: #AEF1AE'>            visit(feature, meters)
</span>349 <span style=''></span><span style='background: #AEF1AE'>            None
</span>350 <span style=''></span><span style='background: #AEF1AE'>          }</span><span style=''>
</span>351 <span style=''>
</span>352 <span style=''>        case g </span><span style='background: #F0ADAD'>=&gt; logger.warn(s&quot;KNN query not implemented for non-point geometries, skipping this feature: $g&quot;); None</span><span style=''>
</span>353 <span style=''>      }
</span>354 <span style=''>    }
</span>355 <span style=''>
</span>356 <span style=''>    /**
</span>357 <span style=''>      * Visit a feature with a known distance
</span>358 <span style=''>      *
</span>359 <span style=''>      * @param feature feature
</span>360 <span style=''>      * @param distance distance from the query point, in meters (assumed to be within the threshold)
</span>361 <span style=''>      */
</span>362 <span style=''>    def visit(feature: SimpleFeature, distance: Double): Unit = {
</span>363 <span style=''>      if (</span><span style='background: #AEF1AE'>i &lt; k</span><span style=''>) </span><span style='background: #AEF1AE'>{
</span>364 <span style=''></span><span style='background: #AEF1AE'>        // if we haven't seen k features yet, then by definition we have a nearest neighbor
</span>365 <span style=''></span><span style='background: #AEF1AE'>        results(i) = FeatureWithDistance(feature, distance)
</span>366 <span style=''></span><span style='background: #AEF1AE'>        i += 1
</span>367 <span style=''></span><span style='background: #AEF1AE'>        if (i == k) {
</span>368 <span style=''></span><span style='background: #AEF1AE'>          // if we have k elements, find the farthest feature so that we can easily check it going forward
</span>369 <span style=''></span><span style='background: #AEF1AE'>          fi = farthest
</span>370 <span style=''></span><span style='background: #AEF1AE'>        }
</span>371 <span style=''></span><span style='background: #AEF1AE'>      }</span><span style=''> else </span><span style='background: #AEF1AE'>if (distance &lt; results(fi).meters) {
</span>372 <span style=''></span><span style='background: #AEF1AE'>        // we have found a new nearest - replace the farthest, then find the new farthest
</span>373 <span style=''></span><span style='background: #AEF1AE'>        results(fi) = FeatureWithDistance(feature, distance)
</span>374 <span style=''></span><span style='background: #AEF1AE'>        fi = farthest
</span>375 <span style=''></span><span style='background: #AEF1AE'>      }</span><span style=''>
</span>376 <span style=''>    }
</span>377 <span style=''>
</span>378 <span style=''>    /**
</span>379 <span style=''>      * Gets the array index of the farthest feature. Note: assumes the result array does not contain nulls
</span>380 <span style=''>      *
</span>381 <span style=''>      * @return
</span>382 <span style=''>      */
</span>383 <span style=''>    private def farthest: Int = {
</span>384 <span style=''>      var max = </span><span style='background: #AEF1AE'>results.head.meters</span><span style=''>
</span>385 <span style=''>      var result = </span><span style='background: #AEF1AE'>0</span><span style=''>
</span>386 <span style=''>      var i = </span><span style='background: #AEF1AE'>1</span><span style=''>
</span>387 <span style=''>      while (</span><span style='background: #AEF1AE'>i &lt; results.length</span><span style=''>) </span><span style='background: #AEF1AE'>{
</span>388 <span style=''></span><span style='background: #AEF1AE'>        if (results(i).meters &gt; max) {
</span>389 <span style=''></span><span style='background: #AEF1AE'>          max = results(i).meters
</span>390 <span style=''></span><span style='background: #AEF1AE'>          result = i
</span>391 <span style=''></span><span style='background: #AEF1AE'>        }
</span>392 <span style=''></span><span style='background: #AEF1AE'>        i += 1
</span>393 <span style=''></span><span style='background: #AEF1AE'>      }</span><span style=''>
</span>394 <span style=''>      result
</span>395 <span style=''>    }
</span>396 <span style=''>  }
</span>397 <span style=''>
</span>398 <span style=''>  /**
</span>399 <span style=''>    * Holder for our ordered features
</span>400 <span style=''>    *
</span>401 <span style=''>    * @param sf simple feature
</span>402 <span style=''>    * @param meters distance in meters from the query point
</span>403 <span style=''>    */
</span>404 <span style=''>  case class FeatureWithDistance(sf: SimpleFeature, meters: Double) extends Comparable[FeatureWithDistance] {
</span>405 <span style=''>    override def compareTo(o: FeatureWithDistance): Int = </span><span style='background: #F0ADAD'>java.lang.Double.compare(meters, o.meters)</span><span style=''>
</span>406 <span style=''>  }
</span>407 <span style=''>
</span>408 <span style=''>  /**
</span>409 <span style=''>    * Holder for a query envelope
</span>410 <span style=''>    *
</span>411 <span style=''>    * @param envelope query envelope, in cartesian space
</span>412 <span style=''>    * @param hole hole covering any previously queried space
</span>413 <span style=''>    */
</span>414 <span style=''>  case class QueryEnvelope(envelope: Envelope, hole: Option[Envelope]) {
</span>415 <span style=''>
</span>416 <span style=''>    /**
</span>417 <span style=''>      * Get the envelopes for a query filter. The envelopes will exclude the hole, if present, to avoid
</span>418 <span style=''>      * returning duplicate results
</span>419 <span style=''>      *
</span>420 <span style=''>      * @return
</span>421 <span style=''>      */
</span>422 <span style=''>    def query: Seq[Envelope] = {
</span>423 <span style=''>      </span><span style='background: #AEF1AE'>hole</span><span style=''> match {
</span>424 <span style=''>        case None =&gt; </span><span style='background: #AEF1AE'>envelope.toWorld</span><span style=''>
</span>425 <span style=''>        case Some(h) </span><span style='background: #AEF1AE'>=&gt;
</span>426 <span style=''></span><span style='background: #AEF1AE'>          val holes = h.toWorld
</span>427 <span style=''></span><span style='background: #AEF1AE'>          envelope.toWorld.flatMap(e =&gt; holes.foldLeft(Seq(e)) { case (r, h) =&gt; r.flatMap(_.minus(h)) })</span><span style=''>
</span>428 <span style=''>      }
</span>429 <span style=''>    }
</span>430 <span style=''>
</span>431 <span style=''>    /**
</span>432 <span style=''>      * Gets a string useful for debugging
</span>433 <span style=''>      *
</span>434 <span style=''>      * @return
</span>435 <span style=''>      */
</span>436 <span style=''>    def debug: Seq[String] = </span><span style='background: #F0ADAD'>hole</span><span style=''> match {
</span>437 <span style=''>      case None =&gt; </span><span style='background: #F0ADAD'>Seq(envelope.debug)</span><span style=''>
</span>438 <span style=''>      case Some(h) </span><span style='background: #F0ADAD'>=&gt;
</span>439 <span style=''></span><span style='background: #F0ADAD'>        val diff = envelope.minus(h)
</span>440 <span style=''></span><span style='background: #F0ADAD'>        if (diff.isEmpty) { Seq(&quot;[empty]&quot;) } else { diff.map(_.debug) }</span><span style=''>
</span>441 <span style=''>    }
</span>442 <span style=''>  }
</span>443 <span style=''>
</span>444 <span style=''>  /**
</span>445 <span style=''>    * Simple envelope class - unlike the jts envelope, does not swap min/max values on creation
</span>446 <span style=''>    *
</span>447 <span style=''>    * @param xmin min x value
</span>448 <span style=''>    * @param xmax max x value
</span>449 <span style=''>    * @param ymin min y value
</span>450 <span style=''>    * @param ymax max y value
</span>451 <span style=''>    */
</span>452 <span style=''>  case class Envelope(xmin: Double, xmax: Double, ymin: Double, ymax: Double) {
</span>453 <span style=''>
</span>454 <span style=''>    </span><span style='background: #AEF1AE'>require(xmin &lt;= xmax &amp;&amp; ymin &lt;= ymax, </span><span style='background: #F0ADAD'>s&quot;Envelope is inverted: [$xmin, $xmax, $ymin, $ymax]&quot;</span><span style='background: #AEF1AE'>)</span><span style=''>
</span>455 <span style=''>
</span>456 <span style=''>    lazy val width: Double = xmax - xmin
</span>457 <span style=''>    lazy val height: Double = ymax - ymin
</span>458 <span style=''>
</span>459 <span style=''>    /**
</span>460 <span style=''>      * Intersection of two envelopes
</span>461 <span style=''>      *
</span>462 <span style=''>      * @param other other envelope
</span>463 <span style=''>      * @return
</span>464 <span style=''>      */
</span>465 <span style=''>    def intersection(other: Envelope): Option[Envelope] = {
</span>466 <span style=''>      val ixmin = </span><span style='background: #AEF1AE'>math.max(xmin, other.xmin)</span><span style=''>
</span>467 <span style=''>      val ixmax = </span><span style='background: #AEF1AE'>math.min(xmax, other.xmax)</span><span style=''>
</span>468 <span style=''>      if (</span><span style='background: #AEF1AE'>ixmin &gt; ixmax</span><span style=''>) { </span><span style='background: #F0ADAD'>None</span><span style=''> } else </span><span style='background: #AEF1AE'>{
</span>469 <span style=''></span><span style='background: #AEF1AE'>        val iymin = math.max(ymin, other.ymin)
</span>470 <span style=''></span><span style='background: #AEF1AE'>        val iymax = math.min(ymax, other.ymax)
</span>471 <span style=''></span><span style='background: #AEF1AE'>        if (iymin &gt; iymax) { </span><span style='background: #F0ADAD'>None</span><span style='background: #AEF1AE'> } else {
</span>472 <span style=''></span><span style='background: #AEF1AE'>          Some(Envelope(ixmin, ixmax, iymin, iymax))
</span>473 <span style=''></span><span style='background: #AEF1AE'>        }
</span>474 <span style=''></span><span style='background: #AEF1AE'>      }</span><span style=''>
</span>475 <span style=''>    }
</span>476 <span style=''>
</span>477 <span style=''>    /**
</span>478 <span style=''>      * Do the two envelopes intersect?
</span>479 <span style=''>      *
</span>480 <span style=''>      * @param other other envelope
</span>481 <span style=''>      * @return
</span>482 <span style=''>      */
</span>483 <span style=''>    def intersects(other: Envelope): Boolean =
</span>484 <span style=''>      </span><span style='background: #AEF1AE'>other.xmin &lt;= xmax &amp;&amp; other.xmax &gt;= xmin &amp;&amp; other.ymin &lt;= ymax &amp;&amp; other.ymax &gt;= ymin</span><span style=''>
</span>485 <span style=''>
</span>486 <span style=''>    /**
</span>487 <span style=''>      * Subtract an envelope from this one.
</span>488 <span style=''>      *
</span>489 <span style=''>      * The result will be 0 to 4 new envelopes. The 'top' and 'bottom' envelopes will contain corner
</span>490 <span style=''>      * intersections, if any, while the 'left' and 'right' envelopes will be trimmed around the top/bottom ones.
</span>491 <span style=''>      *
</span>492 <span style=''>      * @param other envelope to subtract
</span>493 <span style=''>      * @return
</span>494 <span style=''>      */
</span>495 <span style=''>    def minus(other: Envelope): Seq[Envelope] = {
</span>496 <span style=''>      if (</span><span style='background: #AEF1AE'>!intersects(other)</span><span style=''>) { </span><span style='background: #AEF1AE'>Seq(this)</span><span style=''> } else </span><span style='background: #AEF1AE'>{
</span>497 <span style=''></span><span style='background: #AEF1AE'>        val builder = Seq.newBuilder[Envelope]
</span>498 <span style=''></span><span style='background: #AEF1AE'>        // conditionally add top envelope, and determine ymax for left/right envelopes
</span>499 <span style=''></span><span style='background: #AEF1AE'>        val sidemax = if (other.ymax &gt;= ymax) { ymax } else {
</span>500 <span style=''></span><span style='background: #AEF1AE'>          builder += copy(ymin = other.ymax)
</span>501 <span style=''></span><span style='background: #AEF1AE'>          other.ymax
</span>502 <span style=''></span><span style='background: #AEF1AE'>        }
</span>503 <span style=''></span><span style='background: #AEF1AE'>        // conditionally add bottom envelope, and determine ymin for left/right envelopes
</span>504 <span style=''></span><span style='background: #AEF1AE'>        val sidemin = if (other.ymin &lt;= ymin) { ymin } else {
</span>505 <span style=''></span><span style='background: #AEF1AE'>          builder += copy(ymax = other.ymin)
</span>506 <span style=''></span><span style='background: #AEF1AE'>          other.ymin
</span>507 <span style=''></span><span style='background: #AEF1AE'>        }
</span>508 <span style=''></span><span style='background: #AEF1AE'>        // conditionally add left/right envelopes
</span>509 <span style=''></span><span style='background: #AEF1AE'>        if (other.xmin &gt; xmin) {
</span>510 <span style=''></span><span style='background: #AEF1AE'>          builder += copy(xmax = other.xmin, ymin = sidemin, ymax = sidemax)
</span>511 <span style=''></span><span style='background: #AEF1AE'>        }
</span>512 <span style=''></span><span style='background: #AEF1AE'>        if (other.xmax &lt; xmax) {
</span>513 <span style=''></span><span style='background: #AEF1AE'>          builder += copy(xmin = other.xmax, ymin = sidemin, ymax = sidemax)
</span>514 <span style=''></span><span style='background: #AEF1AE'>        }
</span>515 <span style=''></span><span style='background: #AEF1AE'>        builder.result
</span>516 <span style=''></span><span style='background: #AEF1AE'>      }</span><span style=''>
</span>517 <span style=''>    }
</span>518 <span style=''>
</span>519 <span style=''>    /**
</span>520 <span style=''>      * Converts any part of this envelope that extends past [-180,180,-90,90] to handle the anti-meridian and poles.
</span>521 <span style=''>      *
</span>522 <span style=''>      * Envelopes that cross the poles end up wrapping the whole longitude. Envelopes that cross the anti-meridian
</span>523 <span style=''>      * are wrapped to the other side.
</span>524 <span style=''>      *
</span>525 <span style=''>      * @return
</span>526 <span style=''>      */
</span>527 <span style=''>    def toWorld: Seq[Envelope] = {
</span>528 <span style=''>      if (</span><span style='background: #AEF1AE'>ymin &lt; -90d</span><span style=''>) {
</span>529 <span style=''>        </span><span style='background: #AEF1AE'>Seq(Envelope(-180d, 180d, -90, math.min(ymax, 90d)))</span><span style=''>
</span>530 <span style=''>      } else </span><span style='background: #AEF1AE'>if (ymax &gt; 90d) {
</span>531 <span style=''></span><span style='background: #AEF1AE'>        Seq(Envelope(-180d, 180d, math.max(ymin, -90), 90d))
</span>532 <span style=''></span><span style='background: #AEF1AE'>      } else if (width &gt;= 360d) {
</span>533 <span style=''></span><span style='background: #AEF1AE'>        Seq(copy(xmin = -180d, xmax = 180d))
</span>534 <span style=''></span><span style='background: #AEF1AE'>      } else if (xmin &lt; -180d) {
</span>535 <span style=''></span><span style='background: #AEF1AE'>        intersection(WholeWorldEnvelope) match {
</span>536 <span style=''></span><span style='background: #AEF1AE'>          case None =&gt; </span><span style='background: #F0ADAD'>Seq(copy(xmin = xmin + 360d, xmax = xmax + 360d))</span><span style='background: #AEF1AE'>
</span>537 <span style=''></span><span style='background: #AEF1AE'>          case Some(trimmed) =&gt; Seq(trimmed, copy(xmin = xmin + 360d, xmax = 180d))
</span>538 <span style=''></span><span style='background: #AEF1AE'>        }
</span>539 <span style=''></span><span style='background: #AEF1AE'>      } else if (xmax &gt; 180d) {
</span>540 <span style=''></span><span style='background: #AEF1AE'>        intersection(WholeWorldEnvelope) match {
</span>541 <span style=''></span><span style='background: #AEF1AE'>          case None =&gt; </span><span style='background: #F0ADAD'>Seq(copy(xmin = xmin - 360d, xmax = xmax - 360d))</span><span style='background: #AEF1AE'>
</span>542 <span style=''></span><span style='background: #AEF1AE'>          case Some(trimmed) =&gt; Seq(trimmed, copy(xmin = -180d, xmax = xmax - 360d))
</span>543 <span style=''></span><span style='background: #AEF1AE'>        }
</span>544 <span style=''></span><span style='background: #AEF1AE'>      } else {
</span>545 <span style=''></span><span style='background: #AEF1AE'>        Seq(this)
</span>546 <span style=''></span><span style='background: #AEF1AE'>      }</span><span style=''>
</span>547 <span style=''>    }
</span>548 <span style=''>
</span>549 <span style=''>    /**
</span>550 <span style=''>      * Create a geotools filter
</span>551 <span style=''>      *
</span>552 <span style=''>      * @param geom geometry expression
</span>553 <span style=''>      * @return
</span>554 <span style=''>      */
</span>555 <span style=''>    def toFilter(geom: PropertyName): Filter =
</span>556 <span style=''>      </span><span style='background: #AEF1AE'>ff.bbox(geom, new ReferencedEnvelope(xmin, xmax, ymin, ymax, CRS_EPSG_4326))</span><span style=''>
</span>557 <span style=''>
</span>558 <span style=''>    /**
</span>559 <span style=''>      * Convert to a JTS envelope
</span>560 <span style=''>      *
</span>561 <span style=''>      * @return
</span>562 <span style=''>      */
</span>563 <span style=''>    def toJts: org.locationtech.jts.geom.Envelope = </span><span style='background: #AEF1AE'>new org.locationtech.jts.geom.Envelope(xmin, xmax, ymin, ymax)</span><span style=''>
</span>564 <span style=''>
</span>565 <span style=''>    /**
</span>566 <span style=''>      * Debug string
</span>567 <span style=''>      *
</span>568 <span style=''>      * @return
</span>569 <span style=''>      */
</span>570 <span style=''>    def debug: String = </span><span style='background: #F0ADAD'>s&quot;[$xmin, $xmax, $ymin, $ymax]&quot;</span><span style=''>
</span>571 <span style=''>  }
</span>572 <span style=''>
</span>573 <span style=''>  object Envelope {
</span>574 <span style=''>
</span>575 <span style=''>    /**
</span>576 <span style=''>      * Create an envelope by buffering a point to an inscribed circle
</span>577 <span style=''>      *
</span>578 <span style=''>      * @param point center point
</span>579 <span style=''>      * @param buffer buffer distance, in meters
</span>580 <span style=''>      * @param calc geodetic calculator
</span>581 <span style=''>      * @return
</span>582 <span style=''>      */
</span>583 <span style=''>    def apply(point: Point, buffer: Double, calc: GeodeticCalculator): Envelope = {
</span>584 <span style=''>      val (east, north) = GeometryUtils.directionalDegrees(point, buffer, calc)
</span>585 <span style=''>      </span><span style='background: #AEF1AE'>Envelope(point.getX - east, point.getX + east, point.getY - north, point.getY + north)</span><span style=''>
</span>586 <span style=''>    }
</span>587 <span style=''>  }
</span>588 <span style=''>}
</span></pre>
          </div>
          <div class="tab-pane" id="statementlist">
            <table cellspacing="0" cellpadding="0" class="table statementlist">
      <tr>
        <th>Line</th>
        <th>Stmt Id</th>
        <th>Pos</th>
        <th>Tree</th>
        <th>Symbol</th>
        <th>Tests</th>
        <th>Code</th>
      </tr><tr>
        <td>
          74
        </td>
        <td>
          47064
        </td>
        <td>
          3689
          -
          3699
        </td>
        <td>
          ApplyImplicitView
        </td>
        <td>
          scala.Predef.Integer2int
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          scala.Predef.Integer2int(numDesired)
        </td>
      </tr><tr>
        <td>
          74
        </td>
        <td>
          47065
        </td>
        <td>
          3701
          -
          3718
        </td>
        <td>
          ApplyImplicitView
        </td>
        <td>
          scala.Predef.Double2double
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          scala.Predef.Double2double(estimatedDistance)
        </td>
      </tr><tr>
        <td>
          74
        </td>
        <td>
          47066
        </td>
        <td>
          3720
          -
          3737
        </td>
        <td>
          ApplyImplicitView
        </td>
        <td>
          scala.Predef.Double2double
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          scala.Predef.Double2double(maxSearchDistance)
        </td>
      </tr><tr>
        <td>
          74
        </td>
        <td>
          47067
        </td>
        <td>
          3659
          -
          3738
        </td>
        <td>
          Apply
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.KNNVisitor.&lt;init&gt;
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          new org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.KNNVisitor(inputFeatures, scala.Predef.Integer2int(numDesired), scala.Predef.Double2double(estimatedDistance), scala.Predef.Double2double(maxSearchDistance))
        </td>
      </tr><tr>
        <td>
          75
        </td>
        <td>
          47068
        </td>
        <td>
          3743
          -
          3796
        </td>
        <td>
          Apply
        </td>
        <td>
          org.locationtech.geomesa.index.geotools.GeoMesaFeatureCollection.visit
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          org.locationtech.geomesa.index.geotools.GeoMesaFeatureCollection.visit(dataFeatures, visitor, org.locationtech.geomesa.index.geotools.GeoMesaFeatureCollection.visit$default$3)
        </td>
      </tr><tr>
        <td>
          76
        </td>
        <td>
          47069
        </td>
        <td>
          3801
          -
          3826
        </td>
        <td>
          Select
        </td>
        <td>
          org.locationtech.geomesa.process.FeatureResult.results
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          visitor.getResult().results
        </td>
      </tr><tr>
        <td>
          82
        </td>
        <td>
          47070
        </td>
        <td>
          3909
          -
          3941
        </td>
        <td>
          Apply
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope.apply
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          KNearestNeighborSearchProcess.this.Envelope.apply(-180.0, 180.0, -90.0, 90.0)
        </td>
      </tr><tr>
        <td>
          111
        </td>
        <td>
          47071
        </td>
        <td>
          5188
          -
          5223
        </td>
        <td>
          TypeApply
        </td>
        <td>
          scala.Any.asInstanceOf
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          feature.asInstanceOf[org.geotools.api.feature.simple.SimpleFeature]
        </td>
      </tr><tr>
        <td>
          111
        </td>
        <td>
          47072
        </td>
        <td>
          5180
          -
          5224
        </td>
        <td>
          Apply
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.KnnCalculator.visit
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          x$1.visit(feature.asInstanceOf[org.geotools.api.feature.simple.SimpleFeature])
        </td>
      </tr><tr>
        <td>
          111
        </td>
        <td>
          47073
        </td>
        <td>
          5160
          -
          5225
        </td>
        <td>
          Apply
        </td>
        <td>
          scala.collection.IterableLike.foreach
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          KNNVisitor.this.calculators.foreach[Option[Double]](((x$1: org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.KnnCalculator) =&gt; x$1.visit(feature.asInstanceOf[org.geotools.api.feature.simple.SimpleFeature])))
        </td>
      </tr><tr>
        <td>
          114
        </td>
        <td>
          47074
        </td>
        <td>
          5283
          -
          5297
        </td>
        <td>
          Apply
        </td>
        <td>
          java.lang.Object.==
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          KNNVisitor.this.result.==(null)
        </td>
      </tr><tr>
        <td>
          114
        </td>
        <td>
          47086
        </td>
        <td>
          5299
          -
          5488
        </td>
        <td>
          Block
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          {
  val collection: org.geotools.feature.DefaultFeatureCollection = new org.geotools.feature.DefaultFeatureCollection();
  KNNVisitor.this.results.foreach[Unit](((x$2: Array[org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.FeatureWithDistance]) =&gt; scala.Predef.refArrayOps[org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.FeatureWithDistance](x$2).foreach[AnyVal](((r: org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.FeatureWithDistance) =&gt; if (r.!=(null))
    collection.add(r.sf)
  else
    ()))));
  KNNVisitor.this.result_=(org.locationtech.geomesa.process.FeatureResult.apply(collection))
}
        </td>
      </tr><tr>
        <td>
          114
        </td>
        <td>
          47087
        </td>
        <td>
          5279
          -
          5279
        </td>
        <td>
          Literal
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td>
          
        </td>
        <td style="background: #F0ADAD">
          ()
        </td>
      </tr><tr>
        <td>
          114
        </td>
        <td>
          47088
        </td>
        <td>
          5279
          -
          5279
        </td>
        <td>
          Block
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td>
          
        </td>
        <td style="background: #F0ADAD">
          ()
        </td>
      </tr><tr>
        <td>
          115
        </td>
        <td>
          47075
        </td>
        <td>
          5326
          -
          5356
        </td>
        <td>
          Apply
        </td>
        <td>
          org.geotools.feature.DefaultFeatureCollection.&lt;init&gt;
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          new org.geotools.feature.DefaultFeatureCollection()
        </td>
      </tr><tr>
        <td>
          116
        </td>
        <td>
          47076
        </td>
        <td>
          5400
          -
          5409
        </td>
        <td>
          Apply
        </td>
        <td>
          java.lang.Object.!=
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          r.!=(null)
        </td>
      </tr><tr>
        <td>
          116
        </td>
        <td>
          47077
        </td>
        <td>
          5428
          -
          5432
        </td>
        <td>
          Select
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.FeatureWithDistance.sf
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          r.sf
        </td>
      </tr><tr>
        <td>
          116
        </td>
        <td>
          47078
        </td>
        <td>
          5413
          -
          5433
        </td>
        <td>
          Apply
        </td>
        <td>
          org.geotools.feature.DefaultFeatureCollection.add
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          collection.add(r.sf)
        </td>
      </tr><tr>
        <td>
          116
        </td>
        <td>
          47079
        </td>
        <td>
          5413
          -
          5433
        </td>
        <td>
          Block
        </td>
        <td>
          org.geotools.feature.DefaultFeatureCollection.add
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          collection.add(r.sf)
        </td>
      </tr><tr>
        <td>
          116
        </td>
        <td>
          47080
        </td>
        <td>
          5396
          -
          5396
        </td>
        <td>
          Literal
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          ()
        </td>
      </tr><tr>
        <td>
          116
        </td>
        <td>
          47081
        </td>
        <td>
          5396
          -
          5396
        </td>
        <td>
          Block
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          ()
        </td>
      </tr><tr>
        <td>
          116
        </td>
        <td>
          47082
        </td>
        <td>
          5381
          -
          5436
        </td>
        <td>
          Apply
        </td>
        <td>
          scala.collection.IndexedSeqOptimized.foreach
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          scala.Predef.refArrayOps[org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.FeatureWithDistance](x$2).foreach[AnyVal](((r: org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.FeatureWithDistance) =&gt; if (r.!=(null))
  collection.add(r.sf)
else
  ()))
        </td>
      </tr><tr>
        <td>
          116
        </td>
        <td>
          47083
        </td>
        <td>
          5365
          -
          5437
        </td>
        <td>
          Apply
        </td>
        <td>
          scala.collection.IterableLike.foreach
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          KNNVisitor.this.results.foreach[Unit](((x$2: Array[org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.FeatureWithDistance]) =&gt; scala.Predef.refArrayOps[org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.FeatureWithDistance](x$2).foreach[AnyVal](((r: org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.FeatureWithDistance) =&gt; if (r.!=(null))
  collection.add(r.sf)
else
  ()))))
        </td>
      </tr><tr>
        <td>
          117
        </td>
        <td>
          47084
        </td>
        <td>
          5455
          -
          5480
        </td>
        <td>
          Apply
        </td>
        <td>
          org.locationtech.geomesa.process.FeatureResult.apply
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          org.locationtech.geomesa.process.FeatureResult.apply(collection)
        </td>
      </tr><tr>
        <td>
          117
        </td>
        <td>
          47085
        </td>
        <td>
          5446
          -
          5480
        </td>
        <td>
          Apply
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.KNNVisitor.result_=
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          KNNVisitor.this.result_=(org.locationtech.geomesa.process.FeatureResult.apply(collection))
        </td>
      </tr><tr>
        <td>
          119
        </td>
        <td>
          47089
        </td>
        <td>
          5495
          -
          5501
        </td>
        <td>
          Select
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.KNNVisitor.result
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          KNNVisitor.this.result
        </td>
      </tr><tr>
        <td>
          126
        </td>
        <td>
          47090
        </td>
        <td>
          5801
          -
          5831
        </td>
        <td>
          Apply
        </td>
        <td>
          org.geotools.feature.DefaultFeatureCollection.&lt;init&gt;
        </td>
        <td>
          
        </td>
        <td style="background: #F0ADAD">
          new org.geotools.feature.DefaultFeatureCollection()
        </td>
      </tr><tr>
        <td>
          127
        </td>
        <td>
          47091
        </td>
        <td>
          5861
          -
          5877
        </td>
        <td>
          Apply
        </td>
        <td>
          org.geotools.api.data.FeatureSource.getSchema
        </td>
        <td>
          
        </td>
        <td style="background: #F0ADAD">
          source.getSchema()
        </td>
      </tr><tr>
        <td>
          127
        </td>
        <td>
          47092
        </td>
        <td>
          5861
          -
          5890
        </td>
        <td>
          Select
        </td>
        <td>
          org.locationtech.geomesa.utils.geotools.RichSimpleFeatureType.RichSimpleFeatureType.getGeomField
        </td>
        <td>
          
        </td>
        <td style="background: #F0ADAD">
          org.locationtech.geomesa.utils.geotools.RichSimpleFeatureType.RichSimpleFeatureType(source.getSchema()).getGeomField
        </td>
      </tr><tr>
        <td>
          127
        </td>
        <td>
          47093
        </td>
        <td>
          5849
          -
          5891
        </td>
        <td>
          Apply
        </td>
        <td>
          org.geotools.api.filter.FilterFactory.property
        </td>
        <td>
          
        </td>
        <td style="background: #F0ADAD">
          org.locationtech.geomesa.filter.`package`.ff.property(org.locationtech.geomesa.utils.geotools.RichSimpleFeatureType.RichSimpleFeatureType(source.getSchema()).getGeomField)
        </td>
      </tr><tr>
        <td>
          132
        </td>
        <td>
          47094
        </td>
        <td>
          6079
          -
          6080
        </td>
        <td>
          Select
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.KNNVisitor.k
        </td>
        <td>
          
        </td>
        <td style="background: #F0ADAD">
          KNNVisitor.this.k
        </td>
      </tr><tr>
        <td>
          132
        </td>
        <td>
          47095
        </td>
        <td>
          6046
          -
          6081
        </td>
        <td>
          ApplyToImplicitArgs
        </td>
        <td>
          scala.Array.ofDim
        </td>
        <td>
          
        </td>
        <td style="background: #F0ADAD">
          scala.Array.ofDim[org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.FeatureWithDistance](KNNVisitor.this.k)((ClassTag.apply[org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.FeatureWithDistance](classOf[org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess$$FeatureWithDistance]): scala.reflect.ClassTag[org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.FeatureWithDistance]))
        </td>
      </tr><tr>
        <td>
          135
        </td>
        <td>
          47096
        </td>
        <td>
          6318
          -
          6365
        </td>
        <td>
          Apply
        </td>
        <td>
          java.util.LinkedList.&lt;init&gt;
        </td>
        <td>
          
        </td>
        <td style="background: #F0ADAD">
          new java.util.LinkedList[org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.FeatureWithDistance]()
        </td>
      </tr><tr>
        <td>
          138
        </td>
        <td>
          47097
        </td>
        <td>
          6469
          -
          6470
        </td>
        <td>
          Select
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.KNNVisitor.k
        </td>
        <td>
          
        </td>
        <td style="background: #F0ADAD">
          KNNVisitor.this.k
        </td>
      </tr><tr>
        <td>
          138
        </td>
        <td>
          47098
        </td>
        <td>
          6472
          -
          6477
        </td>
        <td>
          Select
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.KNNVisitor.start
        </td>
        <td>
          
        </td>
        <td style="background: #F0ADAD">
          KNNVisitor.this.start
        </td>
      </tr><tr>
        <td>
          138
        </td>
        <td>
          47099
        </td>
        <td>
          6479
          -
          6488
        </td>
        <td>
          Select
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.KNNVisitor.threshold
        </td>
        <td>
          
        </td>
        <td style="background: #F0ADAD">
          KNNVisitor.this.threshold
        </td>
      </tr><tr>
        <td>
          138
        </td>
        <td>
          47100
        </td>
        <td>
          6439
          -
          6489
        </td>
        <td>
          Apply
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.KnnWindow.&lt;init&gt;
        </td>
        <td>
          
        </td>
        <td style="background: #F0ADAD">
          new KNearestNeighborSearchProcess.this.KnnWindow(query, geom, p, KNNVisitor.this.k, KNNVisitor.this.start, KNNVisitor.this.threshold)
        </td>
      </tr><tr>
        <td>
          139
        </td>
        <td>
          47101
        </td>
        <td>
          6510
          -
          6511
        </td>
        <td>
          Literal
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td>
          
        </td>
        <td style="background: #F0ADAD">
          0
        </td>
      </tr><tr>
        <td>
          141
        </td>
        <td>
          47102
        </td>
        <td>
          6600
          -
          6604
        </td>
        <td>
          Select
        </td>
        <td>
          scala.None
        </td>
        <td>
          
        </td>
        <td style="background: #F0ADAD">
          scala.None
        </td>
      </tr><tr>
        <td>
          141
        </td>
        <td>
          47103
        </td>
        <td>
          6588
          -
          6605
        </td>
        <td>
          Apply
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.KnnWindow.next
        </td>
        <td>
          
        </td>
        <td style="background: #F0ADAD">
          window.next(scala.None)
        </td>
      </tr><tr>
        <td>
          146
        </td>
        <td>
          47104
        </td>
        <td>
          6851
          -
          6889
        </td>
        <td>
          Apply
        </td>
        <td>
          org.geotools.data.simple.SimpleFeatureCollection.features
        </td>
        <td>
          
        </td>
        <td style="background: #F0ADAD">
          source.getFeatures(initial).features()
        </td>
      </tr><tr>
        <td>
          146
        </td>
        <td>
          47118
        </td>
        <td>
          6891
          -
          6891
        </td>
        <td>
          Select
        </td>
        <td>
          org.locationtech.geomesa.utils.io.IsCloseableImplicits.closeableIsCloseable
        </td>
        <td>
          
        </td>
        <td style="background: #F0ADAD">
          io.this.IsCloseable.closeableIsCloseable
        </td>
      </tr><tr>
        <td>
          146
        </td>
        <td>
          47119
        </td>
        <td>
          6841
          -
          7339
        </td>
        <td>
          ApplyToImplicitArgs
        </td>
        <td>
          org.locationtech.geomesa.utils.io.WithClose.apply
        </td>
        <td>
          
        </td>
        <td style="background: #F0ADAD">
          org.locationtech.geomesa.utils.io.`package`.WithClose.apply[org.geotools.data.simple.SimpleFeatureIterator, Unit](source.getFeatures(initial).features())(((iter: org.geotools.data.simple.SimpleFeatureIterator) =&gt; {
  val knn: org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.KnnCalculator = new KNearestNeighborSearchProcess.this.KnnCalculator(p, KNNVisitor.this.k, window.radius, results, KNearestNeighborSearchProcess.this.KnnCalculator.&lt;init&gt;$default$5);
  while$1(){
    if (iter.hasNext())
      {
        {
          val sf: org.geotools.api.feature.simple.SimpleFeature = iter.next();
          knn.visit(sf).foreach[Boolean](((d: Double) =&gt; overflow.add(KNearestNeighborSearchProcess.this.FeatureWithDistance.apply(sf, d))))
        };
        while$1()
      }
    else
      ()
  };
  found = knn.size
}))(io.this.IsCloseable.closeableIsCloseable)
        </td>
      </tr><tr>
        <td>
          148
        </td>
        <td>
          47105
        </td>
        <td>
          7008
          -
          7009
        </td>
        <td>
          Select
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.KNNVisitor.k
        </td>
        <td>
          
        </td>
        <td style="background: #F0ADAD">
          KNNVisitor.this.k
        </td>
      </tr><tr>
        <td>
          148
        </td>
        <td>
          47106
        </td>
        <td>
          7011
          -
          7024
        </td>
        <td>
          Select
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.KnnWindow.radius
        </td>
        <td>
          
        </td>
        <td style="background: #F0ADAD">
          window.radius
        </td>
      </tr><tr>
        <td>
          148
        </td>
        <td>
          47107
        </td>
        <td>
          6987
          -
          7034
        </td>
        <td>
          Apply
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.KnnCalculator.&lt;init&gt;
        </td>
        <td>
          
        </td>
        <td style="background: #F0ADAD">
          new KNearestNeighborSearchProcess.this.KnnCalculator(p, KNNVisitor.this.k, window.radius, results, KNearestNeighborSearchProcess.this.KnnCalculator.&lt;init&gt;$default$5)
        </td>
      </tr><tr>
        <td>
          149
        </td>
        <td>
          47108
        </td>
        <td>
          7052
          -
          7064
        </td>
        <td>
          Apply
        </td>
        <td>
          org.geotools.feature.FeatureIterator.hasNext
        </td>
        <td>
          
        </td>
        <td style="background: #F0ADAD">
          iter.hasNext()
        </td>
      </tr><tr>
        <td>
          149
        </td>
        <td>
          47113
        </td>
        <td>
          7066
          -
          7066
        </td>
        <td>
          Apply
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.KNNVisitor.while$1
        </td>
        <td>
          
        </td>
        <td style="background: #F0ADAD">
          while$1()
        </td>
      </tr><tr>
        <td>
          149
        </td>
        <td>
          47114
        </td>
        <td>
          7066
          -
          7302
        </td>
        <td>
          Block
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td>
          
        </td>
        <td style="background: #F0ADAD">
          {
  {
    val sf: org.geotools.api.feature.simple.SimpleFeature = iter.next();
    knn.visit(sf).foreach[Boolean](((d: Double) =&gt; overflow.add(KNearestNeighborSearchProcess.this.FeatureWithDistance.apply(sf, d))))
  };
  while$1()
}
        </td>
      </tr><tr>
        <td>
          149
        </td>
        <td>
          47115
        </td>
        <td>
          7045
          -
          7045
        </td>
        <td>
          Literal
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td>
          
        </td>
        <td style="background: #F0ADAD">
          ()
        </td>
      </tr><tr>
        <td>
          149
        </td>
        <td>
          47116
        </td>
        <td>
          7045
          -
          7045
        </td>
        <td>
          Block
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td>
          
        </td>
        <td style="background: #F0ADAD">
          ()
        </td>
      </tr><tr>
        <td>
          150
        </td>
        <td>
          47109
        </td>
        <td>
          7089
          -
          7098
        </td>
        <td>
          Apply
        </td>
        <td>
          org.geotools.feature.FeatureIterator.next
        </td>
        <td>
          
        </td>
        <td style="background: #F0ADAD">
          iter.next()
        </td>
      </tr><tr>
        <td>
          152
        </td>
        <td>
          47110
        </td>
        <td>
          7262
          -
          7288
        </td>
        <td>
          Apply
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.FeatureWithDistance.apply
        </td>
        <td>
          
        </td>
        <td style="background: #F0ADAD">
          KNearestNeighborSearchProcess.this.FeatureWithDistance.apply(sf, d)
        </td>
      </tr><tr>
        <td>
          152
        </td>
        <td>
          47111
        </td>
        <td>
          7249
          -
          7289
        </td>
        <td>
          Apply
        </td>
        <td>
          java.util.LinkedList.add
        </td>
        <td>
          
        </td>
        <td style="background: #F0ADAD">
          overflow.add(KNearestNeighborSearchProcess.this.FeatureWithDistance.apply(sf, d))
        </td>
      </tr><tr>
        <td>
          152
        </td>
        <td>
          47112
        </td>
        <td>
          7222
          -
          7290
        </td>
        <td>
          Apply
        </td>
        <td>
          scala.Option.foreach
        </td>
        <td>
          
        </td>
        <td style="background: #F0ADAD">
          knn.visit(sf).foreach[Boolean](((d: Double) =&gt; overflow.add(KNearestNeighborSearchProcess.this.FeatureWithDistance.apply(sf, d))))
        </td>
      </tr><tr>
        <td>
          154
        </td>
        <td>
          47117
        </td>
        <td>
          7321
          -
          7329
        </td>
        <td>
          Select
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.KnnCalculator.size
        </td>
        <td>
          
        </td>
        <td style="background: #F0ADAD">
          knn.size
        </td>
      </tr><tr>
        <td>
          157
        </td>
        <td>
          47120
        </td>
        <td>
          7365
          -
          7366
        </td>
        <td>
          Literal
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td>
          
        </td>
        <td style="background: #F0ADAD">
          1
        </td>
      </tr><tr>
        <td>
          160
        </td>
        <td>
          47121
        </td>
        <td>
          7512
          -
          7513
        </td>
        <td>
          Select
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.KNNVisitor.k
        </td>
        <td>
          
        </td>
        <td style="background: #F0ADAD">
          KNNVisitor.this.k
        </td>
      </tr><tr>
        <td>
          160
        </td>
        <td>
          47122
        </td>
        <td>
          7517
          -
          7531
        </td>
        <td>
          Select
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.KnnWindow.hasNext
        </td>
        <td>
          
        </td>
        <td style="background: #F0ADAD">
          window.hasNext
        </td>
      </tr><tr>
        <td>
          160
        </td>
        <td>
          47123
        </td>
        <td>
          7504
          -
          7531
        </td>
        <td>
          Apply
        </td>
        <td>
          scala.Boolean.&amp;&amp;
        </td>
        <td>
          
        </td>
        <td style="background: #F0ADAD">
          found.&lt;(KNNVisitor.this.k).&amp;&amp;(window.hasNext)
        </td>
      </tr><tr>
        <td>
          160
        </td>
        <td>
          47159
        </td>
        <td>
          7533
          -
          7533
        </td>
        <td>
          Apply
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.KNNVisitor.while$4
        </td>
        <td>
          
        </td>
        <td style="background: #F0ADAD">
          while$4()
        </td>
      </tr><tr>
        <td>
          160
        </td>
        <td>
          47160
        </td>
        <td>
          7533
          -
          9021
        </td>
        <td>
          Block
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td>
          
        </td>
        <td style="background: #F0ADAD">
          {
  {
    val last: Double = window.radius;
    val next: org.geotools.api.data.Query = window.next(scala.Some.apply[Int](found));
    (if (KNNVisitor.this.logger.underlying.isDebugEnabled())
      KNNVisitor.this.logger.underlying.debug(scala.StringContext.apply(&quot;Expanding search at (&quot;, &quot; &quot;, &quot;) from &quot;, &quot; to &quot;, &quot; meters &quot;).s(p.getX(), p.getY(), last, window.radius).+(scala.StringContext.apply(&quot;based on finding &quot;, &quot;/&quot;, &quot; neighbors&quot;).s(found, KNNVisitor.this.k)))
    else
      (): Unit);
    (if (KNNVisitor.this.logger.underlying.isTraceEnabled())
      KNNVisitor.this.logger.underlying.trace(&quot;Current query window:\n  {}&quot;, (window.window.debug.mkString(&quot;\n  &quot;): AnyRef))
    else
      (): Unit);
    (if (KNNVisitor.this.logger.underlying.isTraceEnabled())
      KNNVisitor.this.logger.underlying.trace(&quot;Current filter: {}&quot;, (org.geotools.filter.text.ecql.ECQL.toCQL(next.getFilter()): AnyRef))
    else
      (): Unit);
    val knn: org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.KnnCalculator = new KNearestNeighborSearchProcess.this.KnnCalculator(p, KNNVisitor.this.k, window.radius, results, found);
    val iter: java.util.Iterator[org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.FeatureWithDistance] = overflow.iterator();
    while$2(){
      if (iter.hasNext())
        {
          {
            &lt;synthetic&gt; &lt;artifact&gt; private[this] val x$3: (org.geotools.api.feature.simple.SimpleFeature, Double) = (iter.next(): org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.FeatureWithDistance @unchecked) match {
              case (sf: org.geotools.api.feature.simple.SimpleFeature, meters: Double)org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.FeatureWithDistance((sf @ _), (d @ _)) =&gt; scala.Tuple2.apply[org.geotools.api.feature.simple.SimpleFeature, Double](sf, d)
            };
            val sf: org.geotools.api.feature.simple.SimpleFeature = x$3._1;
            val d: Double = x$3._2;
            if (d.&lt;=(window.radius))
              {
                knn.visit(sf, d);
                iter.remove()
              }
            else
              ()
          };
          while$2()
        }
      else
        ()
    };
    org.locationtech.geomesa.utils.io.`package`.WithClose.apply[org.geotools.data.simple.SimpleFeatureIterator, Unit](source.getFeatures(next).features())(((iter: org.geotools.data.simple.SimpleFeatureIterator) =&gt; {
      while$3(){
        if (iter.hasNext())
          {
            {
              val sf: org.geotools.api.feature.simple.SimpleFeature = iter.next();
              knn.visit(sf).foreach[Boolean](((d: Double) =&gt; overflow.add(KNearestNeighborSearchProcess.this.FeatureWithDistance.apply(sf, d))))
            };
            while$3()
          }
        else
          ()
      };
      found = knn.size
    }))(io.this.IsCloseable.closeableIsCloseable);
    iteration = iteration.+(1)
  };
  while$4()
}
        </td>
      </tr><tr>
        <td>
          160
        </td>
        <td>
          47161
        </td>
        <td>
          7497
          -
          7497
        </td>
        <td>
          Literal
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td>
          
        </td>
        <td style="background: #F0ADAD">
          ()
        </td>
      </tr><tr>
        <td>
          160
        </td>
        <td>
          47162
        </td>
        <td>
          7497
          -
          7497
        </td>
        <td>
          Block
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td>
          
        </td>
        <td style="background: #F0ADAD">
          ()
        </td>
      </tr><tr>
        <td>
          161
        </td>
        <td>
          47124
        </td>
        <td>
          7556
          -
          7569
        </td>
        <td>
          Select
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.KnnWindow.radius
        </td>
        <td>
          
        </td>
        <td style="background: #F0ADAD">
          window.radius
        </td>
      </tr><tr>
        <td>
          163
        </td>
        <td>
          47125
        </td>
        <td>
          7689
          -
          7700
        </td>
        <td>
          Apply
        </td>
        <td>
          scala.Some.apply
        </td>
        <td>
          
        </td>
        <td style="background: #F0ADAD">
          scala.Some.apply[Int](found)
        </td>
      </tr><tr>
        <td>
          163
        </td>
        <td>
          47126
        </td>
        <td>
          7677
          -
          7701
        </td>
        <td>
          Apply
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.KnnWindow.next
        </td>
        <td>
          
        </td>
        <td style="background: #F0ADAD">
          window.next(scala.Some.apply[Int](found))
        </td>
      </tr><tr>
        <td>
          171
        </td>
        <td>
          47127
        </td>
        <td>
          8185
          -
          8186
        </td>
        <td>
          Select
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.KNNVisitor.k
        </td>
        <td>
          
        </td>
        <td style="background: #F0ADAD">
          KNNVisitor.this.k
        </td>
      </tr><tr>
        <td>
          171
        </td>
        <td>
          47128
        </td>
        <td>
          8188
          -
          8201
        </td>
        <td>
          Select
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.KnnWindow.radius
        </td>
        <td>
          
        </td>
        <td style="background: #F0ADAD">
          window.radius
        </td>
      </tr><tr>
        <td>
          171
        </td>
        <td>
          47129
        </td>
        <td>
          8164
          -
          8218
        </td>
        <td>
          Apply
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.KnnCalculator.&lt;init&gt;
        </td>
        <td>
          
        </td>
        <td style="background: #F0ADAD">
          new KNearestNeighborSearchProcess.this.KnnCalculator(p, KNNVisitor.this.k, window.radius, results, found)
        </td>
      </tr><tr>
        <td>
          173
        </td>
        <td>
          47130
        </td>
        <td>
          8335
          -
          8354
        </td>
        <td>
          Apply
        </td>
        <td>
          java.util.AbstractSequentialList.iterator
        </td>
        <td>
          
        </td>
        <td style="background: #F0ADAD">
          overflow.iterator()
        </td>
      </tr><tr>
        <td>
          174
        </td>
        <td>
          47131
        </td>
        <td>
          8372
          -
          8384
        </td>
        <td>
          Apply
        </td>
        <td>
          java.util.Iterator.hasNext
        </td>
        <td>
          
        </td>
        <td style="background: #F0ADAD">
          iter.hasNext()
        </td>
      </tr><tr>
        <td>
          174
        </td>
        <td>
          47141
        </td>
        <td>
          8386
          -
          8386
        </td>
        <td>
          Apply
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.KNNVisitor.while$2
        </td>
        <td>
          
        </td>
        <td style="background: #F0ADAD">
          while$2()
        </td>
      </tr><tr>
        <td>
          174
        </td>
        <td>
          47142
        </td>
        <td>
          8386
          -
          8567
        </td>
        <td>
          Block
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td>
          
        </td>
        <td style="background: #F0ADAD">
          {
  {
    &lt;synthetic&gt; &lt;artifact&gt; private[this] val x$3: (org.geotools.api.feature.simple.SimpleFeature, Double) = (iter.next(): org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.FeatureWithDistance @unchecked) match {
      case (sf: org.geotools.api.feature.simple.SimpleFeature, meters: Double)org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.FeatureWithDistance((sf @ _), (d @ _)) =&gt; scala.Tuple2.apply[org.geotools.api.feature.simple.SimpleFeature, Double](sf, d)
    };
    val sf: org.geotools.api.feature.simple.SimpleFeature = x$3._1;
    val d: Double = x$3._2;
    if (d.&lt;=(window.radius))
      {
        knn.visit(sf, d);
        iter.remove()
      }
    else
      ()
  };
  while$2()
}
        </td>
      </tr><tr>
        <td>
          174
        </td>
        <td>
          47143
        </td>
        <td>
          8365
          -
          8365
        </td>
        <td>
          Literal
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td>
          
        </td>
        <td style="background: #F0ADAD">
          ()
        </td>
      </tr><tr>
        <td>
          174
        </td>
        <td>
          47144
        </td>
        <td>
          8365
          -
          8365
        </td>
        <td>
          Block
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td>
          
        </td>
        <td style="background: #F0ADAD">
          ()
        </td>
      </tr><tr>
        <td>
          175
        </td>
        <td>
          47132
        </td>
        <td>
          8424
          -
          8424
        </td>
        <td>
          Select
        </td>
        <td>
          scala.Tuple2._1
        </td>
        <td>
          
        </td>
        <td style="background: #F0ADAD">
          x$3._1
        </td>
      </tr><tr>
        <td>
          175
        </td>
        <td>
          47133
        </td>
        <td>
          8428
          -
          8428
        </td>
        <td>
          Select
        </td>
        <td>
          scala.Tuple2._2
        </td>
        <td>
          
        </td>
        <td style="background: #F0ADAD">
          x$3._2
        </td>
      </tr><tr>
        <td>
          176
        </td>
        <td>
          47134
        </td>
        <td>
          8466
          -
          8479
        </td>
        <td>
          Select
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.KnnWindow.radius
        </td>
        <td>
          
        </td>
        <td style="background: #F0ADAD">
          window.radius
        </td>
      </tr><tr>
        <td>
          176
        </td>
        <td>
          47135
        </td>
        <td>
          8461
          -
          8479
        </td>
        <td>
          Apply
        </td>
        <td>
          scala.Double.&lt;=
        </td>
        <td>
          
        </td>
        <td style="background: #F0ADAD">
          d.&lt;=(window.radius)
        </td>
      </tr><tr>
        <td>
          176
        </td>
        <td>
          47138
        </td>
        <td>
          8481
          -
          8555
        </td>
        <td>
          Block
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td>
          
        </td>
        <td style="background: #F0ADAD">
          {
  knn.visit(sf, d);
  iter.remove()
}
        </td>
      </tr><tr>
        <td>
          176
        </td>
        <td>
          47139
        </td>
        <td>
          8457
          -
          8457
        </td>
        <td>
          Literal
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td>
          
        </td>
        <td style="background: #F0ADAD">
          ()
        </td>
      </tr><tr>
        <td>
          176
        </td>
        <td>
          47140
        </td>
        <td>
          8457
          -
          8457
        </td>
        <td>
          Block
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td>
          
        </td>
        <td style="background: #F0ADAD">
          ()
        </td>
      </tr><tr>
        <td>
          177
        </td>
        <td>
          47136
        </td>
        <td>
          8497
          -
          8513
        </td>
        <td>
          Apply
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.KnnCalculator.visit
        </td>
        <td>
          
        </td>
        <td style="background: #F0ADAD">
          knn.visit(sf, d)
        </td>
      </tr><tr>
        <td>
          178
        </td>
        <td>
          47137
        </td>
        <td>
          8528
          -
          8541
        </td>
        <td>
          Apply
        </td>
        <td>
          java.util.Iterator.remove
        </td>
        <td>
          
        </td>
        <td style="background: #F0ADAD">
          iter.remove()
        </td>
      </tr><tr>
        <td>
          183
        </td>
        <td>
          47145
        </td>
        <td>
          8620
          -
          8655
        </td>
        <td>
          Apply
        </td>
        <td>
          org.geotools.data.simple.SimpleFeatureCollection.features
        </td>
        <td>
          
        </td>
        <td style="background: #F0ADAD">
          source.getFeatures(next).features()
        </td>
      </tr><tr>
        <td>
          183
        </td>
        <td>
          47156
        </td>
        <td>
          8657
          -
          8657
        </td>
        <td>
          Select
        </td>
        <td>
          org.locationtech.geomesa.utils.io.IsCloseableImplicits.closeableIsCloseable
        </td>
        <td>
          
        </td>
        <td style="background: #F0ADAD">
          io.this.IsCloseable.closeableIsCloseable
        </td>
      </tr><tr>
        <td>
          183
        </td>
        <td>
          47157
        </td>
        <td>
          8610
          -
          8985
        </td>
        <td>
          ApplyToImplicitArgs
        </td>
        <td>
          org.locationtech.geomesa.utils.io.WithClose.apply
        </td>
        <td>
          
        </td>
        <td style="background: #F0ADAD">
          org.locationtech.geomesa.utils.io.`package`.WithClose.apply[org.geotools.data.simple.SimpleFeatureIterator, Unit](source.getFeatures(next).features())(((iter: org.geotools.data.simple.SimpleFeatureIterator) =&gt; {
  while$3(){
    if (iter.hasNext())
      {
        {
          val sf: org.geotools.api.feature.simple.SimpleFeature = iter.next();
          knn.visit(sf).foreach[Boolean](((d: Double) =&gt; overflow.add(KNearestNeighborSearchProcess.this.FeatureWithDistance.apply(sf, d))))
        };
        while$3()
      }
    else
      ()
  };
  found = knn.size
}))(io.this.IsCloseable.closeableIsCloseable)
        </td>
      </tr><tr>
        <td>
          184
        </td>
        <td>
          47146
        </td>
        <td>
          8686
          -
          8698
        </td>
        <td>
          Apply
        </td>
        <td>
          org.geotools.feature.FeatureIterator.hasNext
        </td>
        <td>
          
        </td>
        <td style="background: #F0ADAD">
          iter.hasNext()
        </td>
      </tr><tr>
        <td>
          184
        </td>
        <td>
          47151
        </td>
        <td>
          8700
          -
          8700
        </td>
        <td>
          Apply
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.KNNVisitor.while$3
        </td>
        <td>
          
        </td>
        <td style="background: #F0ADAD">
          while$3()
        </td>
      </tr><tr>
        <td>
          184
        </td>
        <td>
          47152
        </td>
        <td>
          8700
          -
          8944
        </td>
        <td>
          Block
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td>
          
        </td>
        <td style="background: #F0ADAD">
          {
  {
    val sf: org.geotools.api.feature.simple.SimpleFeature = iter.next();
    knn.visit(sf).foreach[Boolean](((d: Double) =&gt; overflow.add(KNearestNeighborSearchProcess.this.FeatureWithDistance.apply(sf, d))))
  };
  while$3()
}
        </td>
      </tr><tr>
        <td>
          184
        </td>
        <td>
          47153
        </td>
        <td>
          8679
          -
          8679
        </td>
        <td>
          Literal
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td>
          
        </td>
        <td style="background: #F0ADAD">
          ()
        </td>
      </tr><tr>
        <td>
          184
        </td>
        <td>
          47154
        </td>
        <td>
          8679
          -
          8679
        </td>
        <td>
          Block
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td>
          
        </td>
        <td style="background: #F0ADAD">
          ()
        </td>
      </tr><tr>
        <td>
          185
        </td>
        <td>
          47147
        </td>
        <td>
          8725
          -
          8734
        </td>
        <td>
          Apply
        </td>
        <td>
          org.geotools.feature.FeatureIterator.next
        </td>
        <td>
          
        </td>
        <td style="background: #F0ADAD">
          iter.next()
        </td>
      </tr><tr>
        <td>
          187
        </td>
        <td>
          47148
        </td>
        <td>
          8902
          -
          8928
        </td>
        <td>
          Apply
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.FeatureWithDistance.apply
        </td>
        <td>
          
        </td>
        <td style="background: #F0ADAD">
          KNearestNeighborSearchProcess.this.FeatureWithDistance.apply(sf, d)
        </td>
      </tr><tr>
        <td>
          187
        </td>
        <td>
          47149
        </td>
        <td>
          8889
          -
          8929
        </td>
        <td>
          Apply
        </td>
        <td>
          java.util.LinkedList.add
        </td>
        <td>
          
        </td>
        <td style="background: #F0ADAD">
          overflow.add(KNearestNeighborSearchProcess.this.FeatureWithDistance.apply(sf, d))
        </td>
      </tr><tr>
        <td>
          187
        </td>
        <td>
          47150
        </td>
        <td>
          8862
          -
          8930
        </td>
        <td>
          Apply
        </td>
        <td>
          scala.Option.foreach
        </td>
        <td>
          
        </td>
        <td style="background: #F0ADAD">
          knn.visit(sf).foreach[Boolean](((d: Double) =&gt; overflow.add(KNearestNeighborSearchProcess.this.FeatureWithDistance.apply(sf, d))))
        </td>
      </tr><tr>
        <td>
          189
        </td>
        <td>
          47155
        </td>
        <td>
          8965
          -
          8973
        </td>
        <td>
          Select
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.KnnCalculator.size
        </td>
        <td>
          
        </td>
        <td style="background: #F0ADAD">
          knn.size
        </td>
      </tr><tr>
        <td>
          192
        </td>
        <td>
          47158
        </td>
        <td>
          8997
          -
          9011
        </td>
        <td>
          Apply
        </td>
        <td>
          scala.Int.+
        </td>
        <td>
          
        </td>
        <td style="background: #F0ADAD">
          iteration.+(1)
        </td>
      </tr><tr>
        <td>
          200
        </td>
        <td>
          47172
        </td>
        <td>
          9316
          -
          9474
        </td>
        <td>
          Apply
        </td>
        <td>
          java.lang.Object.synchronized
        </td>
        <td>
          
        </td>
        <td style="background: #F0ADAD">
          collection.synchronized[Unit]({
  var i: Int = 0;
  while$5(){
    if (i.&lt;(found))
      {
        {
          collection.add(results.apply(i).sf);
          i = i.+(1)
        };
        while$5()
      }
    else
      ()
  }
})
        </td>
      </tr><tr>
        <td>
          201
        </td>
        <td>
          47163
        </td>
        <td>
          9360
          -
          9361
        </td>
        <td>
          Literal
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td>
          
        </td>
        <td style="background: #F0ADAD">
          0
        </td>
      </tr><tr>
        <td>
          202
        </td>
        <td>
          47164
        </td>
        <td>
          9379
          -
          9388
        </td>
        <td>
          Apply
        </td>
        <td>
          scala.Int.&lt;
        </td>
        <td>
          
        </td>
        <td style="background: #F0ADAD">
          i.&lt;(found)
        </td>
      </tr><tr>
        <td>
          202
        </td>
        <td>
          47168
        </td>
        <td>
          9390
          -
          9390
        </td>
        <td>
          Apply
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.KNNVisitor.while$5
        </td>
        <td>
          
        </td>
        <td style="background: #F0ADAD">
          while$5()
        </td>
      </tr><tr>
        <td>
          202
        </td>
        <td>
          47169
        </td>
        <td>
          9390
          -
          9464
        </td>
        <td>
          Block
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td>
          
        </td>
        <td style="background: #F0ADAD">
          {
  {
    collection.add(results.apply(i).sf);
    i = i.+(1)
  };
  while$5()
}
        </td>
      </tr><tr>
        <td>
          202
        </td>
        <td>
          47170
        </td>
        <td>
          9372
          -
          9372
        </td>
        <td>
          Literal
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td>
          
        </td>
        <td style="background: #F0ADAD">
          ()
        </td>
      </tr><tr>
        <td>
          202
        </td>
        <td>
          47171
        </td>
        <td>
          9372
          -
          9372
        </td>
        <td>
          Block
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td>
          
        </td>
        <td style="background: #F0ADAD">
          ()
        </td>
      </tr><tr>
        <td>
          203
        </td>
        <td>
          47165
        </td>
        <td>
          9419
          -
          9432
        </td>
        <td>
          Select
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.FeatureWithDistance.sf
        </td>
        <td>
          
        </td>
        <td style="background: #F0ADAD">
          results.apply(i).sf
        </td>
      </tr><tr>
        <td>
          203
        </td>
        <td>
          47166
        </td>
        <td>
          9404
          -
          9433
        </td>
        <td>
          Apply
        </td>
        <td>
          org.geotools.feature.DefaultFeatureCollection.add
        </td>
        <td>
          
        </td>
        <td style="background: #F0ADAD">
          collection.add(results.apply(i).sf)
        </td>
      </tr><tr>
        <td>
          204
        </td>
        <td>
          47167
        </td>
        <td>
          9446
          -
          9452
        </td>
        <td>
          Apply
        </td>
        <td>
          scala.Int.+
        </td>
        <td>
          
        </td>
        <td style="background: #F0ADAD">
          i.+(1)
        </td>
      </tr><tr>
        <td>
          209
        </td>
        <td>
          47173
        </td>
        <td>
          9544
          -
          9550
        </td>
        <td>
          Apply
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.KNNVisitor.run
        </td>
        <td>
          
        </td>
        <td style="background: #F0ADAD">
          run(p)
        </td>
      </tr><tr>
        <td>
          209
        </td>
        <td>
          47174
        </td>
        <td>
          9514
          -
          9551
        </td>
        <td>
          Apply
        </td>
        <td>
          org.locationtech.geomesa.utils.concurrent.CachedThreadPool.submit
        </td>
        <td>
          
        </td>
        <td style="background: #F0ADAD">
          org.locationtech.geomesa.utils.concurrent.CachedThreadPool.submit((() =&gt; run(p)))
        </td>
      </tr><tr>
        <td>
          209
        </td>
        <td>
          47175
        </td>
        <td>
          9508
          -
          9508
        </td>
        <td>
          TypeApply
        </td>
        <td>
          scala.collection.immutable.List.canBuildFrom
        </td>
        <td>
          
        </td>
        <td style="background: #F0ADAD">
          immutable.this.List.canBuildFrom[java.util.concurrent.Future[_]]
        </td>
      </tr><tr>
        <td>
          209
        </td>
        <td>
          47176
        </td>
        <td>
          9561
          -
          9566
        </td>
        <td>
          Apply
        </td>
        <td>
          java.util.concurrent.Future.get
        </td>
        <td>
          
        </td>
        <td style="background: #F0ADAD">
          x$5.get()
        </td>
      </tr><tr>
        <td>
          209
        </td>
        <td>
          47177
        </td>
        <td>
          9490
          -
          9567
        </td>
        <td>
          Apply
        </td>
        <td>
          scala.collection.immutable.List.foreach
        </td>
        <td>
          
        </td>
        <td style="background: #F0ADAD">
          KNNVisitor.this.queries.toList.map[java.util.concurrent.Future[_], List[java.util.concurrent.Future[_]]](((p: org.locationtech.jts.geom.Point) =&gt; org.locationtech.geomesa.utils.concurrent.CachedThreadPool.submit((() =&gt; run(p)))))(immutable.this.List.canBuildFrom[java.util.concurrent.Future[_]]).foreach[Any](((x$5: java.util.concurrent.Future[_]) =&gt; x$5.get()))
        </td>
      </tr><tr>
        <td>
          211
        </td>
        <td>
          47178
        </td>
        <td>
          9589
          -
          9614
        </td>
        <td>
          Apply
        </td>
        <td>
          org.locationtech.geomesa.process.FeatureResult.apply
        </td>
        <td>
          
        </td>
        <td style="background: #F0ADAD">
          org.locationtech.geomesa.process.FeatureResult.apply(collection)
        </td>
      </tr><tr>
        <td>
          211
        </td>
        <td>
          47179
        </td>
        <td>
          9575
          -
          9614
        </td>
        <td>
          Apply
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.KNNVisitor.result_=
        </td>
        <td>
          
        </td>
        <td style="background: #F0ADAD">
          this.result_=(org.locationtech.geomesa.process.FeatureResult.apply(collection))
        </td>
      </tr><tr>
        <td>
          227
        </td>
        <td>
          47180
        </td>
        <td>
          10081
          -
          10105
        </td>
        <td>
          Apply
        </td>
        <td>
          org.geotools.referencing.GeodeticCalculator.&lt;init&gt;
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          new org.geotools.referencing.GeodeticCalculator()
        </td>
      </tr><tr>
        <td>
          228
        </td>
        <td>
          47181
        </td>
        <td>
          10133
          -
          10138
        </td>
        <td>
          Select
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.KnnWindow.start
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          KnnWindow.this.start
        </td>
      </tr><tr>
        <td>
          231
        </td>
        <td>
          47182
        </td>
        <td>
          10279
          -
          10280
        </td>
        <td>
          Select
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.KnnWindow.p
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          KnnWindow.this.p
        </td>
      </tr><tr>
        <td>
          231
        </td>
        <td>
          47183
        </td>
        <td>
          10282
          -
          10290
        </td>
        <td>
          Select
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.KnnWindow.distance
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          KnnWindow.this.distance
        </td>
      </tr><tr>
        <td>
          231
        </td>
        <td>
          47184
        </td>
        <td>
          10292
          -
          10296
        </td>
        <td>
          Select
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.KnnWindow.calc
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          KnnWindow.this.calc
        </td>
      </tr><tr>
        <td>
          231
        </td>
        <td>
          47185
        </td>
        <td>
          10270
          -
          10297
        </td>
        <td>
          Apply
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope.apply
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          KNearestNeighborSearchProcess.this.Envelope.apply(KnnWindow.this.p, KnnWindow.this.distance, KnnWindow.this.calc)
        </td>
      </tr><tr>
        <td>
          231
        </td>
        <td>
          47186
        </td>
        <td>
          10299
          -
          10303
        </td>
        <td>
          Select
        </td>
        <td>
          scala.None
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          scala.None
        </td>
      </tr><tr>
        <td>
          231
        </td>
        <td>
          47187
        </td>
        <td>
          10256
          -
          10304
        </td>
        <td>
          Apply
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.QueryEnvelope.apply
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          KNearestNeighborSearchProcess.this.QueryEnvelope.apply(KNearestNeighborSearchProcess.this.Envelope.apply(KnnWindow.this.p, KnnWindow.this.distance, KnnWindow.this.calc), scala.None)
        </td>
      </tr><tr>
        <td>
          238
        </td>
        <td>
          47188
        </td>
        <td>
          10413
          -
          10421
        </td>
        <td>
          Select
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.KnnWindow.distance
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          KnnWindow.this.distance
        </td>
      </tr><tr>
        <td>
          245
        </td>
        <td>
          47189
        </td>
        <td>
          10537
          -
          10545
        </td>
        <td>
          Select
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.KnnWindow.envelope
        </td>
        <td>
          
        </td>
        <td style="background: #F0ADAD">
          KnnWindow.this.envelope
        </td>
      </tr><tr>
        <td>
          252
        </td>
        <td>
          47190
        </td>
        <td>
          10693
          -
          10702
        </td>
        <td>
          Select
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.KnnWindow.threshold
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          KnnWindow.this.threshold
        </td>
      </tr><tr>
        <td>
          252
        </td>
        <td>
          47191
        </td>
        <td>
          10682
          -
          10702
        </td>
        <td>
          Apply
        </td>
        <td>
          scala.Double.&lt;
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          KnnWindow.this.distance.&lt;(KnnWindow.this.threshold)
        </td>
      </tr><tr>
        <td>
          261
        </td>
        <td>
          47192
        </td>
        <td>
          10931
          -
          10937
        </td>
        <td>
          Apply
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.KnnWindow.expand
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          KnnWindow.this.expand(found)
        </td>
      </tr><tr>
        <td>
          261
        </td>
        <td>
          47193
        </td>
        <td>
          10917
          -
          10938
        </td>
        <td>
          Apply
        </td>
        <td>
          scala.Option.foreach
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          found.foreach[Unit]({
  ((found: Int) =&gt; KnnWindow.this.expand(found))
})
        </td>
      </tr><tr>
        <td>
          263
        </td>
        <td>
          47194
        </td>
        <td>
          11018
          -
          11022
        </td>
        <td>
          Select
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.KnnWindow.base
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          KnnWindow.this.base
        </td>
      </tr><tr>
        <td>
          263
        </td>
        <td>
          47195
        </td>
        <td>
          11008
          -
          11023
        </td>
        <td>
          Apply
        </td>
        <td>
          org.geotools.api.data.Query.&lt;init&gt;
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          new org.geotools.api.data.Query(KnnWindow.this.base)
        </td>
      </tr><tr>
        <td>
          264
        </td>
        <td>
          47196
        </td>
        <td>
          11055
          -
          11068
        </td>
        <td>
          Apply
        </td>
        <td>
          org.geotools.api.data.Query.getHints
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          KnnWindow.this.base.getHints()
        </td>
      </tr><tr>
        <td>
          264
        </td>
        <td>
          47197
        </td>
        <td>
          11045
          -
          11069
        </td>
        <td>
          Apply
        </td>
        <td>
          org.geotools.util.factory.Hints.&lt;init&gt;
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          new org.geotools.util.factory.Hints(KnnWindow.this.base.getHints())
        </td>
      </tr><tr>
        <td>
          264
        </td>
        <td>
          47198
        </td>
        <td>
          11030
          -
          11070
        </td>
        <td>
          Apply
        </td>
        <td>
          org.geotools.api.data.Query.setHints
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          query.setHints(new org.geotools.util.factory.Hints(KnnWindow.this.base.getHints()))
        </td>
      </tr><tr>
        <td>
          267
        </td>
        <td>
          47199
        </td>
        <td>
          11308
          -
          11312
        </td>
        <td>
          Select
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.KnnWindow.geom
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          KnnWindow.this.geom
        </td>
      </tr><tr>
        <td>
          267
        </td>
        <td>
          47200
        </td>
        <td>
          11297
          -
          11313
        </td>
        <td>
          Apply
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope.toFilter
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          x$6.toFilter(KnnWindow.this.geom)
        </td>
      </tr><tr>
        <td>
          267
        </td>
        <td>
          47201
        </td>
        <td>
          11296
          -
          11296
        </td>
        <td>
          TypeApply
        </td>
        <td>
          scala.collection.Seq.canBuildFrom
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          collection.this.Seq.canBuildFrom[org.geotools.api.filter.Filter]
        </td>
      </tr><tr>
        <td>
          267
        </td>
        <td>
          47202
        </td>
        <td>
          11278
          -
          11314
        </td>
        <td>
          ApplyToImplicitArgs
        </td>
        <td>
          scala.collection.TraversableLike.map
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          KnnWindow.this.envelope.query.map[org.geotools.api.filter.Filter, Seq[org.geotools.api.filter.Filter]](((x$6: org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope) =&gt; x$6.toFilter(KnnWindow.this.geom)))(collection.this.Seq.canBuildFrom[org.geotools.api.filter.Filter])
        </td>
      </tr><tr>
        <td>
          267
        </td>
        <td>
          47203
        </td>
        <td>
          11277
          -
          11277
        </td>
        <td>
          Select
        </td>
        <td>
          org.locationtech.geomesa.filter.ff
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          org.locationtech.geomesa.filter.`package`.ff
        </td>
      </tr><tr>
        <td>
          267
        </td>
        <td>
          47204
        </td>
        <td>
          11236
          -
          11315
        </td>
        <td>
          ApplyToImplicitArgs
        </td>
        <td>
          org.locationtech.geomesa.filter.orFilters
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          org.locationtech.geomesa.filter.`package`.orFilters(KnnWindow.this.envelope.query.map[org.geotools.api.filter.Filter, Seq[org.geotools.api.filter.Filter]](((x$6: org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope) =&gt; x$6.toFilter(KnnWindow.this.geom)))(collection.this.Seq.canBuildFrom[org.geotools.api.filter.Filter]))(org.locationtech.geomesa.filter.`package`.ff)
        </td>
      </tr><tr>
        <td>
          268
        </td>
        <td>
          47205
        </td>
        <td>
          11322
          -
          11336
        </td>
        <td>
          Apply
        </td>
        <td>
          org.geotools.api.data.Query.getFilter
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          KnnWindow.this.base.getFilter()
        </td>
      </tr><tr>
        <td>
          269
        </td>
        <td>
          47206
        </td>
        <td>
          11383
          -
          11406
        </td>
        <td>
          Apply
        </td>
        <td>
          org.geotools.api.data.Query.setFilter
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          query.setFilter(filter)
        </td>
      </tr><tr>
        <td>
          269
        </td>
        <td>
          47207
        </td>
        <td>
          11383
          -
          11406
        </td>
        <td>
          Block
        </td>
        <td>
          org.geotools.api.data.Query.setFilter
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          query.setFilter(filter)
        </td>
      </tr><tr>
        <td>
          270
        </td>
        <td>
          47208
        </td>
        <td>
          11441
          -
          11458
        </td>
        <td>
          Apply
        </td>
        <td>
          org.geotools.api.filter.FilterFactory.and
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          org.locationtech.geomesa.filter.`package`.ff.and(f, filter)
        </td>
      </tr><tr>
        <td>
          270
        </td>
        <td>
          47209
        </td>
        <td>
          11425
          -
          11459
        </td>
        <td>
          Apply
        </td>
        <td>
          org.geotools.api.data.Query.setFilter
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          query.setFilter(org.locationtech.geomesa.filter.`package`.ff.and(f, filter))
        </td>
      </tr><tr>
        <td>
          270
        </td>
        <td>
          47210
        </td>
        <td>
          11425
          -
          11459
        </td>
        <td>
          Block
        </td>
        <td>
          org.geotools.api.data.Query.setFilter
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          query.setFilter(org.locationtech.geomesa.filter.`package`.ff.and(f, filter))
        </td>
      </tr><tr>
        <td>
          293
        </td>
        <td>
          47211
        </td>
        <td>
          12446
          -
          12456
        </td>
        <td>
          Apply
        </td>
        <td>
          scala.Int.==
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          found.==(0)
        </td>
      </tr><tr>
        <td>
          293
        </td>
        <td>
          47212
        </td>
        <td>
          12460
          -
          12472
        </td>
        <td>
          Apply
        </td>
        <td>
          scala.Double.*
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          KnnWindow.this.distance.*(2)
        </td>
      </tr><tr>
        <td>
          293
        </td>
        <td>
          47213
        </td>
        <td>
          12460
          -
          12472
        </td>
        <td>
          Block
        </td>
        <td>
          scala.Double.*
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          KnnWindow.this.distance.*(2)
        </td>
      </tr><tr>
        <td>
          293
        </td>
        <td>
          47223
        </td>
        <td>
          12480
          -
          12588
        </td>
        <td>
          Block
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          {
  val density: Double = found./(scala.math.`package`.pow(2.*(KnnWindow.this.distance), 2.0));
  scala.math.`package`.sqrt(KnnWindow.this.k./(3.141592653589793.*(density)))
}
        </td>
      </tr><tr>
        <td>
          293
        </td>
        <td>
          47224
        </td>
        <td>
          12431
          -
          12588
        </td>
        <td>
          Apply
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.KnnWindow.distance_=
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          KnnWindow.this.distance_=(if (found.==(0))
  KnnWindow.this.distance.*(2)
else
  {
    val density: Double = found./(scala.math.`package`.pow(2.*(KnnWindow.this.distance), 2.0));
    scala.math.`package`.sqrt(KnnWindow.this.k./(3.141592653589793.*(density)))
  })
        </td>
      </tr><tr>
        <td>
          294
        </td>
        <td>
          47214
        </td>
        <td>
          12521
          -
          12522
        </td>
        <td>
          Literal
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          2
        </td>
      </tr><tr>
        <td>
          294
        </td>
        <td>
          47215
        </td>
        <td>
          12525
          -
          12533
        </td>
        <td>
          Select
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.KnnWindow.distance
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          KnnWindow.this.distance
        </td>
      </tr><tr>
        <td>
          294
        </td>
        <td>
          47216
        </td>
        <td>
          12521
          -
          12533
        </td>
        <td>
          Apply
        </td>
        <td>
          scala.Int.*
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          2.*(KnnWindow.this.distance)
        </td>
      </tr><tr>
        <td>
          294
        </td>
        <td>
          47217
        </td>
        <td>
          12535
          -
          12536
        </td>
        <td>
          Literal
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          2.0
        </td>
      </tr><tr>
        <td>
          294
        </td>
        <td>
          47218
        </td>
        <td>
          12512
          -
          12537
        </td>
        <td>
          Apply
        </td>
        <td>
          scala.math.pow
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          scala.math.`package`.pow(2.*(KnnWindow.this.distance), 2.0)
        </td>
      </tr><tr>
        <td>
          294
        </td>
        <td>
          47219
        </td>
        <td>
          12504
          -
          12537
        </td>
        <td>
          Apply
        </td>
        <td>
          scala.Int./
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          found./(scala.math.`package`.pow(2.*(KnnWindow.this.distance), 2.0))
        </td>
      </tr><tr>
        <td>
          295
        </td>
        <td>
          47220
        </td>
        <td>
          12561
          -
          12578
        </td>
        <td>
          Apply
        </td>
        <td>
          scala.Double.*
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          3.141592653589793.*(density)
        </td>
      </tr><tr>
        <td>
          295
        </td>
        <td>
          47221
        </td>
        <td>
          12556
          -
          12579
        </td>
        <td>
          Apply
        </td>
        <td>
          scala.Int./
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          KnnWindow.this.k./(3.141592653589793.*(density))
        </td>
      </tr><tr>
        <td>
          295
        </td>
        <td>
          47222
        </td>
        <td>
          12546
          -
          12580
        </td>
        <td>
          Apply
        </td>
        <td>
          scala.math.sqrt
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          scala.math.`package`.sqrt(KnnWindow.this.k./(3.141592653589793.*(density)))
        </td>
      </tr><tr>
        <td>
          297
        </td>
        <td>
          47225
        </td>
        <td>
          12610
          -
          12619
        </td>
        <td>
          Select
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.KnnWindow.threshold
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          KnnWindow.this.threshold
        </td>
      </tr><tr>
        <td>
          297
        </td>
        <td>
          47226
        </td>
        <td>
          12599
          -
          12619
        </td>
        <td>
          Apply
        </td>
        <td>
          scala.Double.&gt;
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          KnnWindow.this.distance.&gt;(KnnWindow.this.threshold)
        </td>
      </tr><tr>
        <td>
          297
        </td>
        <td>
          47230
        </td>
        <td>
          12595
          -
          12595
        </td>
        <td>
          Literal
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          ()
        </td>
      </tr><tr>
        <td>
          297
        </td>
        <td>
          47231
        </td>
        <td>
          12595
          -
          12595
        </td>
        <td>
          Block
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          ()
        </td>
      </tr><tr>
        <td>
          298
        </td>
        <td>
          47227
        </td>
        <td>
          12642
          -
          12651
        </td>
        <td>
          Select
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.KnnWindow.threshold
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          KnnWindow.this.threshold
        </td>
      </tr><tr>
        <td>
          298
        </td>
        <td>
          47228
        </td>
        <td>
          12631
          -
          12651
        </td>
        <td>
          Apply
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.KnnWindow.distance_=
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          KnnWindow.this.distance_=(KnnWindow.this.threshold)
        </td>
      </tr><tr>
        <td>
          298
        </td>
        <td>
          47229
        </td>
        <td>
          12631
          -
          12651
        </td>
        <td>
          Block
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.KnnWindow.distance_=
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          KnnWindow.this.distance_=(KnnWindow.this.threshold)
        </td>
      </tr><tr>
        <td>
          301
        </td>
        <td>
          47232
        </td>
        <td>
          12683
          -
          12700
        </td>
        <td>
          Select
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.QueryEnvelope.envelope
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          KnnWindow.this.envelope.envelope
        </td>
      </tr><tr>
        <td>
          301
        </td>
        <td>
          47233
        </td>
        <td>
          12678
          -
          12701
        </td>
        <td>
          Apply
        </td>
        <td>
          scala.Some.apply
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          scala.Some.apply[org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope](KnnWindow.this.envelope.envelope)
        </td>
      </tr><tr>
        <td>
          302
        </td>
        <td>
          47234
        </td>
        <td>
          12742
          -
          12743
        </td>
        <td>
          Select
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.KnnWindow.p
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          KnnWindow.this.p
        </td>
      </tr><tr>
        <td>
          302
        </td>
        <td>
          47235
        </td>
        <td>
          12745
          -
          12753
        </td>
        <td>
          Select
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.KnnWindow.distance
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          KnnWindow.this.distance
        </td>
      </tr><tr>
        <td>
          302
        </td>
        <td>
          47236
        </td>
        <td>
          12755
          -
          12759
        </td>
        <td>
          Select
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.KnnWindow.calc
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          KnnWindow.this.calc
        </td>
      </tr><tr>
        <td>
          302
        </td>
        <td>
          47237
        </td>
        <td>
          12733
          -
          12760
        </td>
        <td>
          Apply
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope.apply
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          KNearestNeighborSearchProcess.this.Envelope.apply(KnnWindow.this.p, KnnWindow.this.distance, KnnWindow.this.calc)
        </td>
      </tr><tr>
        <td>
          302
        </td>
        <td>
          47238
        </td>
        <td>
          12719
          -
          12767
        </td>
        <td>
          Apply
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.QueryEnvelope.apply
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          KNearestNeighborSearchProcess.this.QueryEnvelope.apply(KNearestNeighborSearchProcess.this.Envelope.apply(KnnWindow.this.p, KnnWindow.this.distance, KnnWindow.this.calc), hole)
        </td>
      </tr><tr>
        <td>
          302
        </td>
        <td>
          47239
        </td>
        <td>
          12708
          -
          12767
        </td>
        <td>
          Apply
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.KnnWindow.envelope_=
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          KnnWindow.this.envelope_=(KNearestNeighborSearchProcess.this.QueryEnvelope.apply(KNearestNeighborSearchProcess.this.Envelope.apply(KnnWindow.this.p, KnnWindow.this.distance, KnnWindow.this.calc), hole))
        </td>
      </tr><tr>
        <td>
          323
        </td>
        <td>
          47240
        </td>
        <td>
          13352
          -
          13376
        </td>
        <td>
          Apply
        </td>
        <td>
          org.locationtech.geomesa.utils.geometry.DistanceCalculator.&lt;init&gt;
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          new org.locationtech.geomesa.utils.geometry.DistanceCalculator()
        </td>
      </tr><tr>
        <td>
          326
        </td>
        <td>
          47241
        </td>
        <td>
          13461
          -
          13462
        </td>
        <td>
          Select
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.KnnCalculator.k
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          KnnCalculator.this.k
        </td>
      </tr><tr>
        <td>
          326
        </td>
        <td>
          47242
        </td>
        <td>
          13457
          -
          13462
        </td>
        <td>
          Apply
        </td>
        <td>
          scala.Int.&lt;
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          KnnCalculator.this.i.&lt;(KnnCalculator.this.k)
        </td>
      </tr><tr>
        <td>
          326
        </td>
        <td>
          47243
        </td>
        <td>
          13466
          -
          13467
        </td>
        <td>
          Literal
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          0
        </td>
      </tr><tr>
        <td>
          326
        </td>
        <td>
          47244
        </td>
        <td>
          13466
          -
          13467
        </td>
        <td>
          Block
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          0
        </td>
      </tr><tr>
        <td>
          326
        </td>
        <td>
          47245
        </td>
        <td>
          13477
          -
          13485
        </td>
        <td>
          Select
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.KnnCalculator.farthest
        </td>
        <td>
          
        </td>
        <td style="background: #F0ADAD">
          KnnCalculator.this.farthest
        </td>
      </tr><tr>
        <td>
          326
        </td>
        <td>
          47246
        </td>
        <td>
          13477
          -
          13485
        </td>
        <td>
          Block
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.KnnCalculator.farthest
        </td>
        <td>
          
        </td>
        <td style="background: #F0ADAD">
          KnnCalculator.this.farthest
        </td>
      </tr><tr>
        <td>
          333
        </td>
        <td>
          47247
        </td>
        <td>
          13590
          -
          13591
        </td>
        <td>
          Select
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.KnnCalculator.i
        </td>
        <td>
          
        </td>
        <td style="background: #F0ADAD">
          KnnCalculator.this.i
        </td>
      </tr><tr>
        <td>
          342
        </td>
        <td>
          47248
        </td>
        <td>
          13880
          -
          13906
        </td>
        <td>
          Apply
        </td>
        <td>
          org.geotools.api.feature.simple.SimpleFeature.getDefaultGeometry
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          feature.getDefaultGeometry()
        </td>
      </tr><tr>
        <td>
          343
        </td>
        <td>
          47258
        </td>
        <td>
          13937
          -
          14134
        </td>
        <td>
          Block
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          {
  val meters: Double = KnnCalculator.this.calculator.meters(KnnCalculator.this.query, p);
  if (meters.&gt;(KnnCalculator.this.threshold))
    scala.Some.apply[Double](meters)
  else
    {
      KnnCalculator.this.visit(feature, meters);
      scala.None
    }
}
        </td>
      </tr><tr>
        <td>
          344
        </td>
        <td>
          47249
        </td>
        <td>
          13981
          -
          13986
        </td>
        <td>
          Select
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.KnnCalculator.query
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          KnnCalculator.this.query
        </td>
      </tr><tr>
        <td>
          344
        </td>
        <td>
          47250
        </td>
        <td>
          13963
          -
          13990
        </td>
        <td>
          Apply
        </td>
        <td>
          org.locationtech.geomesa.utils.geometry.DistanceCalculator.meters
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          KnnCalculator.this.calculator.meters(KnnCalculator.this.query, p)
        </td>
      </tr><tr>
        <td>
          345
        </td>
        <td>
          47251
        </td>
        <td>
          14014
          -
          14023
        </td>
        <td>
          Select
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.KnnCalculator.threshold
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          KnnCalculator.this.threshold
        </td>
      </tr><tr>
        <td>
          345
        </td>
        <td>
          47252
        </td>
        <td>
          14005
          -
          14023
        </td>
        <td>
          Apply
        </td>
        <td>
          scala.Double.&gt;
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          meters.&gt;(KnnCalculator.this.threshold)
        </td>
      </tr><tr>
        <td>
          346
        </td>
        <td>
          47253
        </td>
        <td>
          14039
          -
          14051
        </td>
        <td>
          Apply
        </td>
        <td>
          scala.Some.apply
        </td>
        <td>
          
        </td>
        <td style="background: #F0ADAD">
          scala.Some.apply[Double](meters)
        </td>
      </tr><tr>
        <td>
          346
        </td>
        <td>
          47254
        </td>
        <td>
          14039
          -
          14051
        </td>
        <td>
          Block
        </td>
        <td>
          scala.Some.apply
        </td>
        <td>
          
        </td>
        <td style="background: #F0ADAD">
          scala.Some.apply[Double](meters)
        </td>
      </tr><tr>
        <td>
          347
        </td>
        <td>
          47257
        </td>
        <td>
          14069
          -
          14134
        </td>
        <td>
          Block
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          {
  KnnCalculator.this.visit(feature, meters);
  scala.None
}
        </td>
      </tr><tr>
        <td>
          348
        </td>
        <td>
          47255
        </td>
        <td>
          14083
          -
          14105
        </td>
        <td>
          Apply
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.KnnCalculator.visit
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          KnnCalculator.this.visit(feature, meters)
        </td>
      </tr><tr>
        <td>
          349
        </td>
        <td>
          47256
        </td>
        <td>
          14118
          -
          14122
        </td>
        <td>
          Select
        </td>
        <td>
          scala.None
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          scala.None
        </td>
      </tr><tr>
        <td>
          352
        </td>
        <td>
          47259
        </td>
        <td>
          14249
          -
          14253
        </td>
        <td>
          Select
        </td>
        <td>
          scala.None
        </td>
        <td>
          
        </td>
        <td style="background: #F0ADAD">
          scala.None
        </td>
      </tr><tr>
        <td>
          352
        </td>
        <td>
          47260
        </td>
        <td>
          14151
          -
          14253
        </td>
        <td>
          Block
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td>
          
        </td>
        <td style="background: #F0ADAD">
          {
  (if (KnnCalculator.this.logger.underlying.isWarnEnabled())
    KnnCalculator.this.logger.underlying.warn(&quot;KNN query not implemented for non-point geometries, skipping this feature: {}&quot;, (g: AnyRef))
  else
    (): Unit);
  scala.None
}
        </td>
      </tr><tr>
        <td>
          363
        </td>
        <td>
          47261
        </td>
        <td>
          14553
          -
          14554
        </td>
        <td>
          Select
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.KnnCalculator.k
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          KnnCalculator.this.k
        </td>
      </tr><tr>
        <td>
          363
        </td>
        <td>
          47262
        </td>
        <td>
          14549
          -
          14554
        </td>
        <td>
          Apply
        </td>
        <td>
          scala.Int.&lt;
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          KnnCalculator.this.i.&lt;(KnnCalculator.this.k)
        </td>
      </tr><tr>
        <td>
          363
        </td>
        <td>
          47275
        </td>
        <td>
          14556
          -
          14895
        </td>
        <td>
          Block
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          {
  KnnCalculator.this.results.update(KnnCalculator.this.i, KNearestNeighborSearchProcess.this.FeatureWithDistance.apply(feature, distance));
  KnnCalculator.this.i_=(KnnCalculator.this.i.+(1));
  if (KnnCalculator.this.i.==(KnnCalculator.this.k))
    KnnCalculator.this.fi_=(KnnCalculator.this.farthest)
  else
    ()
}
        </td>
      </tr><tr>
        <td>
          365
        </td>
        <td>
          47263
        </td>
        <td>
          14666
          -
          14667
        </td>
        <td>
          Select
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.KnnCalculator.i
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          KnnCalculator.this.i
        </td>
      </tr><tr>
        <td>
          365
        </td>
        <td>
          47264
        </td>
        <td>
          14671
          -
          14709
        </td>
        <td>
          Apply
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.FeatureWithDistance.apply
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          KNearestNeighborSearchProcess.this.FeatureWithDistance.apply(feature, distance)
        </td>
      </tr><tr>
        <td>
          365
        </td>
        <td>
          47265
        </td>
        <td>
          14658
          -
          14709
        </td>
        <td>
          Apply
        </td>
        <td>
          scala.Array.update
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          KnnCalculator.this.results.update(KnnCalculator.this.i, KNearestNeighborSearchProcess.this.FeatureWithDistance.apply(feature, distance))
        </td>
      </tr><tr>
        <td>
          366
        </td>
        <td>
          47266
        </td>
        <td>
          14718
          -
          14724
        </td>
        <td>
          Apply
        </td>
        <td>
          scala.Int.+
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          KnnCalculator.this.i.+(1)
        </td>
      </tr><tr>
        <td>
          366
        </td>
        <td>
          47267
        </td>
        <td>
          14718
          -
          14724
        </td>
        <td>
          Apply
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.KnnCalculator.i_=
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          KnnCalculator.this.i_=(KnnCalculator.this.i.+(1))
        </td>
      </tr><tr>
        <td>
          367
        </td>
        <td>
          47268
        </td>
        <td>
          14742
          -
          14743
        </td>
        <td>
          Select
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.KnnCalculator.k
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          KnnCalculator.this.k
        </td>
      </tr><tr>
        <td>
          367
        </td>
        <td>
          47269
        </td>
        <td>
          14737
          -
          14743
        </td>
        <td>
          Apply
        </td>
        <td>
          scala.Int.==
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          KnnCalculator.this.i.==(KnnCalculator.this.k)
        </td>
      </tr><tr>
        <td>
          367
        </td>
        <td>
          47273
        </td>
        <td>
          14733
          -
          14733
        </td>
        <td>
          Literal
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          ()
        </td>
      </tr><tr>
        <td>
          367
        </td>
        <td>
          47274
        </td>
        <td>
          14733
          -
          14733
        </td>
        <td>
          Block
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          ()
        </td>
      </tr><tr>
        <td>
          369
        </td>
        <td>
          47270
        </td>
        <td>
          14869
          -
          14877
        </td>
        <td>
          Select
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.KnnCalculator.farthest
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          KnnCalculator.this.farthest
        </td>
      </tr><tr>
        <td>
          369
        </td>
        <td>
          47271
        </td>
        <td>
          14864
          -
          14877
        </td>
        <td>
          Apply
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.KnnCalculator.fi_=
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          KnnCalculator.this.fi_=(KnnCalculator.this.farthest)
        </td>
      </tr><tr>
        <td>
          369
        </td>
        <td>
          47272
        </td>
        <td>
          14864
          -
          14877
        </td>
        <td>
          Block
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.KnnCalculator.fi_=
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          KnnCalculator.this.fi_=(KnnCalculator.this.farthest)
        </td>
      </tr><tr>
        <td>
          371
        </td>
        <td>
          47276
        </td>
        <td>
          14924
          -
          14926
        </td>
        <td>
          Select
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.KnnCalculator.fi
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          KnnCalculator.this.fi
        </td>
      </tr><tr>
        <td>
          371
        </td>
        <td>
          47277
        </td>
        <td>
          14916
          -
          14934
        </td>
        <td>
          Select
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.FeatureWithDistance.meters
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          KnnCalculator.this.results.apply(KnnCalculator.this.fi).meters
        </td>
      </tr><tr>
        <td>
          371
        </td>
        <td>
          47278
        </td>
        <td>
          14905
          -
          14934
        </td>
        <td>
          Apply
        </td>
        <td>
          scala.Double.&lt;
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          distance.&lt;(KnnCalculator.this.results.apply(KnnCalculator.this.fi).meters)
        </td>
      </tr><tr>
        <td>
          371
        </td>
        <td>
          47284
        </td>
        <td>
          14936
          -
          15118
        </td>
        <td>
          Block
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          {
  KnnCalculator.this.results.update(KnnCalculator.this.fi, KNearestNeighborSearchProcess.this.FeatureWithDistance.apply(feature, distance));
  KnnCalculator.this.fi_=(KnnCalculator.this.farthest)
}
        </td>
      </tr><tr>
        <td>
          371
        </td>
        <td>
          47285
        </td>
        <td>
          14901
          -
          14901
        </td>
        <td>
          Literal
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          ()
        </td>
      </tr><tr>
        <td>
          371
        </td>
        <td>
          47286
        </td>
        <td>
          14901
          -
          14901
        </td>
        <td>
          Block
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          ()
        </td>
      </tr><tr>
        <td>
          371
        </td>
        <td>
          47287
        </td>
        <td>
          14901
          -
          15118
        </td>
        <td>
          If
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          if (distance.&lt;(KnnCalculator.this.results.apply(KnnCalculator.this.fi).meters))
  {
    KnnCalculator.this.results.update(KnnCalculator.this.fi, KNearestNeighborSearchProcess.this.FeatureWithDistance.apply(feature, distance));
    KnnCalculator.this.fi_=(KnnCalculator.this.farthest)
  }
else
  ()
        </td>
      </tr><tr>
        <td>
          373
        </td>
        <td>
          47279
        </td>
        <td>
          15044
          -
          15046
        </td>
        <td>
          Select
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.KnnCalculator.fi
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          KnnCalculator.this.fi
        </td>
      </tr><tr>
        <td>
          373
        </td>
        <td>
          47280
        </td>
        <td>
          15050
          -
          15088
        </td>
        <td>
          Apply
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.FeatureWithDistance.apply
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          KNearestNeighborSearchProcess.this.FeatureWithDistance.apply(feature, distance)
        </td>
      </tr><tr>
        <td>
          373
        </td>
        <td>
          47281
        </td>
        <td>
          15036
          -
          15088
        </td>
        <td>
          Apply
        </td>
        <td>
          scala.Array.update
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          KnnCalculator.this.results.update(KnnCalculator.this.fi, KNearestNeighborSearchProcess.this.FeatureWithDistance.apply(feature, distance))
        </td>
      </tr><tr>
        <td>
          374
        </td>
        <td>
          47282
        </td>
        <td>
          15102
          -
          15110
        </td>
        <td>
          Select
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.KnnCalculator.farthest
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          KnnCalculator.this.farthest
        </td>
      </tr><tr>
        <td>
          374
        </td>
        <td>
          47283
        </td>
        <td>
          15097
          -
          15110
        </td>
        <td>
          Apply
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.KnnCalculator.fi_=
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          KnnCalculator.this.fi_=(KnnCalculator.this.farthest)
        </td>
      </tr><tr>
        <td>
          384
        </td>
        <td>
          47288
        </td>
        <td>
          15325
          -
          15332
        </td>
        <td>
          Select
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.KnnCalculator.results
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          KnnCalculator.this.results
        </td>
      </tr><tr>
        <td>
          384
        </td>
        <td>
          47289
        </td>
        <td>
          15325
          -
          15344
        </td>
        <td>
          Select
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.FeatureWithDistance.meters
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          scala.Predef.refArrayOps[org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.FeatureWithDistance](KnnCalculator.this.results).head.meters
        </td>
      </tr><tr>
        <td>
          385
        </td>
        <td>
          47290
        </td>
        <td>
          15364
          -
          15365
        </td>
        <td>
          Literal
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          0
        </td>
      </tr><tr>
        <td>
          386
        </td>
        <td>
          47291
        </td>
        <td>
          15380
          -
          15381
        </td>
        <td>
          Literal
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          1
        </td>
      </tr><tr>
        <td>
          387
        </td>
        <td>
          47292
        </td>
        <td>
          15399
          -
          15413
        </td>
        <td>
          Select
        </td>
        <td>
          scala.Array.length
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          KnnCalculator.this.results.length
        </td>
      </tr><tr>
        <td>
          387
        </td>
        <td>
          47293
        </td>
        <td>
          15395
          -
          15413
        </td>
        <td>
          Apply
        </td>
        <td>
          scala.Int.&lt;
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          i.&lt;(KnnCalculator.this.results.length)
        </td>
      </tr><tr>
        <td>
          387
        </td>
        <td>
          47300
        </td>
        <td>
          15415
          -
          15415
        </td>
        <td>
          Apply
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.KnnCalculator.while$6
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          while$6()
        </td>
      </tr><tr>
        <td>
          387
        </td>
        <td>
          47301
        </td>
        <td>
          15415
          -
          15543
        </td>
        <td>
          Block
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          {
  {
    if (KnnCalculator.this.results.apply(i).meters.&gt;(max))
      {
        max = KnnCalculator.this.results.apply(i).meters;
        result = i
      }
    else
      ();
    i = i.+(1)
  };
  while$6()
}
        </td>
      </tr><tr>
        <td>
          387
        </td>
        <td>
          47302
        </td>
        <td>
          15388
          -
          15388
        </td>
        <td>
          Literal
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          ()
        </td>
      </tr><tr>
        <td>
          387
        </td>
        <td>
          47303
        </td>
        <td>
          15388
          -
          15388
        </td>
        <td>
          Block
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          ()
        </td>
      </tr><tr>
        <td>
          388
        </td>
        <td>
          47294
        </td>
        <td>
          15429
          -
          15452
        </td>
        <td>
          Apply
        </td>
        <td>
          scala.Double.&gt;
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          KnnCalculator.this.results.apply(i).meters.&gt;(max)
        </td>
      </tr><tr>
        <td>
          388
        </td>
        <td>
          47296
        </td>
        <td>
          15454
          -
          15520
        </td>
        <td>
          Block
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          {
  max = KnnCalculator.this.results.apply(i).meters;
  result = i
}
        </td>
      </tr><tr>
        <td>
          388
        </td>
        <td>
          47297
        </td>
        <td>
          15425
          -
          15425
        </td>
        <td>
          Literal
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          ()
        </td>
      </tr><tr>
        <td>
          388
        </td>
        <td>
          47298
        </td>
        <td>
          15425
          -
          15425
        </td>
        <td>
          Block
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          ()
        </td>
      </tr><tr>
        <td>
          389
        </td>
        <td>
          47295
        </td>
        <td>
          15472
          -
          15489
        </td>
        <td>
          Select
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.FeatureWithDistance.meters
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          KnnCalculator.this.results.apply(i).meters
        </td>
      </tr><tr>
        <td>
          392
        </td>
        <td>
          47299
        </td>
        <td>
          15529
          -
          15535
        </td>
        <td>
          Apply
        </td>
        <td>
          scala.Int.+
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          i.+(1)
        </td>
      </tr><tr>
        <td>
          405
        </td>
        <td>
          47304
        </td>
        <td>
          15909
          -
          15915
        </td>
        <td>
          Select
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.FeatureWithDistance.meters
        </td>
        <td>
          
        </td>
        <td style="background: #F0ADAD">
          FeatureWithDistance.this.meters
        </td>
      </tr><tr>
        <td>
          405
        </td>
        <td>
          47305
        </td>
        <td>
          15917
          -
          15925
        </td>
        <td>
          Select
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.FeatureWithDistance.meters
        </td>
        <td>
          
        </td>
        <td style="background: #F0ADAD">
          o.meters
        </td>
      </tr><tr>
        <td>
          405
        </td>
        <td>
          47306
        </td>
        <td>
          15884
          -
          15926
        </td>
        <td>
          Apply
        </td>
        <td>
          java.lang.Double.compare
        </td>
        <td>
          
        </td>
        <td style="background: #F0ADAD">
          java.lang.Double.compare(FeatureWithDistance.this.meters, o.meters)
        </td>
      </tr><tr>
        <td>
          423
        </td>
        <td>
          47307
        </td>
        <td>
          16397
          -
          16401
        </td>
        <td>
          Select
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.QueryEnvelope.hole
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          QueryEnvelope.this.hole
        </td>
      </tr><tr>
        <td>
          424
        </td>
        <td>
          47308
        </td>
        <td>
          16431
          -
          16447
        </td>
        <td>
          Select
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope.toWorld
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          QueryEnvelope.this.envelope.toWorld
        </td>
      </tr><tr>
        <td>
          424
        </td>
        <td>
          47309
        </td>
        <td>
          16431
          -
          16447
        </td>
        <td>
          Block
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope.toWorld
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          QueryEnvelope.this.envelope.toWorld
        </td>
      </tr><tr>
        <td>
          425
        </td>
        <td>
          47319
        </td>
        <td>
          16469
          -
          16608
        </td>
        <td>
          Block
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          {
  val holes: Seq[org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope] = h.toWorld;
  QueryEnvelope.this.envelope.toWorld.flatMap[org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope, Seq[org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope]](((e: org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope) =&gt; holes.foldLeft[Seq[org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope]](scala.collection.Seq.apply[org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope](e))(((x0$1: Seq[org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope], x1$1: org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope) =&gt; scala.Tuple2.apply[Seq[org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope], org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope](x0$1, x1$1) match {
    case (_1: Seq[org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope], _2: org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope)(Seq[org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope], org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope)((r @ _), (h @ _)) =&gt; r.flatMap[org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope, Seq[org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope]](((x$7: org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope) =&gt; x$7.minus(h)))(collection.this.Seq.canBuildFrom[org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope])
  }))))(collection.this.Seq.canBuildFrom[org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope])
}
        </td>
      </tr><tr>
        <td>
          426
        </td>
        <td>
          47310
        </td>
        <td>
          16494
          -
          16503
        </td>
        <td>
          Select
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope.toWorld
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          h.toWorld
        </td>
      </tr><tr>
        <td>
          427
        </td>
        <td>
          47311
        </td>
        <td>
          16559
          -
          16565
        </td>
        <td>
          Apply
        </td>
        <td>
          scala.collection.generic.GenericCompanion.apply
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          scala.collection.Seq.apply[org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope](e)
        </td>
      </tr><tr>
        <td>
          427
        </td>
        <td>
          47312
        </td>
        <td>
          16594
          -
          16604
        </td>
        <td>
          Apply
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope.minus
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          x$7.minus(h)
        </td>
      </tr><tr>
        <td>
          427
        </td>
        <td>
          47313
        </td>
        <td>
          16593
          -
          16593
        </td>
        <td>
          TypeApply
        </td>
        <td>
          scala.collection.Seq.canBuildFrom
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          collection.this.Seq.canBuildFrom[org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope]
        </td>
      </tr><tr>
        <td>
          427
        </td>
        <td>
          47314
        </td>
        <td>
          16584
          -
          16605
        </td>
        <td>
          ApplyToImplicitArgs
        </td>
        <td>
          scala.collection.TraversableLike.flatMap
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          r.flatMap[org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope, Seq[org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope]](((x$7: org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope) =&gt; x$7.minus(h)))(collection.this.Seq.canBuildFrom[org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope])
        </td>
      </tr><tr>
        <td>
          427
        </td>
        <td>
          47315
        </td>
        <td>
          16584
          -
          16605
        </td>
        <td>
          Block
        </td>
        <td>
          scala.collection.TraversableLike.flatMap
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          r.flatMap[org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope, Seq[org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope]](((x$7: org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope) =&gt; x$7.minus(h)))(collection.this.Seq.canBuildFrom[org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope])
        </td>
      </tr><tr>
        <td>
          427
        </td>
        <td>
          47316
        </td>
        <td>
          16544
          -
          16607
        </td>
        <td>
          Apply
        </td>
        <td>
          scala.collection.TraversableOnce.foldLeft
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          holes.foldLeft[Seq[org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope]](scala.collection.Seq.apply[org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope](e))(((x0$1: Seq[org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope], x1$1: org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope) =&gt; scala.Tuple2.apply[Seq[org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope], org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope](x0$1, x1$1) match {
  case (_1: Seq[org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope], _2: org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope)(Seq[org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope], org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope)((r @ _), (h @ _)) =&gt; r.flatMap[org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope, Seq[org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope]](((x$7: org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope) =&gt; x$7.minus(h)))(collection.this.Seq.canBuildFrom[org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope])
}))
        </td>
      </tr><tr>
        <td>
          427
        </td>
        <td>
          47317
        </td>
        <td>
          16538
          -
          16538
        </td>
        <td>
          TypeApply
        </td>
        <td>
          scala.collection.Seq.canBuildFrom
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          collection.this.Seq.canBuildFrom[org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope]
        </td>
      </tr><tr>
        <td>
          427
        </td>
        <td>
          47318
        </td>
        <td>
          16514
          -
          16608
        </td>
        <td>
          ApplyToImplicitArgs
        </td>
        <td>
          scala.collection.TraversableLike.flatMap
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          QueryEnvelope.this.envelope.toWorld.flatMap[org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope, Seq[org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope]](((e: org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope) =&gt; holes.foldLeft[Seq[org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope]](scala.collection.Seq.apply[org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope](e))(((x0$1: Seq[org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope], x1$1: org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope) =&gt; scala.Tuple2.apply[Seq[org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope], org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope](x0$1, x1$1) match {
  case (_1: Seq[org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope], _2: org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope)(Seq[org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope], org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope)((r @ _), (h @ _)) =&gt; r.flatMap[org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope, Seq[org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope]](((x$7: org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope) =&gt; x$7.minus(h)))(collection.this.Seq.canBuildFrom[org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope])
}))))(collection.this.Seq.canBuildFrom[org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope])
        </td>
      </tr><tr>
        <td>
          436
        </td>
        <td>
          47320
        </td>
        <td>
          16737
          -
          16741
        </td>
        <td>
          Select
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.QueryEnvelope.hole
        </td>
        <td>
          
        </td>
        <td style="background: #F0ADAD">
          QueryEnvelope.this.hole
        </td>
      </tr><tr>
        <td>
          437
        </td>
        <td>
          47321
        </td>
        <td>
          16773
          -
          16787
        </td>
        <td>
          Select
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope.debug
        </td>
        <td>
          
        </td>
        <td style="background: #F0ADAD">
          QueryEnvelope.this.envelope.debug
        </td>
      </tr><tr>
        <td>
          437
        </td>
        <td>
          47322
        </td>
        <td>
          16769
          -
          16788
        </td>
        <td>
          Apply
        </td>
        <td>
          scala.collection.generic.GenericCompanion.apply
        </td>
        <td>
          
        </td>
        <td style="background: #F0ADAD">
          scala.collection.Seq.apply[String](QueryEnvelope.this.envelope.debug)
        </td>
      </tr><tr>
        <td>
          437
        </td>
        <td>
          47323
        </td>
        <td>
          16769
          -
          16788
        </td>
        <td>
          Block
        </td>
        <td>
          scala.collection.generic.GenericCompanion.apply
        </td>
        <td>
          
        </td>
        <td style="background: #F0ADAD">
          scala.collection.Seq.apply[String](QueryEnvelope.this.envelope.debug)
        </td>
      </tr><tr>
        <td>
          438
        </td>
        <td>
          47332
        </td>
        <td>
          16808
          -
          16919
        </td>
        <td>
          Block
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td>
          
        </td>
        <td style="background: #F0ADAD">
          {
  val diff: Seq[org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope] = QueryEnvelope.this.envelope.minus(h);
  if (diff.isEmpty)
    scala.collection.Seq.apply[String](&quot;[empty]&quot;)
  else
    diff.map[String, Seq[String]](((x$8: org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope) =&gt; x$8.debug))(collection.this.Seq.canBuildFrom[String])
}
        </td>
      </tr><tr>
        <td>
          439
        </td>
        <td>
          47324
        </td>
        <td>
          16830
          -
          16847
        </td>
        <td>
          Apply
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope.minus
        </td>
        <td>
          
        </td>
        <td style="background: #F0ADAD">
          QueryEnvelope.this.envelope.minus(h)
        </td>
      </tr><tr>
        <td>
          440
        </td>
        <td>
          47325
        </td>
        <td>
          16860
          -
          16872
        </td>
        <td>
          Select
        </td>
        <td>
          scala.collection.SeqLike.isEmpty
        </td>
        <td>
          
        </td>
        <td style="background: #F0ADAD">
          diff.isEmpty
        </td>
      </tr><tr>
        <td>
          440
        </td>
        <td>
          47326
        </td>
        <td>
          16876
          -
          16890
        </td>
        <td>
          Apply
        </td>
        <td>
          scala.collection.generic.GenericCompanion.apply
        </td>
        <td>
          
        </td>
        <td style="background: #F0ADAD">
          scala.collection.Seq.apply[String](&quot;[empty]&quot;)
        </td>
      </tr><tr>
        <td>
          440
        </td>
        <td>
          47327
        </td>
        <td>
          16876
          -
          16890
        </td>
        <td>
          Block
        </td>
        <td>
          scala.collection.generic.GenericCompanion.apply
        </td>
        <td>
          
        </td>
        <td style="background: #F0ADAD">
          scala.collection.Seq.apply[String](&quot;[empty]&quot;)
        </td>
      </tr><tr>
        <td>
          440
        </td>
        <td>
          47328
        </td>
        <td>
          16909
          -
          16916
        </td>
        <td>
          Select
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope.debug
        </td>
        <td>
          
        </td>
        <td style="background: #F0ADAD">
          x$8.debug
        </td>
      </tr><tr>
        <td>
          440
        </td>
        <td>
          47329
        </td>
        <td>
          16908
          -
          16908
        </td>
        <td>
          TypeApply
        </td>
        <td>
          scala.collection.Seq.canBuildFrom
        </td>
        <td>
          
        </td>
        <td style="background: #F0ADAD">
          collection.this.Seq.canBuildFrom[String]
        </td>
      </tr><tr>
        <td>
          440
        </td>
        <td>
          47330
        </td>
        <td>
          16900
          -
          16917
        </td>
        <td>
          ApplyToImplicitArgs
        </td>
        <td>
          scala.collection.TraversableLike.map
        </td>
        <td>
          
        </td>
        <td style="background: #F0ADAD">
          diff.map[String, Seq[String]](((x$8: org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope) =&gt; x$8.debug))(collection.this.Seq.canBuildFrom[String])
        </td>
      </tr><tr>
        <td>
          440
        </td>
        <td>
          47331
        </td>
        <td>
          16900
          -
          16917
        </td>
        <td>
          Block
        </td>
        <td>
          scala.collection.TraversableLike.map
        </td>
        <td>
          
        </td>
        <td style="background: #F0ADAD">
          diff.map[String, Seq[String]](((x$8: org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope) =&gt; x$8.debug))(collection.this.Seq.canBuildFrom[String])
        </td>
      </tr><tr>
        <td>
          454
        </td>
        <td>
          47333
        </td>
        <td>
          17267
          -
          17271
        </td>
        <td>
          Select
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope.xmax
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          Envelope.this.xmax
        </td>
      </tr><tr>
        <td>
          454
        </td>
        <td>
          47334
        </td>
        <td>
          17283
          -
          17287
        </td>
        <td>
          Select
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope.ymax
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          Envelope.this.ymax
        </td>
      </tr><tr>
        <td>
          454
        </td>
        <td>
          47335
        </td>
        <td>
          17275
          -
          17287
        </td>
        <td>
          Apply
        </td>
        <td>
          scala.Double.&lt;=
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          Envelope.this.ymin.&lt;=(Envelope.this.ymax)
        </td>
      </tr><tr>
        <td>
          454
        </td>
        <td>
          47336
        </td>
        <td>
          17259
          -
          17287
        </td>
        <td>
          Apply
        </td>
        <td>
          scala.Boolean.&amp;&amp;
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          Envelope.this.xmin.&lt;=(Envelope.this.xmax).&amp;&amp;(Envelope.this.ymin.&lt;=(Envelope.this.ymax))
        </td>
      </tr><tr>
        <td>
          454
        </td>
        <td>
          47337
        </td>
        <td>
          17291
          -
          17315
        </td>
        <td>
          Literal
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td>
          
        </td>
        <td style="background: #F0ADAD">
          &quot;Envelope is inverted: [&quot;
        </td>
      </tr><tr>
        <td>
          454
        </td>
        <td>
          47338
        </td>
        <td>
          17319
          -
          17322
        </td>
        <td>
          Literal
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td>
          
        </td>
        <td style="background: #F0ADAD">
          &quot;, &quot;
        </td>
      </tr><tr>
        <td>
          454
        </td>
        <td>
          47339
        </td>
        <td>
          17326
          -
          17329
        </td>
        <td>
          Literal
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td>
          
        </td>
        <td style="background: #F0ADAD">
          &quot;, &quot;
        </td>
      </tr><tr>
        <td>
          454
        </td>
        <td>
          47340
        </td>
        <td>
          17333
          -
          17336
        </td>
        <td>
          Literal
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td>
          
        </td>
        <td style="background: #F0ADAD">
          &quot;, &quot;
        </td>
      </tr><tr>
        <td>
          454
        </td>
        <td>
          47341
        </td>
        <td>
          17340
          -
          17342
        </td>
        <td>
          Literal
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td>
          
        </td>
        <td style="background: #F0ADAD">
          &quot;]&quot;
        </td>
      </tr><tr>
        <td>
          454
        </td>
        <td>
          47342
        </td>
        <td>
          17315
          -
          17319
        </td>
        <td>
          Select
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope.xmin
        </td>
        <td>
          
        </td>
        <td style="background: #F0ADAD">
          Envelope.this.xmin
        </td>
      </tr><tr>
        <td>
          454
        </td>
        <td>
          47343
        </td>
        <td>
          17322
          -
          17326
        </td>
        <td>
          Select
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope.xmax
        </td>
        <td>
          
        </td>
        <td style="background: #F0ADAD">
          Envelope.this.xmax
        </td>
      </tr><tr>
        <td>
          454
        </td>
        <td>
          47344
        </td>
        <td>
          17329
          -
          17333
        </td>
        <td>
          Select
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope.ymin
        </td>
        <td>
          
        </td>
        <td style="background: #F0ADAD">
          Envelope.this.ymin
        </td>
      </tr><tr>
        <td>
          454
        </td>
        <td>
          47345
        </td>
        <td>
          17336
          -
          17340
        </td>
        <td>
          Select
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope.ymax
        </td>
        <td>
          
        </td>
        <td style="background: #F0ADAD">
          Envelope.this.ymax
        </td>
      </tr><tr>
        <td>
          454
        </td>
        <td>
          47346
        </td>
        <td>
          17289
          -
          17342
        </td>
        <td>
          Apply
        </td>
        <td>
          scala.StringContext.s
        </td>
        <td>
          
        </td>
        <td style="background: #F0ADAD">
          scala.StringContext.apply(&quot;Envelope is inverted: [&quot;, &quot;, &quot;, &quot;, &quot;, &quot;, &quot;, &quot;]&quot;).s(Envelope.this.xmin, Envelope.this.xmax, Envelope.this.ymin, Envelope.this.ymax)
        </td>
      </tr><tr>
        <td>
          454
        </td>
        <td>
          47347
        </td>
        <td>
          17251
          -
          17343
        </td>
        <td>
          Apply
        </td>
        <td>
          scala.Predef.require
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          scala.Predef.require(Envelope.this.xmin.&lt;=(Envelope.this.xmax).&amp;&amp;(Envelope.this.ymin.&lt;=(Envelope.this.ymax)), scala.StringContext.apply(&quot;Envelope is inverted: [&quot;, &quot;, &quot;, &quot;, &quot;, &quot;, &quot;, &quot;]&quot;).s(Envelope.this.xmin, Envelope.this.xmax, Envelope.this.ymin, Envelope.this.ymax))
        </td>
      </tr><tr>
        <td>
          466
        </td>
        <td>
          47348
        </td>
        <td>
          17631
          -
          17635
        </td>
        <td>
          Select
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope.xmin
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          Envelope.this.xmin
        </td>
      </tr><tr>
        <td>
          466
        </td>
        <td>
          47349
        </td>
        <td>
          17637
          -
          17647
        </td>
        <td>
          Select
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope.xmin
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          other.xmin
        </td>
      </tr><tr>
        <td>
          466
        </td>
        <td>
          47350
        </td>
        <td>
          17622
          -
          17648
        </td>
        <td>
          Apply
        </td>
        <td>
          scala.math.max
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          scala.math.`package`.max(Envelope.this.xmin, other.xmin)
        </td>
      </tr><tr>
        <td>
          467
        </td>
        <td>
          47351
        </td>
        <td>
          17676
          -
          17680
        </td>
        <td>
          Select
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope.xmax
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          Envelope.this.xmax
        </td>
      </tr><tr>
        <td>
          467
        </td>
        <td>
          47352
        </td>
        <td>
          17682
          -
          17692
        </td>
        <td>
          Select
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope.xmax
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          other.xmax
        </td>
      </tr><tr>
        <td>
          467
        </td>
        <td>
          47353
        </td>
        <td>
          17667
          -
          17693
        </td>
        <td>
          Apply
        </td>
        <td>
          scala.math.min
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          scala.math.`package`.min(Envelope.this.xmax, other.xmax)
        </td>
      </tr><tr>
        <td>
          468
        </td>
        <td>
          47354
        </td>
        <td>
          17704
          -
          17717
        </td>
        <td>
          Apply
        </td>
        <td>
          scala.Double.&gt;
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          ixmin.&gt;(ixmax)
        </td>
      </tr><tr>
        <td>
          468
        </td>
        <td>
          47355
        </td>
        <td>
          17721
          -
          17725
        </td>
        <td>
          Select
        </td>
        <td>
          scala.None
        </td>
        <td>
          
        </td>
        <td style="background: #F0ADAD">
          scala.None
        </td>
      </tr><tr>
        <td>
          468
        </td>
        <td>
          47356
        </td>
        <td>
          17721
          -
          17725
        </td>
        <td>
          Block
        </td>
        <td>
          scala.None
        </td>
        <td>
          
        </td>
        <td style="background: #F0ADAD">
          scala.None
        </td>
      </tr><tr>
        <td>
          468
        </td>
        <td>
          47369
        </td>
        <td>
          17733
          -
          17942
        </td>
        <td>
          Block
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          {
  val iymin: Double = scala.math.`package`.max(Envelope.this.ymin, other.ymin);
  val iymax: Double = scala.math.`package`.min(Envelope.this.ymax, other.ymax);
  if (iymin.&gt;(iymax))
    scala.None
  else
    scala.Some.apply[org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope](KNearestNeighborSearchProcess.this.Envelope.apply(ixmin, ixmax, iymin, iymax))
}
        </td>
      </tr><tr>
        <td>
          469
        </td>
        <td>
          47357
        </td>
        <td>
          17764
          -
          17768
        </td>
        <td>
          Select
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope.ymin
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          Envelope.this.ymin
        </td>
      </tr><tr>
        <td>
          469
        </td>
        <td>
          47358
        </td>
        <td>
          17770
          -
          17780
        </td>
        <td>
          Select
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope.ymin
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          other.ymin
        </td>
      </tr><tr>
        <td>
          469
        </td>
        <td>
          47359
        </td>
        <td>
          17755
          -
          17781
        </td>
        <td>
          Apply
        </td>
        <td>
          scala.math.max
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          scala.math.`package`.max(Envelope.this.ymin, other.ymin)
        </td>
      </tr><tr>
        <td>
          470
        </td>
        <td>
          47360
        </td>
        <td>
          17811
          -
          17815
        </td>
        <td>
          Select
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope.ymax
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          Envelope.this.ymax
        </td>
      </tr><tr>
        <td>
          470
        </td>
        <td>
          47361
        </td>
        <td>
          17817
          -
          17827
        </td>
        <td>
          Select
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope.ymax
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          other.ymax
        </td>
      </tr><tr>
        <td>
          470
        </td>
        <td>
          47362
        </td>
        <td>
          17802
          -
          17828
        </td>
        <td>
          Apply
        </td>
        <td>
          scala.math.min
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          scala.math.`package`.min(Envelope.this.ymax, other.ymax)
        </td>
      </tr><tr>
        <td>
          471
        </td>
        <td>
          47363
        </td>
        <td>
          17841
          -
          17854
        </td>
        <td>
          Apply
        </td>
        <td>
          scala.Double.&gt;
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          iymin.&gt;(iymax)
        </td>
      </tr><tr>
        <td>
          471
        </td>
        <td>
          47364
        </td>
        <td>
          17858
          -
          17862
        </td>
        <td>
          Select
        </td>
        <td>
          scala.None
        </td>
        <td>
          
        </td>
        <td style="background: #F0ADAD">
          scala.None
        </td>
      </tr><tr>
        <td>
          471
        </td>
        <td>
          47365
        </td>
        <td>
          17858
          -
          17862
        </td>
        <td>
          Block
        </td>
        <td>
          scala.None
        </td>
        <td>
          
        </td>
        <td style="background: #F0ADAD">
          scala.None
        </td>
      </tr><tr>
        <td>
          472
        </td>
        <td>
          47366
        </td>
        <td>
          17887
          -
          17923
        </td>
        <td>
          Apply
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope.apply
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          KNearestNeighborSearchProcess.this.Envelope.apply(ixmin, ixmax, iymin, iymax)
        </td>
      </tr><tr>
        <td>
          472
        </td>
        <td>
          47367
        </td>
        <td>
          17882
          -
          17924
        </td>
        <td>
          Apply
        </td>
        <td>
          scala.Some.apply
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          scala.Some.apply[org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope](KNearestNeighborSearchProcess.this.Envelope.apply(ixmin, ixmax, iymin, iymax))
        </td>
      </tr><tr>
        <td>
          472
        </td>
        <td>
          47368
        </td>
        <td>
          17882
          -
          17924
        </td>
        <td>
          Block
        </td>
        <td>
          scala.Some.apply
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          scala.Some.apply[org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope](KNearestNeighborSearchProcess.this.Envelope.apply(ixmin, ixmax, iymin, iymax))
        </td>
      </tr><tr>
        <td>
          484
        </td>
        <td>
          47370
        </td>
        <td>
          18134
          -
          18138
        </td>
        <td>
          Select
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope.xmax
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          Envelope.this.xmax
        </td>
      </tr><tr>
        <td>
          484
        </td>
        <td>
          47371
        </td>
        <td>
          18156
          -
          18160
        </td>
        <td>
          Select
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope.xmin
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          Envelope.this.xmin
        </td>
      </tr><tr>
        <td>
          484
        </td>
        <td>
          47372
        </td>
        <td>
          18142
          -
          18160
        </td>
        <td>
          Apply
        </td>
        <td>
          scala.Double.&gt;=
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          other.xmax.&gt;=(Envelope.this.xmin)
        </td>
      </tr><tr>
        <td>
          484
        </td>
        <td>
          47373
        </td>
        <td>
          18178
          -
          18182
        </td>
        <td>
          Select
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope.ymax
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          Envelope.this.ymax
        </td>
      </tr><tr>
        <td>
          484
        </td>
        <td>
          47374
        </td>
        <td>
          18164
          -
          18182
        </td>
        <td>
          Apply
        </td>
        <td>
          scala.Double.&lt;=
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          other.ymin.&lt;=(Envelope.this.ymax)
        </td>
      </tr><tr>
        <td>
          484
        </td>
        <td>
          47375
        </td>
        <td>
          18200
          -
          18204
        </td>
        <td>
          Select
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope.ymin
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          Envelope.this.ymin
        </td>
      </tr><tr>
        <td>
          484
        </td>
        <td>
          47376
        </td>
        <td>
          18186
          -
          18204
        </td>
        <td>
          Apply
        </td>
        <td>
          scala.Double.&gt;=
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          other.ymax.&gt;=(Envelope.this.ymin)
        </td>
      </tr><tr>
        <td>
          484
        </td>
        <td>
          47377
        </td>
        <td>
          18120
          -
          18204
        </td>
        <td>
          Apply
        </td>
        <td>
          scala.Boolean.&amp;&amp;
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          other.xmin.&lt;=(Envelope.this.xmax).&amp;&amp;(other.xmax.&gt;=(Envelope.this.xmin)).&amp;&amp;(other.ymin.&lt;=(Envelope.this.ymax)).&amp;&amp;(other.ymax.&gt;=(Envelope.this.ymin))
        </td>
      </tr><tr>
        <td>
          496
        </td>
        <td>
          47378
        </td>
        <td>
          18617
          -
          18635
        </td>
        <td>
          Select
        </td>
        <td>
          scala.Boolean.unary_!
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          Envelope.this.intersects(other).unary_!
        </td>
      </tr><tr>
        <td>
          496
        </td>
        <td>
          47379
        </td>
        <td>
          18639
          -
          18648
        </td>
        <td>
          Apply
        </td>
        <td>
          scala.collection.generic.GenericCompanion.apply
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          scala.collection.Seq.apply[org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope](this)
        </td>
      </tr><tr>
        <td>
          496
        </td>
        <td>
          47380
        </td>
        <td>
          18639
          -
          18648
        </td>
        <td>
          Block
        </td>
        <td>
          scala.collection.generic.GenericCompanion.apply
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          scala.collection.Seq.apply[org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope](this)
        </td>
      </tr><tr>
        <td>
          496
        </td>
        <td>
          47417
        </td>
        <td>
          18656
          -
          19478
        </td>
        <td>
          Block
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          {
  val builder: scala.collection.mutable.Builder[org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope,Seq[org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope]] = scala.collection.Seq.newBuilder[org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope];
  val sidemax: Double = if (other.ymax.&gt;=(Envelope.this.ymax))
    Envelope.this.ymax
  else
    {
      builder.+=({
        &lt;artifact&gt; val x$1: Double = other.ymax;
        &lt;artifact&gt; val x$2: Double = Envelope.this.copy$default$1;
        &lt;artifact&gt; val x$3: Double = Envelope.this.copy$default$2;
        &lt;artifact&gt; val x$4: Double = Envelope.this.copy$default$4;
        Envelope.this.copy(x$2, x$3, x$1, x$4)
      });
      other.ymax
    };
  val sidemin: Double = if (other.ymin.&lt;=(Envelope.this.ymin))
    Envelope.this.ymin
  else
    {
      builder.+=({
        &lt;artifact&gt; val x$5: Double = other.ymin;
        &lt;artifact&gt; val x$6: Double = Envelope.this.copy$default$1;
        &lt;artifact&gt; val x$7: Double = Envelope.this.copy$default$2;
        &lt;artifact&gt; val x$8: Double = Envelope.this.copy$default$3;
        Envelope.this.copy(x$6, x$7, x$8, x$5)
      });
      other.ymin
    };
  if (other.xmin.&gt;(Envelope.this.xmin))
    builder.+=({
      &lt;artifact&gt; val x$9: Double = other.xmin;
      &lt;artifact&gt; val x$10: Double = sidemin;
      &lt;artifact&gt; val x$11: Double = sidemax;
      &lt;artifact&gt; val x$12: Double = Envelope.this.copy$default$1;
      Envelope.this.copy(x$12, x$9, x$10, x$11)
    })
  else
    ();
  if (other.xmax.&lt;(Envelope.this.xmax))
    builder.+=({
      &lt;artifact&gt; val x$13: Double = other.xmax;
      &lt;artifact&gt; val x$14: Double = sidemin;
      &lt;artifact&gt; val x$15: Double = sidemax;
      &lt;artifact&gt; val x$16: Double = Envelope.this.copy$default$2;
      Envelope.this.copy(x$13, x$16, x$14, x$15)
    })
  else
    ();
  builder.result()
}
        </td>
      </tr><tr>
        <td>
          497
        </td>
        <td>
          47381
        </td>
        <td>
          18680
          -
          18704
        </td>
        <td>
          TypeApply
        </td>
        <td>
          scala.collection.Seq.newBuilder
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          scala.collection.Seq.newBuilder[org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope]
        </td>
      </tr><tr>
        <td>
          499
        </td>
        <td>
          47382
        </td>
        <td>
          18832
          -
          18836
        </td>
        <td>
          Select
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope.ymax
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          Envelope.this.ymax
        </td>
      </tr><tr>
        <td>
          499
        </td>
        <td>
          47383
        </td>
        <td>
          18818
          -
          18836
        </td>
        <td>
          Apply
        </td>
        <td>
          scala.Double.&gt;=
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          other.ymax.&gt;=(Envelope.this.ymax)
        </td>
      </tr><tr>
        <td>
          499
        </td>
        <td>
          47384
        </td>
        <td>
          18840
          -
          18844
        </td>
        <td>
          Select
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope.ymax
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          Envelope.this.ymax
        </td>
      </tr><tr>
        <td>
          499
        </td>
        <td>
          47385
        </td>
        <td>
          18840
          -
          18844
        </td>
        <td>
          Block
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope.ymax
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          Envelope.this.ymax
        </td>
      </tr><tr>
        <td>
          499
        </td>
        <td>
          47390
        </td>
        <td>
          18852
          -
          18929
        </td>
        <td>
          Block
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          {
  builder.+=({
    &lt;artifact&gt; val x$1: Double = other.ymax;
    &lt;artifact&gt; val x$2: Double = Envelope.this.copy$default$1;
    &lt;artifact&gt; val x$3: Double = Envelope.this.copy$default$2;
    &lt;artifact&gt; val x$4: Double = Envelope.this.copy$default$4;
    Envelope.this.copy(x$2, x$3, x$1, x$4)
  });
  other.ymax
}
        </td>
      </tr><tr>
        <td>
          500
        </td>
        <td>
          47386
        </td>
        <td>
          18887
          -
          18897
        </td>
        <td>
          Select
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope.ymax
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          other.ymax
        </td>
      </tr><tr>
        <td>
          500
        </td>
        <td>
          47387
        </td>
        <td>
          18875
          -
          18898
        </td>
        <td>
          Apply
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope.copy
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          Envelope.this.copy(x$2, x$3, x$1, x$4)
        </td>
      </tr><tr>
        <td>
          500
        </td>
        <td>
          47388
        </td>
        <td>
          18864
          -
          18898
        </td>
        <td>
          Apply
        </td>
        <td>
          scala.collection.mutable.Builder.+=
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          builder.+=({
  &lt;artifact&gt; val x$1: Double = other.ymax;
  &lt;artifact&gt; val x$2: Double = Envelope.this.copy$default$1;
  &lt;artifact&gt; val x$3: Double = Envelope.this.copy$default$2;
  &lt;artifact&gt; val x$4: Double = Envelope.this.copy$default$4;
  Envelope.this.copy(x$2, x$3, x$1, x$4)
})
        </td>
      </tr><tr>
        <td>
          501
        </td>
        <td>
          47389
        </td>
        <td>
          18909
          -
          18919
        </td>
        <td>
          Select
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope.ymax
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          other.ymax
        </td>
      </tr><tr>
        <td>
          504
        </td>
        <td>
          47391
        </td>
        <td>
          19060
          -
          19064
        </td>
        <td>
          Select
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope.ymin
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          Envelope.this.ymin
        </td>
      </tr><tr>
        <td>
          504
        </td>
        <td>
          47392
        </td>
        <td>
          19046
          -
          19064
        </td>
        <td>
          Apply
        </td>
        <td>
          scala.Double.&lt;=
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          other.ymin.&lt;=(Envelope.this.ymin)
        </td>
      </tr><tr>
        <td>
          504
        </td>
        <td>
          47393
        </td>
        <td>
          19068
          -
          19072
        </td>
        <td>
          Select
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope.ymin
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          Envelope.this.ymin
        </td>
      </tr><tr>
        <td>
          504
        </td>
        <td>
          47394
        </td>
        <td>
          19068
          -
          19072
        </td>
        <td>
          Block
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope.ymin
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          Envelope.this.ymin
        </td>
      </tr><tr>
        <td>
          504
        </td>
        <td>
          47399
        </td>
        <td>
          19080
          -
          19157
        </td>
        <td>
          Block
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          {
  builder.+=({
    &lt;artifact&gt; val x$5: Double = other.ymin;
    &lt;artifact&gt; val x$6: Double = Envelope.this.copy$default$1;
    &lt;artifact&gt; val x$7: Double = Envelope.this.copy$default$2;
    &lt;artifact&gt; val x$8: Double = Envelope.this.copy$default$3;
    Envelope.this.copy(x$6, x$7, x$8, x$5)
  });
  other.ymin
}
        </td>
      </tr><tr>
        <td>
          505
        </td>
        <td>
          47395
        </td>
        <td>
          19115
          -
          19125
        </td>
        <td>
          Select
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope.ymin
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          other.ymin
        </td>
      </tr><tr>
        <td>
          505
        </td>
        <td>
          47396
        </td>
        <td>
          19103
          -
          19126
        </td>
        <td>
          Apply
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope.copy
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          Envelope.this.copy(x$6, x$7, x$8, x$5)
        </td>
      </tr><tr>
        <td>
          505
        </td>
        <td>
          47397
        </td>
        <td>
          19092
          -
          19126
        </td>
        <td>
          Apply
        </td>
        <td>
          scala.collection.mutable.Builder.+=
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          builder.+=({
  &lt;artifact&gt; val x$5: Double = other.ymin;
  &lt;artifact&gt; val x$6: Double = Envelope.this.copy$default$1;
  &lt;artifact&gt; val x$7: Double = Envelope.this.copy$default$2;
  &lt;artifact&gt; val x$8: Double = Envelope.this.copy$default$3;
  Envelope.this.copy(x$6, x$7, x$8, x$5)
})
        </td>
      </tr><tr>
        <td>
          506
        </td>
        <td>
          47398
        </td>
        <td>
          19137
          -
          19147
        </td>
        <td>
          Select
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope.ymin
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          other.ymin
        </td>
      </tr><tr>
        <td>
          509
        </td>
        <td>
          47400
        </td>
        <td>
          19233
          -
          19237
        </td>
        <td>
          Select
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope.xmin
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          Envelope.this.xmin
        </td>
      </tr><tr>
        <td>
          509
        </td>
        <td>
          47401
        </td>
        <td>
          19220
          -
          19237
        </td>
        <td>
          Apply
        </td>
        <td>
          scala.Double.&gt;
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          other.xmin.&gt;(Envelope.this.xmin)
        </td>
      </tr><tr>
        <td>
          509
        </td>
        <td>
          47406
        </td>
        <td>
          19216
          -
          19216
        </td>
        <td>
          Literal
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          ()
        </td>
      </tr><tr>
        <td>
          509
        </td>
        <td>
          47407
        </td>
        <td>
          19216
          -
          19216
        </td>
        <td>
          Block
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          ()
        </td>
      </tr><tr>
        <td>
          510
        </td>
        <td>
          47402
        </td>
        <td>
          19274
          -
          19284
        </td>
        <td>
          Select
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope.xmin
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          other.xmin
        </td>
      </tr><tr>
        <td>
          510
        </td>
        <td>
          47403
        </td>
        <td>
          19262
          -
          19317
        </td>
        <td>
          Apply
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope.copy
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          Envelope.this.copy(x$12, x$9, x$10, x$11)
        </td>
      </tr><tr>
        <td>
          510
        </td>
        <td>
          47404
        </td>
        <td>
          19251
          -
          19317
        </td>
        <td>
          Apply
        </td>
        <td>
          scala.collection.mutable.Builder.+=
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          builder.+=({
  &lt;artifact&gt; val x$9: Double = other.xmin;
  &lt;artifact&gt; val x$10: Double = sidemin;
  &lt;artifact&gt; val x$11: Double = sidemax;
  &lt;artifact&gt; val x$12: Double = Envelope.this.copy$default$1;
  Envelope.this.copy(x$12, x$9, x$10, x$11)
})
        </td>
      </tr><tr>
        <td>
          510
        </td>
        <td>
          47405
        </td>
        <td>
          19251
          -
          19317
        </td>
        <td>
          Block
        </td>
        <td>
          scala.collection.mutable.Builder.+=
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          builder.+=({
  &lt;artifact&gt; val x$9: Double = other.xmin;
  &lt;artifact&gt; val x$10: Double = sidemin;
  &lt;artifact&gt; val x$11: Double = sidemax;
  &lt;artifact&gt; val x$12: Double = Envelope.this.copy$default$1;
  Envelope.this.copy(x$12, x$9, x$10, x$11)
})
        </td>
      </tr><tr>
        <td>
          512
        </td>
        <td>
          47408
        </td>
        <td>
          19353
          -
          19357
        </td>
        <td>
          Select
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope.xmax
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          Envelope.this.xmax
        </td>
      </tr><tr>
        <td>
          512
        </td>
        <td>
          47409
        </td>
        <td>
          19340
          -
          19357
        </td>
        <td>
          Apply
        </td>
        <td>
          scala.Double.&lt;
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          other.xmax.&lt;(Envelope.this.xmax)
        </td>
      </tr><tr>
        <td>
          512
        </td>
        <td>
          47414
        </td>
        <td>
          19336
          -
          19336
        </td>
        <td>
          Literal
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          ()
        </td>
      </tr><tr>
        <td>
          512
        </td>
        <td>
          47415
        </td>
        <td>
          19336
          -
          19336
        </td>
        <td>
          Block
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          ()
        </td>
      </tr><tr>
        <td>
          513
        </td>
        <td>
          47410
        </td>
        <td>
          19394
          -
          19404
        </td>
        <td>
          Select
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope.xmax
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          other.xmax
        </td>
      </tr><tr>
        <td>
          513
        </td>
        <td>
          47411
        </td>
        <td>
          19382
          -
          19437
        </td>
        <td>
          Apply
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope.copy
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          Envelope.this.copy(x$13, x$16, x$14, x$15)
        </td>
      </tr><tr>
        <td>
          513
        </td>
        <td>
          47412
        </td>
        <td>
          19371
          -
          19437
        </td>
        <td>
          Apply
        </td>
        <td>
          scala.collection.mutable.Builder.+=
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          builder.+=({
  &lt;artifact&gt; val x$13: Double = other.xmax;
  &lt;artifact&gt; val x$14: Double = sidemin;
  &lt;artifact&gt; val x$15: Double = sidemax;
  &lt;artifact&gt; val x$16: Double = Envelope.this.copy$default$2;
  Envelope.this.copy(x$13, x$16, x$14, x$15)
})
        </td>
      </tr><tr>
        <td>
          513
        </td>
        <td>
          47413
        </td>
        <td>
          19371
          -
          19437
        </td>
        <td>
          Block
        </td>
        <td>
          scala.collection.mutable.Builder.+=
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          builder.+=({
  &lt;artifact&gt; val x$13: Double = other.xmax;
  &lt;artifact&gt; val x$14: Double = sidemin;
  &lt;artifact&gt; val x$15: Double = sidemax;
  &lt;artifact&gt; val x$16: Double = Envelope.this.copy$default$2;
  Envelope.this.copy(x$13, x$16, x$14, x$15)
})
        </td>
      </tr><tr>
        <td>
          515
        </td>
        <td>
          47416
        </td>
        <td>
          19456
          -
          19470
        </td>
        <td>
          Apply
        </td>
        <td>
          scala.collection.mutable.Builder.result
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          builder.result()
        </td>
      </tr><tr>
        <td>
          528
        </td>
        <td>
          47418
        </td>
        <td>
          19852
          -
          19863
        </td>
        <td>
          Apply
        </td>
        <td>
          scala.Double.&lt;
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          Envelope.this.ymin.&lt;(-90.0)
        </td>
      </tr><tr>
        <td>
          529
        </td>
        <td>
          47419
        </td>
        <td>
          19888
          -
          19893
        </td>
        <td>
          Literal
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          -180.0
        </td>
      </tr><tr>
        <td>
          529
        </td>
        <td>
          47420
        </td>
        <td>
          19895
          -
          19899
        </td>
        <td>
          Literal
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          180.0
        </td>
      </tr><tr>
        <td>
          529
        </td>
        <td>
          47421
        </td>
        <td>
          19901
          -
          19904
        </td>
        <td>
          Literal
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          -90.0
        </td>
      </tr><tr>
        <td>
          529
        </td>
        <td>
          47422
        </td>
        <td>
          19915
          -
          19919
        </td>
        <td>
          Select
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope.ymax
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          Envelope.this.ymax
        </td>
      </tr><tr>
        <td>
          529
        </td>
        <td>
          47423
        </td>
        <td>
          19921
          -
          19924
        </td>
        <td>
          Literal
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          90.0
        </td>
      </tr><tr>
        <td>
          529
        </td>
        <td>
          47424
        </td>
        <td>
          19906
          -
          19925
        </td>
        <td>
          Apply
        </td>
        <td>
          scala.math.min
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          scala.math.`package`.min(Envelope.this.ymax, 90.0)
        </td>
      </tr><tr>
        <td>
          529
        </td>
        <td>
          47425
        </td>
        <td>
          19879
          -
          19926
        </td>
        <td>
          Apply
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope.apply
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          KNearestNeighborSearchProcess.this.Envelope.apply(-180.0, 180.0, -90.0, scala.math.`package`.min(Envelope.this.ymax, 90.0))
        </td>
      </tr><tr>
        <td>
          529
        </td>
        <td>
          47426
        </td>
        <td>
          19875
          -
          19927
        </td>
        <td>
          Apply
        </td>
        <td>
          scala.collection.generic.GenericCompanion.apply
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          scala.collection.Seq.apply[org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope](KNearestNeighborSearchProcess.this.Envelope.apply(-180.0, 180.0, -90.0, scala.math.`package`.min(Envelope.this.ymax, 90.0)))
        </td>
      </tr><tr>
        <td>
          529
        </td>
        <td>
          47427
        </td>
        <td>
          19875
          -
          19927
        </td>
        <td>
          Block
        </td>
        <td>
          scala.collection.generic.GenericCompanion.apply
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          scala.collection.Seq.apply[org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope](KNearestNeighborSearchProcess.this.Envelope.apply(-180.0, 180.0, -90.0, scala.math.`package`.min(Envelope.this.ymax, 90.0)))
        </td>
      </tr><tr>
        <td>
          530
        </td>
        <td>
          47428
        </td>
        <td>
          19945
          -
          19955
        </td>
        <td>
          Apply
        </td>
        <td>
          scala.Double.&gt;
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          Envelope.this.ymax.&gt;(90.0)
        </td>
      </tr><tr>
        <td>
          530
        </td>
        <td>
          47477
        </td>
        <td>
          19941
          -
          20637
        </td>
        <td>
          If
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          if (Envelope.this.ymax.&gt;(90.0))
  scala.collection.Seq.apply[org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope](KNearestNeighborSearchProcess.this.Envelope.apply(-180.0, 180.0, scala.math.`package`.max(Envelope.this.ymin, -90.0), 90.0))
else
  if (Envelope.this.width.&gt;=(360.0))
    scala.collection.Seq.apply[org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope](Envelope.this.copy(-180.0, 180.0, Envelope.this.copy$default$3, Envelope.this.copy$default$4))
  else
    if (Envelope.this.xmin.&lt;(-180.0))
      Envelope.this.intersection(KNearestNeighborSearchProcess.this.WholeWorldEnvelope) match {
        case scala.None =&gt; scala.collection.Seq.apply[org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope](Envelope.this.copy(Envelope.this.xmin.+(360.0), Envelope.this.xmax.+(360.0), Envelope.this.copy$default$3, Envelope.this.copy$default$4))
        case (value: org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope)Some[org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope]((trimmed @ _)) =&gt; scala.collection.Seq.apply[org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope](trimmed, Envelope.this.copy(Envelope.this.xmin.+(360.0), 180.0, Envelope.this.copy$default$3, Envelope.this.copy$default$4))
      }
    else
      if (Envelope.this.xmax.&gt;(180.0))
        Envelope.this.intersection(KNearestNeighborSearchProcess.this.WholeWorldEnvelope) match {
          case scala.None =&gt; scala.collection.Seq.apply[org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope](Envelope.this.copy(Envelope.this.xmin.-(360.0), Envelope.this.xmax.-(360.0), Envelope.this.copy$default$3, Envelope.this.copy$default$4))
          case (value: org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope)Some[org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope]((trimmed @ _)) =&gt; scala.collection.Seq.apply[org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope](trimmed, Envelope.this.copy(-180.0, Envelope.this.xmax.-(360.0), Envelope.this.copy$default$3, Envelope.this.copy$default$4))
        }
      else
        scala.collection.Seq.apply[org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope](this)
        </td>
      </tr><tr>
        <td>
          531
        </td>
        <td>
          47429
        </td>
        <td>
          19980
          -
          19985
        </td>
        <td>
          Literal
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          -180.0
        </td>
      </tr><tr>
        <td>
          531
        </td>
        <td>
          47430
        </td>
        <td>
          19987
          -
          19991
        </td>
        <td>
          Literal
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          180.0
        </td>
      </tr><tr>
        <td>
          531
        </td>
        <td>
          47431
        </td>
        <td>
          20002
          -
          20006
        </td>
        <td>
          Select
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope.ymin
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          Envelope.this.ymin
        </td>
      </tr><tr>
        <td>
          531
        </td>
        <td>
          47432
        </td>
        <td>
          20008
          -
          20011
        </td>
        <td>
          Literal
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          -90.0
        </td>
      </tr><tr>
        <td>
          531
        </td>
        <td>
          47433
        </td>
        <td>
          19993
          -
          20012
        </td>
        <td>
          Apply
        </td>
        <td>
          scala.math.max
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          scala.math.`package`.max(Envelope.this.ymin, -90.0)
        </td>
      </tr><tr>
        <td>
          531
        </td>
        <td>
          47434
        </td>
        <td>
          20014
          -
          20017
        </td>
        <td>
          Literal
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          90.0
        </td>
      </tr><tr>
        <td>
          531
        </td>
        <td>
          47435
        </td>
        <td>
          19971
          -
          20018
        </td>
        <td>
          Apply
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope.apply
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          KNearestNeighborSearchProcess.this.Envelope.apply(-180.0, 180.0, scala.math.`package`.max(Envelope.this.ymin, -90.0), 90.0)
        </td>
      </tr><tr>
        <td>
          531
        </td>
        <td>
          47436
        </td>
        <td>
          19967
          -
          20019
        </td>
        <td>
          Apply
        </td>
        <td>
          scala.collection.generic.GenericCompanion.apply
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          scala.collection.Seq.apply[org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope](KNearestNeighborSearchProcess.this.Envelope.apply(-180.0, 180.0, scala.math.`package`.max(Envelope.this.ymin, -90.0), 90.0))
        </td>
      </tr><tr>
        <td>
          531
        </td>
        <td>
          47437
        </td>
        <td>
          19967
          -
          20019
        </td>
        <td>
          Block
        </td>
        <td>
          scala.collection.generic.GenericCompanion.apply
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          scala.collection.Seq.apply[org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope](KNearestNeighborSearchProcess.this.Envelope.apply(-180.0, 180.0, scala.math.`package`.max(Envelope.this.ymin, -90.0), 90.0))
        </td>
      </tr><tr>
        <td>
          532
        </td>
        <td>
          47438
        </td>
        <td>
          20037
          -
          20050
        </td>
        <td>
          Apply
        </td>
        <td>
          scala.Double.&gt;=
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          Envelope.this.width.&gt;=(360.0)
        </td>
      </tr><tr>
        <td>
          532
        </td>
        <td>
          47476
        </td>
        <td>
          20033
          -
          20637
        </td>
        <td>
          If
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          if (Envelope.this.width.&gt;=(360.0))
  scala.collection.Seq.apply[org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope](Envelope.this.copy(-180.0, 180.0, Envelope.this.copy$default$3, Envelope.this.copy$default$4))
else
  if (Envelope.this.xmin.&lt;(-180.0))
    Envelope.this.intersection(KNearestNeighborSearchProcess.this.WholeWorldEnvelope) match {
      case scala.None =&gt; scala.collection.Seq.apply[org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope](Envelope.this.copy(Envelope.this.xmin.+(360.0), Envelope.this.xmax.+(360.0), Envelope.this.copy$default$3, Envelope.this.copy$default$4))
      case (value: org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope)Some[org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope]((trimmed @ _)) =&gt; scala.collection.Seq.apply[org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope](trimmed, Envelope.this.copy(Envelope.this.xmin.+(360.0), 180.0, Envelope.this.copy$default$3, Envelope.this.copy$default$4))
    }
  else
    if (Envelope.this.xmax.&gt;(180.0))
      Envelope.this.intersection(KNearestNeighborSearchProcess.this.WholeWorldEnvelope) match {
        case scala.None =&gt; scala.collection.Seq.apply[org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope](Envelope.this.copy(Envelope.this.xmin.-(360.0), Envelope.this.xmax.-(360.0), Envelope.this.copy$default$3, Envelope.this.copy$default$4))
        case (value: org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope)Some[org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope]((trimmed @ _)) =&gt; scala.collection.Seq.apply[org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope](trimmed, Envelope.this.copy(-180.0, Envelope.this.xmax.-(360.0), Envelope.this.copy$default$3, Envelope.this.copy$default$4))
      }
    else
      scala.collection.Seq.apply[org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope](this)
        </td>
      </tr><tr>
        <td>
          533
        </td>
        <td>
          47439
        </td>
        <td>
          20078
          -
          20083
        </td>
        <td>
          Literal
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          -180.0
        </td>
      </tr><tr>
        <td>
          533
        </td>
        <td>
          47440
        </td>
        <td>
          20092
          -
          20096
        </td>
        <td>
          Literal
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          180.0
        </td>
      </tr><tr>
        <td>
          533
        </td>
        <td>
          47441
        </td>
        <td>
          20066
          -
          20097
        </td>
        <td>
          Apply
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope.copy
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          Envelope.this.copy(-180.0, 180.0, Envelope.this.copy$default$3, Envelope.this.copy$default$4)
        </td>
      </tr><tr>
        <td>
          533
        </td>
        <td>
          47442
        </td>
        <td>
          20062
          -
          20098
        </td>
        <td>
          Apply
        </td>
        <td>
          scala.collection.generic.GenericCompanion.apply
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          scala.collection.Seq.apply[org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope](Envelope.this.copy(-180.0, 180.0, Envelope.this.copy$default$3, Envelope.this.copy$default$4))
        </td>
      </tr><tr>
        <td>
          533
        </td>
        <td>
          47443
        </td>
        <td>
          20062
          -
          20098
        </td>
        <td>
          Block
        </td>
        <td>
          scala.collection.generic.GenericCompanion.apply
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          scala.collection.Seq.apply[org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope](Envelope.this.copy(-180.0, 180.0, Envelope.this.copy$default$3, Envelope.this.copy$default$4))
        </td>
      </tr><tr>
        <td>
          534
        </td>
        <td>
          47444
        </td>
        <td>
          20116
          -
          20128
        </td>
        <td>
          Apply
        </td>
        <td>
          scala.Double.&lt;
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          Envelope.this.xmin.&lt;(-180.0)
        </td>
      </tr><tr>
        <td>
          534
        </td>
        <td>
          47475
        </td>
        <td>
          20112
          -
          20637
        </td>
        <td>
          If
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          if (Envelope.this.xmin.&lt;(-180.0))
  Envelope.this.intersection(KNearestNeighborSearchProcess.this.WholeWorldEnvelope) match {
    case scala.None =&gt; scala.collection.Seq.apply[org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope](Envelope.this.copy(Envelope.this.xmin.+(360.0), Envelope.this.xmax.+(360.0), Envelope.this.copy$default$3, Envelope.this.copy$default$4))
    case (value: org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope)Some[org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope]((trimmed @ _)) =&gt; scala.collection.Seq.apply[org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope](trimmed, Envelope.this.copy(Envelope.this.xmin.+(360.0), 180.0, Envelope.this.copy$default$3, Envelope.this.copy$default$4))
  }
else
  if (Envelope.this.xmax.&gt;(180.0))
    Envelope.this.intersection(KNearestNeighborSearchProcess.this.WholeWorldEnvelope) match {
      case scala.None =&gt; scala.collection.Seq.apply[org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope](Envelope.this.copy(Envelope.this.xmin.-(360.0), Envelope.this.xmax.-(360.0), Envelope.this.copy$default$3, Envelope.this.copy$default$4))
      case (value: org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope)Some[org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope]((trimmed @ _)) =&gt; scala.collection.Seq.apply[org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope](trimmed, Envelope.this.copy(-180.0, Envelope.this.xmax.-(360.0), Envelope.this.copy$default$3, Envelope.this.copy$default$4))
    }
  else
    scala.collection.Seq.apply[org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope](this)
        </td>
      </tr><tr>
        <td>
          535
        </td>
        <td>
          47445
        </td>
        <td>
          20153
          -
          20171
        </td>
        <td>
          Select
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.WholeWorldEnvelope
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          KNearestNeighborSearchProcess.this.WholeWorldEnvelope
        </td>
      </tr><tr>
        <td>
          535
        </td>
        <td>
          47446
        </td>
        <td>
          20140
          -
          20172
        </td>
        <td>
          Apply
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope.intersection
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          Envelope.this.intersection(KNearestNeighborSearchProcess.this.WholeWorldEnvelope)
        </td>
      </tr><tr>
        <td>
          535
        </td>
        <td>
          47457
        </td>
        <td>
          20140
          -
          20347
        </td>
        <td>
          Match
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          Envelope.this.intersection(KNearestNeighborSearchProcess.this.WholeWorldEnvelope) match {
  case scala.None =&gt; scala.collection.Seq.apply[org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope](Envelope.this.copy(Envelope.this.xmin.+(360.0), Envelope.this.xmax.+(360.0), Envelope.this.copy$default$3, Envelope.this.copy$default$4))
  case (value: org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope)Some[org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope]((trimmed @ _)) =&gt; scala.collection.Seq.apply[org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope](trimmed, Envelope.this.copy(Envelope.this.xmin.+(360.0), 180.0, Envelope.this.copy$default$3, Envelope.this.copy$default$4))
}
        </td>
      </tr><tr>
        <td>
          536
        </td>
        <td>
          47447
        </td>
        <td>
          20220
          -
          20231
        </td>
        <td>
          Apply
        </td>
        <td>
          scala.Double.+
        </td>
        <td>
          
        </td>
        <td style="background: #F0ADAD">
          Envelope.this.xmin.+(360.0)
        </td>
      </tr><tr>
        <td>
          536
        </td>
        <td>
          47448
        </td>
        <td>
          20240
          -
          20251
        </td>
        <td>
          Apply
        </td>
        <td>
          scala.Double.+
        </td>
        <td>
          
        </td>
        <td style="background: #F0ADAD">
          Envelope.this.xmax.+(360.0)
        </td>
      </tr><tr>
        <td>
          536
        </td>
        <td>
          47449
        </td>
        <td>
          20208
          -
          20252
        </td>
        <td>
          Apply
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope.copy
        </td>
        <td>
          
        </td>
        <td style="background: #F0ADAD">
          Envelope.this.copy(Envelope.this.xmin.+(360.0), Envelope.this.xmax.+(360.0), Envelope.this.copy$default$3, Envelope.this.copy$default$4)
        </td>
      </tr><tr>
        <td>
          536
        </td>
        <td>
          47450
        </td>
        <td>
          20204
          -
          20253
        </td>
        <td>
          Apply
        </td>
        <td>
          scala.collection.generic.GenericCompanion.apply
        </td>
        <td>
          
        </td>
        <td style="background: #F0ADAD">
          scala.collection.Seq.apply[org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope](Envelope.this.copy(Envelope.this.xmin.+(360.0), Envelope.this.xmax.+(360.0), Envelope.this.copy$default$3, Envelope.this.copy$default$4))
        </td>
      </tr><tr>
        <td>
          536
        </td>
        <td>
          47451
        </td>
        <td>
          20204
          -
          20253
        </td>
        <td>
          Block
        </td>
        <td>
          scala.collection.generic.GenericCompanion.apply
        </td>
        <td>
          
        </td>
        <td style="background: #F0ADAD">
          scala.collection.Seq.apply[org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope](Envelope.this.copy(Envelope.this.xmin.+(360.0), Envelope.this.xmax.+(360.0), Envelope.this.copy$default$3, Envelope.this.copy$default$4))
        </td>
      </tr><tr>
        <td>
          537
        </td>
        <td>
          47452
        </td>
        <td>
          20311
          -
          20322
        </td>
        <td>
          Apply
        </td>
        <td>
          scala.Double.+
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          Envelope.this.xmin.+(360.0)
        </td>
      </tr><tr>
        <td>
          537
        </td>
        <td>
          47453
        </td>
        <td>
          20331
          -
          20335
        </td>
        <td>
          Literal
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          180.0
        </td>
      </tr><tr>
        <td>
          537
        </td>
        <td>
          47454
        </td>
        <td>
          20299
          -
          20336
        </td>
        <td>
          Apply
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope.copy
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          Envelope.this.copy(Envelope.this.xmin.+(360.0), 180.0, Envelope.this.copy$default$3, Envelope.this.copy$default$4)
        </td>
      </tr><tr>
        <td>
          537
        </td>
        <td>
          47455
        </td>
        <td>
          20286
          -
          20337
        </td>
        <td>
          Apply
        </td>
        <td>
          scala.collection.generic.GenericCompanion.apply
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          scala.collection.Seq.apply[org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope](trimmed, Envelope.this.copy(Envelope.this.xmin.+(360.0), 180.0, Envelope.this.copy$default$3, Envelope.this.copy$default$4))
        </td>
      </tr><tr>
        <td>
          537
        </td>
        <td>
          47456
        </td>
        <td>
          20286
          -
          20337
        </td>
        <td>
          Block
        </td>
        <td>
          scala.collection.generic.GenericCompanion.apply
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          scala.collection.Seq.apply[org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope](trimmed, Envelope.this.copy(Envelope.this.xmin.+(360.0), 180.0, Envelope.this.copy$default$3, Envelope.this.copy$default$4))
        </td>
      </tr><tr>
        <td>
          539
        </td>
        <td>
          47458
        </td>
        <td>
          20365
          -
          20376
        </td>
        <td>
          Apply
        </td>
        <td>
          scala.Double.&gt;
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          Envelope.this.xmax.&gt;(180.0)
        </td>
      </tr><tr>
        <td>
          539
        </td>
        <td>
          47474
        </td>
        <td>
          20361
          -
          20637
        </td>
        <td>
          If
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          if (Envelope.this.xmax.&gt;(180.0))
  Envelope.this.intersection(KNearestNeighborSearchProcess.this.WholeWorldEnvelope) match {
    case scala.None =&gt; scala.collection.Seq.apply[org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope](Envelope.this.copy(Envelope.this.xmin.-(360.0), Envelope.this.xmax.-(360.0), Envelope.this.copy$default$3, Envelope.this.copy$default$4))
    case (value: org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope)Some[org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope]((trimmed @ _)) =&gt; scala.collection.Seq.apply[org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope](trimmed, Envelope.this.copy(-180.0, Envelope.this.xmax.-(360.0), Envelope.this.copy$default$3, Envelope.this.copy$default$4))
  }
else
  scala.collection.Seq.apply[org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope](this)
        </td>
      </tr><tr>
        <td>
          540
        </td>
        <td>
          47459
        </td>
        <td>
          20401
          -
          20419
        </td>
        <td>
          Select
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.WholeWorldEnvelope
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          KNearestNeighborSearchProcess.this.WholeWorldEnvelope
        </td>
      </tr><tr>
        <td>
          540
        </td>
        <td>
          47460
        </td>
        <td>
          20388
          -
          20420
        </td>
        <td>
          Apply
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope.intersection
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          Envelope.this.intersection(KNearestNeighborSearchProcess.this.WholeWorldEnvelope)
        </td>
      </tr><tr>
        <td>
          540
        </td>
        <td>
          47471
        </td>
        <td>
          20388
          -
          20596
        </td>
        <td>
          Match
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          Envelope.this.intersection(KNearestNeighborSearchProcess.this.WholeWorldEnvelope) match {
  case scala.None =&gt; scala.collection.Seq.apply[org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope](Envelope.this.copy(Envelope.this.xmin.-(360.0), Envelope.this.xmax.-(360.0), Envelope.this.copy$default$3, Envelope.this.copy$default$4))
  case (value: org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope)Some[org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope]((trimmed @ _)) =&gt; scala.collection.Seq.apply[org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope](trimmed, Envelope.this.copy(-180.0, Envelope.this.xmax.-(360.0), Envelope.this.copy$default$3, Envelope.this.copy$default$4))
}
        </td>
      </tr><tr>
        <td>
          541
        </td>
        <td>
          47461
        </td>
        <td>
          20468
          -
          20479
        </td>
        <td>
          Apply
        </td>
        <td>
          scala.Double.-
        </td>
        <td>
          
        </td>
        <td style="background: #F0ADAD">
          Envelope.this.xmin.-(360.0)
        </td>
      </tr><tr>
        <td>
          541
        </td>
        <td>
          47462
        </td>
        <td>
          20488
          -
          20499
        </td>
        <td>
          Apply
        </td>
        <td>
          scala.Double.-
        </td>
        <td>
          
        </td>
        <td style="background: #F0ADAD">
          Envelope.this.xmax.-(360.0)
        </td>
      </tr><tr>
        <td>
          541
        </td>
        <td>
          47463
        </td>
        <td>
          20456
          -
          20500
        </td>
        <td>
          Apply
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope.copy
        </td>
        <td>
          
        </td>
        <td style="background: #F0ADAD">
          Envelope.this.copy(Envelope.this.xmin.-(360.0), Envelope.this.xmax.-(360.0), Envelope.this.copy$default$3, Envelope.this.copy$default$4)
        </td>
      </tr><tr>
        <td>
          541
        </td>
        <td>
          47464
        </td>
        <td>
          20452
          -
          20501
        </td>
        <td>
          Apply
        </td>
        <td>
          scala.collection.generic.GenericCompanion.apply
        </td>
        <td>
          
        </td>
        <td style="background: #F0ADAD">
          scala.collection.Seq.apply[org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope](Envelope.this.copy(Envelope.this.xmin.-(360.0), Envelope.this.xmax.-(360.0), Envelope.this.copy$default$3, Envelope.this.copy$default$4))
        </td>
      </tr><tr>
        <td>
          541
        </td>
        <td>
          47465
        </td>
        <td>
          20452
          -
          20501
        </td>
        <td>
          Block
        </td>
        <td>
          scala.collection.generic.GenericCompanion.apply
        </td>
        <td>
          
        </td>
        <td style="background: #F0ADAD">
          scala.collection.Seq.apply[org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope](Envelope.this.copy(Envelope.this.xmin.-(360.0), Envelope.this.xmax.-(360.0), Envelope.this.copy$default$3, Envelope.this.copy$default$4))
        </td>
      </tr><tr>
        <td>
          542
        </td>
        <td>
          47466
        </td>
        <td>
          20559
          -
          20564
        </td>
        <td>
          Literal
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          -180.0
        </td>
      </tr><tr>
        <td>
          542
        </td>
        <td>
          47467
        </td>
        <td>
          20573
          -
          20584
        </td>
        <td>
          Apply
        </td>
        <td>
          scala.Double.-
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          Envelope.this.xmax.-(360.0)
        </td>
      </tr><tr>
        <td>
          542
        </td>
        <td>
          47468
        </td>
        <td>
          20547
          -
          20585
        </td>
        <td>
          Apply
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope.copy
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          Envelope.this.copy(-180.0, Envelope.this.xmax.-(360.0), Envelope.this.copy$default$3, Envelope.this.copy$default$4)
        </td>
      </tr><tr>
        <td>
          542
        </td>
        <td>
          47469
        </td>
        <td>
          20534
          -
          20586
        </td>
        <td>
          Apply
        </td>
        <td>
          scala.collection.generic.GenericCompanion.apply
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          scala.collection.Seq.apply[org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope](trimmed, Envelope.this.copy(-180.0, Envelope.this.xmax.-(360.0), Envelope.this.copy$default$3, Envelope.this.copy$default$4))
        </td>
      </tr><tr>
        <td>
          542
        </td>
        <td>
          47470
        </td>
        <td>
          20534
          -
          20586
        </td>
        <td>
          Block
        </td>
        <td>
          scala.collection.generic.GenericCompanion.apply
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          scala.collection.Seq.apply[org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope](trimmed, Envelope.this.copy(-180.0, Envelope.this.xmax.-(360.0), Envelope.this.copy$default$3, Envelope.this.copy$default$4))
        </td>
      </tr><tr>
        <td>
          545
        </td>
        <td>
          47472
        </td>
        <td>
          20620
          -
          20629
        </td>
        <td>
          Apply
        </td>
        <td>
          scala.collection.generic.GenericCompanion.apply
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          scala.collection.Seq.apply[org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope](this)
        </td>
      </tr><tr>
        <td>
          545
        </td>
        <td>
          47473
        </td>
        <td>
          20620
          -
          20629
        </td>
        <td>
          Block
        </td>
        <td>
          scala.collection.generic.GenericCompanion.apply
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          scala.collection.Seq.apply[org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope](this)
        </td>
      </tr><tr>
        <td>
          556
        </td>
        <td>
          47478
        </td>
        <td>
          20849
          -
          20853
        </td>
        <td>
          Select
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope.xmin
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          Envelope.this.xmin
        </td>
      </tr><tr>
        <td>
          556
        </td>
        <td>
          47479
        </td>
        <td>
          20855
          -
          20859
        </td>
        <td>
          Select
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope.xmax
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          Envelope.this.xmax
        </td>
      </tr><tr>
        <td>
          556
        </td>
        <td>
          47480
        </td>
        <td>
          20861
          -
          20865
        </td>
        <td>
          Select
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope.ymin
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          Envelope.this.ymin
        </td>
      </tr><tr>
        <td>
          556
        </td>
        <td>
          47481
        </td>
        <td>
          20867
          -
          20871
        </td>
        <td>
          Select
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope.ymax
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          Envelope.this.ymax
        </td>
      </tr><tr>
        <td>
          556
        </td>
        <td>
          47482
        </td>
        <td>
          20873
          -
          20886
        </td>
        <td>
          Select
        </td>
        <td>
          org.locationtech.geomesa.utils.geotools.CRS_EPSG_4326
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          org.locationtech.geomesa.utils.geotools.`package`.CRS_EPSG_4326
        </td>
      </tr><tr>
        <td>
          556
        </td>
        <td>
          47483
        </td>
        <td>
          20826
          -
          20887
        </td>
        <td>
          Apply
        </td>
        <td>
          org.geotools.geometry.jts.ReferencedEnvelope.&lt;init&gt;
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          new org.geotools.geometry.jts.ReferencedEnvelope(Envelope.this.xmin, Envelope.this.xmax, Envelope.this.ymin, Envelope.this.ymax, org.locationtech.geomesa.utils.geotools.`package`.CRS_EPSG_4326)
        </td>
      </tr><tr>
        <td>
          556
        </td>
        <td>
          47484
        </td>
        <td>
          20812
          -
          20888
        </td>
        <td>
          Apply
        </td>
        <td>
          org.geotools.api.filter.FilterFactory.bbox
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          org.locationtech.geomesa.filter.`package`.ff.bbox(geom, new org.geotools.geometry.jts.ReferencedEnvelope(Envelope.this.xmin, Envelope.this.xmax, Envelope.this.ymin, Envelope.this.ymax, org.locationtech.geomesa.utils.geotools.`package`.CRS_EPSG_4326))
        </td>
      </tr><tr>
        <td>
          563
        </td>
        <td>
          47485
        </td>
        <td>
          21056
          -
          21060
        </td>
        <td>
          Select
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope.xmin
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          Envelope.this.xmin
        </td>
      </tr><tr>
        <td>
          563
        </td>
        <td>
          47486
        </td>
        <td>
          21062
          -
          21066
        </td>
        <td>
          Select
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope.xmax
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          Envelope.this.xmax
        </td>
      </tr><tr>
        <td>
          563
        </td>
        <td>
          47487
        </td>
        <td>
          21068
          -
          21072
        </td>
        <td>
          Select
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope.ymin
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          Envelope.this.ymin
        </td>
      </tr><tr>
        <td>
          563
        </td>
        <td>
          47488
        </td>
        <td>
          21074
          -
          21078
        </td>
        <td>
          Select
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope.ymax
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          Envelope.this.ymax
        </td>
      </tr><tr>
        <td>
          563
        </td>
        <td>
          47489
        </td>
        <td>
          21017
          -
          21079
        </td>
        <td>
          Apply
        </td>
        <td>
          org.locationtech.jts.geom.Envelope.&lt;init&gt;
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          new org.locationtech.jts.geom.Envelope(Envelope.this.xmin, Envelope.this.xmax, Envelope.this.ymin, Envelope.this.ymax)
        </td>
      </tr><tr>
        <td>
          570
        </td>
        <td>
          47490
        </td>
        <td>
          21169
          -
          21171
        </td>
        <td>
          Literal
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td>
          
        </td>
        <td style="background: #F0ADAD">
          &quot;[&quot;
        </td>
      </tr><tr>
        <td>
          570
        </td>
        <td>
          47491
        </td>
        <td>
          21175
          -
          21178
        </td>
        <td>
          Literal
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td>
          
        </td>
        <td style="background: #F0ADAD">
          &quot;, &quot;
        </td>
      </tr><tr>
        <td>
          570
        </td>
        <td>
          47492
        </td>
        <td>
          21182
          -
          21185
        </td>
        <td>
          Literal
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td>
          
        </td>
        <td style="background: #F0ADAD">
          &quot;, &quot;
        </td>
      </tr><tr>
        <td>
          570
        </td>
        <td>
          47493
        </td>
        <td>
          21189
          -
          21192
        </td>
        <td>
          Literal
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td>
          
        </td>
        <td style="background: #F0ADAD">
          &quot;, &quot;
        </td>
      </tr><tr>
        <td>
          570
        </td>
        <td>
          47494
        </td>
        <td>
          21196
          -
          21198
        </td>
        <td>
          Literal
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td>
          
        </td>
        <td style="background: #F0ADAD">
          &quot;]&quot;
        </td>
      </tr><tr>
        <td>
          570
        </td>
        <td>
          47495
        </td>
        <td>
          21171
          -
          21175
        </td>
        <td>
          Select
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope.xmin
        </td>
        <td>
          
        </td>
        <td style="background: #F0ADAD">
          Envelope.this.xmin
        </td>
      </tr><tr>
        <td>
          570
        </td>
        <td>
          47496
        </td>
        <td>
          21178
          -
          21182
        </td>
        <td>
          Select
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope.xmax
        </td>
        <td>
          
        </td>
        <td style="background: #F0ADAD">
          Envelope.this.xmax
        </td>
      </tr><tr>
        <td>
          570
        </td>
        <td>
          47497
        </td>
        <td>
          21185
          -
          21189
        </td>
        <td>
          Select
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope.ymin
        </td>
        <td>
          
        </td>
        <td style="background: #F0ADAD">
          Envelope.this.ymin
        </td>
      </tr><tr>
        <td>
          570
        </td>
        <td>
          47498
        </td>
        <td>
          21192
          -
          21196
        </td>
        <td>
          Select
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope.ymax
        </td>
        <td>
          
        </td>
        <td style="background: #F0ADAD">
          Envelope.this.ymax
        </td>
      </tr><tr>
        <td>
          570
        </td>
        <td>
          47499
        </td>
        <td>
          21167
          -
          21198
        </td>
        <td>
          Apply
        </td>
        <td>
          scala.StringContext.s
        </td>
        <td>
          
        </td>
        <td style="background: #F0ADAD">
          scala.StringContext.apply(&quot;[&quot;, &quot;, &quot;, &quot;, &quot;, &quot;, &quot;, &quot;]&quot;).s(Envelope.this.xmin, Envelope.this.xmax, Envelope.this.ymin, Envelope.this.ymax)
        </td>
      </tr><tr>
        <td>
          584
        </td>
        <td>
          47500
        </td>
        <td>
          21555
          -
          21555
        </td>
        <td>
          Select
        </td>
        <td>
          scala.Tuple2._1
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          x$9._1
        </td>
      </tr><tr>
        <td>
          584
        </td>
        <td>
          47501
        </td>
        <td>
          21561
          -
          21561
        </td>
        <td>
          Select
        </td>
        <td>
          scala.Tuple2._2
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          x$9._2
        </td>
      </tr><tr>
        <td>
          585
        </td>
        <td>
          47502
        </td>
        <td>
          21639
          -
          21656
        </td>
        <td>
          Apply
        </td>
        <td>
          scala.Double.-
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          point.getX().-(east)
        </td>
      </tr><tr>
        <td>
          585
        </td>
        <td>
          47503
        </td>
        <td>
          21658
          -
          21675
        </td>
        <td>
          Apply
        </td>
        <td>
          scala.Double.+
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          point.getX().+(east)
        </td>
      </tr><tr>
        <td>
          585
        </td>
        <td>
          47504
        </td>
        <td>
          21677
          -
          21695
        </td>
        <td>
          Apply
        </td>
        <td>
          scala.Double.-
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          point.getY().-(north)
        </td>
      </tr><tr>
        <td>
          585
        </td>
        <td>
          47505
        </td>
        <td>
          21697
          -
          21715
        </td>
        <td>
          Apply
        </td>
        <td>
          scala.Double.+
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          point.getY().+(north)
        </td>
      </tr><tr>
        <td>
          585
        </td>
        <td>
          47506
        </td>
        <td>
          21630
          -
          21716
        </td>
        <td>
          Apply
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope.apply
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          KNearestNeighborSearchProcess.this.Envelope.apply(point.getX().-(east), point.getX().+(east), point.getY().-(north), point.getY().+(north))
        </td>
      </tr>
    </table>
          </div>
        </div>
      </body>
    </html>