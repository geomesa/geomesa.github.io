<html>
      <head>
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
        <title id="title">
          org/locationtech/geomesa/process/query/KNearestNeighborSearchProcess.scala.html
        </title>
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/jquery.tablesorter/2.20.1/css/theme.default.min.css" type="text/css"/><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.tablesorter/2.20.1/js/jquery.tablesorter.min.js"></script><link rel="stylesheet" href="https://netdna.bootstrapcdn.com/bootstrap/3.0.3/css/bootstrap.min.css" type="text/css"/><script src="https://netdna.bootstrapcdn.com/bootstrap/3.0.3/js/bootstrap.min.js"></script><script type="text/javascript">
        $(document).ready(function() {$(".tablesorter").tablesorter();});
      </script>
        <style>
          table.codegrid { font-family: monospace; font-size: 12px; width: auto!important; }table.statementlist { width: auto!important; font-size: 13px; } table.codegrid td { padding: 0!important; border: 0!important } table td.linenumber { width: 40px!important; } 
        </style>
      </head>
      <body style="font-family: monospace;">
        <ul class="nav nav-tabs">
          <li>
            <a href="#codegrid" data-toggle="tab">Codegrid</a>
          </li>
          <li>
            <a href="#statementlist" data-toggle="tab">Statement List</a>
          </li>
        </ul>
        <div class="tab-content">
          <div class="tab-pane active" id="codegrid">
            <pre style='font-size: 12pt; font-family: courier, monospace;'>1 <span style=''>/***********************************************************************
</span>2 <span style=''> * Copyright (c) 2013-2025 General Atomics Integrated Intelligence, Inc.
</span>3 <span style=''> * All rights reserved. This program and the accompanying materials
</span>4 <span style=''> * are made available under the terms of the Apache License, Version 2.0
</span>5 <span style=''> * which accompanies this distribution and is available at
</span>6 <span style=''> * https://www.apache.org/licenses/LICENSE-2.0
</span>7 <span style=''> ***********************************************************************/
</span>8 <span style=''>
</span>9 <span style=''>package org.locationtech.geomesa.process.query
</span>10 <span style=''>
</span>11 <span style=''>import com.typesafe.scalalogging.LazyLogging
</span>12 <span style=''>import org.geotools.api.data.{Query, SimpleFeatureSource}
</span>13 <span style=''>import org.geotools.api.feature.Feature
</span>14 <span style=''>import org.geotools.api.feature.simple.SimpleFeature
</span>15 <span style=''>import org.geotools.api.filter.Filter
</span>16 <span style=''>import org.geotools.api.filter.expression.PropertyName
</span>17 <span style=''>import org.geotools.data.simple.SimpleFeatureCollection
</span>18 <span style=''>import org.geotools.feature.DefaultFeatureCollection
</span>19 <span style=''>import org.geotools.filter.text.ecql.ECQL
</span>20 <span style=''>import org.geotools.geometry.jts.ReferencedEnvelope
</span>21 <span style=''>import org.geotools.process.factory.{DescribeParameter, DescribeProcess, DescribeResult}
</span>22 <span style=''>import org.geotools.referencing.GeodeticCalculator
</span>23 <span style=''>import org.geotools.util.factory.Hints
</span>24 <span style=''>import org.locationtech.geomesa.filter.ff
</span>25 <span style=''>import org.locationtech.geomesa.index.geotools.GeoMesaFeatureCollection
</span>26 <span style=''>import org.locationtech.geomesa.index.process.{FeatureResult, GeoMesaProcessVisitor}
</span>27 <span style=''>import org.locationtech.geomesa.process.GeoMesaProcess
</span>28 <span style=''>import org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.KNNVisitor
</span>29 <span style=''>import org.locationtech.geomesa.utils.collection.CloseableIterator
</span>30 <span style=''>import org.locationtech.geomesa.utils.concurrent.CachedThreadPool
</span>31 <span style=''>import org.locationtech.geomesa.utils.geotools.{CRS_EPSG_4326, GeometryUtils}
</span>32 <span style=''>import org.locationtech.geomesa.utils.io.WithClose
</span>33 <span style=''>import org.locationtech.jts.geom.Point
</span>34 <span style=''>
</span>35 <span style=''>@DescribeProcess(
</span>36 <span style=''>  title = &quot;Geomesa-enabled K Nearest Neighbor Search&quot;,
</span>37 <span style=''>  description = &quot;Performs a K-nearest-neighbor search on a feature collection using a second feature collection as input&quot;
</span>38 <span style=''>)
</span>39 <span style=''>class KNearestNeighborSearchProcess extends GeoMesaProcess with LazyLogging {
</span>40 <span style=''>
</span>41 <span style=''>  @DescribeResult(description = &quot;Output feature collection&quot;)
</span>42 <span style=''>  def execute(
</span>43 <span style=''>               @DescribeParameter(
</span>44 <span style=''>                 name = &quot;inputFeatures&quot;,
</span>45 <span style=''>                 description = &quot;Feature collection that defines the points to search&quot;)
</span>46 <span style=''>               inputFeatures: SimpleFeatureCollection,
</span>47 <span style=''>
</span>48 <span style=''>               @DescribeParameter(
</span>49 <span style=''>                 name = &quot;dataFeatures&quot;,
</span>50 <span style=''>                 description = &quot;Feature collection to query for nearest neighbors&quot;)
</span>51 <span style=''>               dataFeatures: SimpleFeatureCollection,
</span>52 <span style=''>
</span>53 <span style=''>               @DescribeParameter(
</span>54 <span style=''>                 name = &quot;numDesired&quot;,
</span>55 <span style=''>                 description = &quot;k, the number of nearest neighbors to return&quot;)
</span>56 <span style=''>               numDesired: java.lang.Integer,
</span>57 <span style=''>
</span>58 <span style=''>               @DescribeParameter(
</span>59 <span style=''>                 name = &quot;estimatedDistance&quot;,
</span>60 <span style=''>                 description = &quot;Estimate of the distance in meters for the k-th nearest neighbor, used for the initial query window&quot;)
</span>61 <span style=''>               estimatedDistance: java.lang.Double,
</span>62 <span style=''>
</span>63 <span style=''>               @DescribeParameter(
</span>64 <span style=''>                 name = &quot;maxSearchDistance&quot;,
</span>65 <span style=''>                 description = &quot;Maximum search distance in meters, used to prevent runaway queries of the entire data set&quot;)
</span>66 <span style=''>               maxSearchDistance: java.lang.Double
</span>67 <span style=''>               ): SimpleFeatureCollection = {
</span>68 <span style=''>
</span>69 <span style=''>    logger.debug(
</span>70 <span style=''>      s&quot;Running KNN query for ${dataFeatures.getClass.getName} with k = $numDesired, &quot; +
</span>71 <span style=''>        s&quot;initial distance = $estimatedDistance, max distance = $maxSearchDistance&quot;)
</span>72 <span style=''>
</span>73 <span style=''>    val visitor = </span><span style='background: #AEF1AE'>new KNNVisitor(inputFeatures, numDesired, estimatedDistance, maxSearchDistance)</span><span style=''>
</span>74 <span style=''>    </span><span style='background: #AEF1AE'>GeoMesaFeatureCollection.visit(dataFeatures, visitor)</span><span style=''>
</span>75 <span style=''>    </span><span style='background: #AEF1AE'>visitor.getResult.results</span><span style=''>
</span>76 <span style=''>  }
</span>77 <span style=''>}
</span>78 <span style=''>
</span>79 <span style=''>object KNearestNeighborSearchProcess {
</span>80 <span style=''>
</span>81 <span style=''>  private val WholeWorldEnvelope = </span><span style='background: #AEF1AE'>Envelope(-180d, 180d, -90d, 90d)</span><span style=''>
</span>82 <span style=''>
</span>83 <span style=''>  /**
</span>84 <span style=''>    * Main visitor class for the KNN search process
</span>85 <span style=''>    *
</span>86 <span style=''>    * @param query query features - geometries will be used as the inputs
</span>87 <span style=''>    * @param k number of neighbors to find
</span>88 <span style=''>    * @param start initial distance to search
</span>89 <span style=''>    * @param threshold max distance to search
</span>90 <span style=''>    */
</span>91 <span style=''>  class KNNVisitor(query: SimpleFeatureCollection, k: Int, start: Double, threshold: Double)
</span>92 <span style=''>      extends GeoMesaProcessVisitor with LazyLogging {
</span>93 <span style=''>
</span>94 <span style=''>    import org.locationtech.geomesa.filter.ff
</span>95 <span style=''>    import org.locationtech.geomesa.utils.geotools.RichSimpleFeatureType.RichSimpleFeatureType
</span>96 <span style=''>
</span>97 <span style=''>    private lazy val queries: Seq[Point] = CloseableIterator(query.features()).toList.flatMap { f =&gt;
</span>98 <span style=''>      f.getDefaultGeometry match {
</span>99 <span style=''>        case p: Point =&gt; Some(p)
</span>100 <span style=''>        case g =&gt; logger.warn(s&quot;KNN query not implemented for non-point geometries, skipping this feature: $g&quot;); None
</span>101 <span style=''>      }
</span>102 <span style=''>    }
</span>103 <span style=''>
</span>104 <span style=''>    private lazy val results = Seq.fill(queries.length)(Array.ofDim[FeatureWithDistance](k))
</span>105 <span style=''>    private lazy val calculators = queries.zip(results).map { case (p, r) =&gt; new KnnCalculator(p, k, threshold, r) }
</span>106 <span style=''>
</span>107 <span style=''>    private var result: FeatureResult = _
</span>108 <span style=''>
</span>109 <span style=''>    // called for non-optimized visits
</span>110 <span style=''>    override def visit(feature: Feature): Unit = </span><span style='background: #AEF1AE'>calculators.foreach(_.visit(feature.asInstanceOf[SimpleFeature]))</span><span style=''>
</span>111 <span style=''>
</span>112 <span style=''>    override def getResult: FeatureResult = {
</span>113 <span style=''>      if (</span><span style='background: #AEF1AE'>result == null</span><span style=''>) </span><span style='background: #AEF1AE'>{
</span>114 <span style=''></span><span style='background: #AEF1AE'>        val collection = new DefaultFeatureCollection()
</span>115 <span style=''></span><span style='background: #AEF1AE'>        results.foreach(_.foreach(r =&gt; if (r != null) { collection.add(r.sf) }))
</span>116 <span style=''></span><span style='background: #AEF1AE'>        result = FeatureResult(collection)
</span>117 <span style=''></span><span style='background: #AEF1AE'>      }</span><span style=''>
</span>118 <span style=''>      </span><span style='background: #AEF1AE'>result</span><span style=''>
</span>119 <span style=''>    }
</span>120 <span style=''>
</span>121 <span style=''>    override def execute(source: SimpleFeatureSource, query: Query): Unit = {
</span>122 <span style=''>      logger.debug(s&quot;Running Geomesa KNN process on source type ${source.getClass.getName}&quot;)
</span>123 <span style=''>
</span>124 <span style=''>      // create a new feature collection to hold the results of the KNN search around each point
</span>125 <span style=''>      val collection = </span><span style='background: #AEF1AE'>new DefaultFeatureCollection()</span><span style=''>
</span>126 <span style=''>      val geom = </span><span style='background: #AEF1AE'>ff.property(source.getSchema.getGeomField)</span><span style=''>
</span>127 <span style=''>
</span>128 <span style=''>      // for each entry in the inputFeatures collection:
</span>129 <span style=''>      def run(p: Point): Unit = {
</span>130 <span style=''>        // tracks our nearest neighbors
</span>131 <span style=''>        val results = </span><span style='background: #AEF1AE'>Array.ofDim[FeatureWithDistance](k)</span><span style=''>
</span>132 <span style=''>        // tracks features are in our search envelope but that aren't within our current search distance
</span>133 <span style=''>        // we use a java linked list as scala doesn't have anything with 'iterate and remove' functionality
</span>134 <span style=''>        val overflow = </span><span style='background: #AEF1AE'>new java.util.LinkedList[FeatureWithDistance]()</span><span style=''>
</span>135 <span style=''>
</span>136 <span style=''>        // calculator for expanding window queries
</span>137 <span style=''>        val window = </span><span style='background: #AEF1AE'>new KnnWindow(query, geom, p, k, start, threshold)</span><span style=''>
</span>138 <span style=''>        var found = </span><span style='background: #AEF1AE'>0</span><span style=''> // tracks the number of neighbors we've found so far
</span>139 <span style=''>
</span>140 <span style=''>        val initial = </span><span style='background: #AEF1AE'>window.next(None)</span><span style=''>
</span>141 <span style=''>        logger.trace(s&quot;Current query window:\n  ${window.window.debug.mkString(&quot;\n  &quot;)}&quot;)
</span>142 <span style=''>        logger.trace(s&quot;Current filter: ${ECQL.toCQL(initial.getFilter)}&quot;)
</span>143 <span style=''>
</span>144 <span style=''>        // run our first query against the estimated distance
</span>145 <span style=''>        </span><span style='background: #AEF1AE'>WithClose(source.getFeatures(initial).features()) { iter =&gt;
</span>146 <span style=''></span><span style='background: #AEF1AE'>          // note: the calculator will populate our results array
</span>147 <span style=''></span><span style='background: #AEF1AE'>          val knn = new KnnCalculator(p, k, window.radius, results)
</span>148 <span style=''></span><span style='background: #AEF1AE'>          while (iter.hasNext) {
</span>149 <span style=''></span><span style='background: #AEF1AE'>            val sf = iter.next
</span>150 <span style=''></span><span style='background: #AEF1AE'>            // features that aren't within our query distance are added to the overflow for the next iteration
</span>151 <span style=''></span><span style='background: #AEF1AE'>            knn.visit(sf).foreach(d =&gt; overflow.add(FeatureWithDistance(sf, d)))
</span>152 <span style=''></span><span style='background: #AEF1AE'>          }
</span>153 <span style=''></span><span style='background: #AEF1AE'>          found = knn.size
</span>154 <span style=''></span><span style='background: #AEF1AE'>        }</span><span style=''>
</span>155 <span style=''>
</span>156 <span style=''>        var iteration = </span><span style='background: #AEF1AE'>1</span><span style=''> // tracks the number of queries we've run
</span>157 <span style=''>
</span>158 <span style=''>        // if we haven't found k features, start expanding the search distance
</span>159 <span style=''>        while (</span><span style='background: #AEF1AE'>found &lt; k &amp;&amp; window.hasNext</span><span style=''>) </span><span style='background: #AEF1AE'>{
</span>160 <span style=''></span><span style='background: #AEF1AE'>          val last = window.radius
</span>161 <span style=''></span><span style='background: #AEF1AE'>          // calculate the next query to search, based on how many we've found so far
</span>162 <span style=''></span><span style='background: #AEF1AE'>          val next = window.next(Some(found))
</span>163 <span style=''></span><span style='background: #AEF1AE'>          logger.debug(
</span>164 <span style=''></span><span style='background: #AEF1AE'>            s&quot;Expanding search at (${p.getX} ${p.getY}) from $last to ${window.radius} meters &quot; +
</span>165 <span style=''></span><span style='background: #AEF1AE'>                s&quot;based on finding $found/$k neighbors&quot;)
</span>166 <span style=''></span><span style='background: #AEF1AE'>          logger.trace(s&quot;Current query window:\n  ${window.window.debug.mkString(&quot;\n  &quot;)}&quot;)
</span>167 <span style=''></span><span style='background: #AEF1AE'>          logger.trace(s&quot;Current filter: ${ECQL.toCQL(next.getFilter)}&quot;)
</span>168 <span style=''></span><span style='background: #AEF1AE'>
</span>169 <span style=''></span><span style='background: #AEF1AE'>          // calculator for our new distance, initialized with the neighbors we've already found
</span>170 <span style=''></span><span style='background: #AEF1AE'>          val knn = new KnnCalculator(p, k, window.radius, results, found)
</span>171 <span style=''></span><span style='background: #AEF1AE'>          // re-visit any features that were outside our distance but inside our last envelope
</span>172 <span style=''></span><span style='background: #AEF1AE'>          val iter = overflow.iterator()
</span>173 <span style=''></span><span style='background: #AEF1AE'>          while (iter.hasNext) {
</span>174 <span style=''></span><span style='background: #AEF1AE'>            val FeatureWithDistance(sf, d) = iter.next()
</span>175 <span style=''></span><span style='background: #AEF1AE'>            if (d &lt;= window.radius) {
</span>176 <span style=''></span><span style='background: #AEF1AE'>              knn.visit(sf, d)
</span>177 <span style=''></span><span style='background: #AEF1AE'>              iter.remove()
</span>178 <span style=''></span><span style='background: #AEF1AE'>            }
</span>179 <span style=''></span><span style='background: #AEF1AE'>          }
</span>180 <span style=''></span><span style='background: #AEF1AE'>
</span>181 <span style=''></span><span style='background: #AEF1AE'>          // run the new query
</span>182 <span style=''></span><span style='background: #AEF1AE'>          WithClose(source.getFeatures(next).features()) { iter =&gt;
</span>183 <span style=''></span><span style='background: #AEF1AE'>            while (iter.hasNext) {
</span>184 <span style=''></span><span style='background: #AEF1AE'>              val sf = iter.next
</span>185 <span style=''></span><span style='background: #AEF1AE'>              // features that aren't within our query distance are added to the overflow for the next iteration
</span>186 <span style=''></span><span style='background: #AEF1AE'>              knn.visit(sf).foreach(d =&gt; overflow.add(FeatureWithDistance(sf, d)))
</span>187 <span style=''></span><span style='background: #AEF1AE'>            }
</span>188 <span style=''></span><span style='background: #AEF1AE'>            found = knn.size
</span>189 <span style=''></span><span style='background: #AEF1AE'>          }
</span>190 <span style=''></span><span style='background: #AEF1AE'>
</span>191 <span style=''></span><span style='background: #AEF1AE'>          iteration += 1
</span>192 <span style=''></span><span style='background: #AEF1AE'>        }</span><span style=''>
</span>193 <span style=''>
</span>194 <span style=''>        logger.debug(
</span>195 <span style=''>          s&quot;Found $found/$k neighbors at (${p.getX} ${p.getY}) after $iteration iteration(s) with final search &quot; +
</span>196 <span style=''>              s&quot;distance of ${window.radius} (initial $start, max $threshold)&quot;)
</span>197 <span style=''>        logger.trace(results.take(found).map(_.sf).mkString(&quot;; &quot;))
</span>198 <span style=''>
</span>199 <span style=''>        </span><span style='background: #AEF1AE'>collection.synchronized {
</span>200 <span style=''></span><span style='background: #AEF1AE'>          var i = 0
</span>201 <span style=''></span><span style='background: #AEF1AE'>          while (i &lt; found) {
</span>202 <span style=''></span><span style='background: #AEF1AE'>            collection.add(results(i).sf)
</span>203 <span style=''></span><span style='background: #AEF1AE'>            i += 1
</span>204 <span style=''></span><span style='background: #AEF1AE'>          }
</span>205 <span style=''></span><span style='background: #AEF1AE'>        }</span><span style=''>
</span>206 <span style=''>      }
</span>207 <span style=''>
</span>208 <span style=''>      </span><span style='background: #AEF1AE'>queries.toList.map(p =&gt; CachedThreadPool.submit(() =&gt; run(p))).foreach(_.get)</span><span style=''>
</span>209 <span style=''>
</span>210 <span style=''>      </span><span style='background: #AEF1AE'>this.result = FeatureResult(collection)</span><span style=''>
</span>211 <span style=''>    }
</span>212 <span style=''>  }
</span>213 <span style=''>
</span>214 <span style=''>  /**
</span>215 <span style=''>    * Class for finding window queries around a central point
</span>216 <span style=''>    *
</span>217 <span style=''>    * @param base base query
</span>218 <span style=''>    * @param geom geometry attribute being queried
</span>219 <span style=''>    * @param p central query point
</span>220 <span style=''>    * @param k number of features to find
</span>221 <span style=''>    * @param start initial search distance
</span>222 <span style=''>    * @param threshold max distance to query
</span>223 <span style=''>    */
</span>224 <span style=''>  class KnnWindow(base: Query, geom: PropertyName, p: Point, k: Int, start: Double, threshold: Double) {
</span>225 <span style=''>
</span>226 <span style=''>    private val calc = </span><span style='background: #AEF1AE'>new GeodeticCalculator()</span><span style=''>
</span>227 <span style=''>    private var distance = </span><span style='background: #AEF1AE'>start</span><span style=''>
</span>228 <span style=''>
</span>229 <span style=''>    // our query envelope - this is purely cartesian and not constrained by world bounds
</span>230 <span style=''>    private var envelope = </span><span style='background: #AEF1AE'>QueryEnvelope(Envelope(p, distance, calc), None)</span><span style=''>
</span>231 <span style=''>
</span>232 <span style=''>    /**
</span>233 <span style=''>      * Current search radius, in meters
</span>234 <span style=''>      *
</span>235 <span style=''>      * @return
</span>236 <span style=''>      */
</span>237 <span style=''>    def radius: Double = </span><span style='background: #AEF1AE'>distance</span><span style=''>
</span>238 <span style=''>
</span>239 <span style=''>    /**
</span>240 <span style=''>      * Current search envelope
</span>241 <span style=''>      *
</span>242 <span style=''>      * @return envelope
</span>243 <span style=''>      */
</span>244 <span style=''>    def window: QueryEnvelope = </span><span style='background: #F0ADAD'>envelope</span><span style=''>
</span>245 <span style=''>
</span>246 <span style=''>    /**
</span>247 <span style=''>      * Whether there are more window queries within the threshold
</span>248 <span style=''>      *
</span>249 <span style=''>      * @return
</span>250 <span style=''>      */
</span>251 <span style=''>    def hasNext: Boolean = </span><span style='background: #AEF1AE'>distance &lt; threshold</span><span style=''>
</span>252 <span style=''>
</span>253 <span style=''>    /**
</span>254 <span style=''>      * Get the next query window
</span>255 <span style=''>      *
</span>256 <span style=''>      * @param found number of features found so far, if the query has already been run
</span>257 <span style=''>      * @return
</span>258 <span style=''>      */
</span>259 <span style=''>    def next(found: Option[Int]): Query = {
</span>260 <span style=''>      </span><span style='background: #AEF1AE'>found.foreach(expand)</span><span style=''> // expand our window if we've already run a query
</span>261 <span style=''>
</span>262 <span style=''>      val query = </span><span style='background: #AEF1AE'>new Query(base)</span><span style=''>
</span>263 <span style=''>      </span><span style='background: #AEF1AE'>query.setHints(new Hints(base.getHints))</span><span style=''> // prevent sharing of hints between queries
</span>264 <span style=''>
</span>265 <span style=''>      // remove the hole from our query envelopes so that we don't scan the same area more than once
</span>266 <span style=''>      val filter = </span><span style='background: #AEF1AE'>org.locationtech.geomesa.filter.orFilters(envelope.query.map(_.toFilter(geom)))</span><span style=''>
</span>267 <span style=''>      </span><span style='background: #AEF1AE'>base.getFilter</span><span style=''> match {
</span>268 <span style=''>        case null | Filter.INCLUDE =&gt; </span><span style='background: #AEF1AE'>query.setFilter(filter)</span><span style=''>
</span>269 <span style=''>        case f =&gt; </span><span style='background: #AEF1AE'>query.setFilter(ff.and(f, filter))</span><span style=''>
</span>270 <span style=''>      }
</span>271 <span style=''>
</span>272 <span style=''>      query
</span>273 <span style=''>    }
</span>274 <span style=''>
</span>275 <span style=''>    /**
</span>276 <span style=''>      * Find the next window to search in an attempt to find the knn
</span>277 <span style=''>      *
</span>278 <span style=''>      * @param found number of neighbors found within the previous distance
</span>279 <span style=''>      */
</span>280 <span style=''>    private def expand(found: Int): Unit = {
</span>281 <span style=''>      // expand the window radius. algorithm derived from:
</span>282 <span style=''>      //    Efficient k Nearest Neighbor Queries on Remote Spatial Databases Using Range Estimation
</span>283 <span style=''>      //    Danzhou Liu, Ee-Peng Lim, Wee-Keong Ng
</span>284 <span style=''>      //    Centre for Advanced Information Systems, School of Computer Engineering
</span>285 <span style=''>      //    Nanyang Technological University, Singapore 639798
</span>286 <span style=''>      //    {P149571472, aseplim, awkng}@ntu.edu.sg
</span>287 <span style=''>      //  Available at: http://citeseerx.ist.psu.edu/viewdoc/download?doi=10.1.1.507.4109&amp;rep=rep1&amp;type=pdf
</span>288 <span style=''>
</span>289 <span style=''>      // note that this algorithm is fairly conservative - in their testing (using TIGER road data), it
</span>290 <span style=''>      // generally required 2-3 window expansions after the initial query in order to find the knn
</span>291 <span style=''>
</span>292 <span style=''>      </span><span style='background: #AEF1AE'>distance = if (found == 0) { distance * 2 } else {
</span>293 <span style=''></span><span style='background: #AEF1AE'>        val density = found / math.pow(2 * distance, 2)
</span>294 <span style=''></span><span style='background: #AEF1AE'>        math.sqrt(k / (math.Pi * density))
</span>295 <span style=''></span><span style='background: #AEF1AE'>      }</span><span style=''>
</span>296 <span style=''>      if (</span><span style='background: #AEF1AE'>distance &gt; threshold</span><span style=''>) {
</span>297 <span style=''>        </span><span style='background: #AEF1AE'>distance = threshold</span><span style=''>
</span>298 <span style=''>      }
</span>299 <span style=''>
</span>300 <span style=''>      val hole = </span><span style='background: #AEF1AE'>Some(envelope.envelope)</span><span style=''>
</span>301 <span style=''>      </span><span style='background: #AEF1AE'>envelope = QueryEnvelope(Envelope(p, distance, calc), hole)</span><span style=''>
</span>302 <span style=''>    }
</span>303 <span style=''>  }
</span>304 <span style=''>
</span>305 <span style=''>  /**
</span>306 <span style=''>    * Calculator for finding the k-nearest features
</span>307 <span style=''>    *
</span>308 <span style=''>    * @param query point to find neighbors for
</span>309 <span style=''>    * @param k number of neighbors to find
</span>310 <span style=''>    * @param threshold limit results to within a certain distance in meters
</span>311 <span style=''>    * @param results array of length k, used to hold results
</span>312 <span style=''>    * @param i number of features found so far, maxes out at k
</span>313 <span style=''>    */
</span>314 <span style=''>  class KnnCalculator(
</span>315 <span style=''>      query: Point,
</span>316 <span style=''>      k: Int,
</span>317 <span style=''>      threshold: Double,
</span>318 <span style=''>      results: Array[FeatureWithDistance],
</span>319 <span style=''>      private var i: Int = 0
</span>320 <span style=''>    ) extends LazyLogging {
</span>321 <span style=''>
</span>322 <span style=''>    private val calculator = </span><span style='background: #AEF1AE'>new GeodeticCalculator()</span><span style=''>
</span>323 <span style=''>
</span>324 <span style=''>    // tracks the index of our current farthest value
</span>325 <span style=''>    private var fi = if (</span><span style='background: #AEF1AE'>i &lt; k</span><span style=''>) { </span><span style='background: #AEF1AE'>0</span><span style=''> } else { </span><span style='background: #F0ADAD'>farthest</span><span style=''> }
</span>326 <span style=''>
</span>327 <span style=''>    /**
</span>328 <span style=''>      * Number of features found so far
</span>329 <span style=''>      *
</span>330 <span style=''>      * @return
</span>331 <span style=''>      */
</span>332 <span style=''>    def size: Int = </span><span style='background: #AEF1AE'>i</span><span style=''>
</span>333 <span style=''>
</span>334 <span style=''>    /**
</span>335 <span style=''>      * Visit a feature, checking the distance to the query point
</span>336 <span style=''>      *
</span>337 <span style=''>      * @param feature feature
</span>338 <span style=''>      * @return None if the feature is within the threshold, otherwise Some(distance to query point)
</span>339 <span style=''>      */
</span>340 <span style=''>    def visit(feature: SimpleFeature): Option[Double] = {
</span>341 <span style=''>      </span><span style='background: #AEF1AE'>feature.getDefaultGeometry</span><span style=''> match {
</span>342 <span style=''>        case p: Point </span><span style='background: #AEF1AE'>=&gt;
</span>343 <span style=''></span><span style='background: #AEF1AE'>          val meters = {
</span>344 <span style=''></span><span style='background: #AEF1AE'>            calculator.setStartingGeographicPoint(query.getX, query.getY)
</span>345 <span style=''></span><span style='background: #AEF1AE'>            calculator.setDestinationGeographicPoint(p.getX, p.getY)
</span>346 <span style=''></span><span style='background: #AEF1AE'>            calculator.getOrthodromicDistance
</span>347 <span style=''></span><span style='background: #AEF1AE'>          }
</span>348 <span style=''></span><span style='background: #AEF1AE'>          if (meters &gt; threshold) {
</span>349 <span style=''></span><span style='background: #AEF1AE'>            Some(meters)
</span>350 <span style=''></span><span style='background: #AEF1AE'>          } else {
</span>351 <span style=''></span><span style='background: #AEF1AE'>            visit(feature, meters)
</span>352 <span style=''></span><span style='background: #AEF1AE'>            None
</span>353 <span style=''></span><span style='background: #AEF1AE'>          }</span><span style=''>
</span>354 <span style=''>
</span>355 <span style=''>        case g </span><span style='background: #F0ADAD'>=&gt; logger.warn(s&quot;KNN query not implemented for non-point geometries, skipping this feature: $g&quot;); None</span><span style=''>
</span>356 <span style=''>      }
</span>357 <span style=''>    }
</span>358 <span style=''>
</span>359 <span style=''>    /**
</span>360 <span style=''>      * Visit a feature with a known distance
</span>361 <span style=''>      *
</span>362 <span style=''>      * @param feature feature
</span>363 <span style=''>      * @param distance distance from the query point, in meters (assumed to be within the threshold)
</span>364 <span style=''>      */
</span>365 <span style=''>    def visit(feature: SimpleFeature, distance: Double): Unit = {
</span>366 <span style=''>      if (</span><span style='background: #AEF1AE'>i &lt; k</span><span style=''>) </span><span style='background: #AEF1AE'>{
</span>367 <span style=''></span><span style='background: #AEF1AE'>        // if we haven't seen k features yet, then by definition we have a nearest neighbor
</span>368 <span style=''></span><span style='background: #AEF1AE'>        results(i) = FeatureWithDistance(feature, distance)
</span>369 <span style=''></span><span style='background: #AEF1AE'>        i += 1
</span>370 <span style=''></span><span style='background: #AEF1AE'>        if (i == k) {
</span>371 <span style=''></span><span style='background: #AEF1AE'>          // if we have k elements, find the farthest feature so that we can easily check it going forward
</span>372 <span style=''></span><span style='background: #AEF1AE'>          fi = farthest
</span>373 <span style=''></span><span style='background: #AEF1AE'>        }
</span>374 <span style=''></span><span style='background: #AEF1AE'>      }</span><span style=''> else </span><span style='background: #AEF1AE'>if (distance &lt; results(fi).meters) {
</span>375 <span style=''></span><span style='background: #AEF1AE'>        // we have found a new nearest - replace the farthest, then find the new farthest
</span>376 <span style=''></span><span style='background: #AEF1AE'>        results(fi) = FeatureWithDistance(feature, distance)
</span>377 <span style=''></span><span style='background: #AEF1AE'>        fi = farthest
</span>378 <span style=''></span><span style='background: #AEF1AE'>      }</span><span style=''>
</span>379 <span style=''>    }
</span>380 <span style=''>
</span>381 <span style=''>    /**
</span>382 <span style=''>      * Gets the array index of the farthest feature. Note: assumes the result array does not contain nulls
</span>383 <span style=''>      *
</span>384 <span style=''>      * @return
</span>385 <span style=''>      */
</span>386 <span style=''>    private def farthest: Int = {
</span>387 <span style=''>      var max = </span><span style='background: #AEF1AE'>results.head.meters</span><span style=''>
</span>388 <span style=''>      var result = </span><span style='background: #AEF1AE'>0</span><span style=''>
</span>389 <span style=''>      var i = </span><span style='background: #AEF1AE'>1</span><span style=''>
</span>390 <span style=''>      while (</span><span style='background: #AEF1AE'>i &lt; results.length</span><span style=''>) </span><span style='background: #AEF1AE'>{
</span>391 <span style=''></span><span style='background: #AEF1AE'>        if (results(i).meters &gt; max) {
</span>392 <span style=''></span><span style='background: #AEF1AE'>          max = results(i).meters
</span>393 <span style=''></span><span style='background: #AEF1AE'>          result = i
</span>394 <span style=''></span><span style='background: #AEF1AE'>        }
</span>395 <span style=''></span><span style='background: #AEF1AE'>        i += 1
</span>396 <span style=''></span><span style='background: #AEF1AE'>      }</span><span style=''>
</span>397 <span style=''>      result
</span>398 <span style=''>    }
</span>399 <span style=''>  }
</span>400 <span style=''>
</span>401 <span style=''>  /**
</span>402 <span style=''>    * Holder for our ordered features
</span>403 <span style=''>    *
</span>404 <span style=''>    * @param sf simple feature
</span>405 <span style=''>    * @param meters distance in meters from the query point
</span>406 <span style=''>    */
</span>407 <span style=''>  case class FeatureWithDistance(sf: SimpleFeature, meters: Double) extends Comparable[FeatureWithDistance] {
</span>408 <span style=''>    override def compareTo(o: FeatureWithDistance): Int = </span><span style='background: #F0ADAD'>java.lang.Double.compare(meters, o.meters)</span><span style=''>
</span>409 <span style=''>  }
</span>410 <span style=''>
</span>411 <span style=''>  /**
</span>412 <span style=''>    * Holder for a query envelope
</span>413 <span style=''>    *
</span>414 <span style=''>    * @param envelope query envelope, in cartesian space
</span>415 <span style=''>    * @param hole hole covering any previously queried space
</span>416 <span style=''>    */
</span>417 <span style=''>  case class QueryEnvelope(envelope: Envelope, hole: Option[Envelope]) {
</span>418 <span style=''>
</span>419 <span style=''>    /**
</span>420 <span style=''>      * Get the envelopes for a query filter. The envelopes will exclude the hole, if present, to avoid
</span>421 <span style=''>      * returning duplicate results
</span>422 <span style=''>      *
</span>423 <span style=''>      * @return
</span>424 <span style=''>      */
</span>425 <span style=''>    def query: Seq[Envelope] = {
</span>426 <span style=''>      </span><span style='background: #AEF1AE'>hole</span><span style=''> match {
</span>427 <span style=''>        case None =&gt; </span><span style='background: #AEF1AE'>envelope.toWorld</span><span style=''>
</span>428 <span style=''>        case Some(h) </span><span style='background: #AEF1AE'>=&gt;
</span>429 <span style=''></span><span style='background: #AEF1AE'>          val holes = h.toWorld
</span>430 <span style=''></span><span style='background: #AEF1AE'>          envelope.toWorld.flatMap(e =&gt; holes.foldLeft(Seq(e)) { case (r, h) =&gt; r.flatMap(_.minus(h)) })</span><span style=''>
</span>431 <span style=''>      }
</span>432 <span style=''>    }
</span>433 <span style=''>
</span>434 <span style=''>    /**
</span>435 <span style=''>      * Gets a string useful for debugging
</span>436 <span style=''>      *
</span>437 <span style=''>      * @return
</span>438 <span style=''>      */
</span>439 <span style=''>    def debug: Seq[String] = </span><span style='background: #F0ADAD'>hole</span><span style=''> match {
</span>440 <span style=''>      case None =&gt; </span><span style='background: #F0ADAD'>Seq(envelope.debug)</span><span style=''>
</span>441 <span style=''>      case Some(h) </span><span style='background: #F0ADAD'>=&gt;
</span>442 <span style=''></span><span style='background: #F0ADAD'>        val diff = envelope.minus(h)
</span>443 <span style=''></span><span style='background: #F0ADAD'>        if (diff.isEmpty) { Seq(&quot;[empty]&quot;) } else { diff.map(_.debug) }</span><span style=''>
</span>444 <span style=''>    }
</span>445 <span style=''>  }
</span>446 <span style=''>
</span>447 <span style=''>  /**
</span>448 <span style=''>    * Simple envelope class - unlike the jts envelope, does not swap min/max values on creation
</span>449 <span style=''>    *
</span>450 <span style=''>    * @param xmin min x value
</span>451 <span style=''>    * @param xmax max x value
</span>452 <span style=''>    * @param ymin min y value
</span>453 <span style=''>    * @param ymax max y value
</span>454 <span style=''>    */
</span>455 <span style=''>  case class Envelope(xmin: Double, xmax: Double, ymin: Double, ymax: Double) {
</span>456 <span style=''>
</span>457 <span style=''>    </span><span style='background: #AEF1AE'>require(xmin &lt;= xmax &amp;&amp; ymin &lt;= ymax, </span><span style='background: #F0ADAD'>s&quot;Envelope is inverted: [$xmin, $xmax, $ymin, $ymax]&quot;</span><span style='background: #AEF1AE'>)</span><span style=''>
</span>458 <span style=''>
</span>459 <span style=''>    lazy val width: Double = xmax - xmin
</span>460 <span style=''>    lazy val height: Double = ymax - ymin
</span>461 <span style=''>
</span>462 <span style=''>    /**
</span>463 <span style=''>      * Intersection of two envelopes
</span>464 <span style=''>      *
</span>465 <span style=''>      * @param other other envelope
</span>466 <span style=''>      * @return
</span>467 <span style=''>      */
</span>468 <span style=''>    def intersection(other: Envelope): Option[Envelope] = {
</span>469 <span style=''>      val ixmin = </span><span style='background: #AEF1AE'>math.max(xmin, other.xmin)</span><span style=''>
</span>470 <span style=''>      val ixmax = </span><span style='background: #AEF1AE'>math.min(xmax, other.xmax)</span><span style=''>
</span>471 <span style=''>      if (</span><span style='background: #AEF1AE'>ixmin &gt; ixmax</span><span style=''>) { </span><span style='background: #F0ADAD'>None</span><span style=''> } else </span><span style='background: #AEF1AE'>{
</span>472 <span style=''></span><span style='background: #AEF1AE'>        val iymin = math.max(ymin, other.ymin)
</span>473 <span style=''></span><span style='background: #AEF1AE'>        val iymax = math.min(ymax, other.ymax)
</span>474 <span style=''></span><span style='background: #AEF1AE'>        if (iymin &gt; iymax) { </span><span style='background: #F0ADAD'>None</span><span style='background: #AEF1AE'> } else {
</span>475 <span style=''></span><span style='background: #AEF1AE'>          Some(Envelope(ixmin, ixmax, iymin, iymax))
</span>476 <span style=''></span><span style='background: #AEF1AE'>        }
</span>477 <span style=''></span><span style='background: #AEF1AE'>      }</span><span style=''>
</span>478 <span style=''>    }
</span>479 <span style=''>
</span>480 <span style=''>    /**
</span>481 <span style=''>      * Do the two envelopes intersect?
</span>482 <span style=''>      *
</span>483 <span style=''>      * @param other other envelope
</span>484 <span style=''>      * @return
</span>485 <span style=''>      */
</span>486 <span style=''>    def intersects(other: Envelope): Boolean =
</span>487 <span style=''>      </span><span style='background: #AEF1AE'>other.xmin &lt;= xmax &amp;&amp; other.xmax &gt;= xmin &amp;&amp; other.ymin &lt;= ymax &amp;&amp; other.ymax &gt;= ymin</span><span style=''>
</span>488 <span style=''>
</span>489 <span style=''>    /**
</span>490 <span style=''>      * Subtract an envelope from this one.
</span>491 <span style=''>      *
</span>492 <span style=''>      * The result will be 0 to 4 new envelopes. The 'top' and 'bottom' envelopes will contain corner
</span>493 <span style=''>      * intersections, if any, while the 'left' and 'right' envelopes will be trimmed around the top/bottom ones.
</span>494 <span style=''>      *
</span>495 <span style=''>      * @param other envelope to subtract
</span>496 <span style=''>      * @return
</span>497 <span style=''>      */
</span>498 <span style=''>    def minus(other: Envelope): Seq[Envelope] = {
</span>499 <span style=''>      if (</span><span style='background: #AEF1AE'>!intersects(other)</span><span style=''>) { </span><span style='background: #AEF1AE'>Seq(this)</span><span style=''> } else </span><span style='background: #AEF1AE'>{
</span>500 <span style=''></span><span style='background: #AEF1AE'>        val builder = Seq.newBuilder[Envelope]
</span>501 <span style=''></span><span style='background: #AEF1AE'>        // conditionally add top envelope, and determine ymax for left/right envelopes
</span>502 <span style=''></span><span style='background: #AEF1AE'>        val sidemax = if (other.ymax &gt;= ymax) { ymax } else {
</span>503 <span style=''></span><span style='background: #AEF1AE'>          builder += copy(ymin = other.ymax)
</span>504 <span style=''></span><span style='background: #AEF1AE'>          other.ymax
</span>505 <span style=''></span><span style='background: #AEF1AE'>        }
</span>506 <span style=''></span><span style='background: #AEF1AE'>        // conditionally add bottom envelope, and determine ymin for left/right envelopes
</span>507 <span style=''></span><span style='background: #AEF1AE'>        val sidemin = if (other.ymin &lt;= ymin) { ymin } else {
</span>508 <span style=''></span><span style='background: #AEF1AE'>          builder += copy(ymax = other.ymin)
</span>509 <span style=''></span><span style='background: #AEF1AE'>          other.ymin
</span>510 <span style=''></span><span style='background: #AEF1AE'>        }
</span>511 <span style=''></span><span style='background: #AEF1AE'>        // conditionally add left/right envelopes
</span>512 <span style=''></span><span style='background: #AEF1AE'>        if (other.xmin &gt; xmin) {
</span>513 <span style=''></span><span style='background: #AEF1AE'>          builder += copy(xmax = other.xmin, ymin = sidemin, ymax = sidemax)
</span>514 <span style=''></span><span style='background: #AEF1AE'>        }
</span>515 <span style=''></span><span style='background: #AEF1AE'>        if (other.xmax &lt; xmax) {
</span>516 <span style=''></span><span style='background: #AEF1AE'>          builder += copy(xmin = other.xmax, ymin = sidemin, ymax = sidemax)
</span>517 <span style=''></span><span style='background: #AEF1AE'>        }
</span>518 <span style=''></span><span style='background: #AEF1AE'>        builder.result
</span>519 <span style=''></span><span style='background: #AEF1AE'>      }</span><span style=''>
</span>520 <span style=''>    }
</span>521 <span style=''>
</span>522 <span style=''>    /**
</span>523 <span style=''>      * Converts any part of this envelope that extends past [-180,180,-90,90] to handle the anti-meridian and poles.
</span>524 <span style=''>      *
</span>525 <span style=''>      * Envelopes that cross the poles end up wrapping the whole longitude. Envelopes that cross the anti-meridian
</span>526 <span style=''>      * are wrapped to the other side.
</span>527 <span style=''>      *
</span>528 <span style=''>      * @return
</span>529 <span style=''>      */
</span>530 <span style=''>    def toWorld: Seq[Envelope] = {
</span>531 <span style=''>      if (</span><span style='background: #AEF1AE'>ymin &lt; -90d</span><span style=''>) {
</span>532 <span style=''>        </span><span style='background: #AEF1AE'>Seq(Envelope(-180d, 180d, -90, math.min(ymax, 90d)))</span><span style=''>
</span>533 <span style=''>      } else </span><span style='background: #AEF1AE'>if (ymax &gt; 90d) {
</span>534 <span style=''></span><span style='background: #AEF1AE'>        Seq(Envelope(-180d, 180d, math.max(ymin, -90), 90d))
</span>535 <span style=''></span><span style='background: #AEF1AE'>      } else if (width &gt;= 360d) {
</span>536 <span style=''></span><span style='background: #AEF1AE'>        Seq(copy(xmin = -180d, xmax = 180d))
</span>537 <span style=''></span><span style='background: #AEF1AE'>      } else if (xmin &lt; -180d) {
</span>538 <span style=''></span><span style='background: #AEF1AE'>        intersection(WholeWorldEnvelope) match {
</span>539 <span style=''></span><span style='background: #AEF1AE'>          case None =&gt; </span><span style='background: #F0ADAD'>Seq(copy(xmin = xmin + 360d, xmax = xmax + 360d))</span><span style='background: #AEF1AE'>
</span>540 <span style=''></span><span style='background: #AEF1AE'>          case Some(trimmed) =&gt; Seq(trimmed, copy(xmin = xmin + 360d, xmax = 180d))
</span>541 <span style=''></span><span style='background: #AEF1AE'>        }
</span>542 <span style=''></span><span style='background: #AEF1AE'>      } else if (xmax &gt; 180d) {
</span>543 <span style=''></span><span style='background: #AEF1AE'>        intersection(WholeWorldEnvelope) match {
</span>544 <span style=''></span><span style='background: #AEF1AE'>          case None =&gt; </span><span style='background: #F0ADAD'>Seq(copy(xmin = xmin - 360d, xmax = xmax - 360d))</span><span style='background: #AEF1AE'>
</span>545 <span style=''></span><span style='background: #AEF1AE'>          case Some(trimmed) =&gt; Seq(trimmed, copy(xmin = -180d, xmax = xmax - 360d))
</span>546 <span style=''></span><span style='background: #AEF1AE'>        }
</span>547 <span style=''></span><span style='background: #AEF1AE'>      } else {
</span>548 <span style=''></span><span style='background: #AEF1AE'>        Seq(this)
</span>549 <span style=''></span><span style='background: #AEF1AE'>      }</span><span style=''>
</span>550 <span style=''>    }
</span>551 <span style=''>
</span>552 <span style=''>    /**
</span>553 <span style=''>      * Create a geotools filter
</span>554 <span style=''>      *
</span>555 <span style=''>      * @param geom geometry expression
</span>556 <span style=''>      * @return
</span>557 <span style=''>      */
</span>558 <span style=''>    def toFilter(geom: PropertyName): Filter =
</span>559 <span style=''>      </span><span style='background: #AEF1AE'>ff.bbox(geom, new ReferencedEnvelope(xmin, xmax, ymin, ymax, CRS_EPSG_4326))</span><span style=''>
</span>560 <span style=''>
</span>561 <span style=''>    /**
</span>562 <span style=''>      * Convert to a JTS envelope
</span>563 <span style=''>      *
</span>564 <span style=''>      * @return
</span>565 <span style=''>      */
</span>566 <span style=''>    def toJts: org.locationtech.jts.geom.Envelope = </span><span style='background: #AEF1AE'>new org.locationtech.jts.geom.Envelope(xmin, xmax, ymin, ymax)</span><span style=''>
</span>567 <span style=''>
</span>568 <span style=''>    /**
</span>569 <span style=''>      * Debug string
</span>570 <span style=''>      *
</span>571 <span style=''>      * @return
</span>572 <span style=''>      */
</span>573 <span style=''>    def debug: String = </span><span style='background: #F0ADAD'>s&quot;[$xmin, $xmax, $ymin, $ymax]&quot;</span><span style=''>
</span>574 <span style=''>  }
</span>575 <span style=''>
</span>576 <span style=''>  object Envelope {
</span>577 <span style=''>
</span>578 <span style=''>    /**
</span>579 <span style=''>      * Create an envelope by buffering a point to an inscribed circle
</span>580 <span style=''>      *
</span>581 <span style=''>      * @param point center point
</span>582 <span style=''>      * @param buffer buffer distance, in meters
</span>583 <span style=''>      * @param calc geodetic calculator
</span>584 <span style=''>      * @return
</span>585 <span style=''>      */
</span>586 <span style=''>    def apply(point: Point, buffer: Double, calc: GeodeticCalculator): Envelope = {
</span>587 <span style=''>      val (east, north) = GeometryUtils.directionalDegrees(point, buffer, calc)
</span>588 <span style=''>      </span><span style='background: #AEF1AE'>Envelope(point.getX - east, point.getX + east, point.getY - north, point.getY + north)</span><span style=''>
</span>589 <span style=''>    }
</span>590 <span style=''>  }
</span>591 <span style=''>}
</span></pre>
          </div>
          <div class="tab-pane" id="statementlist">
            <table cellspacing="0" cellpadding="0" class="table statementlist">
      <tr>
        <th>Line</th>
        <th>Stmt Id</th>
        <th>Pos</th>
        <th>Tree</th>
        <th>Symbol</th>
        <th>Tests</th>
        <th>Code</th>
      </tr><tr>
        <td>
          73
        </td>
        <td>
          49275
        </td>
        <td>
          3624
          -
          3634
        </td>
        <td>
          ApplyImplicitView
        </td>
        <td>
          scala.Predef.Integer2int
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          scala.Predef.Integer2int(numDesired)
        </td>
      </tr><tr>
        <td>
          73
        </td>
        <td>
          49276
        </td>
        <td>
          3636
          -
          3653
        </td>
        <td>
          ApplyImplicitView
        </td>
        <td>
          scala.Predef.Double2double
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          scala.Predef.Double2double(estimatedDistance)
        </td>
      </tr><tr>
        <td>
          73
        </td>
        <td>
          49277
        </td>
        <td>
          3655
          -
          3672
        </td>
        <td>
          ApplyImplicitView
        </td>
        <td>
          scala.Predef.Double2double
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          scala.Predef.Double2double(maxSearchDistance)
        </td>
      </tr><tr>
        <td>
          73
        </td>
        <td>
          49278
        </td>
        <td>
          3594
          -
          3673
        </td>
        <td>
          Apply
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.KNNVisitor.&lt;init&gt;
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          new org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.KNNVisitor(inputFeatures, scala.Predef.Integer2int(numDesired), scala.Predef.Double2double(estimatedDistance), scala.Predef.Double2double(maxSearchDistance))
        </td>
      </tr><tr>
        <td>
          74
        </td>
        <td>
          49279
        </td>
        <td>
          3678
          -
          3731
        </td>
        <td>
          Apply
        </td>
        <td>
          org.locationtech.geomesa.index.geotools.GeoMesaFeatureCollection.visit
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          org.locationtech.geomesa.index.geotools.GeoMesaFeatureCollection.visit(dataFeatures, visitor, org.locationtech.geomesa.index.geotools.GeoMesaFeatureCollection.visit$default$3)
        </td>
      </tr><tr>
        <td>
          75
        </td>
        <td>
          49280
        </td>
        <td>
          3736
          -
          3761
        </td>
        <td>
          Select
        </td>
        <td>
          org.locationtech.geomesa.index.process.FeatureResult.results
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          visitor.getResult().results
        </td>
      </tr><tr>
        <td>
          81
        </td>
        <td>
          49281
        </td>
        <td>
          3844
          -
          3876
        </td>
        <td>
          Apply
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope.apply
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          KNearestNeighborSearchProcess.this.Envelope.apply(-180.0, 180.0, -90.0, 90.0)
        </td>
      </tr><tr>
        <td>
          110
        </td>
        <td>
          49282
        </td>
        <td>
          5121
          -
          5156
        </td>
        <td>
          TypeApply
        </td>
        <td>
          scala.Any.asInstanceOf
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          feature.asInstanceOf[org.geotools.api.feature.simple.SimpleFeature]
        </td>
      </tr><tr>
        <td>
          110
        </td>
        <td>
          49283
        </td>
        <td>
          5113
          -
          5157
        </td>
        <td>
          Apply
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.KnnCalculator.visit
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          x$1.visit(feature.asInstanceOf[org.geotools.api.feature.simple.SimpleFeature])
        </td>
      </tr><tr>
        <td>
          110
        </td>
        <td>
          49284
        </td>
        <td>
          5093
          -
          5158
        </td>
        <td>
          Apply
        </td>
        <td>
          scala.collection.IterableLike.foreach
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          KNNVisitor.this.calculators.foreach[Option[Double]](((x$1: org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.KnnCalculator) =&gt; x$1.visit(feature.asInstanceOf[org.geotools.api.feature.simple.SimpleFeature])))
        </td>
      </tr><tr>
        <td>
          113
        </td>
        <td>
          49285
        </td>
        <td>
          5216
          -
          5230
        </td>
        <td>
          Apply
        </td>
        <td>
          java.lang.Object.==
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          KNNVisitor.this.result.==(null)
        </td>
      </tr><tr>
        <td>
          113
        </td>
        <td>
          49297
        </td>
        <td>
          5232
          -
          5421
        </td>
        <td>
          Block
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          {
  val collection: org.geotools.feature.DefaultFeatureCollection = new org.geotools.feature.DefaultFeatureCollection();
  KNNVisitor.this.results.foreach[Unit](((x$2: Array[org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.FeatureWithDistance]) =&gt; scala.Predef.refArrayOps[org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.FeatureWithDistance](x$2).foreach[AnyVal](((r: org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.FeatureWithDistance) =&gt; if (r.!=(null))
    collection.add(r.sf)
  else
    ()))));
  KNNVisitor.this.result_=(org.locationtech.geomesa.index.process.`package`.FeatureResult.apply(collection))
}
        </td>
      </tr><tr>
        <td>
          113
        </td>
        <td>
          49298
        </td>
        <td>
          5212
          -
          5212
        </td>
        <td>
          Literal
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          ()
        </td>
      </tr><tr>
        <td>
          113
        </td>
        <td>
          49299
        </td>
        <td>
          5212
          -
          5212
        </td>
        <td>
          Block
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          ()
        </td>
      </tr><tr>
        <td>
          114
        </td>
        <td>
          49286
        </td>
        <td>
          5259
          -
          5289
        </td>
        <td>
          Apply
        </td>
        <td>
          org.geotools.feature.DefaultFeatureCollection.&lt;init&gt;
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          new org.geotools.feature.DefaultFeatureCollection()
        </td>
      </tr><tr>
        <td>
          115
        </td>
        <td>
          49287
        </td>
        <td>
          5333
          -
          5342
        </td>
        <td>
          Apply
        </td>
        <td>
          java.lang.Object.!=
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          r.!=(null)
        </td>
      </tr><tr>
        <td>
          115
        </td>
        <td>
          49288
        </td>
        <td>
          5361
          -
          5365
        </td>
        <td>
          Select
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.FeatureWithDistance.sf
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          r.sf
        </td>
      </tr><tr>
        <td>
          115
        </td>
        <td>
          49289
        </td>
        <td>
          5346
          -
          5366
        </td>
        <td>
          Apply
        </td>
        <td>
          org.geotools.feature.DefaultFeatureCollection.add
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          collection.add(r.sf)
        </td>
      </tr><tr>
        <td>
          115
        </td>
        <td>
          49290
        </td>
        <td>
          5346
          -
          5366
        </td>
        <td>
          Block
        </td>
        <td>
          org.geotools.feature.DefaultFeatureCollection.add
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          collection.add(r.sf)
        </td>
      </tr><tr>
        <td>
          115
        </td>
        <td>
          49291
        </td>
        <td>
          5329
          -
          5329
        </td>
        <td>
          Literal
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          ()
        </td>
      </tr><tr>
        <td>
          115
        </td>
        <td>
          49292
        </td>
        <td>
          5329
          -
          5329
        </td>
        <td>
          Block
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          ()
        </td>
      </tr><tr>
        <td>
          115
        </td>
        <td>
          49293
        </td>
        <td>
          5314
          -
          5369
        </td>
        <td>
          Apply
        </td>
        <td>
          scala.collection.IndexedSeqOptimized.foreach
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          scala.Predef.refArrayOps[org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.FeatureWithDistance](x$2).foreach[AnyVal](((r: org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.FeatureWithDistance) =&gt; if (r.!=(null))
  collection.add(r.sf)
else
  ()))
        </td>
      </tr><tr>
        <td>
          115
        </td>
        <td>
          49294
        </td>
        <td>
          5298
          -
          5370
        </td>
        <td>
          Apply
        </td>
        <td>
          scala.collection.IterableLike.foreach
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          KNNVisitor.this.results.foreach[Unit](((x$2: Array[org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.FeatureWithDistance]) =&gt; scala.Predef.refArrayOps[org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.FeatureWithDistance](x$2).foreach[AnyVal](((r: org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.FeatureWithDistance) =&gt; if (r.!=(null))
  collection.add(r.sf)
else
  ()))))
        </td>
      </tr><tr>
        <td>
          116
        </td>
        <td>
          49295
        </td>
        <td>
          5388
          -
          5413
        </td>
        <td>
          Apply
        </td>
        <td>
          org.locationtech.geomesa.index.process.FeatureResult.apply
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          org.locationtech.geomesa.index.process.`package`.FeatureResult.apply(collection)
        </td>
      </tr><tr>
        <td>
          116
        </td>
        <td>
          49296
        </td>
        <td>
          5379
          -
          5413
        </td>
        <td>
          Apply
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.KNNVisitor.result_=
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          KNNVisitor.this.result_=(org.locationtech.geomesa.index.process.`package`.FeatureResult.apply(collection))
        </td>
      </tr><tr>
        <td>
          118
        </td>
        <td>
          49300
        </td>
        <td>
          5428
          -
          5434
        </td>
        <td>
          Select
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.KNNVisitor.result
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          KNNVisitor.this.result
        </td>
      </tr><tr>
        <td>
          125
        </td>
        <td>
          49301
        </td>
        <td>
          5734
          -
          5764
        </td>
        <td>
          Apply
        </td>
        <td>
          org.geotools.feature.DefaultFeatureCollection.&lt;init&gt;
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          new org.geotools.feature.DefaultFeatureCollection()
        </td>
      </tr><tr>
        <td>
          126
        </td>
        <td>
          49302
        </td>
        <td>
          5794
          -
          5810
        </td>
        <td>
          Apply
        </td>
        <td>
          org.geotools.api.data.FeatureSource.getSchema
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          source.getSchema()
        </td>
      </tr><tr>
        <td>
          126
        </td>
        <td>
          49303
        </td>
        <td>
          5794
          -
          5823
        </td>
        <td>
          Select
        </td>
        <td>
          org.locationtech.geomesa.utils.geotools.RichSimpleFeatureType.RichSimpleFeatureType.getGeomField
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          org.locationtech.geomesa.utils.geotools.RichSimpleFeatureType.RichSimpleFeatureType(source.getSchema()).getGeomField
        </td>
      </tr><tr>
        <td>
          126
        </td>
        <td>
          49304
        </td>
        <td>
          5782
          -
          5824
        </td>
        <td>
          Apply
        </td>
        <td>
          org.geotools.api.filter.FilterFactory.property
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          org.locationtech.geomesa.filter.`package`.ff.property(org.locationtech.geomesa.utils.geotools.RichSimpleFeatureType.RichSimpleFeatureType(source.getSchema()).getGeomField)
        </td>
      </tr><tr>
        <td>
          131
        </td>
        <td>
          49305
        </td>
        <td>
          6012
          -
          6013
        </td>
        <td>
          Select
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.KNNVisitor.k
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          KNNVisitor.this.k
        </td>
      </tr><tr>
        <td>
          131
        </td>
        <td>
          49306
        </td>
        <td>
          5979
          -
          6014
        </td>
        <td>
          ApplyToImplicitArgs
        </td>
        <td>
          scala.Array.ofDim
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          scala.Array.ofDim[org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.FeatureWithDistance](KNNVisitor.this.k)((ClassTag.apply[org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.FeatureWithDistance](classOf[org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess$$FeatureWithDistance]): scala.reflect.ClassTag[org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.FeatureWithDistance]))
        </td>
      </tr><tr>
        <td>
          134
        </td>
        <td>
          49307
        </td>
        <td>
          6251
          -
          6298
        </td>
        <td>
          Apply
        </td>
        <td>
          java.util.LinkedList.&lt;init&gt;
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          new java.util.LinkedList[org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.FeatureWithDistance]()
        </td>
      </tr><tr>
        <td>
          137
        </td>
        <td>
          49308
        </td>
        <td>
          6402
          -
          6403
        </td>
        <td>
          Select
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.KNNVisitor.k
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          KNNVisitor.this.k
        </td>
      </tr><tr>
        <td>
          137
        </td>
        <td>
          49309
        </td>
        <td>
          6405
          -
          6410
        </td>
        <td>
          Select
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.KNNVisitor.start
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          KNNVisitor.this.start
        </td>
      </tr><tr>
        <td>
          137
        </td>
        <td>
          49310
        </td>
        <td>
          6412
          -
          6421
        </td>
        <td>
          Select
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.KNNVisitor.threshold
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          KNNVisitor.this.threshold
        </td>
      </tr><tr>
        <td>
          137
        </td>
        <td>
          49311
        </td>
        <td>
          6372
          -
          6422
        </td>
        <td>
          Apply
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.KnnWindow.&lt;init&gt;
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          new KNearestNeighborSearchProcess.this.KnnWindow(query, geom, p, KNNVisitor.this.k, KNNVisitor.this.start, KNNVisitor.this.threshold)
        </td>
      </tr><tr>
        <td>
          138
        </td>
        <td>
          49312
        </td>
        <td>
          6443
          -
          6444
        </td>
        <td>
          Literal
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          0
        </td>
      </tr><tr>
        <td>
          140
        </td>
        <td>
          49313
        </td>
        <td>
          6533
          -
          6537
        </td>
        <td>
          Select
        </td>
        <td>
          scala.None
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          scala.None
        </td>
      </tr><tr>
        <td>
          140
        </td>
        <td>
          49314
        </td>
        <td>
          6521
          -
          6538
        </td>
        <td>
          Apply
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.KnnWindow.next
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          window.next(scala.None)
        </td>
      </tr><tr>
        <td>
          145
        </td>
        <td>
          49315
        </td>
        <td>
          6784
          -
          6822
        </td>
        <td>
          Apply
        </td>
        <td>
          org.geotools.data.simple.SimpleFeatureCollection.features
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          source.getFeatures(initial).features()
        </td>
      </tr><tr>
        <td>
          145
        </td>
        <td>
          49329
        </td>
        <td>
          6824
          -
          6824
        </td>
        <td>
          Select
        </td>
        <td>
          org.locationtech.geomesa.utils.io.IsCloseableImplicits.closeableIsCloseable
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          io.this.IsCloseable.closeableIsCloseable
        </td>
      </tr><tr>
        <td>
          145
        </td>
        <td>
          49330
        </td>
        <td>
          6774
          -
          7272
        </td>
        <td>
          ApplyToImplicitArgs
        </td>
        <td>
          org.locationtech.geomesa.utils.io.WithClose.apply
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          org.locationtech.geomesa.utils.io.`package`.WithClose.apply[org.geotools.data.simple.SimpleFeatureIterator, Unit](source.getFeatures(initial).features())(((iter: org.geotools.data.simple.SimpleFeatureIterator) =&gt; {
  val knn: org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.KnnCalculator = new KNearestNeighborSearchProcess.this.KnnCalculator(p, KNNVisitor.this.k, window.radius, results, KNearestNeighborSearchProcess.this.KnnCalculator.&lt;init&gt;$default$5);
  while$1(){
    if (iter.hasNext())
      {
        {
          val sf: org.geotools.api.feature.simple.SimpleFeature = iter.next();
          knn.visit(sf).foreach[Boolean](((d: Double) =&gt; overflow.add(KNearestNeighborSearchProcess.this.FeatureWithDistance.apply(sf, d))))
        };
        while$1()
      }
    else
      ()
  };
  found = knn.size
}))(io.this.IsCloseable.closeableIsCloseable)
        </td>
      </tr><tr>
        <td>
          147
        </td>
        <td>
          49316
        </td>
        <td>
          6941
          -
          6942
        </td>
        <td>
          Select
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.KNNVisitor.k
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          KNNVisitor.this.k
        </td>
      </tr><tr>
        <td>
          147
        </td>
        <td>
          49317
        </td>
        <td>
          6944
          -
          6957
        </td>
        <td>
          Select
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.KnnWindow.radius
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          window.radius
        </td>
      </tr><tr>
        <td>
          147
        </td>
        <td>
          49318
        </td>
        <td>
          6920
          -
          6967
        </td>
        <td>
          Apply
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.KnnCalculator.&lt;init&gt;
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          new KNearestNeighborSearchProcess.this.KnnCalculator(p, KNNVisitor.this.k, window.radius, results, KNearestNeighborSearchProcess.this.KnnCalculator.&lt;init&gt;$default$5)
        </td>
      </tr><tr>
        <td>
          148
        </td>
        <td>
          49319
        </td>
        <td>
          6985
          -
          6997
        </td>
        <td>
          Apply
        </td>
        <td>
          org.geotools.feature.FeatureIterator.hasNext
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          iter.hasNext()
        </td>
      </tr><tr>
        <td>
          148
        </td>
        <td>
          49324
        </td>
        <td>
          6999
          -
          6999
        </td>
        <td>
          Apply
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.KNNVisitor.while$1
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          while$1()
        </td>
      </tr><tr>
        <td>
          148
        </td>
        <td>
          49325
        </td>
        <td>
          6999
          -
          7235
        </td>
        <td>
          Block
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          {
  {
    val sf: org.geotools.api.feature.simple.SimpleFeature = iter.next();
    knn.visit(sf).foreach[Boolean](((d: Double) =&gt; overflow.add(KNearestNeighborSearchProcess.this.FeatureWithDistance.apply(sf, d))))
  };
  while$1()
}
        </td>
      </tr><tr>
        <td>
          148
        </td>
        <td>
          49326
        </td>
        <td>
          6978
          -
          6978
        </td>
        <td>
          Literal
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          ()
        </td>
      </tr><tr>
        <td>
          148
        </td>
        <td>
          49327
        </td>
        <td>
          6978
          -
          6978
        </td>
        <td>
          Block
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          ()
        </td>
      </tr><tr>
        <td>
          149
        </td>
        <td>
          49320
        </td>
        <td>
          7022
          -
          7031
        </td>
        <td>
          Apply
        </td>
        <td>
          org.geotools.feature.FeatureIterator.next
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          iter.next()
        </td>
      </tr><tr>
        <td>
          151
        </td>
        <td>
          49321
        </td>
        <td>
          7195
          -
          7221
        </td>
        <td>
          Apply
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.FeatureWithDistance.apply
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          KNearestNeighborSearchProcess.this.FeatureWithDistance.apply(sf, d)
        </td>
      </tr><tr>
        <td>
          151
        </td>
        <td>
          49322
        </td>
        <td>
          7182
          -
          7222
        </td>
        <td>
          Apply
        </td>
        <td>
          java.util.LinkedList.add
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          overflow.add(KNearestNeighborSearchProcess.this.FeatureWithDistance.apply(sf, d))
        </td>
      </tr><tr>
        <td>
          151
        </td>
        <td>
          49323
        </td>
        <td>
          7155
          -
          7223
        </td>
        <td>
          Apply
        </td>
        <td>
          scala.Option.foreach
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          knn.visit(sf).foreach[Boolean](((d: Double) =&gt; overflow.add(KNearestNeighborSearchProcess.this.FeatureWithDistance.apply(sf, d))))
        </td>
      </tr><tr>
        <td>
          153
        </td>
        <td>
          49328
        </td>
        <td>
          7254
          -
          7262
        </td>
        <td>
          Select
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.KnnCalculator.size
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          knn.size
        </td>
      </tr><tr>
        <td>
          156
        </td>
        <td>
          49331
        </td>
        <td>
          7298
          -
          7299
        </td>
        <td>
          Literal
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          1
        </td>
      </tr><tr>
        <td>
          159
        </td>
        <td>
          49332
        </td>
        <td>
          7445
          -
          7446
        </td>
        <td>
          Select
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.KNNVisitor.k
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          KNNVisitor.this.k
        </td>
      </tr><tr>
        <td>
          159
        </td>
        <td>
          49333
        </td>
        <td>
          7450
          -
          7464
        </td>
        <td>
          Select
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.KnnWindow.hasNext
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          window.hasNext
        </td>
      </tr><tr>
        <td>
          159
        </td>
        <td>
          49334
        </td>
        <td>
          7437
          -
          7464
        </td>
        <td>
          Apply
        </td>
        <td>
          scala.Boolean.&amp;&amp;
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          found.&lt;(KNNVisitor.this.k).&amp;&amp;(window.hasNext)
        </td>
      </tr><tr>
        <td>
          159
        </td>
        <td>
          49370
        </td>
        <td>
          7466
          -
          7466
        </td>
        <td>
          Apply
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.KNNVisitor.while$4
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          while$4()
        </td>
      </tr><tr>
        <td>
          159
        </td>
        <td>
          49371
        </td>
        <td>
          7466
          -
          8954
        </td>
        <td>
          Block
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          {
  {
    val last: Double = window.radius;
    val next: org.geotools.api.data.Query = window.next(scala.Some.apply[Int](found));
    (if (KNNVisitor.this.logger.underlying.isDebugEnabled())
      KNNVisitor.this.logger.underlying.debug(scala.StringContext.apply(&quot;Expanding search at (&quot;, &quot; &quot;, &quot;) from &quot;, &quot; to &quot;, &quot; meters &quot;).s(p.getX(), p.getY(), last, window.radius).+(scala.StringContext.apply(&quot;based on finding &quot;, &quot;/&quot;, &quot; neighbors&quot;).s(found, KNNVisitor.this.k)))
    else
      (): Unit);
    (if (KNNVisitor.this.logger.underlying.isTraceEnabled())
      KNNVisitor.this.logger.underlying.trace(&quot;Current query window:\n  {}&quot;, (window.window.debug.mkString(&quot;\n  &quot;): AnyRef))
    else
      (): Unit);
    (if (KNNVisitor.this.logger.underlying.isTraceEnabled())
      KNNVisitor.this.logger.underlying.trace(&quot;Current filter: {}&quot;, (org.geotools.filter.text.ecql.ECQL.toCQL(next.getFilter()): AnyRef))
    else
      (): Unit);
    val knn: org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.KnnCalculator = new KNearestNeighborSearchProcess.this.KnnCalculator(p, KNNVisitor.this.k, window.radius, results, found);
    val iter: java.util.Iterator[org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.FeatureWithDistance] = overflow.iterator();
    while$2(){
      if (iter.hasNext())
        {
          {
            &lt;synthetic&gt; &lt;artifact&gt; private[this] val x$3: (org.geotools.api.feature.simple.SimpleFeature, Double) = (iter.next(): org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.FeatureWithDistance @unchecked) match {
              case (sf: org.geotools.api.feature.simple.SimpleFeature, meters: Double)org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.FeatureWithDistance((sf @ _), (d @ _)) =&gt; scala.Tuple2.apply[org.geotools.api.feature.simple.SimpleFeature, Double](sf, d)
            };
            val sf: org.geotools.api.feature.simple.SimpleFeature = x$3._1;
            val d: Double = x$3._2;
            if (d.&lt;=(window.radius))
              {
                knn.visit(sf, d);
                iter.remove()
              }
            else
              ()
          };
          while$2()
        }
      else
        ()
    };
    org.locationtech.geomesa.utils.io.`package`.WithClose.apply[org.geotools.data.simple.SimpleFeatureIterator, Unit](source.getFeatures(next).features())(((iter: org.geotools.data.simple.SimpleFeatureIterator) =&gt; {
      while$3(){
        if (iter.hasNext())
          {
            {
              val sf: org.geotools.api.feature.simple.SimpleFeature = iter.next();
              knn.visit(sf).foreach[Boolean](((d: Double) =&gt; overflow.add(KNearestNeighborSearchProcess.this.FeatureWithDistance.apply(sf, d))))
            };
            while$3()
          }
        else
          ()
      };
      found = knn.size
    }))(io.this.IsCloseable.closeableIsCloseable);
    iteration = iteration.+(1)
  };
  while$4()
}
        </td>
      </tr><tr>
        <td>
          159
        </td>
        <td>
          49372
        </td>
        <td>
          7430
          -
          7430
        </td>
        <td>
          Literal
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          ()
        </td>
      </tr><tr>
        <td>
          159
        </td>
        <td>
          49373
        </td>
        <td>
          7430
          -
          7430
        </td>
        <td>
          Block
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          ()
        </td>
      </tr><tr>
        <td>
          160
        </td>
        <td>
          49335
        </td>
        <td>
          7489
          -
          7502
        </td>
        <td>
          Select
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.KnnWindow.radius
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          window.radius
        </td>
      </tr><tr>
        <td>
          162
        </td>
        <td>
          49336
        </td>
        <td>
          7622
          -
          7633
        </td>
        <td>
          Apply
        </td>
        <td>
          scala.Some.apply
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          scala.Some.apply[Int](found)
        </td>
      </tr><tr>
        <td>
          162
        </td>
        <td>
          49337
        </td>
        <td>
          7610
          -
          7634
        </td>
        <td>
          Apply
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.KnnWindow.next
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          window.next(scala.Some.apply[Int](found))
        </td>
      </tr><tr>
        <td>
          170
        </td>
        <td>
          49338
        </td>
        <td>
          8118
          -
          8119
        </td>
        <td>
          Select
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.KNNVisitor.k
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          KNNVisitor.this.k
        </td>
      </tr><tr>
        <td>
          170
        </td>
        <td>
          49339
        </td>
        <td>
          8121
          -
          8134
        </td>
        <td>
          Select
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.KnnWindow.radius
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          window.radius
        </td>
      </tr><tr>
        <td>
          170
        </td>
        <td>
          49340
        </td>
        <td>
          8097
          -
          8151
        </td>
        <td>
          Apply
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.KnnCalculator.&lt;init&gt;
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          new KNearestNeighborSearchProcess.this.KnnCalculator(p, KNNVisitor.this.k, window.radius, results, found)
        </td>
      </tr><tr>
        <td>
          172
        </td>
        <td>
          49341
        </td>
        <td>
          8268
          -
          8287
        </td>
        <td>
          Apply
        </td>
        <td>
          java.util.AbstractSequentialList.iterator
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          overflow.iterator()
        </td>
      </tr><tr>
        <td>
          173
        </td>
        <td>
          49342
        </td>
        <td>
          8305
          -
          8317
        </td>
        <td>
          Apply
        </td>
        <td>
          java.util.Iterator.hasNext
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          iter.hasNext()
        </td>
      </tr><tr>
        <td>
          173
        </td>
        <td>
          49352
        </td>
        <td>
          8319
          -
          8319
        </td>
        <td>
          Apply
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.KNNVisitor.while$2
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          while$2()
        </td>
      </tr><tr>
        <td>
          173
        </td>
        <td>
          49353
        </td>
        <td>
          8319
          -
          8500
        </td>
        <td>
          Block
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          {
  {
    &lt;synthetic&gt; &lt;artifact&gt; private[this] val x$3: (org.geotools.api.feature.simple.SimpleFeature, Double) = (iter.next(): org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.FeatureWithDistance @unchecked) match {
      case (sf: org.geotools.api.feature.simple.SimpleFeature, meters: Double)org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.FeatureWithDistance((sf @ _), (d @ _)) =&gt; scala.Tuple2.apply[org.geotools.api.feature.simple.SimpleFeature, Double](sf, d)
    };
    val sf: org.geotools.api.feature.simple.SimpleFeature = x$3._1;
    val d: Double = x$3._2;
    if (d.&lt;=(window.radius))
      {
        knn.visit(sf, d);
        iter.remove()
      }
    else
      ()
  };
  while$2()
}
        </td>
      </tr><tr>
        <td>
          173
        </td>
        <td>
          49354
        </td>
        <td>
          8298
          -
          8298
        </td>
        <td>
          Literal
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          ()
        </td>
      </tr><tr>
        <td>
          173
        </td>
        <td>
          49355
        </td>
        <td>
          8298
          -
          8298
        </td>
        <td>
          Block
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          ()
        </td>
      </tr><tr>
        <td>
          174
        </td>
        <td>
          49343
        </td>
        <td>
          8357
          -
          8357
        </td>
        <td>
          Select
        </td>
        <td>
          scala.Tuple2._1
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          x$3._1
        </td>
      </tr><tr>
        <td>
          174
        </td>
        <td>
          49344
        </td>
        <td>
          8361
          -
          8361
        </td>
        <td>
          Select
        </td>
        <td>
          scala.Tuple2._2
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          x$3._2
        </td>
      </tr><tr>
        <td>
          175
        </td>
        <td>
          49345
        </td>
        <td>
          8399
          -
          8412
        </td>
        <td>
          Select
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.KnnWindow.radius
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          window.radius
        </td>
      </tr><tr>
        <td>
          175
        </td>
        <td>
          49346
        </td>
        <td>
          8394
          -
          8412
        </td>
        <td>
          Apply
        </td>
        <td>
          scala.Double.&lt;=
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          d.&lt;=(window.radius)
        </td>
      </tr><tr>
        <td>
          175
        </td>
        <td>
          49349
        </td>
        <td>
          8414
          -
          8488
        </td>
        <td>
          Block
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          {
  knn.visit(sf, d);
  iter.remove()
}
        </td>
      </tr><tr>
        <td>
          175
        </td>
        <td>
          49350
        </td>
        <td>
          8390
          -
          8390
        </td>
        <td>
          Literal
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          ()
        </td>
      </tr><tr>
        <td>
          175
        </td>
        <td>
          49351
        </td>
        <td>
          8390
          -
          8390
        </td>
        <td>
          Block
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          ()
        </td>
      </tr><tr>
        <td>
          176
        </td>
        <td>
          49347
        </td>
        <td>
          8430
          -
          8446
        </td>
        <td>
          Apply
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.KnnCalculator.visit
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          knn.visit(sf, d)
        </td>
      </tr><tr>
        <td>
          177
        </td>
        <td>
          49348
        </td>
        <td>
          8461
          -
          8474
        </td>
        <td>
          Apply
        </td>
        <td>
          java.util.Iterator.remove
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          iter.remove()
        </td>
      </tr><tr>
        <td>
          182
        </td>
        <td>
          49356
        </td>
        <td>
          8553
          -
          8588
        </td>
        <td>
          Apply
        </td>
        <td>
          org.geotools.data.simple.SimpleFeatureCollection.features
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          source.getFeatures(next).features()
        </td>
      </tr><tr>
        <td>
          182
        </td>
        <td>
          49367
        </td>
        <td>
          8590
          -
          8590
        </td>
        <td>
          Select
        </td>
        <td>
          org.locationtech.geomesa.utils.io.IsCloseableImplicits.closeableIsCloseable
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          io.this.IsCloseable.closeableIsCloseable
        </td>
      </tr><tr>
        <td>
          182
        </td>
        <td>
          49368
        </td>
        <td>
          8543
          -
          8918
        </td>
        <td>
          ApplyToImplicitArgs
        </td>
        <td>
          org.locationtech.geomesa.utils.io.WithClose.apply
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          org.locationtech.geomesa.utils.io.`package`.WithClose.apply[org.geotools.data.simple.SimpleFeatureIterator, Unit](source.getFeatures(next).features())(((iter: org.geotools.data.simple.SimpleFeatureIterator) =&gt; {
  while$3(){
    if (iter.hasNext())
      {
        {
          val sf: org.geotools.api.feature.simple.SimpleFeature = iter.next();
          knn.visit(sf).foreach[Boolean](((d: Double) =&gt; overflow.add(KNearestNeighborSearchProcess.this.FeatureWithDistance.apply(sf, d))))
        };
        while$3()
      }
    else
      ()
  };
  found = knn.size
}))(io.this.IsCloseable.closeableIsCloseable)
        </td>
      </tr><tr>
        <td>
          183
        </td>
        <td>
          49357
        </td>
        <td>
          8619
          -
          8631
        </td>
        <td>
          Apply
        </td>
        <td>
          org.geotools.feature.FeatureIterator.hasNext
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          iter.hasNext()
        </td>
      </tr><tr>
        <td>
          183
        </td>
        <td>
          49362
        </td>
        <td>
          8633
          -
          8633
        </td>
        <td>
          Apply
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.KNNVisitor.while$3
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          while$3()
        </td>
      </tr><tr>
        <td>
          183
        </td>
        <td>
          49363
        </td>
        <td>
          8633
          -
          8877
        </td>
        <td>
          Block
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          {
  {
    val sf: org.geotools.api.feature.simple.SimpleFeature = iter.next();
    knn.visit(sf).foreach[Boolean](((d: Double) =&gt; overflow.add(KNearestNeighborSearchProcess.this.FeatureWithDistance.apply(sf, d))))
  };
  while$3()
}
        </td>
      </tr><tr>
        <td>
          183
        </td>
        <td>
          49364
        </td>
        <td>
          8612
          -
          8612
        </td>
        <td>
          Literal
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          ()
        </td>
      </tr><tr>
        <td>
          183
        </td>
        <td>
          49365
        </td>
        <td>
          8612
          -
          8612
        </td>
        <td>
          Block
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          ()
        </td>
      </tr><tr>
        <td>
          184
        </td>
        <td>
          49358
        </td>
        <td>
          8658
          -
          8667
        </td>
        <td>
          Apply
        </td>
        <td>
          org.geotools.feature.FeatureIterator.next
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          iter.next()
        </td>
      </tr><tr>
        <td>
          186
        </td>
        <td>
          49359
        </td>
        <td>
          8835
          -
          8861
        </td>
        <td>
          Apply
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.FeatureWithDistance.apply
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          KNearestNeighborSearchProcess.this.FeatureWithDistance.apply(sf, d)
        </td>
      </tr><tr>
        <td>
          186
        </td>
        <td>
          49360
        </td>
        <td>
          8822
          -
          8862
        </td>
        <td>
          Apply
        </td>
        <td>
          java.util.LinkedList.add
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          overflow.add(KNearestNeighborSearchProcess.this.FeatureWithDistance.apply(sf, d))
        </td>
      </tr><tr>
        <td>
          186
        </td>
        <td>
          49361
        </td>
        <td>
          8795
          -
          8863
        </td>
        <td>
          Apply
        </td>
        <td>
          scala.Option.foreach
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          knn.visit(sf).foreach[Boolean](((d: Double) =&gt; overflow.add(KNearestNeighborSearchProcess.this.FeatureWithDistance.apply(sf, d))))
        </td>
      </tr><tr>
        <td>
          188
        </td>
        <td>
          49366
        </td>
        <td>
          8898
          -
          8906
        </td>
        <td>
          Select
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.KnnCalculator.size
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          knn.size
        </td>
      </tr><tr>
        <td>
          191
        </td>
        <td>
          49369
        </td>
        <td>
          8930
          -
          8944
        </td>
        <td>
          Apply
        </td>
        <td>
          scala.Int.+
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          iteration.+(1)
        </td>
      </tr><tr>
        <td>
          199
        </td>
        <td>
          49383
        </td>
        <td>
          9249
          -
          9407
        </td>
        <td>
          Apply
        </td>
        <td>
          java.lang.Object.synchronized
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          collection.synchronized[Unit]({
  var i: Int = 0;
  while$5(){
    if (i.&lt;(found))
      {
        {
          collection.add(results.apply(i).sf);
          i = i.+(1)
        };
        while$5()
      }
    else
      ()
  }
})
        </td>
      </tr><tr>
        <td>
          200
        </td>
        <td>
          49374
        </td>
        <td>
          9293
          -
          9294
        </td>
        <td>
          Literal
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          0
        </td>
      </tr><tr>
        <td>
          201
        </td>
        <td>
          49375
        </td>
        <td>
          9312
          -
          9321
        </td>
        <td>
          Apply
        </td>
        <td>
          scala.Int.&lt;
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          i.&lt;(found)
        </td>
      </tr><tr>
        <td>
          201
        </td>
        <td>
          49379
        </td>
        <td>
          9323
          -
          9323
        </td>
        <td>
          Apply
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.KNNVisitor.while$5
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          while$5()
        </td>
      </tr><tr>
        <td>
          201
        </td>
        <td>
          49380
        </td>
        <td>
          9323
          -
          9397
        </td>
        <td>
          Block
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          {
  {
    collection.add(results.apply(i).sf);
    i = i.+(1)
  };
  while$5()
}
        </td>
      </tr><tr>
        <td>
          201
        </td>
        <td>
          49381
        </td>
        <td>
          9305
          -
          9305
        </td>
        <td>
          Literal
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          ()
        </td>
      </tr><tr>
        <td>
          201
        </td>
        <td>
          49382
        </td>
        <td>
          9305
          -
          9305
        </td>
        <td>
          Block
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          ()
        </td>
      </tr><tr>
        <td>
          202
        </td>
        <td>
          49376
        </td>
        <td>
          9352
          -
          9365
        </td>
        <td>
          Select
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.FeatureWithDistance.sf
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          results.apply(i).sf
        </td>
      </tr><tr>
        <td>
          202
        </td>
        <td>
          49377
        </td>
        <td>
          9337
          -
          9366
        </td>
        <td>
          Apply
        </td>
        <td>
          org.geotools.feature.DefaultFeatureCollection.add
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          collection.add(results.apply(i).sf)
        </td>
      </tr><tr>
        <td>
          203
        </td>
        <td>
          49378
        </td>
        <td>
          9379
          -
          9385
        </td>
        <td>
          Apply
        </td>
        <td>
          scala.Int.+
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          i.+(1)
        </td>
      </tr><tr>
        <td>
          208
        </td>
        <td>
          49384
        </td>
        <td>
          9477
          -
          9483
        </td>
        <td>
          Apply
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.KNNVisitor.run
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          run(p)
        </td>
      </tr><tr>
        <td>
          208
        </td>
        <td>
          49385
        </td>
        <td>
          9447
          -
          9484
        </td>
        <td>
          Apply
        </td>
        <td>
          org.locationtech.geomesa.utils.concurrent.CachedThreadPool.submit
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          org.locationtech.geomesa.utils.concurrent.CachedThreadPool.submit((() =&gt; run(p)))
        </td>
      </tr><tr>
        <td>
          208
        </td>
        <td>
          49386
        </td>
        <td>
          9441
          -
          9441
        </td>
        <td>
          TypeApply
        </td>
        <td>
          scala.collection.immutable.List.canBuildFrom
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          immutable.this.List.canBuildFrom[java.util.concurrent.Future[_]]
        </td>
      </tr><tr>
        <td>
          208
        </td>
        <td>
          49387
        </td>
        <td>
          9494
          -
          9499
        </td>
        <td>
          Apply
        </td>
        <td>
          java.util.concurrent.Future.get
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          x$5.get()
        </td>
      </tr><tr>
        <td>
          208
        </td>
        <td>
          49388
        </td>
        <td>
          9423
          -
          9500
        </td>
        <td>
          Apply
        </td>
        <td>
          scala.collection.immutable.List.foreach
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          KNNVisitor.this.queries.toList.map[java.util.concurrent.Future[_], List[java.util.concurrent.Future[_]]](((p: org.locationtech.jts.geom.Point) =&gt; org.locationtech.geomesa.utils.concurrent.CachedThreadPool.submit((() =&gt; run(p)))))(immutable.this.List.canBuildFrom[java.util.concurrent.Future[_]]).foreach[Any](((x$5: java.util.concurrent.Future[_]) =&gt; x$5.get()))
        </td>
      </tr><tr>
        <td>
          210
        </td>
        <td>
          49389
        </td>
        <td>
          9522
          -
          9547
        </td>
        <td>
          Apply
        </td>
        <td>
          org.locationtech.geomesa.index.process.FeatureResult.apply
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          org.locationtech.geomesa.index.process.`package`.FeatureResult.apply(collection)
        </td>
      </tr><tr>
        <td>
          210
        </td>
        <td>
          49390
        </td>
        <td>
          9508
          -
          9547
        </td>
        <td>
          Apply
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.KNNVisitor.result_=
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          this.result_=(org.locationtech.geomesa.index.process.`package`.FeatureResult.apply(collection))
        </td>
      </tr><tr>
        <td>
          226
        </td>
        <td>
          49391
        </td>
        <td>
          10014
          -
          10038
        </td>
        <td>
          Apply
        </td>
        <td>
          org.geotools.referencing.GeodeticCalculator.&lt;init&gt;
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          new org.geotools.referencing.GeodeticCalculator()
        </td>
      </tr><tr>
        <td>
          227
        </td>
        <td>
          49392
        </td>
        <td>
          10066
          -
          10071
        </td>
        <td>
          Select
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.KnnWindow.start
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          KnnWindow.this.start
        </td>
      </tr><tr>
        <td>
          230
        </td>
        <td>
          49393
        </td>
        <td>
          10212
          -
          10213
        </td>
        <td>
          Select
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.KnnWindow.p
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          KnnWindow.this.p
        </td>
      </tr><tr>
        <td>
          230
        </td>
        <td>
          49394
        </td>
        <td>
          10215
          -
          10223
        </td>
        <td>
          Select
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.KnnWindow.distance
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          KnnWindow.this.distance
        </td>
      </tr><tr>
        <td>
          230
        </td>
        <td>
          49395
        </td>
        <td>
          10225
          -
          10229
        </td>
        <td>
          Select
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.KnnWindow.calc
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          KnnWindow.this.calc
        </td>
      </tr><tr>
        <td>
          230
        </td>
        <td>
          49396
        </td>
        <td>
          10203
          -
          10230
        </td>
        <td>
          Apply
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope.apply
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          KNearestNeighborSearchProcess.this.Envelope.apply(KnnWindow.this.p, KnnWindow.this.distance, KnnWindow.this.calc)
        </td>
      </tr><tr>
        <td>
          230
        </td>
        <td>
          49397
        </td>
        <td>
          10232
          -
          10236
        </td>
        <td>
          Select
        </td>
        <td>
          scala.None
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          scala.None
        </td>
      </tr><tr>
        <td>
          230
        </td>
        <td>
          49398
        </td>
        <td>
          10189
          -
          10237
        </td>
        <td>
          Apply
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.QueryEnvelope.apply
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          KNearestNeighborSearchProcess.this.QueryEnvelope.apply(KNearestNeighborSearchProcess.this.Envelope.apply(KnnWindow.this.p, KnnWindow.this.distance, KnnWindow.this.calc), scala.None)
        </td>
      </tr><tr>
        <td>
          237
        </td>
        <td>
          49399
        </td>
        <td>
          10346
          -
          10354
        </td>
        <td>
          Select
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.KnnWindow.distance
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          KnnWindow.this.distance
        </td>
      </tr><tr>
        <td>
          244
        </td>
        <td>
          49400
        </td>
        <td>
          10470
          -
          10478
        </td>
        <td>
          Select
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.KnnWindow.envelope
        </td>
        <td>
          
        </td>
        <td style="background: #F0ADAD">
          KnnWindow.this.envelope
        </td>
      </tr><tr>
        <td>
          251
        </td>
        <td>
          49401
        </td>
        <td>
          10626
          -
          10635
        </td>
        <td>
          Select
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.KnnWindow.threshold
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          KnnWindow.this.threshold
        </td>
      </tr><tr>
        <td>
          251
        </td>
        <td>
          49402
        </td>
        <td>
          10615
          -
          10635
        </td>
        <td>
          Apply
        </td>
        <td>
          scala.Double.&lt;
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          KnnWindow.this.distance.&lt;(KnnWindow.this.threshold)
        </td>
      </tr><tr>
        <td>
          260
        </td>
        <td>
          49403
        </td>
        <td>
          10864
          -
          10870
        </td>
        <td>
          Apply
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.KnnWindow.expand
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          KnnWindow.this.expand(found)
        </td>
      </tr><tr>
        <td>
          260
        </td>
        <td>
          49404
        </td>
        <td>
          10850
          -
          10871
        </td>
        <td>
          Apply
        </td>
        <td>
          scala.Option.foreach
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          found.foreach[Unit]({
  ((found: Int) =&gt; KnnWindow.this.expand(found))
})
        </td>
      </tr><tr>
        <td>
          262
        </td>
        <td>
          49405
        </td>
        <td>
          10951
          -
          10955
        </td>
        <td>
          Select
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.KnnWindow.base
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          KnnWindow.this.base
        </td>
      </tr><tr>
        <td>
          262
        </td>
        <td>
          49406
        </td>
        <td>
          10941
          -
          10956
        </td>
        <td>
          Apply
        </td>
        <td>
          org.geotools.api.data.Query.&lt;init&gt;
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          new org.geotools.api.data.Query(KnnWindow.this.base)
        </td>
      </tr><tr>
        <td>
          263
        </td>
        <td>
          49407
        </td>
        <td>
          10988
          -
          11001
        </td>
        <td>
          Apply
        </td>
        <td>
          org.geotools.api.data.Query.getHints
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          KnnWindow.this.base.getHints()
        </td>
      </tr><tr>
        <td>
          263
        </td>
        <td>
          49408
        </td>
        <td>
          10978
          -
          11002
        </td>
        <td>
          Apply
        </td>
        <td>
          org.geotools.util.factory.Hints.&lt;init&gt;
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          new org.geotools.util.factory.Hints(KnnWindow.this.base.getHints())
        </td>
      </tr><tr>
        <td>
          263
        </td>
        <td>
          49409
        </td>
        <td>
          10963
          -
          11003
        </td>
        <td>
          Apply
        </td>
        <td>
          org.geotools.api.data.Query.setHints
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          query.setHints(new org.geotools.util.factory.Hints(KnnWindow.this.base.getHints()))
        </td>
      </tr><tr>
        <td>
          266
        </td>
        <td>
          49410
        </td>
        <td>
          11241
          -
          11245
        </td>
        <td>
          Select
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.KnnWindow.geom
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          KnnWindow.this.geom
        </td>
      </tr><tr>
        <td>
          266
        </td>
        <td>
          49411
        </td>
        <td>
          11230
          -
          11246
        </td>
        <td>
          Apply
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope.toFilter
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          x$6.toFilter(KnnWindow.this.geom)
        </td>
      </tr><tr>
        <td>
          266
        </td>
        <td>
          49412
        </td>
        <td>
          11229
          -
          11229
        </td>
        <td>
          TypeApply
        </td>
        <td>
          scala.collection.Seq.canBuildFrom
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          collection.this.Seq.canBuildFrom[org.geotools.api.filter.Filter]
        </td>
      </tr><tr>
        <td>
          266
        </td>
        <td>
          49413
        </td>
        <td>
          11211
          -
          11247
        </td>
        <td>
          ApplyToImplicitArgs
        </td>
        <td>
          scala.collection.TraversableLike.map
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          KnnWindow.this.envelope.query.map[org.geotools.api.filter.Filter, Seq[org.geotools.api.filter.Filter]](((x$6: org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope) =&gt; x$6.toFilter(KnnWindow.this.geom)))(collection.this.Seq.canBuildFrom[org.geotools.api.filter.Filter])
        </td>
      </tr><tr>
        <td>
          266
        </td>
        <td>
          49414
        </td>
        <td>
          11210
          -
          11210
        </td>
        <td>
          Select
        </td>
        <td>
          org.locationtech.geomesa.filter.ff
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          org.locationtech.geomesa.filter.`package`.ff
        </td>
      </tr><tr>
        <td>
          266
        </td>
        <td>
          49415
        </td>
        <td>
          11169
          -
          11248
        </td>
        <td>
          ApplyToImplicitArgs
        </td>
        <td>
          org.locationtech.geomesa.filter.orFilters
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          org.locationtech.geomesa.filter.`package`.orFilters(KnnWindow.this.envelope.query.map[org.geotools.api.filter.Filter, Seq[org.geotools.api.filter.Filter]](((x$6: org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope) =&gt; x$6.toFilter(KnnWindow.this.geom)))(collection.this.Seq.canBuildFrom[org.geotools.api.filter.Filter]))(org.locationtech.geomesa.filter.`package`.ff)
        </td>
      </tr><tr>
        <td>
          267
        </td>
        <td>
          49416
        </td>
        <td>
          11255
          -
          11269
        </td>
        <td>
          Apply
        </td>
        <td>
          org.geotools.api.data.Query.getFilter
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          KnnWindow.this.base.getFilter()
        </td>
      </tr><tr>
        <td>
          268
        </td>
        <td>
          49417
        </td>
        <td>
          11316
          -
          11339
        </td>
        <td>
          Apply
        </td>
        <td>
          org.geotools.api.data.Query.setFilter
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          query.setFilter(filter)
        </td>
      </tr><tr>
        <td>
          268
        </td>
        <td>
          49418
        </td>
        <td>
          11316
          -
          11339
        </td>
        <td>
          Block
        </td>
        <td>
          org.geotools.api.data.Query.setFilter
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          query.setFilter(filter)
        </td>
      </tr><tr>
        <td>
          269
        </td>
        <td>
          49419
        </td>
        <td>
          11374
          -
          11391
        </td>
        <td>
          Apply
        </td>
        <td>
          org.geotools.api.filter.FilterFactory.and
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          org.locationtech.geomesa.filter.`package`.ff.and(f, filter)
        </td>
      </tr><tr>
        <td>
          269
        </td>
        <td>
          49420
        </td>
        <td>
          11358
          -
          11392
        </td>
        <td>
          Apply
        </td>
        <td>
          org.geotools.api.data.Query.setFilter
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          query.setFilter(org.locationtech.geomesa.filter.`package`.ff.and(f, filter))
        </td>
      </tr><tr>
        <td>
          269
        </td>
        <td>
          49421
        </td>
        <td>
          11358
          -
          11392
        </td>
        <td>
          Block
        </td>
        <td>
          org.geotools.api.data.Query.setFilter
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          query.setFilter(org.locationtech.geomesa.filter.`package`.ff.and(f, filter))
        </td>
      </tr><tr>
        <td>
          292
        </td>
        <td>
          49422
        </td>
        <td>
          12379
          -
          12389
        </td>
        <td>
          Apply
        </td>
        <td>
          scala.Int.==
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          found.==(0)
        </td>
      </tr><tr>
        <td>
          292
        </td>
        <td>
          49423
        </td>
        <td>
          12393
          -
          12405
        </td>
        <td>
          Apply
        </td>
        <td>
          scala.Double.*
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          KnnWindow.this.distance.*(2)
        </td>
      </tr><tr>
        <td>
          292
        </td>
        <td>
          49424
        </td>
        <td>
          12393
          -
          12405
        </td>
        <td>
          Block
        </td>
        <td>
          scala.Double.*
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          KnnWindow.this.distance.*(2)
        </td>
      </tr><tr>
        <td>
          292
        </td>
        <td>
          49434
        </td>
        <td>
          12413
          -
          12521
        </td>
        <td>
          Block
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          {
  val density: Double = found./(scala.math.`package`.pow(2.*(KnnWindow.this.distance), 2.0));
  scala.math.`package`.sqrt(KnnWindow.this.k./(3.141592653589793.*(density)))
}
        </td>
      </tr><tr>
        <td>
          292
        </td>
        <td>
          49435
        </td>
        <td>
          12364
          -
          12521
        </td>
        <td>
          Apply
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.KnnWindow.distance_=
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          KnnWindow.this.distance_=(if (found.==(0))
  KnnWindow.this.distance.*(2)
else
  {
    val density: Double = found./(scala.math.`package`.pow(2.*(KnnWindow.this.distance), 2.0));
    scala.math.`package`.sqrt(KnnWindow.this.k./(3.141592653589793.*(density)))
  })
        </td>
      </tr><tr>
        <td>
          293
        </td>
        <td>
          49425
        </td>
        <td>
          12454
          -
          12455
        </td>
        <td>
          Literal
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          2
        </td>
      </tr><tr>
        <td>
          293
        </td>
        <td>
          49426
        </td>
        <td>
          12458
          -
          12466
        </td>
        <td>
          Select
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.KnnWindow.distance
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          KnnWindow.this.distance
        </td>
      </tr><tr>
        <td>
          293
        </td>
        <td>
          49427
        </td>
        <td>
          12454
          -
          12466
        </td>
        <td>
          Apply
        </td>
        <td>
          scala.Int.*
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          2.*(KnnWindow.this.distance)
        </td>
      </tr><tr>
        <td>
          293
        </td>
        <td>
          49428
        </td>
        <td>
          12468
          -
          12469
        </td>
        <td>
          Literal
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          2.0
        </td>
      </tr><tr>
        <td>
          293
        </td>
        <td>
          49429
        </td>
        <td>
          12445
          -
          12470
        </td>
        <td>
          Apply
        </td>
        <td>
          scala.math.pow
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          scala.math.`package`.pow(2.*(KnnWindow.this.distance), 2.0)
        </td>
      </tr><tr>
        <td>
          293
        </td>
        <td>
          49430
        </td>
        <td>
          12437
          -
          12470
        </td>
        <td>
          Apply
        </td>
        <td>
          scala.Int./
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          found./(scala.math.`package`.pow(2.*(KnnWindow.this.distance), 2.0))
        </td>
      </tr><tr>
        <td>
          294
        </td>
        <td>
          49431
        </td>
        <td>
          12494
          -
          12511
        </td>
        <td>
          Apply
        </td>
        <td>
          scala.Double.*
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          3.141592653589793.*(density)
        </td>
      </tr><tr>
        <td>
          294
        </td>
        <td>
          49432
        </td>
        <td>
          12489
          -
          12512
        </td>
        <td>
          Apply
        </td>
        <td>
          scala.Int./
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          KnnWindow.this.k./(3.141592653589793.*(density))
        </td>
      </tr><tr>
        <td>
          294
        </td>
        <td>
          49433
        </td>
        <td>
          12479
          -
          12513
        </td>
        <td>
          Apply
        </td>
        <td>
          scala.math.sqrt
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          scala.math.`package`.sqrt(KnnWindow.this.k./(3.141592653589793.*(density)))
        </td>
      </tr><tr>
        <td>
          296
        </td>
        <td>
          49436
        </td>
        <td>
          12543
          -
          12552
        </td>
        <td>
          Select
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.KnnWindow.threshold
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          KnnWindow.this.threshold
        </td>
      </tr><tr>
        <td>
          296
        </td>
        <td>
          49437
        </td>
        <td>
          12532
          -
          12552
        </td>
        <td>
          Apply
        </td>
        <td>
          scala.Double.&gt;
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          KnnWindow.this.distance.&gt;(KnnWindow.this.threshold)
        </td>
      </tr><tr>
        <td>
          296
        </td>
        <td>
          49441
        </td>
        <td>
          12528
          -
          12528
        </td>
        <td>
          Literal
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          ()
        </td>
      </tr><tr>
        <td>
          296
        </td>
        <td>
          49442
        </td>
        <td>
          12528
          -
          12528
        </td>
        <td>
          Block
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          ()
        </td>
      </tr><tr>
        <td>
          297
        </td>
        <td>
          49438
        </td>
        <td>
          12575
          -
          12584
        </td>
        <td>
          Select
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.KnnWindow.threshold
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          KnnWindow.this.threshold
        </td>
      </tr><tr>
        <td>
          297
        </td>
        <td>
          49439
        </td>
        <td>
          12564
          -
          12584
        </td>
        <td>
          Apply
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.KnnWindow.distance_=
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          KnnWindow.this.distance_=(KnnWindow.this.threshold)
        </td>
      </tr><tr>
        <td>
          297
        </td>
        <td>
          49440
        </td>
        <td>
          12564
          -
          12584
        </td>
        <td>
          Block
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.KnnWindow.distance_=
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          KnnWindow.this.distance_=(KnnWindow.this.threshold)
        </td>
      </tr><tr>
        <td>
          300
        </td>
        <td>
          49443
        </td>
        <td>
          12616
          -
          12633
        </td>
        <td>
          Select
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.QueryEnvelope.envelope
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          KnnWindow.this.envelope.envelope
        </td>
      </tr><tr>
        <td>
          300
        </td>
        <td>
          49444
        </td>
        <td>
          12611
          -
          12634
        </td>
        <td>
          Apply
        </td>
        <td>
          scala.Some.apply
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          scala.Some.apply[org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope](KnnWindow.this.envelope.envelope)
        </td>
      </tr><tr>
        <td>
          301
        </td>
        <td>
          49445
        </td>
        <td>
          12675
          -
          12676
        </td>
        <td>
          Select
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.KnnWindow.p
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          KnnWindow.this.p
        </td>
      </tr><tr>
        <td>
          301
        </td>
        <td>
          49446
        </td>
        <td>
          12678
          -
          12686
        </td>
        <td>
          Select
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.KnnWindow.distance
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          KnnWindow.this.distance
        </td>
      </tr><tr>
        <td>
          301
        </td>
        <td>
          49447
        </td>
        <td>
          12688
          -
          12692
        </td>
        <td>
          Select
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.KnnWindow.calc
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          KnnWindow.this.calc
        </td>
      </tr><tr>
        <td>
          301
        </td>
        <td>
          49448
        </td>
        <td>
          12666
          -
          12693
        </td>
        <td>
          Apply
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope.apply
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          KNearestNeighborSearchProcess.this.Envelope.apply(KnnWindow.this.p, KnnWindow.this.distance, KnnWindow.this.calc)
        </td>
      </tr><tr>
        <td>
          301
        </td>
        <td>
          49449
        </td>
        <td>
          12652
          -
          12700
        </td>
        <td>
          Apply
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.QueryEnvelope.apply
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          KNearestNeighborSearchProcess.this.QueryEnvelope.apply(KNearestNeighborSearchProcess.this.Envelope.apply(KnnWindow.this.p, KnnWindow.this.distance, KnnWindow.this.calc), hole)
        </td>
      </tr><tr>
        <td>
          301
        </td>
        <td>
          49450
        </td>
        <td>
          12641
          -
          12700
        </td>
        <td>
          Apply
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.KnnWindow.envelope_=
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          KnnWindow.this.envelope_=(KNearestNeighborSearchProcess.this.QueryEnvelope.apply(KNearestNeighborSearchProcess.this.Envelope.apply(KnnWindow.this.p, KnnWindow.this.distance, KnnWindow.this.calc), hole))
        </td>
      </tr><tr>
        <td>
          322
        </td>
        <td>
          49451
        </td>
        <td>
          13285
          -
          13309
        </td>
        <td>
          Apply
        </td>
        <td>
          org.geotools.referencing.GeodeticCalculator.&lt;init&gt;
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          new org.geotools.referencing.GeodeticCalculator()
        </td>
      </tr><tr>
        <td>
          325
        </td>
        <td>
          49452
        </td>
        <td>
          13394
          -
          13395
        </td>
        <td>
          Select
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.KnnCalculator.k
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          KnnCalculator.this.k
        </td>
      </tr><tr>
        <td>
          325
        </td>
        <td>
          49453
        </td>
        <td>
          13390
          -
          13395
        </td>
        <td>
          Apply
        </td>
        <td>
          scala.Int.&lt;
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          KnnCalculator.this.i.&lt;(KnnCalculator.this.k)
        </td>
      </tr><tr>
        <td>
          325
        </td>
        <td>
          49454
        </td>
        <td>
          13399
          -
          13400
        </td>
        <td>
          Literal
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          0
        </td>
      </tr><tr>
        <td>
          325
        </td>
        <td>
          49455
        </td>
        <td>
          13399
          -
          13400
        </td>
        <td>
          Block
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          0
        </td>
      </tr><tr>
        <td>
          325
        </td>
        <td>
          49456
        </td>
        <td>
          13410
          -
          13418
        </td>
        <td>
          Select
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.KnnCalculator.farthest
        </td>
        <td>
          
        </td>
        <td style="background: #F0ADAD">
          KnnCalculator.this.farthest
        </td>
      </tr><tr>
        <td>
          325
        </td>
        <td>
          49457
        </td>
        <td>
          13410
          -
          13418
        </td>
        <td>
          Block
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.KnnCalculator.farthest
        </td>
        <td>
          
        </td>
        <td style="background: #F0ADAD">
          KnnCalculator.this.farthest
        </td>
      </tr><tr>
        <td>
          332
        </td>
        <td>
          49458
        </td>
        <td>
          13523
          -
          13524
        </td>
        <td>
          Select
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.KnnCalculator.i
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          KnnCalculator.this.i
        </td>
      </tr><tr>
        <td>
          341
        </td>
        <td>
          49459
        </td>
        <td>
          13813
          -
          13839
        </td>
        <td>
          Apply
        </td>
        <td>
          org.geotools.api.feature.simple.SimpleFeature.getDefaultGeometry
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          feature.getDefaultGeometry()
        </td>
      </tr><tr>
        <td>
          342
        </td>
        <td>
          49474
        </td>
        <td>
          13870
          -
          14242
        </td>
        <td>
          Block
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          {
  val meters: Double = {
    KnnCalculator.this.calculator.setStartingGeographicPoint(KnnCalculator.this.query.getX(), KnnCalculator.this.query.getY());
    KnnCalculator.this.calculator.setDestinationGeographicPoint(p.getX(), p.getY());
    KnnCalculator.this.calculator.getOrthodromicDistance()
  };
  if (meters.&gt;(KnnCalculator.this.threshold))
    scala.Some.apply[Double](meters)
  else
    {
      KnnCalculator.this.visit(feature, meters);
      scala.None
    }
}
        </td>
      </tr><tr>
        <td>
          344
        </td>
        <td>
          49460
        </td>
        <td>
          13948
          -
          13958
        </td>
        <td>
          Apply
        </td>
        <td>
          org.locationtech.jts.geom.Point.getX
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          KnnCalculator.this.query.getX()
        </td>
      </tr><tr>
        <td>
          344
        </td>
        <td>
          49461
        </td>
        <td>
          13960
          -
          13970
        </td>
        <td>
          Apply
        </td>
        <td>
          org.locationtech.jts.geom.Point.getY
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          KnnCalculator.this.query.getY()
        </td>
      </tr><tr>
        <td>
          344
        </td>
        <td>
          49462
        </td>
        <td>
          13910
          -
          13971
        </td>
        <td>
          Apply
        </td>
        <td>
          org.geotools.referencing.GeodeticCalculator.setStartingGeographicPoint
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          KnnCalculator.this.calculator.setStartingGeographicPoint(KnnCalculator.this.query.getX(), KnnCalculator.this.query.getY())
        </td>
      </tr><tr>
        <td>
          345
        </td>
        <td>
          49463
        </td>
        <td>
          14025
          -
          14031
        </td>
        <td>
          Apply
        </td>
        <td>
          org.locationtech.jts.geom.Point.getX
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          p.getX()
        </td>
      </tr><tr>
        <td>
          345
        </td>
        <td>
          49464
        </td>
        <td>
          14033
          -
          14039
        </td>
        <td>
          Apply
        </td>
        <td>
          org.locationtech.jts.geom.Point.getY
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          p.getY()
        </td>
      </tr><tr>
        <td>
          345
        </td>
        <td>
          49465
        </td>
        <td>
          13984
          -
          14040
        </td>
        <td>
          Apply
        </td>
        <td>
          org.geotools.referencing.GeodeticCalculator.setDestinationGeographicPoint
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          KnnCalculator.this.calculator.setDestinationGeographicPoint(p.getX(), p.getY())
        </td>
      </tr><tr>
        <td>
          346
        </td>
        <td>
          49466
        </td>
        <td>
          14053
          -
          14086
        </td>
        <td>
          Apply
        </td>
        <td>
          org.geotools.referencing.GeodeticCalculator.getOrthodromicDistance
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          KnnCalculator.this.calculator.getOrthodromicDistance()
        </td>
      </tr><tr>
        <td>
          348
        </td>
        <td>
          49467
        </td>
        <td>
          14122
          -
          14131
        </td>
        <td>
          Select
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.KnnCalculator.threshold
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          KnnCalculator.this.threshold
        </td>
      </tr><tr>
        <td>
          348
        </td>
        <td>
          49468
        </td>
        <td>
          14113
          -
          14131
        </td>
        <td>
          Apply
        </td>
        <td>
          scala.Double.&gt;
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          meters.&gt;(KnnCalculator.this.threshold)
        </td>
      </tr><tr>
        <td>
          349
        </td>
        <td>
          49469
        </td>
        <td>
          14147
          -
          14159
        </td>
        <td>
          Apply
        </td>
        <td>
          scala.Some.apply
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          scala.Some.apply[Double](meters)
        </td>
      </tr><tr>
        <td>
          349
        </td>
        <td>
          49470
        </td>
        <td>
          14147
          -
          14159
        </td>
        <td>
          Block
        </td>
        <td>
          scala.Some.apply
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          scala.Some.apply[Double](meters)
        </td>
      </tr><tr>
        <td>
          350
        </td>
        <td>
          49473
        </td>
        <td>
          14177
          -
          14242
        </td>
        <td>
          Block
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          {
  KnnCalculator.this.visit(feature, meters);
  scala.None
}
        </td>
      </tr><tr>
        <td>
          351
        </td>
        <td>
          49471
        </td>
        <td>
          14191
          -
          14213
        </td>
        <td>
          Apply
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.KnnCalculator.visit
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          KnnCalculator.this.visit(feature, meters)
        </td>
      </tr><tr>
        <td>
          352
        </td>
        <td>
          49472
        </td>
        <td>
          14226
          -
          14230
        </td>
        <td>
          Select
        </td>
        <td>
          scala.None
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          scala.None
        </td>
      </tr><tr>
        <td>
          355
        </td>
        <td>
          49475
        </td>
        <td>
          14357
          -
          14361
        </td>
        <td>
          Select
        </td>
        <td>
          scala.None
        </td>
        <td>
          
        </td>
        <td style="background: #F0ADAD">
          scala.None
        </td>
      </tr><tr>
        <td>
          355
        </td>
        <td>
          49476
        </td>
        <td>
          14259
          -
          14361
        </td>
        <td>
          Block
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td>
          
        </td>
        <td style="background: #F0ADAD">
          {
  (if (KnnCalculator.this.logger.underlying.isWarnEnabled())
    KnnCalculator.this.logger.underlying.warn(&quot;KNN query not implemented for non-point geometries, skipping this feature: {}&quot;, (g: AnyRef))
  else
    (): Unit);
  scala.None
}
        </td>
      </tr><tr>
        <td>
          366
        </td>
        <td>
          49477
        </td>
        <td>
          14661
          -
          14662
        </td>
        <td>
          Select
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.KnnCalculator.k
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          KnnCalculator.this.k
        </td>
      </tr><tr>
        <td>
          366
        </td>
        <td>
          49478
        </td>
        <td>
          14657
          -
          14662
        </td>
        <td>
          Apply
        </td>
        <td>
          scala.Int.&lt;
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          KnnCalculator.this.i.&lt;(KnnCalculator.this.k)
        </td>
      </tr><tr>
        <td>
          366
        </td>
        <td>
          49491
        </td>
        <td>
          14664
          -
          15003
        </td>
        <td>
          Block
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          {
  KnnCalculator.this.results.update(KnnCalculator.this.i, KNearestNeighborSearchProcess.this.FeatureWithDistance.apply(feature, distance));
  KnnCalculator.this.i_=(KnnCalculator.this.i.+(1));
  if (KnnCalculator.this.i.==(KnnCalculator.this.k))
    KnnCalculator.this.fi_=(KnnCalculator.this.farthest)
  else
    ()
}
        </td>
      </tr><tr>
        <td>
          368
        </td>
        <td>
          49479
        </td>
        <td>
          14774
          -
          14775
        </td>
        <td>
          Select
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.KnnCalculator.i
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          KnnCalculator.this.i
        </td>
      </tr><tr>
        <td>
          368
        </td>
        <td>
          49480
        </td>
        <td>
          14779
          -
          14817
        </td>
        <td>
          Apply
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.FeatureWithDistance.apply
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          KNearestNeighborSearchProcess.this.FeatureWithDistance.apply(feature, distance)
        </td>
      </tr><tr>
        <td>
          368
        </td>
        <td>
          49481
        </td>
        <td>
          14766
          -
          14817
        </td>
        <td>
          Apply
        </td>
        <td>
          scala.Array.update
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          KnnCalculator.this.results.update(KnnCalculator.this.i, KNearestNeighborSearchProcess.this.FeatureWithDistance.apply(feature, distance))
        </td>
      </tr><tr>
        <td>
          369
        </td>
        <td>
          49482
        </td>
        <td>
          14826
          -
          14832
        </td>
        <td>
          Apply
        </td>
        <td>
          scala.Int.+
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          KnnCalculator.this.i.+(1)
        </td>
      </tr><tr>
        <td>
          369
        </td>
        <td>
          49483
        </td>
        <td>
          14826
          -
          14832
        </td>
        <td>
          Apply
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.KnnCalculator.i_=
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          KnnCalculator.this.i_=(KnnCalculator.this.i.+(1))
        </td>
      </tr><tr>
        <td>
          370
        </td>
        <td>
          49484
        </td>
        <td>
          14850
          -
          14851
        </td>
        <td>
          Select
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.KnnCalculator.k
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          KnnCalculator.this.k
        </td>
      </tr><tr>
        <td>
          370
        </td>
        <td>
          49485
        </td>
        <td>
          14845
          -
          14851
        </td>
        <td>
          Apply
        </td>
        <td>
          scala.Int.==
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          KnnCalculator.this.i.==(KnnCalculator.this.k)
        </td>
      </tr><tr>
        <td>
          370
        </td>
        <td>
          49489
        </td>
        <td>
          14841
          -
          14841
        </td>
        <td>
          Literal
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          ()
        </td>
      </tr><tr>
        <td>
          370
        </td>
        <td>
          49490
        </td>
        <td>
          14841
          -
          14841
        </td>
        <td>
          Block
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          ()
        </td>
      </tr><tr>
        <td>
          372
        </td>
        <td>
          49486
        </td>
        <td>
          14977
          -
          14985
        </td>
        <td>
          Select
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.KnnCalculator.farthest
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          KnnCalculator.this.farthest
        </td>
      </tr><tr>
        <td>
          372
        </td>
        <td>
          49487
        </td>
        <td>
          14972
          -
          14985
        </td>
        <td>
          Apply
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.KnnCalculator.fi_=
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          KnnCalculator.this.fi_=(KnnCalculator.this.farthest)
        </td>
      </tr><tr>
        <td>
          372
        </td>
        <td>
          49488
        </td>
        <td>
          14972
          -
          14985
        </td>
        <td>
          Block
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.KnnCalculator.fi_=
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          KnnCalculator.this.fi_=(KnnCalculator.this.farthest)
        </td>
      </tr><tr>
        <td>
          374
        </td>
        <td>
          49492
        </td>
        <td>
          15032
          -
          15034
        </td>
        <td>
          Select
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.KnnCalculator.fi
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          KnnCalculator.this.fi
        </td>
      </tr><tr>
        <td>
          374
        </td>
        <td>
          49493
        </td>
        <td>
          15024
          -
          15042
        </td>
        <td>
          Select
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.FeatureWithDistance.meters
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          KnnCalculator.this.results.apply(KnnCalculator.this.fi).meters
        </td>
      </tr><tr>
        <td>
          374
        </td>
        <td>
          49494
        </td>
        <td>
          15013
          -
          15042
        </td>
        <td>
          Apply
        </td>
        <td>
          scala.Double.&lt;
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          distance.&lt;(KnnCalculator.this.results.apply(KnnCalculator.this.fi).meters)
        </td>
      </tr><tr>
        <td>
          374
        </td>
        <td>
          49500
        </td>
        <td>
          15044
          -
          15226
        </td>
        <td>
          Block
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          {
  KnnCalculator.this.results.update(KnnCalculator.this.fi, KNearestNeighborSearchProcess.this.FeatureWithDistance.apply(feature, distance));
  KnnCalculator.this.fi_=(KnnCalculator.this.farthest)
}
        </td>
      </tr><tr>
        <td>
          374
        </td>
        <td>
          49501
        </td>
        <td>
          15009
          -
          15009
        </td>
        <td>
          Literal
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          ()
        </td>
      </tr><tr>
        <td>
          374
        </td>
        <td>
          49502
        </td>
        <td>
          15009
          -
          15009
        </td>
        <td>
          Block
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          ()
        </td>
      </tr><tr>
        <td>
          374
        </td>
        <td>
          49503
        </td>
        <td>
          15009
          -
          15226
        </td>
        <td>
          If
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          if (distance.&lt;(KnnCalculator.this.results.apply(KnnCalculator.this.fi).meters))
  {
    KnnCalculator.this.results.update(KnnCalculator.this.fi, KNearestNeighborSearchProcess.this.FeatureWithDistance.apply(feature, distance));
    KnnCalculator.this.fi_=(KnnCalculator.this.farthest)
  }
else
  ()
        </td>
      </tr><tr>
        <td>
          376
        </td>
        <td>
          49495
        </td>
        <td>
          15152
          -
          15154
        </td>
        <td>
          Select
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.KnnCalculator.fi
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          KnnCalculator.this.fi
        </td>
      </tr><tr>
        <td>
          376
        </td>
        <td>
          49496
        </td>
        <td>
          15158
          -
          15196
        </td>
        <td>
          Apply
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.FeatureWithDistance.apply
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          KNearestNeighborSearchProcess.this.FeatureWithDistance.apply(feature, distance)
        </td>
      </tr><tr>
        <td>
          376
        </td>
        <td>
          49497
        </td>
        <td>
          15144
          -
          15196
        </td>
        <td>
          Apply
        </td>
        <td>
          scala.Array.update
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          KnnCalculator.this.results.update(KnnCalculator.this.fi, KNearestNeighborSearchProcess.this.FeatureWithDistance.apply(feature, distance))
        </td>
      </tr><tr>
        <td>
          377
        </td>
        <td>
          49498
        </td>
        <td>
          15210
          -
          15218
        </td>
        <td>
          Select
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.KnnCalculator.farthest
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          KnnCalculator.this.farthest
        </td>
      </tr><tr>
        <td>
          377
        </td>
        <td>
          49499
        </td>
        <td>
          15205
          -
          15218
        </td>
        <td>
          Apply
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.KnnCalculator.fi_=
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          KnnCalculator.this.fi_=(KnnCalculator.this.farthest)
        </td>
      </tr><tr>
        <td>
          387
        </td>
        <td>
          49504
        </td>
        <td>
          15433
          -
          15440
        </td>
        <td>
          Select
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.KnnCalculator.results
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          KnnCalculator.this.results
        </td>
      </tr><tr>
        <td>
          387
        </td>
        <td>
          49505
        </td>
        <td>
          15433
          -
          15452
        </td>
        <td>
          Select
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.FeatureWithDistance.meters
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          scala.Predef.refArrayOps[org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.FeatureWithDistance](KnnCalculator.this.results).head.meters
        </td>
      </tr><tr>
        <td>
          388
        </td>
        <td>
          49506
        </td>
        <td>
          15472
          -
          15473
        </td>
        <td>
          Literal
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          0
        </td>
      </tr><tr>
        <td>
          389
        </td>
        <td>
          49507
        </td>
        <td>
          15488
          -
          15489
        </td>
        <td>
          Literal
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          1
        </td>
      </tr><tr>
        <td>
          390
        </td>
        <td>
          49508
        </td>
        <td>
          15507
          -
          15521
        </td>
        <td>
          Select
        </td>
        <td>
          scala.Array.length
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          KnnCalculator.this.results.length
        </td>
      </tr><tr>
        <td>
          390
        </td>
        <td>
          49509
        </td>
        <td>
          15503
          -
          15521
        </td>
        <td>
          Apply
        </td>
        <td>
          scala.Int.&lt;
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          i.&lt;(KnnCalculator.this.results.length)
        </td>
      </tr><tr>
        <td>
          390
        </td>
        <td>
          49516
        </td>
        <td>
          15523
          -
          15523
        </td>
        <td>
          Apply
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.KnnCalculator.while$6
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          while$6()
        </td>
      </tr><tr>
        <td>
          390
        </td>
        <td>
          49517
        </td>
        <td>
          15523
          -
          15651
        </td>
        <td>
          Block
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          {
  {
    if (KnnCalculator.this.results.apply(i).meters.&gt;(max))
      {
        max = KnnCalculator.this.results.apply(i).meters;
        result = i
      }
    else
      ();
    i = i.+(1)
  };
  while$6()
}
        </td>
      </tr><tr>
        <td>
          390
        </td>
        <td>
          49518
        </td>
        <td>
          15496
          -
          15496
        </td>
        <td>
          Literal
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          ()
        </td>
      </tr><tr>
        <td>
          390
        </td>
        <td>
          49519
        </td>
        <td>
          15496
          -
          15496
        </td>
        <td>
          Block
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          ()
        </td>
      </tr><tr>
        <td>
          391
        </td>
        <td>
          49510
        </td>
        <td>
          15537
          -
          15560
        </td>
        <td>
          Apply
        </td>
        <td>
          scala.Double.&gt;
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          KnnCalculator.this.results.apply(i).meters.&gt;(max)
        </td>
      </tr><tr>
        <td>
          391
        </td>
        <td>
          49512
        </td>
        <td>
          15562
          -
          15628
        </td>
        <td>
          Block
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          {
  max = KnnCalculator.this.results.apply(i).meters;
  result = i
}
        </td>
      </tr><tr>
        <td>
          391
        </td>
        <td>
          49513
        </td>
        <td>
          15533
          -
          15533
        </td>
        <td>
          Literal
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          ()
        </td>
      </tr><tr>
        <td>
          391
        </td>
        <td>
          49514
        </td>
        <td>
          15533
          -
          15533
        </td>
        <td>
          Block
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          ()
        </td>
      </tr><tr>
        <td>
          392
        </td>
        <td>
          49511
        </td>
        <td>
          15580
          -
          15597
        </td>
        <td>
          Select
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.FeatureWithDistance.meters
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          KnnCalculator.this.results.apply(i).meters
        </td>
      </tr><tr>
        <td>
          395
        </td>
        <td>
          49515
        </td>
        <td>
          15637
          -
          15643
        </td>
        <td>
          Apply
        </td>
        <td>
          scala.Int.+
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          i.+(1)
        </td>
      </tr><tr>
        <td>
          408
        </td>
        <td>
          49520
        </td>
        <td>
          16017
          -
          16023
        </td>
        <td>
          Select
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.FeatureWithDistance.meters
        </td>
        <td>
          
        </td>
        <td style="background: #F0ADAD">
          FeatureWithDistance.this.meters
        </td>
      </tr><tr>
        <td>
          408
        </td>
        <td>
          49521
        </td>
        <td>
          16025
          -
          16033
        </td>
        <td>
          Select
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.FeatureWithDistance.meters
        </td>
        <td>
          
        </td>
        <td style="background: #F0ADAD">
          o.meters
        </td>
      </tr><tr>
        <td>
          408
        </td>
        <td>
          49522
        </td>
        <td>
          15992
          -
          16034
        </td>
        <td>
          Apply
        </td>
        <td>
          java.lang.Double.compare
        </td>
        <td>
          
        </td>
        <td style="background: #F0ADAD">
          java.lang.Double.compare(FeatureWithDistance.this.meters, o.meters)
        </td>
      </tr><tr>
        <td>
          426
        </td>
        <td>
          49523
        </td>
        <td>
          16505
          -
          16509
        </td>
        <td>
          Select
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.QueryEnvelope.hole
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          QueryEnvelope.this.hole
        </td>
      </tr><tr>
        <td>
          427
        </td>
        <td>
          49524
        </td>
        <td>
          16539
          -
          16555
        </td>
        <td>
          Select
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope.toWorld
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          QueryEnvelope.this.envelope.toWorld
        </td>
      </tr><tr>
        <td>
          427
        </td>
        <td>
          49525
        </td>
        <td>
          16539
          -
          16555
        </td>
        <td>
          Block
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope.toWorld
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          QueryEnvelope.this.envelope.toWorld
        </td>
      </tr><tr>
        <td>
          428
        </td>
        <td>
          49535
        </td>
        <td>
          16577
          -
          16716
        </td>
        <td>
          Block
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          {
  val holes: Seq[org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope] = h.toWorld;
  QueryEnvelope.this.envelope.toWorld.flatMap[org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope, Seq[org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope]](((e: org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope) =&gt; holes.foldLeft[Seq[org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope]](scala.collection.Seq.apply[org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope](e))(((x0$1: Seq[org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope], x1$1: org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope) =&gt; scala.Tuple2.apply[Seq[org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope], org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope](x0$1, x1$1) match {
    case (_1: Seq[org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope], _2: org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope)(Seq[org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope], org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope)((r @ _), (h @ _)) =&gt; r.flatMap[org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope, Seq[org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope]](((x$7: org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope) =&gt; x$7.minus(h)))(collection.this.Seq.canBuildFrom[org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope])
  }))))(collection.this.Seq.canBuildFrom[org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope])
}
        </td>
      </tr><tr>
        <td>
          429
        </td>
        <td>
          49526
        </td>
        <td>
          16602
          -
          16611
        </td>
        <td>
          Select
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope.toWorld
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          h.toWorld
        </td>
      </tr><tr>
        <td>
          430
        </td>
        <td>
          49527
        </td>
        <td>
          16667
          -
          16673
        </td>
        <td>
          Apply
        </td>
        <td>
          scala.collection.generic.GenericCompanion.apply
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          scala.collection.Seq.apply[org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope](e)
        </td>
      </tr><tr>
        <td>
          430
        </td>
        <td>
          49528
        </td>
        <td>
          16702
          -
          16712
        </td>
        <td>
          Apply
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope.minus
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          x$7.minus(h)
        </td>
      </tr><tr>
        <td>
          430
        </td>
        <td>
          49529
        </td>
        <td>
          16701
          -
          16701
        </td>
        <td>
          TypeApply
        </td>
        <td>
          scala.collection.Seq.canBuildFrom
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          collection.this.Seq.canBuildFrom[org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope]
        </td>
      </tr><tr>
        <td>
          430
        </td>
        <td>
          49530
        </td>
        <td>
          16692
          -
          16713
        </td>
        <td>
          ApplyToImplicitArgs
        </td>
        <td>
          scala.collection.TraversableLike.flatMap
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          r.flatMap[org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope, Seq[org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope]](((x$7: org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope) =&gt; x$7.minus(h)))(collection.this.Seq.canBuildFrom[org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope])
        </td>
      </tr><tr>
        <td>
          430
        </td>
        <td>
          49531
        </td>
        <td>
          16692
          -
          16713
        </td>
        <td>
          Block
        </td>
        <td>
          scala.collection.TraversableLike.flatMap
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          r.flatMap[org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope, Seq[org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope]](((x$7: org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope) =&gt; x$7.minus(h)))(collection.this.Seq.canBuildFrom[org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope])
        </td>
      </tr><tr>
        <td>
          430
        </td>
        <td>
          49532
        </td>
        <td>
          16652
          -
          16715
        </td>
        <td>
          Apply
        </td>
        <td>
          scala.collection.TraversableOnce.foldLeft
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          holes.foldLeft[Seq[org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope]](scala.collection.Seq.apply[org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope](e))(((x0$1: Seq[org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope], x1$1: org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope) =&gt; scala.Tuple2.apply[Seq[org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope], org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope](x0$1, x1$1) match {
  case (_1: Seq[org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope], _2: org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope)(Seq[org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope], org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope)((r @ _), (h @ _)) =&gt; r.flatMap[org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope, Seq[org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope]](((x$7: org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope) =&gt; x$7.minus(h)))(collection.this.Seq.canBuildFrom[org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope])
}))
        </td>
      </tr><tr>
        <td>
          430
        </td>
        <td>
          49533
        </td>
        <td>
          16646
          -
          16646
        </td>
        <td>
          TypeApply
        </td>
        <td>
          scala.collection.Seq.canBuildFrom
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          collection.this.Seq.canBuildFrom[org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope]
        </td>
      </tr><tr>
        <td>
          430
        </td>
        <td>
          49534
        </td>
        <td>
          16622
          -
          16716
        </td>
        <td>
          ApplyToImplicitArgs
        </td>
        <td>
          scala.collection.TraversableLike.flatMap
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          QueryEnvelope.this.envelope.toWorld.flatMap[org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope, Seq[org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope]](((e: org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope) =&gt; holes.foldLeft[Seq[org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope]](scala.collection.Seq.apply[org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope](e))(((x0$1: Seq[org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope], x1$1: org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope) =&gt; scala.Tuple2.apply[Seq[org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope], org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope](x0$1, x1$1) match {
  case (_1: Seq[org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope], _2: org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope)(Seq[org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope], org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope)((r @ _), (h @ _)) =&gt; r.flatMap[org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope, Seq[org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope]](((x$7: org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope) =&gt; x$7.minus(h)))(collection.this.Seq.canBuildFrom[org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope])
}))))(collection.this.Seq.canBuildFrom[org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope])
        </td>
      </tr><tr>
        <td>
          439
        </td>
        <td>
          49536
        </td>
        <td>
          16845
          -
          16849
        </td>
        <td>
          Select
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.QueryEnvelope.hole
        </td>
        <td>
          
        </td>
        <td style="background: #F0ADAD">
          QueryEnvelope.this.hole
        </td>
      </tr><tr>
        <td>
          440
        </td>
        <td>
          49537
        </td>
        <td>
          16881
          -
          16895
        </td>
        <td>
          Select
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope.debug
        </td>
        <td>
          
        </td>
        <td style="background: #F0ADAD">
          QueryEnvelope.this.envelope.debug
        </td>
      </tr><tr>
        <td>
          440
        </td>
        <td>
          49538
        </td>
        <td>
          16877
          -
          16896
        </td>
        <td>
          Apply
        </td>
        <td>
          scala.collection.generic.GenericCompanion.apply
        </td>
        <td>
          
        </td>
        <td style="background: #F0ADAD">
          scala.collection.Seq.apply[String](QueryEnvelope.this.envelope.debug)
        </td>
      </tr><tr>
        <td>
          440
        </td>
        <td>
          49539
        </td>
        <td>
          16877
          -
          16896
        </td>
        <td>
          Block
        </td>
        <td>
          scala.collection.generic.GenericCompanion.apply
        </td>
        <td>
          
        </td>
        <td style="background: #F0ADAD">
          scala.collection.Seq.apply[String](QueryEnvelope.this.envelope.debug)
        </td>
      </tr><tr>
        <td>
          441
        </td>
        <td>
          49548
        </td>
        <td>
          16916
          -
          17027
        </td>
        <td>
          Block
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td>
          
        </td>
        <td style="background: #F0ADAD">
          {
  val diff: Seq[org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope] = QueryEnvelope.this.envelope.minus(h);
  if (diff.isEmpty)
    scala.collection.Seq.apply[String](&quot;[empty]&quot;)
  else
    diff.map[String, Seq[String]](((x$8: org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope) =&gt; x$8.debug))(collection.this.Seq.canBuildFrom[String])
}
        </td>
      </tr><tr>
        <td>
          442
        </td>
        <td>
          49540
        </td>
        <td>
          16938
          -
          16955
        </td>
        <td>
          Apply
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope.minus
        </td>
        <td>
          
        </td>
        <td style="background: #F0ADAD">
          QueryEnvelope.this.envelope.minus(h)
        </td>
      </tr><tr>
        <td>
          443
        </td>
        <td>
          49541
        </td>
        <td>
          16968
          -
          16980
        </td>
        <td>
          Select
        </td>
        <td>
          scala.collection.SeqLike.isEmpty
        </td>
        <td>
          
        </td>
        <td style="background: #F0ADAD">
          diff.isEmpty
        </td>
      </tr><tr>
        <td>
          443
        </td>
        <td>
          49542
        </td>
        <td>
          16984
          -
          16998
        </td>
        <td>
          Apply
        </td>
        <td>
          scala.collection.generic.GenericCompanion.apply
        </td>
        <td>
          
        </td>
        <td style="background: #F0ADAD">
          scala.collection.Seq.apply[String](&quot;[empty]&quot;)
        </td>
      </tr><tr>
        <td>
          443
        </td>
        <td>
          49543
        </td>
        <td>
          16984
          -
          16998
        </td>
        <td>
          Block
        </td>
        <td>
          scala.collection.generic.GenericCompanion.apply
        </td>
        <td>
          
        </td>
        <td style="background: #F0ADAD">
          scala.collection.Seq.apply[String](&quot;[empty]&quot;)
        </td>
      </tr><tr>
        <td>
          443
        </td>
        <td>
          49544
        </td>
        <td>
          17017
          -
          17024
        </td>
        <td>
          Select
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope.debug
        </td>
        <td>
          
        </td>
        <td style="background: #F0ADAD">
          x$8.debug
        </td>
      </tr><tr>
        <td>
          443
        </td>
        <td>
          49545
        </td>
        <td>
          17016
          -
          17016
        </td>
        <td>
          TypeApply
        </td>
        <td>
          scala.collection.Seq.canBuildFrom
        </td>
        <td>
          
        </td>
        <td style="background: #F0ADAD">
          collection.this.Seq.canBuildFrom[String]
        </td>
      </tr><tr>
        <td>
          443
        </td>
        <td>
          49546
        </td>
        <td>
          17008
          -
          17025
        </td>
        <td>
          ApplyToImplicitArgs
        </td>
        <td>
          scala.collection.TraversableLike.map
        </td>
        <td>
          
        </td>
        <td style="background: #F0ADAD">
          diff.map[String, Seq[String]](((x$8: org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope) =&gt; x$8.debug))(collection.this.Seq.canBuildFrom[String])
        </td>
      </tr><tr>
        <td>
          443
        </td>
        <td>
          49547
        </td>
        <td>
          17008
          -
          17025
        </td>
        <td>
          Block
        </td>
        <td>
          scala.collection.TraversableLike.map
        </td>
        <td>
          
        </td>
        <td style="background: #F0ADAD">
          diff.map[String, Seq[String]](((x$8: org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope) =&gt; x$8.debug))(collection.this.Seq.canBuildFrom[String])
        </td>
      </tr><tr>
        <td>
          457
        </td>
        <td>
          49549
        </td>
        <td>
          17375
          -
          17379
        </td>
        <td>
          Select
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope.xmax
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          Envelope.this.xmax
        </td>
      </tr><tr>
        <td>
          457
        </td>
        <td>
          49550
        </td>
        <td>
          17391
          -
          17395
        </td>
        <td>
          Select
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope.ymax
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          Envelope.this.ymax
        </td>
      </tr><tr>
        <td>
          457
        </td>
        <td>
          49551
        </td>
        <td>
          17383
          -
          17395
        </td>
        <td>
          Apply
        </td>
        <td>
          scala.Double.&lt;=
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          Envelope.this.ymin.&lt;=(Envelope.this.ymax)
        </td>
      </tr><tr>
        <td>
          457
        </td>
        <td>
          49552
        </td>
        <td>
          17367
          -
          17395
        </td>
        <td>
          Apply
        </td>
        <td>
          scala.Boolean.&amp;&amp;
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          Envelope.this.xmin.&lt;=(Envelope.this.xmax).&amp;&amp;(Envelope.this.ymin.&lt;=(Envelope.this.ymax))
        </td>
      </tr><tr>
        <td>
          457
        </td>
        <td>
          49553
        </td>
        <td>
          17399
          -
          17423
        </td>
        <td>
          Literal
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td>
          
        </td>
        <td style="background: #F0ADAD">
          &quot;Envelope is inverted: [&quot;
        </td>
      </tr><tr>
        <td>
          457
        </td>
        <td>
          49554
        </td>
        <td>
          17427
          -
          17430
        </td>
        <td>
          Literal
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td>
          
        </td>
        <td style="background: #F0ADAD">
          &quot;, &quot;
        </td>
      </tr><tr>
        <td>
          457
        </td>
        <td>
          49555
        </td>
        <td>
          17434
          -
          17437
        </td>
        <td>
          Literal
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td>
          
        </td>
        <td style="background: #F0ADAD">
          &quot;, &quot;
        </td>
      </tr><tr>
        <td>
          457
        </td>
        <td>
          49556
        </td>
        <td>
          17441
          -
          17444
        </td>
        <td>
          Literal
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td>
          
        </td>
        <td style="background: #F0ADAD">
          &quot;, &quot;
        </td>
      </tr><tr>
        <td>
          457
        </td>
        <td>
          49557
        </td>
        <td>
          17448
          -
          17450
        </td>
        <td>
          Literal
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td>
          
        </td>
        <td style="background: #F0ADAD">
          &quot;]&quot;
        </td>
      </tr><tr>
        <td>
          457
        </td>
        <td>
          49558
        </td>
        <td>
          17423
          -
          17427
        </td>
        <td>
          Select
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope.xmin
        </td>
        <td>
          
        </td>
        <td style="background: #F0ADAD">
          Envelope.this.xmin
        </td>
      </tr><tr>
        <td>
          457
        </td>
        <td>
          49559
        </td>
        <td>
          17430
          -
          17434
        </td>
        <td>
          Select
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope.xmax
        </td>
        <td>
          
        </td>
        <td style="background: #F0ADAD">
          Envelope.this.xmax
        </td>
      </tr><tr>
        <td>
          457
        </td>
        <td>
          49560
        </td>
        <td>
          17437
          -
          17441
        </td>
        <td>
          Select
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope.ymin
        </td>
        <td>
          
        </td>
        <td style="background: #F0ADAD">
          Envelope.this.ymin
        </td>
      </tr><tr>
        <td>
          457
        </td>
        <td>
          49561
        </td>
        <td>
          17444
          -
          17448
        </td>
        <td>
          Select
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope.ymax
        </td>
        <td>
          
        </td>
        <td style="background: #F0ADAD">
          Envelope.this.ymax
        </td>
      </tr><tr>
        <td>
          457
        </td>
        <td>
          49562
        </td>
        <td>
          17397
          -
          17450
        </td>
        <td>
          Apply
        </td>
        <td>
          scala.StringContext.s
        </td>
        <td>
          
        </td>
        <td style="background: #F0ADAD">
          scala.StringContext.apply(&quot;Envelope is inverted: [&quot;, &quot;, &quot;, &quot;, &quot;, &quot;, &quot;, &quot;]&quot;).s(Envelope.this.xmin, Envelope.this.xmax, Envelope.this.ymin, Envelope.this.ymax)
        </td>
      </tr><tr>
        <td>
          457
        </td>
        <td>
          49563
        </td>
        <td>
          17359
          -
          17451
        </td>
        <td>
          Apply
        </td>
        <td>
          scala.Predef.require
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          scala.Predef.require(Envelope.this.xmin.&lt;=(Envelope.this.xmax).&amp;&amp;(Envelope.this.ymin.&lt;=(Envelope.this.ymax)), scala.StringContext.apply(&quot;Envelope is inverted: [&quot;, &quot;, &quot;, &quot;, &quot;, &quot;, &quot;, &quot;]&quot;).s(Envelope.this.xmin, Envelope.this.xmax, Envelope.this.ymin, Envelope.this.ymax))
        </td>
      </tr><tr>
        <td>
          469
        </td>
        <td>
          49564
        </td>
        <td>
          17739
          -
          17743
        </td>
        <td>
          Select
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope.xmin
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          Envelope.this.xmin
        </td>
      </tr><tr>
        <td>
          469
        </td>
        <td>
          49565
        </td>
        <td>
          17745
          -
          17755
        </td>
        <td>
          Select
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope.xmin
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          other.xmin
        </td>
      </tr><tr>
        <td>
          469
        </td>
        <td>
          49566
        </td>
        <td>
          17730
          -
          17756
        </td>
        <td>
          Apply
        </td>
        <td>
          scala.math.max
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          scala.math.`package`.max(Envelope.this.xmin, other.xmin)
        </td>
      </tr><tr>
        <td>
          470
        </td>
        <td>
          49567
        </td>
        <td>
          17784
          -
          17788
        </td>
        <td>
          Select
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope.xmax
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          Envelope.this.xmax
        </td>
      </tr><tr>
        <td>
          470
        </td>
        <td>
          49568
        </td>
        <td>
          17790
          -
          17800
        </td>
        <td>
          Select
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope.xmax
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          other.xmax
        </td>
      </tr><tr>
        <td>
          470
        </td>
        <td>
          49569
        </td>
        <td>
          17775
          -
          17801
        </td>
        <td>
          Apply
        </td>
        <td>
          scala.math.min
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          scala.math.`package`.min(Envelope.this.xmax, other.xmax)
        </td>
      </tr><tr>
        <td>
          471
        </td>
        <td>
          49570
        </td>
        <td>
          17812
          -
          17825
        </td>
        <td>
          Apply
        </td>
        <td>
          scala.Double.&gt;
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          ixmin.&gt;(ixmax)
        </td>
      </tr><tr>
        <td>
          471
        </td>
        <td>
          49571
        </td>
        <td>
          17829
          -
          17833
        </td>
        <td>
          Select
        </td>
        <td>
          scala.None
        </td>
        <td>
          
        </td>
        <td style="background: #F0ADAD">
          scala.None
        </td>
      </tr><tr>
        <td>
          471
        </td>
        <td>
          49572
        </td>
        <td>
          17829
          -
          17833
        </td>
        <td>
          Block
        </td>
        <td>
          scala.None
        </td>
        <td>
          
        </td>
        <td style="background: #F0ADAD">
          scala.None
        </td>
      </tr><tr>
        <td>
          471
        </td>
        <td>
          49585
        </td>
        <td>
          17841
          -
          18050
        </td>
        <td>
          Block
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          {
  val iymin: Double = scala.math.`package`.max(Envelope.this.ymin, other.ymin);
  val iymax: Double = scala.math.`package`.min(Envelope.this.ymax, other.ymax);
  if (iymin.&gt;(iymax))
    scala.None
  else
    scala.Some.apply[org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope](KNearestNeighborSearchProcess.this.Envelope.apply(ixmin, ixmax, iymin, iymax))
}
        </td>
      </tr><tr>
        <td>
          472
        </td>
        <td>
          49573
        </td>
        <td>
          17872
          -
          17876
        </td>
        <td>
          Select
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope.ymin
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          Envelope.this.ymin
        </td>
      </tr><tr>
        <td>
          472
        </td>
        <td>
          49574
        </td>
        <td>
          17878
          -
          17888
        </td>
        <td>
          Select
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope.ymin
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          other.ymin
        </td>
      </tr><tr>
        <td>
          472
        </td>
        <td>
          49575
        </td>
        <td>
          17863
          -
          17889
        </td>
        <td>
          Apply
        </td>
        <td>
          scala.math.max
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          scala.math.`package`.max(Envelope.this.ymin, other.ymin)
        </td>
      </tr><tr>
        <td>
          473
        </td>
        <td>
          49576
        </td>
        <td>
          17919
          -
          17923
        </td>
        <td>
          Select
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope.ymax
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          Envelope.this.ymax
        </td>
      </tr><tr>
        <td>
          473
        </td>
        <td>
          49577
        </td>
        <td>
          17925
          -
          17935
        </td>
        <td>
          Select
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope.ymax
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          other.ymax
        </td>
      </tr><tr>
        <td>
          473
        </td>
        <td>
          49578
        </td>
        <td>
          17910
          -
          17936
        </td>
        <td>
          Apply
        </td>
        <td>
          scala.math.min
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          scala.math.`package`.min(Envelope.this.ymax, other.ymax)
        </td>
      </tr><tr>
        <td>
          474
        </td>
        <td>
          49579
        </td>
        <td>
          17949
          -
          17962
        </td>
        <td>
          Apply
        </td>
        <td>
          scala.Double.&gt;
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          iymin.&gt;(iymax)
        </td>
      </tr><tr>
        <td>
          474
        </td>
        <td>
          49580
        </td>
        <td>
          17966
          -
          17970
        </td>
        <td>
          Select
        </td>
        <td>
          scala.None
        </td>
        <td>
          
        </td>
        <td style="background: #F0ADAD">
          scala.None
        </td>
      </tr><tr>
        <td>
          474
        </td>
        <td>
          49581
        </td>
        <td>
          17966
          -
          17970
        </td>
        <td>
          Block
        </td>
        <td>
          scala.None
        </td>
        <td>
          
        </td>
        <td style="background: #F0ADAD">
          scala.None
        </td>
      </tr><tr>
        <td>
          475
        </td>
        <td>
          49582
        </td>
        <td>
          17995
          -
          18031
        </td>
        <td>
          Apply
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope.apply
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          KNearestNeighborSearchProcess.this.Envelope.apply(ixmin, ixmax, iymin, iymax)
        </td>
      </tr><tr>
        <td>
          475
        </td>
        <td>
          49583
        </td>
        <td>
          17990
          -
          18032
        </td>
        <td>
          Apply
        </td>
        <td>
          scala.Some.apply
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          scala.Some.apply[org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope](KNearestNeighborSearchProcess.this.Envelope.apply(ixmin, ixmax, iymin, iymax))
        </td>
      </tr><tr>
        <td>
          475
        </td>
        <td>
          49584
        </td>
        <td>
          17990
          -
          18032
        </td>
        <td>
          Block
        </td>
        <td>
          scala.Some.apply
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          scala.Some.apply[org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope](KNearestNeighborSearchProcess.this.Envelope.apply(ixmin, ixmax, iymin, iymax))
        </td>
      </tr><tr>
        <td>
          487
        </td>
        <td>
          49586
        </td>
        <td>
          18242
          -
          18246
        </td>
        <td>
          Select
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope.xmax
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          Envelope.this.xmax
        </td>
      </tr><tr>
        <td>
          487
        </td>
        <td>
          49587
        </td>
        <td>
          18264
          -
          18268
        </td>
        <td>
          Select
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope.xmin
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          Envelope.this.xmin
        </td>
      </tr><tr>
        <td>
          487
        </td>
        <td>
          49588
        </td>
        <td>
          18250
          -
          18268
        </td>
        <td>
          Apply
        </td>
        <td>
          scala.Double.&gt;=
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          other.xmax.&gt;=(Envelope.this.xmin)
        </td>
      </tr><tr>
        <td>
          487
        </td>
        <td>
          49589
        </td>
        <td>
          18286
          -
          18290
        </td>
        <td>
          Select
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope.ymax
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          Envelope.this.ymax
        </td>
      </tr><tr>
        <td>
          487
        </td>
        <td>
          49590
        </td>
        <td>
          18272
          -
          18290
        </td>
        <td>
          Apply
        </td>
        <td>
          scala.Double.&lt;=
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          other.ymin.&lt;=(Envelope.this.ymax)
        </td>
      </tr><tr>
        <td>
          487
        </td>
        <td>
          49591
        </td>
        <td>
          18308
          -
          18312
        </td>
        <td>
          Select
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope.ymin
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          Envelope.this.ymin
        </td>
      </tr><tr>
        <td>
          487
        </td>
        <td>
          49592
        </td>
        <td>
          18294
          -
          18312
        </td>
        <td>
          Apply
        </td>
        <td>
          scala.Double.&gt;=
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          other.ymax.&gt;=(Envelope.this.ymin)
        </td>
      </tr><tr>
        <td>
          487
        </td>
        <td>
          49593
        </td>
        <td>
          18228
          -
          18312
        </td>
        <td>
          Apply
        </td>
        <td>
          scala.Boolean.&amp;&amp;
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          other.xmin.&lt;=(Envelope.this.xmax).&amp;&amp;(other.xmax.&gt;=(Envelope.this.xmin)).&amp;&amp;(other.ymin.&lt;=(Envelope.this.ymax)).&amp;&amp;(other.ymax.&gt;=(Envelope.this.ymin))
        </td>
      </tr><tr>
        <td>
          499
        </td>
        <td>
          49594
        </td>
        <td>
          18725
          -
          18743
        </td>
        <td>
          Select
        </td>
        <td>
          scala.Boolean.unary_!
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          Envelope.this.intersects(other).unary_!
        </td>
      </tr><tr>
        <td>
          499
        </td>
        <td>
          49595
        </td>
        <td>
          18747
          -
          18756
        </td>
        <td>
          Apply
        </td>
        <td>
          scala.collection.generic.GenericCompanion.apply
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          scala.collection.Seq.apply[org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope](this)
        </td>
      </tr><tr>
        <td>
          499
        </td>
        <td>
          49596
        </td>
        <td>
          18747
          -
          18756
        </td>
        <td>
          Block
        </td>
        <td>
          scala.collection.generic.GenericCompanion.apply
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          scala.collection.Seq.apply[org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope](this)
        </td>
      </tr><tr>
        <td>
          499
        </td>
        <td>
          49633
        </td>
        <td>
          18764
          -
          19586
        </td>
        <td>
          Block
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          {
  val builder: scala.collection.mutable.Builder[org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope,Seq[org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope]] = scala.collection.Seq.newBuilder[org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope];
  val sidemax: Double = if (other.ymax.&gt;=(Envelope.this.ymax))
    Envelope.this.ymax
  else
    {
      builder.+=({
        &lt;artifact&gt; val x$1: Double = other.ymax;
        &lt;artifact&gt; val x$2: Double = Envelope.this.copy$default$1;
        &lt;artifact&gt; val x$3: Double = Envelope.this.copy$default$2;
        &lt;artifact&gt; val x$4: Double = Envelope.this.copy$default$4;
        Envelope.this.copy(x$2, x$3, x$1, x$4)
      });
      other.ymax
    };
  val sidemin: Double = if (other.ymin.&lt;=(Envelope.this.ymin))
    Envelope.this.ymin
  else
    {
      builder.+=({
        &lt;artifact&gt; val x$5: Double = other.ymin;
        &lt;artifact&gt; val x$6: Double = Envelope.this.copy$default$1;
        &lt;artifact&gt; val x$7: Double = Envelope.this.copy$default$2;
        &lt;artifact&gt; val x$8: Double = Envelope.this.copy$default$3;
        Envelope.this.copy(x$6, x$7, x$8, x$5)
      });
      other.ymin
    };
  if (other.xmin.&gt;(Envelope.this.xmin))
    builder.+=({
      &lt;artifact&gt; val x$9: Double = other.xmin;
      &lt;artifact&gt; val x$10: Double = sidemin;
      &lt;artifact&gt; val x$11: Double = sidemax;
      &lt;artifact&gt; val x$12: Double = Envelope.this.copy$default$1;
      Envelope.this.copy(x$12, x$9, x$10, x$11)
    })
  else
    ();
  if (other.xmax.&lt;(Envelope.this.xmax))
    builder.+=({
      &lt;artifact&gt; val x$13: Double = other.xmax;
      &lt;artifact&gt; val x$14: Double = sidemin;
      &lt;artifact&gt; val x$15: Double = sidemax;
      &lt;artifact&gt; val x$16: Double = Envelope.this.copy$default$2;
      Envelope.this.copy(x$13, x$16, x$14, x$15)
    })
  else
    ();
  builder.result()
}
        </td>
      </tr><tr>
        <td>
          500
        </td>
        <td>
          49597
        </td>
        <td>
          18788
          -
          18812
        </td>
        <td>
          TypeApply
        </td>
        <td>
          scala.collection.Seq.newBuilder
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          scala.collection.Seq.newBuilder[org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope]
        </td>
      </tr><tr>
        <td>
          502
        </td>
        <td>
          49598
        </td>
        <td>
          18940
          -
          18944
        </td>
        <td>
          Select
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope.ymax
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          Envelope.this.ymax
        </td>
      </tr><tr>
        <td>
          502
        </td>
        <td>
          49599
        </td>
        <td>
          18926
          -
          18944
        </td>
        <td>
          Apply
        </td>
        <td>
          scala.Double.&gt;=
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          other.ymax.&gt;=(Envelope.this.ymax)
        </td>
      </tr><tr>
        <td>
          502
        </td>
        <td>
          49600
        </td>
        <td>
          18948
          -
          18952
        </td>
        <td>
          Select
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope.ymax
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          Envelope.this.ymax
        </td>
      </tr><tr>
        <td>
          502
        </td>
        <td>
          49601
        </td>
        <td>
          18948
          -
          18952
        </td>
        <td>
          Block
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope.ymax
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          Envelope.this.ymax
        </td>
      </tr><tr>
        <td>
          502
        </td>
        <td>
          49606
        </td>
        <td>
          18960
          -
          19037
        </td>
        <td>
          Block
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          {
  builder.+=({
    &lt;artifact&gt; val x$1: Double = other.ymax;
    &lt;artifact&gt; val x$2: Double = Envelope.this.copy$default$1;
    &lt;artifact&gt; val x$3: Double = Envelope.this.copy$default$2;
    &lt;artifact&gt; val x$4: Double = Envelope.this.copy$default$4;
    Envelope.this.copy(x$2, x$3, x$1, x$4)
  });
  other.ymax
}
        </td>
      </tr><tr>
        <td>
          503
        </td>
        <td>
          49602
        </td>
        <td>
          18995
          -
          19005
        </td>
        <td>
          Select
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope.ymax
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          other.ymax
        </td>
      </tr><tr>
        <td>
          503
        </td>
        <td>
          49603
        </td>
        <td>
          18983
          -
          19006
        </td>
        <td>
          Apply
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope.copy
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          Envelope.this.copy(x$2, x$3, x$1, x$4)
        </td>
      </tr><tr>
        <td>
          503
        </td>
        <td>
          49604
        </td>
        <td>
          18972
          -
          19006
        </td>
        <td>
          Apply
        </td>
        <td>
          scala.collection.mutable.Builder.+=
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          builder.+=({
  &lt;artifact&gt; val x$1: Double = other.ymax;
  &lt;artifact&gt; val x$2: Double = Envelope.this.copy$default$1;
  &lt;artifact&gt; val x$3: Double = Envelope.this.copy$default$2;
  &lt;artifact&gt; val x$4: Double = Envelope.this.copy$default$4;
  Envelope.this.copy(x$2, x$3, x$1, x$4)
})
        </td>
      </tr><tr>
        <td>
          504
        </td>
        <td>
          49605
        </td>
        <td>
          19017
          -
          19027
        </td>
        <td>
          Select
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope.ymax
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          other.ymax
        </td>
      </tr><tr>
        <td>
          507
        </td>
        <td>
          49607
        </td>
        <td>
          19168
          -
          19172
        </td>
        <td>
          Select
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope.ymin
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          Envelope.this.ymin
        </td>
      </tr><tr>
        <td>
          507
        </td>
        <td>
          49608
        </td>
        <td>
          19154
          -
          19172
        </td>
        <td>
          Apply
        </td>
        <td>
          scala.Double.&lt;=
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          other.ymin.&lt;=(Envelope.this.ymin)
        </td>
      </tr><tr>
        <td>
          507
        </td>
        <td>
          49609
        </td>
        <td>
          19176
          -
          19180
        </td>
        <td>
          Select
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope.ymin
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          Envelope.this.ymin
        </td>
      </tr><tr>
        <td>
          507
        </td>
        <td>
          49610
        </td>
        <td>
          19176
          -
          19180
        </td>
        <td>
          Block
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope.ymin
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          Envelope.this.ymin
        </td>
      </tr><tr>
        <td>
          507
        </td>
        <td>
          49615
        </td>
        <td>
          19188
          -
          19265
        </td>
        <td>
          Block
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          {
  builder.+=({
    &lt;artifact&gt; val x$5: Double = other.ymin;
    &lt;artifact&gt; val x$6: Double = Envelope.this.copy$default$1;
    &lt;artifact&gt; val x$7: Double = Envelope.this.copy$default$2;
    &lt;artifact&gt; val x$8: Double = Envelope.this.copy$default$3;
    Envelope.this.copy(x$6, x$7, x$8, x$5)
  });
  other.ymin
}
        </td>
      </tr><tr>
        <td>
          508
        </td>
        <td>
          49611
        </td>
        <td>
          19223
          -
          19233
        </td>
        <td>
          Select
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope.ymin
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          other.ymin
        </td>
      </tr><tr>
        <td>
          508
        </td>
        <td>
          49612
        </td>
        <td>
          19211
          -
          19234
        </td>
        <td>
          Apply
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope.copy
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          Envelope.this.copy(x$6, x$7, x$8, x$5)
        </td>
      </tr><tr>
        <td>
          508
        </td>
        <td>
          49613
        </td>
        <td>
          19200
          -
          19234
        </td>
        <td>
          Apply
        </td>
        <td>
          scala.collection.mutable.Builder.+=
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          builder.+=({
  &lt;artifact&gt; val x$5: Double = other.ymin;
  &lt;artifact&gt; val x$6: Double = Envelope.this.copy$default$1;
  &lt;artifact&gt; val x$7: Double = Envelope.this.copy$default$2;
  &lt;artifact&gt; val x$8: Double = Envelope.this.copy$default$3;
  Envelope.this.copy(x$6, x$7, x$8, x$5)
})
        </td>
      </tr><tr>
        <td>
          509
        </td>
        <td>
          49614
        </td>
        <td>
          19245
          -
          19255
        </td>
        <td>
          Select
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope.ymin
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          other.ymin
        </td>
      </tr><tr>
        <td>
          512
        </td>
        <td>
          49616
        </td>
        <td>
          19341
          -
          19345
        </td>
        <td>
          Select
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope.xmin
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          Envelope.this.xmin
        </td>
      </tr><tr>
        <td>
          512
        </td>
        <td>
          49617
        </td>
        <td>
          19328
          -
          19345
        </td>
        <td>
          Apply
        </td>
        <td>
          scala.Double.&gt;
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          other.xmin.&gt;(Envelope.this.xmin)
        </td>
      </tr><tr>
        <td>
          512
        </td>
        <td>
          49622
        </td>
        <td>
          19324
          -
          19324
        </td>
        <td>
          Literal
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          ()
        </td>
      </tr><tr>
        <td>
          512
        </td>
        <td>
          49623
        </td>
        <td>
          19324
          -
          19324
        </td>
        <td>
          Block
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          ()
        </td>
      </tr><tr>
        <td>
          513
        </td>
        <td>
          49618
        </td>
        <td>
          19382
          -
          19392
        </td>
        <td>
          Select
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope.xmin
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          other.xmin
        </td>
      </tr><tr>
        <td>
          513
        </td>
        <td>
          49619
        </td>
        <td>
          19370
          -
          19425
        </td>
        <td>
          Apply
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope.copy
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          Envelope.this.copy(x$12, x$9, x$10, x$11)
        </td>
      </tr><tr>
        <td>
          513
        </td>
        <td>
          49620
        </td>
        <td>
          19359
          -
          19425
        </td>
        <td>
          Apply
        </td>
        <td>
          scala.collection.mutable.Builder.+=
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          builder.+=({
  &lt;artifact&gt; val x$9: Double = other.xmin;
  &lt;artifact&gt; val x$10: Double = sidemin;
  &lt;artifact&gt; val x$11: Double = sidemax;
  &lt;artifact&gt; val x$12: Double = Envelope.this.copy$default$1;
  Envelope.this.copy(x$12, x$9, x$10, x$11)
})
        </td>
      </tr><tr>
        <td>
          513
        </td>
        <td>
          49621
        </td>
        <td>
          19359
          -
          19425
        </td>
        <td>
          Block
        </td>
        <td>
          scala.collection.mutable.Builder.+=
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          builder.+=({
  &lt;artifact&gt; val x$9: Double = other.xmin;
  &lt;artifact&gt; val x$10: Double = sidemin;
  &lt;artifact&gt; val x$11: Double = sidemax;
  &lt;artifact&gt; val x$12: Double = Envelope.this.copy$default$1;
  Envelope.this.copy(x$12, x$9, x$10, x$11)
})
        </td>
      </tr><tr>
        <td>
          515
        </td>
        <td>
          49624
        </td>
        <td>
          19461
          -
          19465
        </td>
        <td>
          Select
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope.xmax
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          Envelope.this.xmax
        </td>
      </tr><tr>
        <td>
          515
        </td>
        <td>
          49625
        </td>
        <td>
          19448
          -
          19465
        </td>
        <td>
          Apply
        </td>
        <td>
          scala.Double.&lt;
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          other.xmax.&lt;(Envelope.this.xmax)
        </td>
      </tr><tr>
        <td>
          515
        </td>
        <td>
          49630
        </td>
        <td>
          19444
          -
          19444
        </td>
        <td>
          Literal
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          ()
        </td>
      </tr><tr>
        <td>
          515
        </td>
        <td>
          49631
        </td>
        <td>
          19444
          -
          19444
        </td>
        <td>
          Block
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          ()
        </td>
      </tr><tr>
        <td>
          516
        </td>
        <td>
          49626
        </td>
        <td>
          19502
          -
          19512
        </td>
        <td>
          Select
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope.xmax
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          other.xmax
        </td>
      </tr><tr>
        <td>
          516
        </td>
        <td>
          49627
        </td>
        <td>
          19490
          -
          19545
        </td>
        <td>
          Apply
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope.copy
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          Envelope.this.copy(x$13, x$16, x$14, x$15)
        </td>
      </tr><tr>
        <td>
          516
        </td>
        <td>
          49628
        </td>
        <td>
          19479
          -
          19545
        </td>
        <td>
          Apply
        </td>
        <td>
          scala.collection.mutable.Builder.+=
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          builder.+=({
  &lt;artifact&gt; val x$13: Double = other.xmax;
  &lt;artifact&gt; val x$14: Double = sidemin;
  &lt;artifact&gt; val x$15: Double = sidemax;
  &lt;artifact&gt; val x$16: Double = Envelope.this.copy$default$2;
  Envelope.this.copy(x$13, x$16, x$14, x$15)
})
        </td>
      </tr><tr>
        <td>
          516
        </td>
        <td>
          49629
        </td>
        <td>
          19479
          -
          19545
        </td>
        <td>
          Block
        </td>
        <td>
          scala.collection.mutable.Builder.+=
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          builder.+=({
  &lt;artifact&gt; val x$13: Double = other.xmax;
  &lt;artifact&gt; val x$14: Double = sidemin;
  &lt;artifact&gt; val x$15: Double = sidemax;
  &lt;artifact&gt; val x$16: Double = Envelope.this.copy$default$2;
  Envelope.this.copy(x$13, x$16, x$14, x$15)
})
        </td>
      </tr><tr>
        <td>
          518
        </td>
        <td>
          49632
        </td>
        <td>
          19564
          -
          19578
        </td>
        <td>
          Apply
        </td>
        <td>
          scala.collection.mutable.Builder.result
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          builder.result()
        </td>
      </tr><tr>
        <td>
          531
        </td>
        <td>
          49634
        </td>
        <td>
          19960
          -
          19971
        </td>
        <td>
          Apply
        </td>
        <td>
          scala.Double.&lt;
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          Envelope.this.ymin.&lt;(-90.0)
        </td>
      </tr><tr>
        <td>
          532
        </td>
        <td>
          49635
        </td>
        <td>
          19996
          -
          20001
        </td>
        <td>
          Literal
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          -180.0
        </td>
      </tr><tr>
        <td>
          532
        </td>
        <td>
          49636
        </td>
        <td>
          20003
          -
          20007
        </td>
        <td>
          Literal
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          180.0
        </td>
      </tr><tr>
        <td>
          532
        </td>
        <td>
          49637
        </td>
        <td>
          20009
          -
          20012
        </td>
        <td>
          Literal
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          -90.0
        </td>
      </tr><tr>
        <td>
          532
        </td>
        <td>
          49638
        </td>
        <td>
          20023
          -
          20027
        </td>
        <td>
          Select
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope.ymax
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          Envelope.this.ymax
        </td>
      </tr><tr>
        <td>
          532
        </td>
        <td>
          49639
        </td>
        <td>
          20029
          -
          20032
        </td>
        <td>
          Literal
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          90.0
        </td>
      </tr><tr>
        <td>
          532
        </td>
        <td>
          49640
        </td>
        <td>
          20014
          -
          20033
        </td>
        <td>
          Apply
        </td>
        <td>
          scala.math.min
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          scala.math.`package`.min(Envelope.this.ymax, 90.0)
        </td>
      </tr><tr>
        <td>
          532
        </td>
        <td>
          49641
        </td>
        <td>
          19987
          -
          20034
        </td>
        <td>
          Apply
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope.apply
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          KNearestNeighborSearchProcess.this.Envelope.apply(-180.0, 180.0, -90.0, scala.math.`package`.min(Envelope.this.ymax, 90.0))
        </td>
      </tr><tr>
        <td>
          532
        </td>
        <td>
          49642
        </td>
        <td>
          19983
          -
          20035
        </td>
        <td>
          Apply
        </td>
        <td>
          scala.collection.generic.GenericCompanion.apply
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          scala.collection.Seq.apply[org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope](KNearestNeighborSearchProcess.this.Envelope.apply(-180.0, 180.0, -90.0, scala.math.`package`.min(Envelope.this.ymax, 90.0)))
        </td>
      </tr><tr>
        <td>
          532
        </td>
        <td>
          49643
        </td>
        <td>
          19983
          -
          20035
        </td>
        <td>
          Block
        </td>
        <td>
          scala.collection.generic.GenericCompanion.apply
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          scala.collection.Seq.apply[org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope](KNearestNeighborSearchProcess.this.Envelope.apply(-180.0, 180.0, -90.0, scala.math.`package`.min(Envelope.this.ymax, 90.0)))
        </td>
      </tr><tr>
        <td>
          533
        </td>
        <td>
          49644
        </td>
        <td>
          20053
          -
          20063
        </td>
        <td>
          Apply
        </td>
        <td>
          scala.Double.&gt;
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          Envelope.this.ymax.&gt;(90.0)
        </td>
      </tr><tr>
        <td>
          533
        </td>
        <td>
          49693
        </td>
        <td>
          20049
          -
          20745
        </td>
        <td>
          If
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          if (Envelope.this.ymax.&gt;(90.0))
  scala.collection.Seq.apply[org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope](KNearestNeighborSearchProcess.this.Envelope.apply(-180.0, 180.0, scala.math.`package`.max(Envelope.this.ymin, -90.0), 90.0))
else
  if (Envelope.this.width.&gt;=(360.0))
    scala.collection.Seq.apply[org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope](Envelope.this.copy(-180.0, 180.0, Envelope.this.copy$default$3, Envelope.this.copy$default$4))
  else
    if (Envelope.this.xmin.&lt;(-180.0))
      Envelope.this.intersection(KNearestNeighborSearchProcess.this.WholeWorldEnvelope) match {
        case scala.None =&gt; scala.collection.Seq.apply[org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope](Envelope.this.copy(Envelope.this.xmin.+(360.0), Envelope.this.xmax.+(360.0), Envelope.this.copy$default$3, Envelope.this.copy$default$4))
        case (value: org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope)Some[org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope]((trimmed @ _)) =&gt; scala.collection.Seq.apply[org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope](trimmed, Envelope.this.copy(Envelope.this.xmin.+(360.0), 180.0, Envelope.this.copy$default$3, Envelope.this.copy$default$4))
      }
    else
      if (Envelope.this.xmax.&gt;(180.0))
        Envelope.this.intersection(KNearestNeighborSearchProcess.this.WholeWorldEnvelope) match {
          case scala.None =&gt; scala.collection.Seq.apply[org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope](Envelope.this.copy(Envelope.this.xmin.-(360.0), Envelope.this.xmax.-(360.0), Envelope.this.copy$default$3, Envelope.this.copy$default$4))
          case (value: org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope)Some[org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope]((trimmed @ _)) =&gt; scala.collection.Seq.apply[org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope](trimmed, Envelope.this.copy(-180.0, Envelope.this.xmax.-(360.0), Envelope.this.copy$default$3, Envelope.this.copy$default$4))
        }
      else
        scala.collection.Seq.apply[org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope](this)
        </td>
      </tr><tr>
        <td>
          534
        </td>
        <td>
          49645
        </td>
        <td>
          20088
          -
          20093
        </td>
        <td>
          Literal
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          -180.0
        </td>
      </tr><tr>
        <td>
          534
        </td>
        <td>
          49646
        </td>
        <td>
          20095
          -
          20099
        </td>
        <td>
          Literal
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          180.0
        </td>
      </tr><tr>
        <td>
          534
        </td>
        <td>
          49647
        </td>
        <td>
          20110
          -
          20114
        </td>
        <td>
          Select
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope.ymin
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          Envelope.this.ymin
        </td>
      </tr><tr>
        <td>
          534
        </td>
        <td>
          49648
        </td>
        <td>
          20116
          -
          20119
        </td>
        <td>
          Literal
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          -90.0
        </td>
      </tr><tr>
        <td>
          534
        </td>
        <td>
          49649
        </td>
        <td>
          20101
          -
          20120
        </td>
        <td>
          Apply
        </td>
        <td>
          scala.math.max
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          scala.math.`package`.max(Envelope.this.ymin, -90.0)
        </td>
      </tr><tr>
        <td>
          534
        </td>
        <td>
          49650
        </td>
        <td>
          20122
          -
          20125
        </td>
        <td>
          Literal
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          90.0
        </td>
      </tr><tr>
        <td>
          534
        </td>
        <td>
          49651
        </td>
        <td>
          20079
          -
          20126
        </td>
        <td>
          Apply
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope.apply
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          KNearestNeighborSearchProcess.this.Envelope.apply(-180.0, 180.0, scala.math.`package`.max(Envelope.this.ymin, -90.0), 90.0)
        </td>
      </tr><tr>
        <td>
          534
        </td>
        <td>
          49652
        </td>
        <td>
          20075
          -
          20127
        </td>
        <td>
          Apply
        </td>
        <td>
          scala.collection.generic.GenericCompanion.apply
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          scala.collection.Seq.apply[org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope](KNearestNeighborSearchProcess.this.Envelope.apply(-180.0, 180.0, scala.math.`package`.max(Envelope.this.ymin, -90.0), 90.0))
        </td>
      </tr><tr>
        <td>
          534
        </td>
        <td>
          49653
        </td>
        <td>
          20075
          -
          20127
        </td>
        <td>
          Block
        </td>
        <td>
          scala.collection.generic.GenericCompanion.apply
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          scala.collection.Seq.apply[org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope](KNearestNeighborSearchProcess.this.Envelope.apply(-180.0, 180.0, scala.math.`package`.max(Envelope.this.ymin, -90.0), 90.0))
        </td>
      </tr><tr>
        <td>
          535
        </td>
        <td>
          49654
        </td>
        <td>
          20145
          -
          20158
        </td>
        <td>
          Apply
        </td>
        <td>
          scala.Double.&gt;=
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          Envelope.this.width.&gt;=(360.0)
        </td>
      </tr><tr>
        <td>
          535
        </td>
        <td>
          49692
        </td>
        <td>
          20141
          -
          20745
        </td>
        <td>
          If
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          if (Envelope.this.width.&gt;=(360.0))
  scala.collection.Seq.apply[org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope](Envelope.this.copy(-180.0, 180.0, Envelope.this.copy$default$3, Envelope.this.copy$default$4))
else
  if (Envelope.this.xmin.&lt;(-180.0))
    Envelope.this.intersection(KNearestNeighborSearchProcess.this.WholeWorldEnvelope) match {
      case scala.None =&gt; scala.collection.Seq.apply[org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope](Envelope.this.copy(Envelope.this.xmin.+(360.0), Envelope.this.xmax.+(360.0), Envelope.this.copy$default$3, Envelope.this.copy$default$4))
      case (value: org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope)Some[org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope]((trimmed @ _)) =&gt; scala.collection.Seq.apply[org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope](trimmed, Envelope.this.copy(Envelope.this.xmin.+(360.0), 180.0, Envelope.this.copy$default$3, Envelope.this.copy$default$4))
    }
  else
    if (Envelope.this.xmax.&gt;(180.0))
      Envelope.this.intersection(KNearestNeighborSearchProcess.this.WholeWorldEnvelope) match {
        case scala.None =&gt; scala.collection.Seq.apply[org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope](Envelope.this.copy(Envelope.this.xmin.-(360.0), Envelope.this.xmax.-(360.0), Envelope.this.copy$default$3, Envelope.this.copy$default$4))
        case (value: org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope)Some[org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope]((trimmed @ _)) =&gt; scala.collection.Seq.apply[org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope](trimmed, Envelope.this.copy(-180.0, Envelope.this.xmax.-(360.0), Envelope.this.copy$default$3, Envelope.this.copy$default$4))
      }
    else
      scala.collection.Seq.apply[org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope](this)
        </td>
      </tr><tr>
        <td>
          536
        </td>
        <td>
          49655
        </td>
        <td>
          20186
          -
          20191
        </td>
        <td>
          Literal
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          -180.0
        </td>
      </tr><tr>
        <td>
          536
        </td>
        <td>
          49656
        </td>
        <td>
          20200
          -
          20204
        </td>
        <td>
          Literal
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          180.0
        </td>
      </tr><tr>
        <td>
          536
        </td>
        <td>
          49657
        </td>
        <td>
          20174
          -
          20205
        </td>
        <td>
          Apply
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope.copy
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          Envelope.this.copy(-180.0, 180.0, Envelope.this.copy$default$3, Envelope.this.copy$default$4)
        </td>
      </tr><tr>
        <td>
          536
        </td>
        <td>
          49658
        </td>
        <td>
          20170
          -
          20206
        </td>
        <td>
          Apply
        </td>
        <td>
          scala.collection.generic.GenericCompanion.apply
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          scala.collection.Seq.apply[org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope](Envelope.this.copy(-180.0, 180.0, Envelope.this.copy$default$3, Envelope.this.copy$default$4))
        </td>
      </tr><tr>
        <td>
          536
        </td>
        <td>
          49659
        </td>
        <td>
          20170
          -
          20206
        </td>
        <td>
          Block
        </td>
        <td>
          scala.collection.generic.GenericCompanion.apply
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          scala.collection.Seq.apply[org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope](Envelope.this.copy(-180.0, 180.0, Envelope.this.copy$default$3, Envelope.this.copy$default$4))
        </td>
      </tr><tr>
        <td>
          537
        </td>
        <td>
          49660
        </td>
        <td>
          20224
          -
          20236
        </td>
        <td>
          Apply
        </td>
        <td>
          scala.Double.&lt;
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          Envelope.this.xmin.&lt;(-180.0)
        </td>
      </tr><tr>
        <td>
          537
        </td>
        <td>
          49691
        </td>
        <td>
          20220
          -
          20745
        </td>
        <td>
          If
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          if (Envelope.this.xmin.&lt;(-180.0))
  Envelope.this.intersection(KNearestNeighborSearchProcess.this.WholeWorldEnvelope) match {
    case scala.None =&gt; scala.collection.Seq.apply[org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope](Envelope.this.copy(Envelope.this.xmin.+(360.0), Envelope.this.xmax.+(360.0), Envelope.this.copy$default$3, Envelope.this.copy$default$4))
    case (value: org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope)Some[org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope]((trimmed @ _)) =&gt; scala.collection.Seq.apply[org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope](trimmed, Envelope.this.copy(Envelope.this.xmin.+(360.0), 180.0, Envelope.this.copy$default$3, Envelope.this.copy$default$4))
  }
else
  if (Envelope.this.xmax.&gt;(180.0))
    Envelope.this.intersection(KNearestNeighborSearchProcess.this.WholeWorldEnvelope) match {
      case scala.None =&gt; scala.collection.Seq.apply[org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope](Envelope.this.copy(Envelope.this.xmin.-(360.0), Envelope.this.xmax.-(360.0), Envelope.this.copy$default$3, Envelope.this.copy$default$4))
      case (value: org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope)Some[org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope]((trimmed @ _)) =&gt; scala.collection.Seq.apply[org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope](trimmed, Envelope.this.copy(-180.0, Envelope.this.xmax.-(360.0), Envelope.this.copy$default$3, Envelope.this.copy$default$4))
    }
  else
    scala.collection.Seq.apply[org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope](this)
        </td>
      </tr><tr>
        <td>
          538
        </td>
        <td>
          49661
        </td>
        <td>
          20261
          -
          20279
        </td>
        <td>
          Select
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.WholeWorldEnvelope
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          KNearestNeighborSearchProcess.this.WholeWorldEnvelope
        </td>
      </tr><tr>
        <td>
          538
        </td>
        <td>
          49662
        </td>
        <td>
          20248
          -
          20280
        </td>
        <td>
          Apply
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope.intersection
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          Envelope.this.intersection(KNearestNeighborSearchProcess.this.WholeWorldEnvelope)
        </td>
      </tr><tr>
        <td>
          538
        </td>
        <td>
          49673
        </td>
        <td>
          20248
          -
          20455
        </td>
        <td>
          Match
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          Envelope.this.intersection(KNearestNeighborSearchProcess.this.WholeWorldEnvelope) match {
  case scala.None =&gt; scala.collection.Seq.apply[org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope](Envelope.this.copy(Envelope.this.xmin.+(360.0), Envelope.this.xmax.+(360.0), Envelope.this.copy$default$3, Envelope.this.copy$default$4))
  case (value: org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope)Some[org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope]((trimmed @ _)) =&gt; scala.collection.Seq.apply[org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope](trimmed, Envelope.this.copy(Envelope.this.xmin.+(360.0), 180.0, Envelope.this.copy$default$3, Envelope.this.copy$default$4))
}
        </td>
      </tr><tr>
        <td>
          539
        </td>
        <td>
          49663
        </td>
        <td>
          20328
          -
          20339
        </td>
        <td>
          Apply
        </td>
        <td>
          scala.Double.+
        </td>
        <td>
          
        </td>
        <td style="background: #F0ADAD">
          Envelope.this.xmin.+(360.0)
        </td>
      </tr><tr>
        <td>
          539
        </td>
        <td>
          49664
        </td>
        <td>
          20348
          -
          20359
        </td>
        <td>
          Apply
        </td>
        <td>
          scala.Double.+
        </td>
        <td>
          
        </td>
        <td style="background: #F0ADAD">
          Envelope.this.xmax.+(360.0)
        </td>
      </tr><tr>
        <td>
          539
        </td>
        <td>
          49665
        </td>
        <td>
          20316
          -
          20360
        </td>
        <td>
          Apply
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope.copy
        </td>
        <td>
          
        </td>
        <td style="background: #F0ADAD">
          Envelope.this.copy(Envelope.this.xmin.+(360.0), Envelope.this.xmax.+(360.0), Envelope.this.copy$default$3, Envelope.this.copy$default$4)
        </td>
      </tr><tr>
        <td>
          539
        </td>
        <td>
          49666
        </td>
        <td>
          20312
          -
          20361
        </td>
        <td>
          Apply
        </td>
        <td>
          scala.collection.generic.GenericCompanion.apply
        </td>
        <td>
          
        </td>
        <td style="background: #F0ADAD">
          scala.collection.Seq.apply[org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope](Envelope.this.copy(Envelope.this.xmin.+(360.0), Envelope.this.xmax.+(360.0), Envelope.this.copy$default$3, Envelope.this.copy$default$4))
        </td>
      </tr><tr>
        <td>
          539
        </td>
        <td>
          49667
        </td>
        <td>
          20312
          -
          20361
        </td>
        <td>
          Block
        </td>
        <td>
          scala.collection.generic.GenericCompanion.apply
        </td>
        <td>
          
        </td>
        <td style="background: #F0ADAD">
          scala.collection.Seq.apply[org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope](Envelope.this.copy(Envelope.this.xmin.+(360.0), Envelope.this.xmax.+(360.0), Envelope.this.copy$default$3, Envelope.this.copy$default$4))
        </td>
      </tr><tr>
        <td>
          540
        </td>
        <td>
          49668
        </td>
        <td>
          20419
          -
          20430
        </td>
        <td>
          Apply
        </td>
        <td>
          scala.Double.+
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          Envelope.this.xmin.+(360.0)
        </td>
      </tr><tr>
        <td>
          540
        </td>
        <td>
          49669
        </td>
        <td>
          20439
          -
          20443
        </td>
        <td>
          Literal
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          180.0
        </td>
      </tr><tr>
        <td>
          540
        </td>
        <td>
          49670
        </td>
        <td>
          20407
          -
          20444
        </td>
        <td>
          Apply
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope.copy
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          Envelope.this.copy(Envelope.this.xmin.+(360.0), 180.0, Envelope.this.copy$default$3, Envelope.this.copy$default$4)
        </td>
      </tr><tr>
        <td>
          540
        </td>
        <td>
          49671
        </td>
        <td>
          20394
          -
          20445
        </td>
        <td>
          Apply
        </td>
        <td>
          scala.collection.generic.GenericCompanion.apply
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          scala.collection.Seq.apply[org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope](trimmed, Envelope.this.copy(Envelope.this.xmin.+(360.0), 180.0, Envelope.this.copy$default$3, Envelope.this.copy$default$4))
        </td>
      </tr><tr>
        <td>
          540
        </td>
        <td>
          49672
        </td>
        <td>
          20394
          -
          20445
        </td>
        <td>
          Block
        </td>
        <td>
          scala.collection.generic.GenericCompanion.apply
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          scala.collection.Seq.apply[org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope](trimmed, Envelope.this.copy(Envelope.this.xmin.+(360.0), 180.0, Envelope.this.copy$default$3, Envelope.this.copy$default$4))
        </td>
      </tr><tr>
        <td>
          542
        </td>
        <td>
          49674
        </td>
        <td>
          20473
          -
          20484
        </td>
        <td>
          Apply
        </td>
        <td>
          scala.Double.&gt;
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          Envelope.this.xmax.&gt;(180.0)
        </td>
      </tr><tr>
        <td>
          542
        </td>
        <td>
          49690
        </td>
        <td>
          20469
          -
          20745
        </td>
        <td>
          If
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          if (Envelope.this.xmax.&gt;(180.0))
  Envelope.this.intersection(KNearestNeighborSearchProcess.this.WholeWorldEnvelope) match {
    case scala.None =&gt; scala.collection.Seq.apply[org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope](Envelope.this.copy(Envelope.this.xmin.-(360.0), Envelope.this.xmax.-(360.0), Envelope.this.copy$default$3, Envelope.this.copy$default$4))
    case (value: org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope)Some[org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope]((trimmed @ _)) =&gt; scala.collection.Seq.apply[org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope](trimmed, Envelope.this.copy(-180.0, Envelope.this.xmax.-(360.0), Envelope.this.copy$default$3, Envelope.this.copy$default$4))
  }
else
  scala.collection.Seq.apply[org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope](this)
        </td>
      </tr><tr>
        <td>
          543
        </td>
        <td>
          49675
        </td>
        <td>
          20509
          -
          20527
        </td>
        <td>
          Select
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.WholeWorldEnvelope
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          KNearestNeighborSearchProcess.this.WholeWorldEnvelope
        </td>
      </tr><tr>
        <td>
          543
        </td>
        <td>
          49676
        </td>
        <td>
          20496
          -
          20528
        </td>
        <td>
          Apply
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope.intersection
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          Envelope.this.intersection(KNearestNeighborSearchProcess.this.WholeWorldEnvelope)
        </td>
      </tr><tr>
        <td>
          543
        </td>
        <td>
          49687
        </td>
        <td>
          20496
          -
          20704
        </td>
        <td>
          Match
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          Envelope.this.intersection(KNearestNeighborSearchProcess.this.WholeWorldEnvelope) match {
  case scala.None =&gt; scala.collection.Seq.apply[org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope](Envelope.this.copy(Envelope.this.xmin.-(360.0), Envelope.this.xmax.-(360.0), Envelope.this.copy$default$3, Envelope.this.copy$default$4))
  case (value: org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope)Some[org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope]((trimmed @ _)) =&gt; scala.collection.Seq.apply[org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope](trimmed, Envelope.this.copy(-180.0, Envelope.this.xmax.-(360.0), Envelope.this.copy$default$3, Envelope.this.copy$default$4))
}
        </td>
      </tr><tr>
        <td>
          544
        </td>
        <td>
          49677
        </td>
        <td>
          20576
          -
          20587
        </td>
        <td>
          Apply
        </td>
        <td>
          scala.Double.-
        </td>
        <td>
          
        </td>
        <td style="background: #F0ADAD">
          Envelope.this.xmin.-(360.0)
        </td>
      </tr><tr>
        <td>
          544
        </td>
        <td>
          49678
        </td>
        <td>
          20596
          -
          20607
        </td>
        <td>
          Apply
        </td>
        <td>
          scala.Double.-
        </td>
        <td>
          
        </td>
        <td style="background: #F0ADAD">
          Envelope.this.xmax.-(360.0)
        </td>
      </tr><tr>
        <td>
          544
        </td>
        <td>
          49679
        </td>
        <td>
          20564
          -
          20608
        </td>
        <td>
          Apply
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope.copy
        </td>
        <td>
          
        </td>
        <td style="background: #F0ADAD">
          Envelope.this.copy(Envelope.this.xmin.-(360.0), Envelope.this.xmax.-(360.0), Envelope.this.copy$default$3, Envelope.this.copy$default$4)
        </td>
      </tr><tr>
        <td>
          544
        </td>
        <td>
          49680
        </td>
        <td>
          20560
          -
          20609
        </td>
        <td>
          Apply
        </td>
        <td>
          scala.collection.generic.GenericCompanion.apply
        </td>
        <td>
          
        </td>
        <td style="background: #F0ADAD">
          scala.collection.Seq.apply[org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope](Envelope.this.copy(Envelope.this.xmin.-(360.0), Envelope.this.xmax.-(360.0), Envelope.this.copy$default$3, Envelope.this.copy$default$4))
        </td>
      </tr><tr>
        <td>
          544
        </td>
        <td>
          49681
        </td>
        <td>
          20560
          -
          20609
        </td>
        <td>
          Block
        </td>
        <td>
          scala.collection.generic.GenericCompanion.apply
        </td>
        <td>
          
        </td>
        <td style="background: #F0ADAD">
          scala.collection.Seq.apply[org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope](Envelope.this.copy(Envelope.this.xmin.-(360.0), Envelope.this.xmax.-(360.0), Envelope.this.copy$default$3, Envelope.this.copy$default$4))
        </td>
      </tr><tr>
        <td>
          545
        </td>
        <td>
          49682
        </td>
        <td>
          20667
          -
          20672
        </td>
        <td>
          Literal
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          -180.0
        </td>
      </tr><tr>
        <td>
          545
        </td>
        <td>
          49683
        </td>
        <td>
          20681
          -
          20692
        </td>
        <td>
          Apply
        </td>
        <td>
          scala.Double.-
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          Envelope.this.xmax.-(360.0)
        </td>
      </tr><tr>
        <td>
          545
        </td>
        <td>
          49684
        </td>
        <td>
          20655
          -
          20693
        </td>
        <td>
          Apply
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope.copy
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          Envelope.this.copy(-180.0, Envelope.this.xmax.-(360.0), Envelope.this.copy$default$3, Envelope.this.copy$default$4)
        </td>
      </tr><tr>
        <td>
          545
        </td>
        <td>
          49685
        </td>
        <td>
          20642
          -
          20694
        </td>
        <td>
          Apply
        </td>
        <td>
          scala.collection.generic.GenericCompanion.apply
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          scala.collection.Seq.apply[org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope](trimmed, Envelope.this.copy(-180.0, Envelope.this.xmax.-(360.0), Envelope.this.copy$default$3, Envelope.this.copy$default$4))
        </td>
      </tr><tr>
        <td>
          545
        </td>
        <td>
          49686
        </td>
        <td>
          20642
          -
          20694
        </td>
        <td>
          Block
        </td>
        <td>
          scala.collection.generic.GenericCompanion.apply
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          scala.collection.Seq.apply[org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope](trimmed, Envelope.this.copy(-180.0, Envelope.this.xmax.-(360.0), Envelope.this.copy$default$3, Envelope.this.copy$default$4))
        </td>
      </tr><tr>
        <td>
          548
        </td>
        <td>
          49688
        </td>
        <td>
          20728
          -
          20737
        </td>
        <td>
          Apply
        </td>
        <td>
          scala.collection.generic.GenericCompanion.apply
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          scala.collection.Seq.apply[org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope](this)
        </td>
      </tr><tr>
        <td>
          548
        </td>
        <td>
          49689
        </td>
        <td>
          20728
          -
          20737
        </td>
        <td>
          Block
        </td>
        <td>
          scala.collection.generic.GenericCompanion.apply
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          scala.collection.Seq.apply[org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope](this)
        </td>
      </tr><tr>
        <td>
          559
        </td>
        <td>
          49694
        </td>
        <td>
          20957
          -
          20961
        </td>
        <td>
          Select
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope.xmin
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          Envelope.this.xmin
        </td>
      </tr><tr>
        <td>
          559
        </td>
        <td>
          49695
        </td>
        <td>
          20963
          -
          20967
        </td>
        <td>
          Select
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope.xmax
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          Envelope.this.xmax
        </td>
      </tr><tr>
        <td>
          559
        </td>
        <td>
          49696
        </td>
        <td>
          20969
          -
          20973
        </td>
        <td>
          Select
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope.ymin
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          Envelope.this.ymin
        </td>
      </tr><tr>
        <td>
          559
        </td>
        <td>
          49697
        </td>
        <td>
          20975
          -
          20979
        </td>
        <td>
          Select
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope.ymax
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          Envelope.this.ymax
        </td>
      </tr><tr>
        <td>
          559
        </td>
        <td>
          49698
        </td>
        <td>
          20934
          -
          20995
        </td>
        <td>
          Apply
        </td>
        <td>
          org.geotools.geometry.jts.ReferencedEnvelope.&lt;init&gt;
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          new org.geotools.geometry.jts.ReferencedEnvelope(Envelope.this.xmin, Envelope.this.xmax, Envelope.this.ymin, Envelope.this.ymax, org.locationtech.geomesa.utils.geotools.`package`.CRS_EPSG_4326)
        </td>
      </tr><tr>
        <td>
          559
        </td>
        <td>
          49699
        </td>
        <td>
          20920
          -
          20996
        </td>
        <td>
          Apply
        </td>
        <td>
          org.geotools.api.filter.FilterFactory.bbox
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          org.locationtech.geomesa.filter.`package`.ff.bbox(geom, new org.geotools.geometry.jts.ReferencedEnvelope(Envelope.this.xmin, Envelope.this.xmax, Envelope.this.ymin, Envelope.this.ymax, org.locationtech.geomesa.utils.geotools.`package`.CRS_EPSG_4326))
        </td>
      </tr><tr>
        <td>
          566
        </td>
        <td>
          49700
        </td>
        <td>
          21164
          -
          21168
        </td>
        <td>
          Select
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope.xmin
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          Envelope.this.xmin
        </td>
      </tr><tr>
        <td>
          566
        </td>
        <td>
          49701
        </td>
        <td>
          21170
          -
          21174
        </td>
        <td>
          Select
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope.xmax
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          Envelope.this.xmax
        </td>
      </tr><tr>
        <td>
          566
        </td>
        <td>
          49702
        </td>
        <td>
          21176
          -
          21180
        </td>
        <td>
          Select
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope.ymin
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          Envelope.this.ymin
        </td>
      </tr><tr>
        <td>
          566
        </td>
        <td>
          49703
        </td>
        <td>
          21182
          -
          21186
        </td>
        <td>
          Select
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope.ymax
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          Envelope.this.ymax
        </td>
      </tr><tr>
        <td>
          566
        </td>
        <td>
          49704
        </td>
        <td>
          21125
          -
          21187
        </td>
        <td>
          Apply
        </td>
        <td>
          org.locationtech.jts.geom.Envelope.&lt;init&gt;
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          new org.locationtech.jts.geom.Envelope(Envelope.this.xmin, Envelope.this.xmax, Envelope.this.ymin, Envelope.this.ymax)
        </td>
      </tr><tr>
        <td>
          573
        </td>
        <td>
          49705
        </td>
        <td>
          21277
          -
          21279
        </td>
        <td>
          Literal
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td>
          
        </td>
        <td style="background: #F0ADAD">
          &quot;[&quot;
        </td>
      </tr><tr>
        <td>
          573
        </td>
        <td>
          49706
        </td>
        <td>
          21283
          -
          21286
        </td>
        <td>
          Literal
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td>
          
        </td>
        <td style="background: #F0ADAD">
          &quot;, &quot;
        </td>
      </tr><tr>
        <td>
          573
        </td>
        <td>
          49707
        </td>
        <td>
          21290
          -
          21293
        </td>
        <td>
          Literal
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td>
          
        </td>
        <td style="background: #F0ADAD">
          &quot;, &quot;
        </td>
      </tr><tr>
        <td>
          573
        </td>
        <td>
          49708
        </td>
        <td>
          21297
          -
          21300
        </td>
        <td>
          Literal
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td>
          
        </td>
        <td style="background: #F0ADAD">
          &quot;, &quot;
        </td>
      </tr><tr>
        <td>
          573
        </td>
        <td>
          49709
        </td>
        <td>
          21304
          -
          21306
        </td>
        <td>
          Literal
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td>
          
        </td>
        <td style="background: #F0ADAD">
          &quot;]&quot;
        </td>
      </tr><tr>
        <td>
          573
        </td>
        <td>
          49710
        </td>
        <td>
          21279
          -
          21283
        </td>
        <td>
          Select
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope.xmin
        </td>
        <td>
          
        </td>
        <td style="background: #F0ADAD">
          Envelope.this.xmin
        </td>
      </tr><tr>
        <td>
          573
        </td>
        <td>
          49711
        </td>
        <td>
          21286
          -
          21290
        </td>
        <td>
          Select
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope.xmax
        </td>
        <td>
          
        </td>
        <td style="background: #F0ADAD">
          Envelope.this.xmax
        </td>
      </tr><tr>
        <td>
          573
        </td>
        <td>
          49712
        </td>
        <td>
          21293
          -
          21297
        </td>
        <td>
          Select
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope.ymin
        </td>
        <td>
          
        </td>
        <td style="background: #F0ADAD">
          Envelope.this.ymin
        </td>
      </tr><tr>
        <td>
          573
        </td>
        <td>
          49713
        </td>
        <td>
          21300
          -
          21304
        </td>
        <td>
          Select
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope.ymax
        </td>
        <td>
          
        </td>
        <td style="background: #F0ADAD">
          Envelope.this.ymax
        </td>
      </tr><tr>
        <td>
          573
        </td>
        <td>
          49714
        </td>
        <td>
          21275
          -
          21306
        </td>
        <td>
          Apply
        </td>
        <td>
          scala.StringContext.s
        </td>
        <td>
          
        </td>
        <td style="background: #F0ADAD">
          scala.StringContext.apply(&quot;[&quot;, &quot;, &quot;, &quot;, &quot;, &quot;, &quot;, &quot;]&quot;).s(Envelope.this.xmin, Envelope.this.xmax, Envelope.this.ymin, Envelope.this.ymax)
        </td>
      </tr><tr>
        <td>
          587
        </td>
        <td>
          49715
        </td>
        <td>
          21663
          -
          21663
        </td>
        <td>
          Select
        </td>
        <td>
          scala.Tuple2._1
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          x$9._1
        </td>
      </tr><tr>
        <td>
          587
        </td>
        <td>
          49716
        </td>
        <td>
          21669
          -
          21669
        </td>
        <td>
          Select
        </td>
        <td>
          scala.Tuple2._2
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          x$9._2
        </td>
      </tr><tr>
        <td>
          588
        </td>
        <td>
          49717
        </td>
        <td>
          21747
          -
          21764
        </td>
        <td>
          Apply
        </td>
        <td>
          scala.Double.-
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          point.getX().-(east)
        </td>
      </tr><tr>
        <td>
          588
        </td>
        <td>
          49718
        </td>
        <td>
          21766
          -
          21783
        </td>
        <td>
          Apply
        </td>
        <td>
          scala.Double.+
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          point.getX().+(east)
        </td>
      </tr><tr>
        <td>
          588
        </td>
        <td>
          49719
        </td>
        <td>
          21785
          -
          21803
        </td>
        <td>
          Apply
        </td>
        <td>
          scala.Double.-
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          point.getY().-(north)
        </td>
      </tr><tr>
        <td>
          588
        </td>
        <td>
          49720
        </td>
        <td>
          21805
          -
          21823
        </td>
        <td>
          Apply
        </td>
        <td>
          scala.Double.+
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          point.getY().+(north)
        </td>
      </tr><tr>
        <td>
          588
        </td>
        <td>
          49721
        </td>
        <td>
          21738
          -
          21824
        </td>
        <td>
          Apply
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope.apply
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          KNearestNeighborSearchProcess.this.Envelope.apply(point.getX().-(east), point.getX().+(east), point.getY().-(north), point.getY().+(north))
        </td>
      </tr>
    </table>
          </div>
        </div>
      </body>
    </html>