<html>
      <head>
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
        <title id="title">
          org/locationtech/geomesa/process/query/KNearestNeighborSearchProcess.scala.html
        </title>
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/jquery.tablesorter/2.20.1/css/theme.default.min.css" type="text/css"/><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.tablesorter/2.20.1/js/jquery.tablesorter.min.js"></script><link rel="stylesheet" href="https://netdna.bootstrapcdn.com/bootstrap/3.0.3/css/bootstrap.min.css" type="text/css"/><script src="https://netdna.bootstrapcdn.com/bootstrap/3.0.3/js/bootstrap.min.js"></script><script type="text/javascript">
        $(document).ready(function() {$(".tablesorter").tablesorter();});
      </script>
        <style>
          table.codegrid { font-family: monospace; font-size: 12px; width: auto!important; }table.statementlist { width: auto!important; font-size: 13px; } table.codegrid td { padding: 0!important; border: 0!important } table td.linenumber { width: 40px!important; } 
        </style>
      </head>
      <body style="font-family: monospace;">
        <ul class="nav nav-tabs">
          <li>
            <a href="#codegrid" data-toggle="tab">Codegrid</a>
          </li>
          <li>
            <a href="#statementlist" data-toggle="tab">Statement List</a>
          </li>
        </ul>
        <div class="tab-content">
          <div class="tab-pane active" id="codegrid">
            <pre style='font-size: 12pt; font-family: courier, monospace;'>1 <span style=''>/***********************************************************************
</span>2 <span style=''> * Copyright (c) 2013-2025 General Atomics Integrated Intelligence, Inc.
</span>3 <span style=''> * All rights reserved. This program and the accompanying materials
</span>4 <span style=''> * are made available under the terms of the Apache License, Version 2.0
</span>5 <span style=''> * which accompanies this distribution and is available at
</span>6 <span style=''> * http://www.opensource.org/licenses/apache2.0.php.
</span>7 <span style=''> ***********************************************************************/
</span>8 <span style=''>
</span>9 <span style=''>package org.locationtech.geomesa.process.query
</span>10 <span style=''>
</span>11 <span style=''>import com.typesafe.scalalogging.LazyLogging
</span>12 <span style=''>import org.geotools.api.data.{Query, SimpleFeatureSource}
</span>13 <span style=''>import org.geotools.api.feature.Feature
</span>14 <span style=''>import org.geotools.api.feature.simple.SimpleFeature
</span>15 <span style=''>import org.geotools.api.filter.Filter
</span>16 <span style=''>import org.geotools.api.filter.expression.PropertyName
</span>17 <span style=''>import org.geotools.data.simple.SimpleFeatureCollection
</span>18 <span style=''>import org.geotools.feature.DefaultFeatureCollection
</span>19 <span style=''>import org.geotools.filter.text.ecql.ECQL
</span>20 <span style=''>import org.geotools.geometry.jts.ReferencedEnvelope
</span>21 <span style=''>import org.geotools.process.factory.{DescribeParameter, DescribeProcess, DescribeResult}
</span>22 <span style=''>import org.geotools.referencing.GeodeticCalculator
</span>23 <span style=''>import org.geotools.util.factory.Hints
</span>24 <span style=''>import org.locationtech.geomesa.filter.ff
</span>25 <span style=''>import org.locationtech.geomesa.index.geotools.GeoMesaFeatureCollection
</span>26 <span style=''>import org.locationtech.geomesa.index.process.GeoMesaProcessVisitor
</span>27 <span style=''>import org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.KNNVisitor
</span>28 <span style=''>import org.locationtech.geomesa.process.{FeatureResult, GeoMesaProcess}
</span>29 <span style=''>import org.locationtech.geomesa.utils.collection.SelfClosingIterator
</span>30 <span style=''>import org.locationtech.geomesa.utils.concurrent.CachedThreadPool
</span>31 <span style=''>import org.locationtech.geomesa.utils.geometry.DistanceCalculator
</span>32 <span style=''>import org.locationtech.geomesa.utils.geotools.{CRS_EPSG_4326, GeometryUtils}
</span>33 <span style=''>import org.locationtech.geomesa.utils.io.WithClose
</span>34 <span style=''>import org.locationtech.jts.geom.Point
</span>35 <span style=''>
</span>36 <span style=''>@DescribeProcess(
</span>37 <span style=''>  title = &quot;Geomesa-enabled K Nearest Neighbor Search&quot;,
</span>38 <span style=''>  description = &quot;Performs a K-nearest-neighbor search on a feature collection using a second feature collection as input&quot;
</span>39 <span style=''>)
</span>40 <span style=''>class KNearestNeighborSearchProcess extends GeoMesaProcess with LazyLogging {
</span>41 <span style=''>
</span>42 <span style=''>  @DescribeResult(description = &quot;Output feature collection&quot;)
</span>43 <span style=''>  def execute(
</span>44 <span style=''>               @DescribeParameter(
</span>45 <span style=''>                 name = &quot;inputFeatures&quot;,
</span>46 <span style=''>                 description = &quot;Feature collection that defines the points to search&quot;)
</span>47 <span style=''>               inputFeatures: SimpleFeatureCollection,
</span>48 <span style=''>
</span>49 <span style=''>               @DescribeParameter(
</span>50 <span style=''>                 name = &quot;dataFeatures&quot;,
</span>51 <span style=''>                 description = &quot;Feature collection to query for nearest neighbors&quot;)
</span>52 <span style=''>               dataFeatures: SimpleFeatureCollection,
</span>53 <span style=''>
</span>54 <span style=''>               @DescribeParameter(
</span>55 <span style=''>                 name = &quot;numDesired&quot;,
</span>56 <span style=''>                 description = &quot;k, the number of nearest neighbors to return&quot;)
</span>57 <span style=''>               numDesired: java.lang.Integer,
</span>58 <span style=''>
</span>59 <span style=''>               @DescribeParameter(
</span>60 <span style=''>                 name = &quot;estimatedDistance&quot;,
</span>61 <span style=''>                 description = &quot;Estimate of the distance in meters for the k-th nearest neighbor, used for the initial query window&quot;)
</span>62 <span style=''>               estimatedDistance: java.lang.Double,
</span>63 <span style=''>
</span>64 <span style=''>               @DescribeParameter(
</span>65 <span style=''>                 name = &quot;maxSearchDistance&quot;,
</span>66 <span style=''>                 description = &quot;Maximum search distance in meters, used to prevent runaway queries of the entire data set&quot;)
</span>67 <span style=''>               maxSearchDistance: java.lang.Double
</span>68 <span style=''>               ): SimpleFeatureCollection = {
</span>69 <span style=''>
</span>70 <span style=''>    logger.debug(
</span>71 <span style=''>      s&quot;Running KNN query for ${dataFeatures.getClass.getName} with k = $numDesired, &quot; +
</span>72 <span style=''>        s&quot;initial distance = $estimatedDistance, max distance = $maxSearchDistance&quot;)
</span>73 <span style=''>
</span>74 <span style=''>    val visitor = </span><span style='background: #AEF1AE'>new KNNVisitor(inputFeatures, numDesired, estimatedDistance, maxSearchDistance)</span><span style=''>
</span>75 <span style=''>    </span><span style='background: #AEF1AE'>GeoMesaFeatureCollection.visit(dataFeatures, visitor)</span><span style=''>
</span>76 <span style=''>    </span><span style='background: #AEF1AE'>visitor.getResult.results</span><span style=''>
</span>77 <span style=''>  }
</span>78 <span style=''>}
</span>79 <span style=''>
</span>80 <span style=''>object KNearestNeighborSearchProcess {
</span>81 <span style=''>
</span>82 <span style=''>  private val WholeWorldEnvelope = </span><span style='background: #AEF1AE'>Envelope(-180d, 180d, -90d, 90d)</span><span style=''>
</span>83 <span style=''>
</span>84 <span style=''>  /**
</span>85 <span style=''>    * Main visitor class for the KNN search process
</span>86 <span style=''>    *
</span>87 <span style=''>    * @param query query features - geometries will be used as the inputs
</span>88 <span style=''>    * @param k number of neighbors to find
</span>89 <span style=''>    * @param start initial distance to search
</span>90 <span style=''>    * @param threshold max distance to search
</span>91 <span style=''>    */
</span>92 <span style=''>  class KNNVisitor(query: SimpleFeatureCollection, k: Int, start: Double, threshold: Double)
</span>93 <span style=''>      extends GeoMesaProcessVisitor with LazyLogging {
</span>94 <span style=''>
</span>95 <span style=''>    import org.locationtech.geomesa.filter.ff
</span>96 <span style=''>    import org.locationtech.geomesa.utils.geotools.RichSimpleFeatureType.RichSimpleFeatureType
</span>97 <span style=''>
</span>98 <span style=''>    private lazy val queries: Seq[Point] = SelfClosingIterator(query.features()).toList.flatMap { f =&gt;
</span>99 <span style=''>      f.getDefaultGeometry match {
</span>100 <span style=''>        case p: Point =&gt; Some(p)
</span>101 <span style=''>        case g =&gt; logger.warn(s&quot;KNN query not implemented for non-point geometries, skipping this feature: $g&quot;); None
</span>102 <span style=''>      }
</span>103 <span style=''>    }
</span>104 <span style=''>
</span>105 <span style=''>    private lazy val results = Seq.fill(queries.length)(Array.ofDim[FeatureWithDistance](k))
</span>106 <span style=''>    private lazy val calculators = queries.zip(results).map { case (p, r) =&gt; new KnnCalculator(p, k, threshold, r) }
</span>107 <span style=''>
</span>108 <span style=''>    private var result: FeatureResult = _
</span>109 <span style=''>
</span>110 <span style=''>    // called for non-optimized visits
</span>111 <span style=''>    override def visit(feature: Feature): Unit = </span><span style='background: #AEF1AE'>calculators.foreach(_.visit(feature.asInstanceOf[SimpleFeature]))</span><span style=''>
</span>112 <span style=''>
</span>113 <span style=''>    override def getResult: FeatureResult = {
</span>114 <span style=''>      if (</span><span style='background: #AEF1AE'>result == null</span><span style=''>) </span><span style='background: #AEF1AE'>{
</span>115 <span style=''></span><span style='background: #AEF1AE'>        val collection = new DefaultFeatureCollection()
</span>116 <span style=''></span><span style='background: #AEF1AE'>        results.foreach(_.foreach(r =&gt; if (r != null) { collection.add(r.sf) }))
</span>117 <span style=''></span><span style='background: #AEF1AE'>        result = FeatureResult(collection)
</span>118 <span style=''></span><span style='background: #AEF1AE'>      }</span><span style=''>
</span>119 <span style=''>      </span><span style='background: #AEF1AE'>result</span><span style=''>
</span>120 <span style=''>    }
</span>121 <span style=''>
</span>122 <span style=''>    override def execute(source: SimpleFeatureSource, query: Query): Unit = {
</span>123 <span style=''>      logger.debug(s&quot;Running Geomesa KNN process on source type ${source.getClass.getName}&quot;)
</span>124 <span style=''>
</span>125 <span style=''>      // create a new feature collection to hold the results of the KNN search around each point
</span>126 <span style=''>      val collection = </span><span style='background: #AEF1AE'>new DefaultFeatureCollection()</span><span style=''>
</span>127 <span style=''>      val geom = </span><span style='background: #AEF1AE'>ff.property(source.getSchema.getGeomField)</span><span style=''>
</span>128 <span style=''>
</span>129 <span style=''>      // for each entry in the inputFeatures collection:
</span>130 <span style=''>      def run(p: Point): Unit = {
</span>131 <span style=''>        // tracks our nearest neighbors
</span>132 <span style=''>        val results = </span><span style='background: #AEF1AE'>Array.ofDim[FeatureWithDistance](k)</span><span style=''>
</span>133 <span style=''>        // tracks features are in our search envelope but that aren't within our current search distance
</span>134 <span style=''>        // we use a java linked list as scala doesn't have anything with 'iterate and remove' functionality
</span>135 <span style=''>        val overflow = </span><span style='background: #AEF1AE'>new java.util.LinkedList[FeatureWithDistance]()</span><span style=''>
</span>136 <span style=''>
</span>137 <span style=''>        // calculator for expanding window queries
</span>138 <span style=''>        val window = </span><span style='background: #AEF1AE'>new KnnWindow(query, geom, p, k, start, threshold)</span><span style=''>
</span>139 <span style=''>        var found = </span><span style='background: #AEF1AE'>0</span><span style=''> // tracks the number of neighbors we've found so far
</span>140 <span style=''>
</span>141 <span style=''>        val initial = </span><span style='background: #AEF1AE'>window.next(None)</span><span style=''>
</span>142 <span style=''>        logger.trace(s&quot;Current query window:\n  ${window.window.debug.mkString(&quot;\n  &quot;)}&quot;)
</span>143 <span style=''>        logger.trace(s&quot;Current filter: ${ECQL.toCQL(initial.getFilter)}&quot;)
</span>144 <span style=''>
</span>145 <span style=''>        // run our first query against the estimated distance
</span>146 <span style=''>        </span><span style='background: #AEF1AE'>WithClose(source.getFeatures(initial).features()) { iter =&gt;
</span>147 <span style=''></span><span style='background: #AEF1AE'>          // note: the calculator will populate our results array
</span>148 <span style=''></span><span style='background: #AEF1AE'>          val knn = new KnnCalculator(p, k, window.radius, results)
</span>149 <span style=''></span><span style='background: #AEF1AE'>          while (iter.hasNext) {
</span>150 <span style=''></span><span style='background: #AEF1AE'>            val sf = iter.next
</span>151 <span style=''></span><span style='background: #AEF1AE'>            // features that aren't within our query distance are added to the overflow for the next iteration
</span>152 <span style=''></span><span style='background: #AEF1AE'>            knn.visit(sf).foreach(d =&gt; overflow.add(FeatureWithDistance(sf, d)))
</span>153 <span style=''></span><span style='background: #AEF1AE'>          }
</span>154 <span style=''></span><span style='background: #AEF1AE'>          found = knn.size
</span>155 <span style=''></span><span style='background: #AEF1AE'>        }</span><span style=''>
</span>156 <span style=''>
</span>157 <span style=''>        var iteration = </span><span style='background: #AEF1AE'>1</span><span style=''> // tracks the number of queries we've run
</span>158 <span style=''>
</span>159 <span style=''>        // if we haven't found k features, start expanding the search distance
</span>160 <span style=''>        while (</span><span style='background: #AEF1AE'>found &lt; k &amp;&amp; window.hasNext</span><span style=''>) </span><span style='background: #AEF1AE'>{
</span>161 <span style=''></span><span style='background: #AEF1AE'>          val last = window.radius
</span>162 <span style=''></span><span style='background: #AEF1AE'>          // calculate the next query to search, based on how many we've found so far
</span>163 <span style=''></span><span style='background: #AEF1AE'>          val next = window.next(Some(found))
</span>164 <span style=''></span><span style='background: #AEF1AE'>          logger.debug(
</span>165 <span style=''></span><span style='background: #AEF1AE'>            s&quot;Expanding search at (${p.getX} ${p.getY}) from $last to ${window.radius} meters &quot; +
</span>166 <span style=''></span><span style='background: #AEF1AE'>                s&quot;based on finding $found/$k neighbors&quot;)
</span>167 <span style=''></span><span style='background: #AEF1AE'>          logger.trace(s&quot;Current query window:\n  ${window.window.debug.mkString(&quot;\n  &quot;)}&quot;)
</span>168 <span style=''></span><span style='background: #AEF1AE'>          logger.trace(s&quot;Current filter: ${ECQL.toCQL(next.getFilter)}&quot;)
</span>169 <span style=''></span><span style='background: #AEF1AE'>
</span>170 <span style=''></span><span style='background: #AEF1AE'>          // calculator for our new distance, initialized with the neighbors we've already found
</span>171 <span style=''></span><span style='background: #AEF1AE'>          val knn = new KnnCalculator(p, k, window.radius, results, found)
</span>172 <span style=''></span><span style='background: #AEF1AE'>          // re-visit any features that were outside our distance but inside our last envelope
</span>173 <span style=''></span><span style='background: #AEF1AE'>          val iter = overflow.iterator()
</span>174 <span style=''></span><span style='background: #AEF1AE'>          while (iter.hasNext) {
</span>175 <span style=''></span><span style='background: #AEF1AE'>            val FeatureWithDistance(sf, d) = iter.next()
</span>176 <span style=''></span><span style='background: #AEF1AE'>            if (d &lt;= window.radius) {
</span>177 <span style=''></span><span style='background: #AEF1AE'>              knn.visit(sf, d)
</span>178 <span style=''></span><span style='background: #AEF1AE'>              iter.remove()
</span>179 <span style=''></span><span style='background: #AEF1AE'>            }
</span>180 <span style=''></span><span style='background: #AEF1AE'>          }
</span>181 <span style=''></span><span style='background: #AEF1AE'>
</span>182 <span style=''></span><span style='background: #AEF1AE'>          // run the new query
</span>183 <span style=''></span><span style='background: #AEF1AE'>          WithClose(source.getFeatures(next).features()) { iter =&gt;
</span>184 <span style=''></span><span style='background: #AEF1AE'>            while (iter.hasNext) {
</span>185 <span style=''></span><span style='background: #AEF1AE'>              val sf = iter.next
</span>186 <span style=''></span><span style='background: #AEF1AE'>              // features that aren't within our query distance are added to the overflow for the next iteration
</span>187 <span style=''></span><span style='background: #AEF1AE'>              knn.visit(sf).foreach(d =&gt; overflow.add(FeatureWithDistance(sf, d)))
</span>188 <span style=''></span><span style='background: #AEF1AE'>            }
</span>189 <span style=''></span><span style='background: #AEF1AE'>            found = knn.size
</span>190 <span style=''></span><span style='background: #AEF1AE'>          }
</span>191 <span style=''></span><span style='background: #AEF1AE'>
</span>192 <span style=''></span><span style='background: #AEF1AE'>          iteration += 1
</span>193 <span style=''></span><span style='background: #AEF1AE'>        }</span><span style=''>
</span>194 <span style=''>
</span>195 <span style=''>        logger.debug(
</span>196 <span style=''>          s&quot;Found $found/$k neighbors at (${p.getX} ${p.getY}) after $iteration iteration(s) with final search &quot; +
</span>197 <span style=''>              s&quot;distance of ${window.radius} (initial $start, max $threshold)&quot;)
</span>198 <span style=''>        logger.trace(results.take(found).map(_.sf).mkString(&quot;; &quot;))
</span>199 <span style=''>
</span>200 <span style=''>        </span><span style='background: #AEF1AE'>collection.synchronized {
</span>201 <span style=''></span><span style='background: #AEF1AE'>          var i = 0
</span>202 <span style=''></span><span style='background: #AEF1AE'>          while (i &lt; found) {
</span>203 <span style=''></span><span style='background: #AEF1AE'>            collection.add(results(i).sf)
</span>204 <span style=''></span><span style='background: #AEF1AE'>            i += 1
</span>205 <span style=''></span><span style='background: #AEF1AE'>          }
</span>206 <span style=''></span><span style='background: #AEF1AE'>        }</span><span style=''>
</span>207 <span style=''>      }
</span>208 <span style=''>
</span>209 <span style=''>      </span><span style='background: #AEF1AE'>queries.toList.map(p =&gt; CachedThreadPool.submit(() =&gt; run(p))).foreach(_.get)</span><span style=''>
</span>210 <span style=''>
</span>211 <span style=''>      </span><span style='background: #AEF1AE'>this.result = FeatureResult(collection)</span><span style=''>
</span>212 <span style=''>    }
</span>213 <span style=''>  }
</span>214 <span style=''>
</span>215 <span style=''>  /**
</span>216 <span style=''>    * Class for finding window queries around a central point
</span>217 <span style=''>    *
</span>218 <span style=''>    * @param base base query
</span>219 <span style=''>    * @param geom geometry attribute being queried
</span>220 <span style=''>    * @param p central query point
</span>221 <span style=''>    * @param k number of features to find
</span>222 <span style=''>    * @param start initial search distance
</span>223 <span style=''>    * @param threshold max distance to query
</span>224 <span style=''>    */
</span>225 <span style=''>  class KnnWindow(base: Query, geom: PropertyName, p: Point, k: Int, start: Double, threshold: Double) {
</span>226 <span style=''>
</span>227 <span style=''>    private val calc = </span><span style='background: #AEF1AE'>new GeodeticCalculator()</span><span style=''>
</span>228 <span style=''>    private var distance = </span><span style='background: #AEF1AE'>start</span><span style=''>
</span>229 <span style=''>
</span>230 <span style=''>    // our query envelope - this is purely cartesian and not constrained by world bounds
</span>231 <span style=''>    private var envelope = </span><span style='background: #AEF1AE'>QueryEnvelope(Envelope(p, distance, calc), None)</span><span style=''>
</span>232 <span style=''>
</span>233 <span style=''>    /**
</span>234 <span style=''>      * Current search radius, in meters
</span>235 <span style=''>      *
</span>236 <span style=''>      * @return
</span>237 <span style=''>      */
</span>238 <span style=''>    def radius: Double = </span><span style='background: #AEF1AE'>distance</span><span style=''>
</span>239 <span style=''>
</span>240 <span style=''>    /**
</span>241 <span style=''>      * Current search envelope
</span>242 <span style=''>      *
</span>243 <span style=''>      * @return envelope
</span>244 <span style=''>      */
</span>245 <span style=''>    def window: QueryEnvelope = </span><span style='background: #F0ADAD'>envelope</span><span style=''>
</span>246 <span style=''>
</span>247 <span style=''>    /**
</span>248 <span style=''>      * Whether there are more window queries within the threshold
</span>249 <span style=''>      *
</span>250 <span style=''>      * @return
</span>251 <span style=''>      */
</span>252 <span style=''>    def hasNext: Boolean = </span><span style='background: #AEF1AE'>distance &lt; threshold</span><span style=''>
</span>253 <span style=''>
</span>254 <span style=''>    /**
</span>255 <span style=''>      * Get the next query window
</span>256 <span style=''>      *
</span>257 <span style=''>      * @param found number of features found so far, if the query has already been run
</span>258 <span style=''>      * @return
</span>259 <span style=''>      */
</span>260 <span style=''>    def next(found: Option[Int]): Query = {
</span>261 <span style=''>      </span><span style='background: #AEF1AE'>found.foreach(expand)</span><span style=''> // expand our window if we've already run a query
</span>262 <span style=''>
</span>263 <span style=''>      val query = </span><span style='background: #AEF1AE'>new Query(base)</span><span style=''>
</span>264 <span style=''>      </span><span style='background: #AEF1AE'>query.setHints(new Hints(base.getHints))</span><span style=''> // prevent sharing of hints between queries
</span>265 <span style=''>
</span>266 <span style=''>      // remove the hole from our query envelopes so that we don't scan the same area more than once
</span>267 <span style=''>      val filter = </span><span style='background: #AEF1AE'>org.locationtech.geomesa.filter.orFilters(envelope.query.map(_.toFilter(geom)))</span><span style=''>
</span>268 <span style=''>      </span><span style='background: #AEF1AE'>base.getFilter</span><span style=''> match {
</span>269 <span style=''>        case null | Filter.INCLUDE =&gt; </span><span style='background: #AEF1AE'>query.setFilter(filter)</span><span style=''>
</span>270 <span style=''>        case f =&gt; </span><span style='background: #AEF1AE'>query.setFilter(ff.and(f, filter))</span><span style=''>
</span>271 <span style=''>      }
</span>272 <span style=''>
</span>273 <span style=''>      query
</span>274 <span style=''>    }
</span>275 <span style=''>
</span>276 <span style=''>    /**
</span>277 <span style=''>      * Find the next window to search in an attempt to find the knn
</span>278 <span style=''>      *
</span>279 <span style=''>      * @param found number of neighbors found within the previous distance
</span>280 <span style=''>      */
</span>281 <span style=''>    private def expand(found: Int): Unit = {
</span>282 <span style=''>      // expand the window radius. algorithm derived from:
</span>283 <span style=''>      //    Efficient k Nearest Neighbor Queries on Remote Spatial Databases Using Range Estimation
</span>284 <span style=''>      //    Danzhou Liu, Ee-Peng Lim, Wee-Keong Ng
</span>285 <span style=''>      //    Centre for Advanced Information Systems, School of Computer Engineering
</span>286 <span style=''>      //    Nanyang Technological University, Singapore 639798
</span>287 <span style=''>      //    {P149571472, aseplim, awkng}@ntu.edu.sg
</span>288 <span style=''>      //  Available at: http://citeseerx.ist.psu.edu/viewdoc/download?doi=10.1.1.507.4109&amp;rep=rep1&amp;type=pdf
</span>289 <span style=''>
</span>290 <span style=''>      // note that this algorithm is fairly conservative - in their testing (using TIGER road data), it
</span>291 <span style=''>      // generally required 2-3 window expansions after the initial query in order to find the knn
</span>292 <span style=''>
</span>293 <span style=''>      </span><span style='background: #AEF1AE'>distance = if (found == 0) { distance * 2 } else {
</span>294 <span style=''></span><span style='background: #AEF1AE'>        val density = found / math.pow(2 * distance, 2)
</span>295 <span style=''></span><span style='background: #AEF1AE'>        math.sqrt(k / (math.Pi * density))
</span>296 <span style=''></span><span style='background: #AEF1AE'>      }</span><span style=''>
</span>297 <span style=''>      if (</span><span style='background: #AEF1AE'>distance &gt; threshold</span><span style=''>) {
</span>298 <span style=''>        </span><span style='background: #AEF1AE'>distance = threshold</span><span style=''>
</span>299 <span style=''>      }
</span>300 <span style=''>
</span>301 <span style=''>      val hole = </span><span style='background: #AEF1AE'>Some(envelope.envelope)</span><span style=''>
</span>302 <span style=''>      </span><span style='background: #AEF1AE'>envelope = QueryEnvelope(Envelope(p, distance, calc), hole)</span><span style=''>
</span>303 <span style=''>    }
</span>304 <span style=''>  }
</span>305 <span style=''>
</span>306 <span style=''>  /**
</span>307 <span style=''>    * Calculator for finding the k-nearest features
</span>308 <span style=''>    *
</span>309 <span style=''>    * @param query point to find neighbors for
</span>310 <span style=''>    * @param k number of neighbors to find
</span>311 <span style=''>    * @param threshold limit results to within a certain distance in meters
</span>312 <span style=''>    * @param results array of length k, used to hold results
</span>313 <span style=''>    * @param i number of features found so far, maxes out at k
</span>314 <span style=''>    */
</span>315 <span style=''>  class KnnCalculator(
</span>316 <span style=''>      query: Point,
</span>317 <span style=''>      k: Int,
</span>318 <span style=''>      threshold: Double,
</span>319 <span style=''>      results: Array[FeatureWithDistance],
</span>320 <span style=''>      private var i: Int = 0
</span>321 <span style=''>    ) extends LazyLogging {
</span>322 <span style=''>
</span>323 <span style=''>    private val calculator = </span><span style='background: #AEF1AE'>new DistanceCalculator()</span><span style=''>
</span>324 <span style=''>
</span>325 <span style=''>    // tracks the index of our current farthest value
</span>326 <span style=''>    private var fi = if (</span><span style='background: #AEF1AE'>i &lt; k</span><span style=''>) { </span><span style='background: #AEF1AE'>0</span><span style=''> } else { </span><span style='background: #F0ADAD'>farthest</span><span style=''> }
</span>327 <span style=''>
</span>328 <span style=''>    /**
</span>329 <span style=''>      * Number of features found so far
</span>330 <span style=''>      *
</span>331 <span style=''>      * @return
</span>332 <span style=''>      */
</span>333 <span style=''>    def size: Int = </span><span style='background: #AEF1AE'>i</span><span style=''>
</span>334 <span style=''>
</span>335 <span style=''>    /**
</span>336 <span style=''>      * Visit a feature, checking the distance to the query point
</span>337 <span style=''>      *
</span>338 <span style=''>      * @param feature feature
</span>339 <span style=''>      * @return None if the feature is within the threshold, otherwise Some(distance to query point)
</span>340 <span style=''>      */
</span>341 <span style=''>    def visit(feature: SimpleFeature): Option[Double] = {
</span>342 <span style=''>      </span><span style='background: #AEF1AE'>feature.getDefaultGeometry</span><span style=''> match {
</span>343 <span style=''>        case p: Point </span><span style='background: #AEF1AE'>=&gt;
</span>344 <span style=''></span><span style='background: #AEF1AE'>          val meters = calculator.meters(query, p)
</span>345 <span style=''></span><span style='background: #AEF1AE'>          if (meters &gt; threshold) {
</span>346 <span style=''></span><span style='background: #AEF1AE'>            Some(meters)
</span>347 <span style=''></span><span style='background: #AEF1AE'>          } else {
</span>348 <span style=''></span><span style='background: #AEF1AE'>            visit(feature, meters)
</span>349 <span style=''></span><span style='background: #AEF1AE'>            None
</span>350 <span style=''></span><span style='background: #AEF1AE'>          }</span><span style=''>
</span>351 <span style=''>
</span>352 <span style=''>        case g </span><span style='background: #F0ADAD'>=&gt; logger.warn(s&quot;KNN query not implemented for non-point geometries, skipping this feature: $g&quot;); None</span><span style=''>
</span>353 <span style=''>      }
</span>354 <span style=''>    }
</span>355 <span style=''>
</span>356 <span style=''>    /**
</span>357 <span style=''>      * Visit a feature with a known distance
</span>358 <span style=''>      *
</span>359 <span style=''>      * @param feature feature
</span>360 <span style=''>      * @param distance distance from the query point, in meters (assumed to be within the threshold)
</span>361 <span style=''>      */
</span>362 <span style=''>    def visit(feature: SimpleFeature, distance: Double): Unit = {
</span>363 <span style=''>      if (</span><span style='background: #AEF1AE'>i &lt; k</span><span style=''>) </span><span style='background: #AEF1AE'>{
</span>364 <span style=''></span><span style='background: #AEF1AE'>        // if we haven't seen k features yet, then by definition we have a nearest neighbor
</span>365 <span style=''></span><span style='background: #AEF1AE'>        results(i) = FeatureWithDistance(feature, distance)
</span>366 <span style=''></span><span style='background: #AEF1AE'>        i += 1
</span>367 <span style=''></span><span style='background: #AEF1AE'>        if (i == k) {
</span>368 <span style=''></span><span style='background: #AEF1AE'>          // if we have k elements, find the farthest feature so that we can easily check it going forward
</span>369 <span style=''></span><span style='background: #AEF1AE'>          fi = farthest
</span>370 <span style=''></span><span style='background: #AEF1AE'>        }
</span>371 <span style=''></span><span style='background: #AEF1AE'>      }</span><span style=''> else </span><span style='background: #AEF1AE'>if (distance &lt; results(fi).meters) {
</span>372 <span style=''></span><span style='background: #AEF1AE'>        // we have found a new nearest - replace the farthest, then find the new farthest
</span>373 <span style=''></span><span style='background: #AEF1AE'>        results(fi) = FeatureWithDistance(feature, distance)
</span>374 <span style=''></span><span style='background: #AEF1AE'>        fi = farthest
</span>375 <span style=''></span><span style='background: #AEF1AE'>      }</span><span style=''>
</span>376 <span style=''>    }
</span>377 <span style=''>
</span>378 <span style=''>    /**
</span>379 <span style=''>      * Gets the array index of the farthest feature. Note: assumes the result array does not contain nulls
</span>380 <span style=''>      *
</span>381 <span style=''>      * @return
</span>382 <span style=''>      */
</span>383 <span style=''>    private def farthest: Int = {
</span>384 <span style=''>      var max = </span><span style='background: #AEF1AE'>results.head.meters</span><span style=''>
</span>385 <span style=''>      var result = </span><span style='background: #AEF1AE'>0</span><span style=''>
</span>386 <span style=''>      var i = </span><span style='background: #AEF1AE'>1</span><span style=''>
</span>387 <span style=''>      while (</span><span style='background: #AEF1AE'>i &lt; results.length</span><span style=''>) </span><span style='background: #AEF1AE'>{
</span>388 <span style=''></span><span style='background: #AEF1AE'>        if (results(i).meters &gt; max) {
</span>389 <span style=''></span><span style='background: #AEF1AE'>          max = results(i).meters
</span>390 <span style=''></span><span style='background: #AEF1AE'>          result = i
</span>391 <span style=''></span><span style='background: #AEF1AE'>        }
</span>392 <span style=''></span><span style='background: #AEF1AE'>        i += 1
</span>393 <span style=''></span><span style='background: #AEF1AE'>      }</span><span style=''>
</span>394 <span style=''>      result
</span>395 <span style=''>    }
</span>396 <span style=''>  }
</span>397 <span style=''>
</span>398 <span style=''>  /**
</span>399 <span style=''>    * Holder for our ordered features
</span>400 <span style=''>    *
</span>401 <span style=''>    * @param sf simple feature
</span>402 <span style=''>    * @param meters distance in meters from the query point
</span>403 <span style=''>    */
</span>404 <span style=''>  case class FeatureWithDistance(sf: SimpleFeature, meters: Double) extends Comparable[FeatureWithDistance] {
</span>405 <span style=''>    override def compareTo(o: FeatureWithDistance): Int = </span><span style='background: #F0ADAD'>java.lang.Double.compare(meters, o.meters)</span><span style=''>
</span>406 <span style=''>  }
</span>407 <span style=''>
</span>408 <span style=''>  /**
</span>409 <span style=''>    * Holder for a query envelope
</span>410 <span style=''>    *
</span>411 <span style=''>    * @param envelope query envelope, in cartesian space
</span>412 <span style=''>    * @param hole hole covering any previously queried space
</span>413 <span style=''>    */
</span>414 <span style=''>  case class QueryEnvelope(envelope: Envelope, hole: Option[Envelope]) {
</span>415 <span style=''>
</span>416 <span style=''>    /**
</span>417 <span style=''>      * Get the envelopes for a query filter. The envelopes will exclude the hole, if present, to avoid
</span>418 <span style=''>      * returning duplicate results
</span>419 <span style=''>      *
</span>420 <span style=''>      * @return
</span>421 <span style=''>      */
</span>422 <span style=''>    def query: Seq[Envelope] = {
</span>423 <span style=''>      </span><span style='background: #AEF1AE'>hole</span><span style=''> match {
</span>424 <span style=''>        case None =&gt; </span><span style='background: #AEF1AE'>envelope.toWorld</span><span style=''>
</span>425 <span style=''>        case Some(h) </span><span style='background: #AEF1AE'>=&gt;
</span>426 <span style=''></span><span style='background: #AEF1AE'>          val holes = h.toWorld
</span>427 <span style=''></span><span style='background: #AEF1AE'>          envelope.toWorld.flatMap(e =&gt; holes.foldLeft(Seq(e)) { case (r, h) =&gt; r.flatMap(_.minus(h)) })</span><span style=''>
</span>428 <span style=''>      }
</span>429 <span style=''>    }
</span>430 <span style=''>
</span>431 <span style=''>    /**
</span>432 <span style=''>      * Gets a string useful for debugging
</span>433 <span style=''>      *
</span>434 <span style=''>      * @return
</span>435 <span style=''>      */
</span>436 <span style=''>    def debug: Seq[String] = </span><span style='background: #F0ADAD'>hole</span><span style=''> match {
</span>437 <span style=''>      case None =&gt; </span><span style='background: #F0ADAD'>Seq(envelope.debug)</span><span style=''>
</span>438 <span style=''>      case Some(h) </span><span style='background: #F0ADAD'>=&gt;
</span>439 <span style=''></span><span style='background: #F0ADAD'>        val diff = envelope.minus(h)
</span>440 <span style=''></span><span style='background: #F0ADAD'>        if (diff.isEmpty) { Seq(&quot;[empty]&quot;) } else { diff.map(_.debug) }</span><span style=''>
</span>441 <span style=''>    }
</span>442 <span style=''>  }
</span>443 <span style=''>
</span>444 <span style=''>  /**
</span>445 <span style=''>    * Simple envelope class - unlike the jts envelope, does not swap min/max values on creation
</span>446 <span style=''>    *
</span>447 <span style=''>    * @param xmin min x value
</span>448 <span style=''>    * @param xmax max x value
</span>449 <span style=''>    * @param ymin min y value
</span>450 <span style=''>    * @param ymax max y value
</span>451 <span style=''>    */
</span>452 <span style=''>  case class Envelope(xmin: Double, xmax: Double, ymin: Double, ymax: Double) {
</span>453 <span style=''>
</span>454 <span style=''>    </span><span style='background: #AEF1AE'>require(xmin &lt;= xmax &amp;&amp; ymin &lt;= ymax, </span><span style='background: #F0ADAD'>s&quot;Envelope is inverted: [$xmin, $xmax, $ymin, $ymax]&quot;</span><span style='background: #AEF1AE'>)</span><span style=''>
</span>455 <span style=''>
</span>456 <span style=''>    lazy val width: Double = xmax - xmin
</span>457 <span style=''>    lazy val height: Double = ymax - ymin
</span>458 <span style=''>
</span>459 <span style=''>    /**
</span>460 <span style=''>      * Intersection of two envelopes
</span>461 <span style=''>      *
</span>462 <span style=''>      * @param other other envelope
</span>463 <span style=''>      * @return
</span>464 <span style=''>      */
</span>465 <span style=''>    def intersection(other: Envelope): Option[Envelope] = {
</span>466 <span style=''>      val ixmin = </span><span style='background: #AEF1AE'>math.max(xmin, other.xmin)</span><span style=''>
</span>467 <span style=''>      val ixmax = </span><span style='background: #AEF1AE'>math.min(xmax, other.xmax)</span><span style=''>
</span>468 <span style=''>      if (</span><span style='background: #AEF1AE'>ixmin &gt; ixmax</span><span style=''>) { </span><span style='background: #F0ADAD'>None</span><span style=''> } else </span><span style='background: #AEF1AE'>{
</span>469 <span style=''></span><span style='background: #AEF1AE'>        val iymin = math.max(ymin, other.ymin)
</span>470 <span style=''></span><span style='background: #AEF1AE'>        val iymax = math.min(ymax, other.ymax)
</span>471 <span style=''></span><span style='background: #AEF1AE'>        if (iymin &gt; iymax) { </span><span style='background: #F0ADAD'>None</span><span style='background: #AEF1AE'> } else {
</span>472 <span style=''></span><span style='background: #AEF1AE'>          Some(Envelope(ixmin, ixmax, iymin, iymax))
</span>473 <span style=''></span><span style='background: #AEF1AE'>        }
</span>474 <span style=''></span><span style='background: #AEF1AE'>      }</span><span style=''>
</span>475 <span style=''>    }
</span>476 <span style=''>
</span>477 <span style=''>    /**
</span>478 <span style=''>      * Do the two envelopes intersect?
</span>479 <span style=''>      *
</span>480 <span style=''>      * @param other other envelope
</span>481 <span style=''>      * @return
</span>482 <span style=''>      */
</span>483 <span style=''>    def intersects(other: Envelope): Boolean =
</span>484 <span style=''>      </span><span style='background: #AEF1AE'>other.xmin &lt;= xmax &amp;&amp; other.xmax &gt;= xmin &amp;&amp; other.ymin &lt;= ymax &amp;&amp; other.ymax &gt;= ymin</span><span style=''>
</span>485 <span style=''>
</span>486 <span style=''>    /**
</span>487 <span style=''>      * Subtract an envelope from this one.
</span>488 <span style=''>      *
</span>489 <span style=''>      * The result will be 0 to 4 new envelopes. The 'top' and 'bottom' envelopes will contain corner
</span>490 <span style=''>      * intersections, if any, while the 'left' and 'right' envelopes will be trimmed around the top/bottom ones.
</span>491 <span style=''>      *
</span>492 <span style=''>      * @param other envelope to subtract
</span>493 <span style=''>      * @return
</span>494 <span style=''>      */
</span>495 <span style=''>    def minus(other: Envelope): Seq[Envelope] = {
</span>496 <span style=''>      if (</span><span style='background: #AEF1AE'>!intersects(other)</span><span style=''>) { </span><span style='background: #AEF1AE'>Seq(this)</span><span style=''> } else </span><span style='background: #AEF1AE'>{
</span>497 <span style=''></span><span style='background: #AEF1AE'>        val builder = Seq.newBuilder[Envelope]
</span>498 <span style=''></span><span style='background: #AEF1AE'>        // conditionally add top envelope, and determine ymax for left/right envelopes
</span>499 <span style=''></span><span style='background: #AEF1AE'>        val sidemax = if (other.ymax &gt;= ymax) { ymax } else {
</span>500 <span style=''></span><span style='background: #AEF1AE'>          builder += copy(ymin = other.ymax)
</span>501 <span style=''></span><span style='background: #AEF1AE'>          other.ymax
</span>502 <span style=''></span><span style='background: #AEF1AE'>        }
</span>503 <span style=''></span><span style='background: #AEF1AE'>        // conditionally add bottom envelope, and determine ymin for left/right envelopes
</span>504 <span style=''></span><span style='background: #AEF1AE'>        val sidemin = if (other.ymin &lt;= ymin) { ymin } else {
</span>505 <span style=''></span><span style='background: #AEF1AE'>          builder += copy(ymax = other.ymin)
</span>506 <span style=''></span><span style='background: #AEF1AE'>          other.ymin
</span>507 <span style=''></span><span style='background: #AEF1AE'>        }
</span>508 <span style=''></span><span style='background: #AEF1AE'>        // conditionally add left/right envelopes
</span>509 <span style=''></span><span style='background: #AEF1AE'>        if (other.xmin &gt; xmin) {
</span>510 <span style=''></span><span style='background: #AEF1AE'>          builder += copy(xmax = other.xmin, ymin = sidemin, ymax = sidemax)
</span>511 <span style=''></span><span style='background: #AEF1AE'>        }
</span>512 <span style=''></span><span style='background: #AEF1AE'>        if (other.xmax &lt; xmax) {
</span>513 <span style=''></span><span style='background: #AEF1AE'>          builder += copy(xmin = other.xmax, ymin = sidemin, ymax = sidemax)
</span>514 <span style=''></span><span style='background: #AEF1AE'>        }
</span>515 <span style=''></span><span style='background: #AEF1AE'>        builder.result
</span>516 <span style=''></span><span style='background: #AEF1AE'>      }</span><span style=''>
</span>517 <span style=''>    }
</span>518 <span style=''>
</span>519 <span style=''>    /**
</span>520 <span style=''>      * Converts any part of this envelope that extends past [-180,180,-90,90] to handle the anti-meridian and poles.
</span>521 <span style=''>      *
</span>522 <span style=''>      * Envelopes that cross the poles end up wrapping the whole longitude. Envelopes that cross the anti-meridian
</span>523 <span style=''>      * are wrapped to the other side.
</span>524 <span style=''>      *
</span>525 <span style=''>      * @return
</span>526 <span style=''>      */
</span>527 <span style=''>    def toWorld: Seq[Envelope] = {
</span>528 <span style=''>      if (</span><span style='background: #AEF1AE'>ymin &lt; -90d</span><span style=''>) {
</span>529 <span style=''>        </span><span style='background: #AEF1AE'>Seq(Envelope(-180d, 180d, -90, math.min(ymax, 90d)))</span><span style=''>
</span>530 <span style=''>      } else </span><span style='background: #AEF1AE'>if (ymax &gt; 90d) {
</span>531 <span style=''></span><span style='background: #AEF1AE'>        Seq(Envelope(-180d, 180d, math.max(ymin, -90), 90d))
</span>532 <span style=''></span><span style='background: #AEF1AE'>      } else if (width &gt;= 360d) {
</span>533 <span style=''></span><span style='background: #AEF1AE'>        Seq(copy(xmin = -180d, xmax = 180d))
</span>534 <span style=''></span><span style='background: #AEF1AE'>      } else if (xmin &lt; -180d) {
</span>535 <span style=''></span><span style='background: #AEF1AE'>        intersection(WholeWorldEnvelope) match {
</span>536 <span style=''></span><span style='background: #AEF1AE'>          case None =&gt; </span><span style='background: #F0ADAD'>Seq(copy(xmin = xmin + 360d, xmax = xmax + 360d))</span><span style='background: #AEF1AE'>
</span>537 <span style=''></span><span style='background: #AEF1AE'>          case Some(trimmed) =&gt; Seq(trimmed, copy(xmin = xmin + 360d, xmax = 180d))
</span>538 <span style=''></span><span style='background: #AEF1AE'>        }
</span>539 <span style=''></span><span style='background: #AEF1AE'>      } else if (xmax &gt; 180d) {
</span>540 <span style=''></span><span style='background: #AEF1AE'>        intersection(WholeWorldEnvelope) match {
</span>541 <span style=''></span><span style='background: #AEF1AE'>          case None =&gt; </span><span style='background: #F0ADAD'>Seq(copy(xmin = xmin - 360d, xmax = xmax - 360d))</span><span style='background: #AEF1AE'>
</span>542 <span style=''></span><span style='background: #AEF1AE'>          case Some(trimmed) =&gt; Seq(trimmed, copy(xmin = -180d, xmax = xmax - 360d))
</span>543 <span style=''></span><span style='background: #AEF1AE'>        }
</span>544 <span style=''></span><span style='background: #AEF1AE'>      } else {
</span>545 <span style=''></span><span style='background: #AEF1AE'>        Seq(this)
</span>546 <span style=''></span><span style='background: #AEF1AE'>      }</span><span style=''>
</span>547 <span style=''>    }
</span>548 <span style=''>
</span>549 <span style=''>    /**
</span>550 <span style=''>      * Create a geotools filter
</span>551 <span style=''>      *
</span>552 <span style=''>      * @param geom geometry expression
</span>553 <span style=''>      * @return
</span>554 <span style=''>      */
</span>555 <span style=''>    def toFilter(geom: PropertyName): Filter =
</span>556 <span style=''>      </span><span style='background: #AEF1AE'>ff.bbox(geom, new ReferencedEnvelope(xmin, xmax, ymin, ymax, CRS_EPSG_4326))</span><span style=''>
</span>557 <span style=''>
</span>558 <span style=''>    /**
</span>559 <span style=''>      * Convert to a JTS envelope
</span>560 <span style=''>      *
</span>561 <span style=''>      * @return
</span>562 <span style=''>      */
</span>563 <span style=''>    def toJts: org.locationtech.jts.geom.Envelope = </span><span style='background: #AEF1AE'>new org.locationtech.jts.geom.Envelope(xmin, xmax, ymin, ymax)</span><span style=''>
</span>564 <span style=''>
</span>565 <span style=''>    /**
</span>566 <span style=''>      * Debug string
</span>567 <span style=''>      *
</span>568 <span style=''>      * @return
</span>569 <span style=''>      */
</span>570 <span style=''>    def debug: String = </span><span style='background: #F0ADAD'>s&quot;[$xmin, $xmax, $ymin, $ymax]&quot;</span><span style=''>
</span>571 <span style=''>  }
</span>572 <span style=''>
</span>573 <span style=''>  object Envelope {
</span>574 <span style=''>
</span>575 <span style=''>    /**
</span>576 <span style=''>      * Create an envelope by buffering a point to an inscribed circle
</span>577 <span style=''>      *
</span>578 <span style=''>      * @param point center point
</span>579 <span style=''>      * @param buffer buffer distance, in meters
</span>580 <span style=''>      * @param calc geodetic calculator
</span>581 <span style=''>      * @return
</span>582 <span style=''>      */
</span>583 <span style=''>    def apply(point: Point, buffer: Double, calc: GeodeticCalculator): Envelope = {
</span>584 <span style=''>      val (east, north) = GeometryUtils.directionalDegrees(point, buffer, calc)
</span>585 <span style=''>      </span><span style='background: #AEF1AE'>Envelope(point.getX - east, point.getX + east, point.getY - north, point.getY + north)</span><span style=''>
</span>586 <span style=''>    }
</span>587 <span style=''>  }
</span>588 <span style=''>}
</span></pre>
          </div>
          <div class="tab-pane" id="statementlist">
            <table cellspacing="0" cellpadding="0" class="table statementlist">
      <tr>
        <th>Line</th>
        <th>Stmt Id</th>
        <th>Pos</th>
        <th>Tree</th>
        <th>Symbol</th>
        <th>Tests</th>
        <th>Code</th>
      </tr><tr>
        <td>
          74
        </td>
        <td>
          48114
        </td>
        <td>
          3698
          -
          3708
        </td>
        <td>
          ApplyImplicitView
        </td>
        <td>
          scala.Predef.Integer2int
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          scala.Predef.Integer2int(numDesired)
        </td>
      </tr><tr>
        <td>
          74
        </td>
        <td>
          48115
        </td>
        <td>
          3710
          -
          3727
        </td>
        <td>
          ApplyImplicitView
        </td>
        <td>
          scala.Predef.Double2double
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          scala.Predef.Double2double(estimatedDistance)
        </td>
      </tr><tr>
        <td>
          74
        </td>
        <td>
          48116
        </td>
        <td>
          3729
          -
          3746
        </td>
        <td>
          ApplyImplicitView
        </td>
        <td>
          scala.Predef.Double2double
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          scala.Predef.Double2double(maxSearchDistance)
        </td>
      </tr><tr>
        <td>
          74
        </td>
        <td>
          48117
        </td>
        <td>
          3668
          -
          3747
        </td>
        <td>
          Apply
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.KNNVisitor.&lt;init&gt;
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          new org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.KNNVisitor(inputFeatures, scala.Predef.Integer2int(numDesired), scala.Predef.Double2double(estimatedDistance), scala.Predef.Double2double(maxSearchDistance))
        </td>
      </tr><tr>
        <td>
          75
        </td>
        <td>
          48118
        </td>
        <td>
          3752
          -
          3805
        </td>
        <td>
          Apply
        </td>
        <td>
          org.locationtech.geomesa.index.geotools.GeoMesaFeatureCollection.visit
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          org.locationtech.geomesa.index.geotools.GeoMesaFeatureCollection.visit(dataFeatures, visitor, org.locationtech.geomesa.index.geotools.GeoMesaFeatureCollection.visit$default$3)
        </td>
      </tr><tr>
        <td>
          76
        </td>
        <td>
          48119
        </td>
        <td>
          3810
          -
          3835
        </td>
        <td>
          Select
        </td>
        <td>
          org.locationtech.geomesa.process.FeatureResult.results
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          visitor.getResult().results
        </td>
      </tr><tr>
        <td>
          82
        </td>
        <td>
          48120
        </td>
        <td>
          3918
          -
          3950
        </td>
        <td>
          Apply
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope.apply
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          KNearestNeighborSearchProcess.this.Envelope.apply(-180.0, 180.0, -90.0, 90.0)
        </td>
      </tr><tr>
        <td>
          111
        </td>
        <td>
          48121
        </td>
        <td>
          5197
          -
          5232
        </td>
        <td>
          TypeApply
        </td>
        <td>
          scala.Any.asInstanceOf
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          feature.asInstanceOf[org.geotools.api.feature.simple.SimpleFeature]
        </td>
      </tr><tr>
        <td>
          111
        </td>
        <td>
          48122
        </td>
        <td>
          5189
          -
          5233
        </td>
        <td>
          Apply
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.KnnCalculator.visit
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          x$1.visit(feature.asInstanceOf[org.geotools.api.feature.simple.SimpleFeature])
        </td>
      </tr><tr>
        <td>
          111
        </td>
        <td>
          48123
        </td>
        <td>
          5169
          -
          5234
        </td>
        <td>
          Apply
        </td>
        <td>
          scala.collection.IterableLike.foreach
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          KNNVisitor.this.calculators.foreach[Option[Double]](((x$1: org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.KnnCalculator) =&gt; x$1.visit(feature.asInstanceOf[org.geotools.api.feature.simple.SimpleFeature])))
        </td>
      </tr><tr>
        <td>
          114
        </td>
        <td>
          48124
        </td>
        <td>
          5292
          -
          5306
        </td>
        <td>
          Apply
        </td>
        <td>
          java.lang.Object.==
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          KNNVisitor.this.result.==(null)
        </td>
      </tr><tr>
        <td>
          114
        </td>
        <td>
          48136
        </td>
        <td>
          5308
          -
          5497
        </td>
        <td>
          Block
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          {
  val collection: org.geotools.feature.DefaultFeatureCollection = new org.geotools.feature.DefaultFeatureCollection();
  KNNVisitor.this.results.foreach[Unit](((x$2: Array[org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.FeatureWithDistance]) =&gt; scala.Predef.refArrayOps[org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.FeatureWithDistance](x$2).foreach[AnyVal](((r: org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.FeatureWithDistance) =&gt; if (r.!=(null))
    collection.add(r.sf)
  else
    ()))));
  KNNVisitor.this.result_=(org.locationtech.geomesa.process.FeatureResult.apply(collection))
}
        </td>
      </tr><tr>
        <td>
          114
        </td>
        <td>
          48137
        </td>
        <td>
          5288
          -
          5288
        </td>
        <td>
          Literal
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          ()
        </td>
      </tr><tr>
        <td>
          114
        </td>
        <td>
          48138
        </td>
        <td>
          5288
          -
          5288
        </td>
        <td>
          Block
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          ()
        </td>
      </tr><tr>
        <td>
          115
        </td>
        <td>
          48125
        </td>
        <td>
          5335
          -
          5365
        </td>
        <td>
          Apply
        </td>
        <td>
          org.geotools.feature.DefaultFeatureCollection.&lt;init&gt;
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          new org.geotools.feature.DefaultFeatureCollection()
        </td>
      </tr><tr>
        <td>
          116
        </td>
        <td>
          48126
        </td>
        <td>
          5409
          -
          5418
        </td>
        <td>
          Apply
        </td>
        <td>
          java.lang.Object.!=
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          r.!=(null)
        </td>
      </tr><tr>
        <td>
          116
        </td>
        <td>
          48127
        </td>
        <td>
          5437
          -
          5441
        </td>
        <td>
          Select
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.FeatureWithDistance.sf
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          r.sf
        </td>
      </tr><tr>
        <td>
          116
        </td>
        <td>
          48128
        </td>
        <td>
          5422
          -
          5442
        </td>
        <td>
          Apply
        </td>
        <td>
          org.geotools.feature.DefaultFeatureCollection.add
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          collection.add(r.sf)
        </td>
      </tr><tr>
        <td>
          116
        </td>
        <td>
          48129
        </td>
        <td>
          5422
          -
          5442
        </td>
        <td>
          Block
        </td>
        <td>
          org.geotools.feature.DefaultFeatureCollection.add
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          collection.add(r.sf)
        </td>
      </tr><tr>
        <td>
          116
        </td>
        <td>
          48130
        </td>
        <td>
          5405
          -
          5405
        </td>
        <td>
          Literal
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          ()
        </td>
      </tr><tr>
        <td>
          116
        </td>
        <td>
          48131
        </td>
        <td>
          5405
          -
          5405
        </td>
        <td>
          Block
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          ()
        </td>
      </tr><tr>
        <td>
          116
        </td>
        <td>
          48132
        </td>
        <td>
          5390
          -
          5445
        </td>
        <td>
          Apply
        </td>
        <td>
          scala.collection.IndexedSeqOptimized.foreach
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          scala.Predef.refArrayOps[org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.FeatureWithDistance](x$2).foreach[AnyVal](((r: org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.FeatureWithDistance) =&gt; if (r.!=(null))
  collection.add(r.sf)
else
  ()))
        </td>
      </tr><tr>
        <td>
          116
        </td>
        <td>
          48133
        </td>
        <td>
          5374
          -
          5446
        </td>
        <td>
          Apply
        </td>
        <td>
          scala.collection.IterableLike.foreach
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          KNNVisitor.this.results.foreach[Unit](((x$2: Array[org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.FeatureWithDistance]) =&gt; scala.Predef.refArrayOps[org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.FeatureWithDistance](x$2).foreach[AnyVal](((r: org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.FeatureWithDistance) =&gt; if (r.!=(null))
  collection.add(r.sf)
else
  ()))))
        </td>
      </tr><tr>
        <td>
          117
        </td>
        <td>
          48134
        </td>
        <td>
          5464
          -
          5489
        </td>
        <td>
          Apply
        </td>
        <td>
          org.locationtech.geomesa.process.FeatureResult.apply
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          org.locationtech.geomesa.process.FeatureResult.apply(collection)
        </td>
      </tr><tr>
        <td>
          117
        </td>
        <td>
          48135
        </td>
        <td>
          5455
          -
          5489
        </td>
        <td>
          Apply
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.KNNVisitor.result_=
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          KNNVisitor.this.result_=(org.locationtech.geomesa.process.FeatureResult.apply(collection))
        </td>
      </tr><tr>
        <td>
          119
        </td>
        <td>
          48139
        </td>
        <td>
          5504
          -
          5510
        </td>
        <td>
          Select
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.KNNVisitor.result
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          KNNVisitor.this.result
        </td>
      </tr><tr>
        <td>
          126
        </td>
        <td>
          48140
        </td>
        <td>
          5810
          -
          5840
        </td>
        <td>
          Apply
        </td>
        <td>
          org.geotools.feature.DefaultFeatureCollection.&lt;init&gt;
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          new org.geotools.feature.DefaultFeatureCollection()
        </td>
      </tr><tr>
        <td>
          127
        </td>
        <td>
          48141
        </td>
        <td>
          5870
          -
          5886
        </td>
        <td>
          Apply
        </td>
        <td>
          org.geotools.api.data.FeatureSource.getSchema
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          source.getSchema()
        </td>
      </tr><tr>
        <td>
          127
        </td>
        <td>
          48142
        </td>
        <td>
          5870
          -
          5899
        </td>
        <td>
          Select
        </td>
        <td>
          org.locationtech.geomesa.utils.geotools.RichSimpleFeatureType.RichSimpleFeatureType.getGeomField
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          org.locationtech.geomesa.utils.geotools.RichSimpleFeatureType.RichSimpleFeatureType(source.getSchema()).getGeomField
        </td>
      </tr><tr>
        <td>
          127
        </td>
        <td>
          48143
        </td>
        <td>
          5858
          -
          5900
        </td>
        <td>
          Apply
        </td>
        <td>
          org.geotools.api.filter.FilterFactory.property
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          org.locationtech.geomesa.filter.`package`.ff.property(org.locationtech.geomesa.utils.geotools.RichSimpleFeatureType.RichSimpleFeatureType(source.getSchema()).getGeomField)
        </td>
      </tr><tr>
        <td>
          132
        </td>
        <td>
          48144
        </td>
        <td>
          6088
          -
          6089
        </td>
        <td>
          Select
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.KNNVisitor.k
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          KNNVisitor.this.k
        </td>
      </tr><tr>
        <td>
          132
        </td>
        <td>
          48145
        </td>
        <td>
          6055
          -
          6090
        </td>
        <td>
          ApplyToImplicitArgs
        </td>
        <td>
          scala.Array.ofDim
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          scala.Array.ofDim[org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.FeatureWithDistance](KNNVisitor.this.k)((ClassTag.apply[org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.FeatureWithDistance](classOf[org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess$$FeatureWithDistance]): scala.reflect.ClassTag[org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.FeatureWithDistance]))
        </td>
      </tr><tr>
        <td>
          135
        </td>
        <td>
          48146
        </td>
        <td>
          6327
          -
          6374
        </td>
        <td>
          Apply
        </td>
        <td>
          java.util.LinkedList.&lt;init&gt;
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          new java.util.LinkedList[org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.FeatureWithDistance]()
        </td>
      </tr><tr>
        <td>
          138
        </td>
        <td>
          48147
        </td>
        <td>
          6478
          -
          6479
        </td>
        <td>
          Select
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.KNNVisitor.k
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          KNNVisitor.this.k
        </td>
      </tr><tr>
        <td>
          138
        </td>
        <td>
          48148
        </td>
        <td>
          6481
          -
          6486
        </td>
        <td>
          Select
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.KNNVisitor.start
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          KNNVisitor.this.start
        </td>
      </tr><tr>
        <td>
          138
        </td>
        <td>
          48149
        </td>
        <td>
          6488
          -
          6497
        </td>
        <td>
          Select
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.KNNVisitor.threshold
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          KNNVisitor.this.threshold
        </td>
      </tr><tr>
        <td>
          138
        </td>
        <td>
          48150
        </td>
        <td>
          6448
          -
          6498
        </td>
        <td>
          Apply
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.KnnWindow.&lt;init&gt;
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          new KNearestNeighborSearchProcess.this.KnnWindow(query, geom, p, KNNVisitor.this.k, KNNVisitor.this.start, KNNVisitor.this.threshold)
        </td>
      </tr><tr>
        <td>
          139
        </td>
        <td>
          48151
        </td>
        <td>
          6519
          -
          6520
        </td>
        <td>
          Literal
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          0
        </td>
      </tr><tr>
        <td>
          141
        </td>
        <td>
          48152
        </td>
        <td>
          6609
          -
          6613
        </td>
        <td>
          Select
        </td>
        <td>
          scala.None
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          scala.None
        </td>
      </tr><tr>
        <td>
          141
        </td>
        <td>
          48153
        </td>
        <td>
          6597
          -
          6614
        </td>
        <td>
          Apply
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.KnnWindow.next
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          window.next(scala.None)
        </td>
      </tr><tr>
        <td>
          146
        </td>
        <td>
          48154
        </td>
        <td>
          6860
          -
          6898
        </td>
        <td>
          Apply
        </td>
        <td>
          org.geotools.data.simple.SimpleFeatureCollection.features
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          source.getFeatures(initial).features()
        </td>
      </tr><tr>
        <td>
          146
        </td>
        <td>
          48168
        </td>
        <td>
          6900
          -
          6900
        </td>
        <td>
          Select
        </td>
        <td>
          org.locationtech.geomesa.utils.io.IsCloseableImplicits.closeableIsCloseable
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          io.this.IsCloseable.closeableIsCloseable
        </td>
      </tr><tr>
        <td>
          146
        </td>
        <td>
          48169
        </td>
        <td>
          6850
          -
          7348
        </td>
        <td>
          ApplyToImplicitArgs
        </td>
        <td>
          org.locationtech.geomesa.utils.io.WithClose.apply
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          org.locationtech.geomesa.utils.io.`package`.WithClose.apply[org.geotools.data.simple.SimpleFeatureIterator, Unit](source.getFeatures(initial).features())(((iter: org.geotools.data.simple.SimpleFeatureIterator) =&gt; {
  val knn: org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.KnnCalculator = new KNearestNeighborSearchProcess.this.KnnCalculator(p, KNNVisitor.this.k, window.radius, results, KNearestNeighborSearchProcess.this.KnnCalculator.&lt;init&gt;$default$5);
  while$1(){
    if (iter.hasNext())
      {
        {
          val sf: org.geotools.api.feature.simple.SimpleFeature = iter.next();
          knn.visit(sf).foreach[Boolean](((d: Double) =&gt; overflow.add(KNearestNeighborSearchProcess.this.FeatureWithDistance.apply(sf, d))))
        };
        while$1()
      }
    else
      ()
  };
  found = knn.size
}))(io.this.IsCloseable.closeableIsCloseable)
        </td>
      </tr><tr>
        <td>
          148
        </td>
        <td>
          48155
        </td>
        <td>
          7017
          -
          7018
        </td>
        <td>
          Select
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.KNNVisitor.k
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          KNNVisitor.this.k
        </td>
      </tr><tr>
        <td>
          148
        </td>
        <td>
          48156
        </td>
        <td>
          7020
          -
          7033
        </td>
        <td>
          Select
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.KnnWindow.radius
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          window.radius
        </td>
      </tr><tr>
        <td>
          148
        </td>
        <td>
          48157
        </td>
        <td>
          6996
          -
          7043
        </td>
        <td>
          Apply
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.KnnCalculator.&lt;init&gt;
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          new KNearestNeighborSearchProcess.this.KnnCalculator(p, KNNVisitor.this.k, window.radius, results, KNearestNeighborSearchProcess.this.KnnCalculator.&lt;init&gt;$default$5)
        </td>
      </tr><tr>
        <td>
          149
        </td>
        <td>
          48158
        </td>
        <td>
          7061
          -
          7073
        </td>
        <td>
          Apply
        </td>
        <td>
          org.geotools.feature.FeatureIterator.hasNext
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          iter.hasNext()
        </td>
      </tr><tr>
        <td>
          149
        </td>
        <td>
          48163
        </td>
        <td>
          7075
          -
          7075
        </td>
        <td>
          Apply
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.KNNVisitor.while$1
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          while$1()
        </td>
      </tr><tr>
        <td>
          149
        </td>
        <td>
          48164
        </td>
        <td>
          7075
          -
          7311
        </td>
        <td>
          Block
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          {
  {
    val sf: org.geotools.api.feature.simple.SimpleFeature = iter.next();
    knn.visit(sf).foreach[Boolean](((d: Double) =&gt; overflow.add(KNearestNeighborSearchProcess.this.FeatureWithDistance.apply(sf, d))))
  };
  while$1()
}
        </td>
      </tr><tr>
        <td>
          149
        </td>
        <td>
          48165
        </td>
        <td>
          7054
          -
          7054
        </td>
        <td>
          Literal
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          ()
        </td>
      </tr><tr>
        <td>
          149
        </td>
        <td>
          48166
        </td>
        <td>
          7054
          -
          7054
        </td>
        <td>
          Block
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          ()
        </td>
      </tr><tr>
        <td>
          150
        </td>
        <td>
          48159
        </td>
        <td>
          7098
          -
          7107
        </td>
        <td>
          Apply
        </td>
        <td>
          org.geotools.feature.FeatureIterator.next
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          iter.next()
        </td>
      </tr><tr>
        <td>
          152
        </td>
        <td>
          48160
        </td>
        <td>
          7271
          -
          7297
        </td>
        <td>
          Apply
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.FeatureWithDistance.apply
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          KNearestNeighborSearchProcess.this.FeatureWithDistance.apply(sf, d)
        </td>
      </tr><tr>
        <td>
          152
        </td>
        <td>
          48161
        </td>
        <td>
          7258
          -
          7298
        </td>
        <td>
          Apply
        </td>
        <td>
          java.util.LinkedList.add
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          overflow.add(KNearestNeighborSearchProcess.this.FeatureWithDistance.apply(sf, d))
        </td>
      </tr><tr>
        <td>
          152
        </td>
        <td>
          48162
        </td>
        <td>
          7231
          -
          7299
        </td>
        <td>
          Apply
        </td>
        <td>
          scala.Option.foreach
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          knn.visit(sf).foreach[Boolean](((d: Double) =&gt; overflow.add(KNearestNeighborSearchProcess.this.FeatureWithDistance.apply(sf, d))))
        </td>
      </tr><tr>
        <td>
          154
        </td>
        <td>
          48167
        </td>
        <td>
          7330
          -
          7338
        </td>
        <td>
          Select
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.KnnCalculator.size
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          knn.size
        </td>
      </tr><tr>
        <td>
          157
        </td>
        <td>
          48170
        </td>
        <td>
          7374
          -
          7375
        </td>
        <td>
          Literal
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          1
        </td>
      </tr><tr>
        <td>
          160
        </td>
        <td>
          48171
        </td>
        <td>
          7521
          -
          7522
        </td>
        <td>
          Select
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.KNNVisitor.k
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          KNNVisitor.this.k
        </td>
      </tr><tr>
        <td>
          160
        </td>
        <td>
          48172
        </td>
        <td>
          7526
          -
          7540
        </td>
        <td>
          Select
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.KnnWindow.hasNext
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          window.hasNext
        </td>
      </tr><tr>
        <td>
          160
        </td>
        <td>
          48173
        </td>
        <td>
          7513
          -
          7540
        </td>
        <td>
          Apply
        </td>
        <td>
          scala.Boolean.&amp;&amp;
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          found.&lt;(KNNVisitor.this.k).&amp;&amp;(window.hasNext)
        </td>
      </tr><tr>
        <td>
          160
        </td>
        <td>
          48209
        </td>
        <td>
          7542
          -
          7542
        </td>
        <td>
          Apply
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.KNNVisitor.while$4
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          while$4()
        </td>
      </tr><tr>
        <td>
          160
        </td>
        <td>
          48210
        </td>
        <td>
          7542
          -
          9030
        </td>
        <td>
          Block
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          {
  {
    val last: Double = window.radius;
    val next: org.geotools.api.data.Query = window.next(scala.Some.apply[Int](found));
    (if (KNNVisitor.this.logger.underlying.isDebugEnabled())
      KNNVisitor.this.logger.underlying.debug(scala.StringContext.apply(&quot;Expanding search at (&quot;, &quot; &quot;, &quot;) from &quot;, &quot; to &quot;, &quot; meters &quot;).s(p.getX(), p.getY(), last, window.radius).+(scala.StringContext.apply(&quot;based on finding &quot;, &quot;/&quot;, &quot; neighbors&quot;).s(found, KNNVisitor.this.k)))
    else
      (): Unit);
    (if (KNNVisitor.this.logger.underlying.isTraceEnabled())
      KNNVisitor.this.logger.underlying.trace(&quot;Current query window:\n  {}&quot;, (window.window.debug.mkString(&quot;\n  &quot;): AnyRef))
    else
      (): Unit);
    (if (KNNVisitor.this.logger.underlying.isTraceEnabled())
      KNNVisitor.this.logger.underlying.trace(&quot;Current filter: {}&quot;, (org.geotools.filter.text.ecql.ECQL.toCQL(next.getFilter()): AnyRef))
    else
      (): Unit);
    val knn: org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.KnnCalculator = new KNearestNeighborSearchProcess.this.KnnCalculator(p, KNNVisitor.this.k, window.radius, results, found);
    val iter: java.util.Iterator[org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.FeatureWithDistance] = overflow.iterator();
    while$2(){
      if (iter.hasNext())
        {
          {
            &lt;synthetic&gt; &lt;artifact&gt; private[this] val x$3: (org.geotools.api.feature.simple.SimpleFeature, Double) = (iter.next(): org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.FeatureWithDistance @unchecked) match {
              case (sf: org.geotools.api.feature.simple.SimpleFeature, meters: Double)org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.FeatureWithDistance((sf @ _), (d @ _)) =&gt; scala.Tuple2.apply[org.geotools.api.feature.simple.SimpleFeature, Double](sf, d)
            };
            val sf: org.geotools.api.feature.simple.SimpleFeature = x$3._1;
            val d: Double = x$3._2;
            if (d.&lt;=(window.radius))
              {
                knn.visit(sf, d);
                iter.remove()
              }
            else
              ()
          };
          while$2()
        }
      else
        ()
    };
    org.locationtech.geomesa.utils.io.`package`.WithClose.apply[org.geotools.data.simple.SimpleFeatureIterator, Unit](source.getFeatures(next).features())(((iter: org.geotools.data.simple.SimpleFeatureIterator) =&gt; {
      while$3(){
        if (iter.hasNext())
          {
            {
              val sf: org.geotools.api.feature.simple.SimpleFeature = iter.next();
              knn.visit(sf).foreach[Boolean](((d: Double) =&gt; overflow.add(KNearestNeighborSearchProcess.this.FeatureWithDistance.apply(sf, d))))
            };
            while$3()
          }
        else
          ()
      };
      found = knn.size
    }))(io.this.IsCloseable.closeableIsCloseable);
    iteration = iteration.+(1)
  };
  while$4()
}
        </td>
      </tr><tr>
        <td>
          160
        </td>
        <td>
          48211
        </td>
        <td>
          7506
          -
          7506
        </td>
        <td>
          Literal
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          ()
        </td>
      </tr><tr>
        <td>
          160
        </td>
        <td>
          48212
        </td>
        <td>
          7506
          -
          7506
        </td>
        <td>
          Block
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          ()
        </td>
      </tr><tr>
        <td>
          161
        </td>
        <td>
          48174
        </td>
        <td>
          7565
          -
          7578
        </td>
        <td>
          Select
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.KnnWindow.radius
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          window.radius
        </td>
      </tr><tr>
        <td>
          163
        </td>
        <td>
          48175
        </td>
        <td>
          7698
          -
          7709
        </td>
        <td>
          Apply
        </td>
        <td>
          scala.Some.apply
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          scala.Some.apply[Int](found)
        </td>
      </tr><tr>
        <td>
          163
        </td>
        <td>
          48176
        </td>
        <td>
          7686
          -
          7710
        </td>
        <td>
          Apply
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.KnnWindow.next
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          window.next(scala.Some.apply[Int](found))
        </td>
      </tr><tr>
        <td>
          171
        </td>
        <td>
          48177
        </td>
        <td>
          8194
          -
          8195
        </td>
        <td>
          Select
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.KNNVisitor.k
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          KNNVisitor.this.k
        </td>
      </tr><tr>
        <td>
          171
        </td>
        <td>
          48178
        </td>
        <td>
          8197
          -
          8210
        </td>
        <td>
          Select
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.KnnWindow.radius
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          window.radius
        </td>
      </tr><tr>
        <td>
          171
        </td>
        <td>
          48179
        </td>
        <td>
          8173
          -
          8227
        </td>
        <td>
          Apply
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.KnnCalculator.&lt;init&gt;
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          new KNearestNeighborSearchProcess.this.KnnCalculator(p, KNNVisitor.this.k, window.radius, results, found)
        </td>
      </tr><tr>
        <td>
          173
        </td>
        <td>
          48180
        </td>
        <td>
          8344
          -
          8363
        </td>
        <td>
          Apply
        </td>
        <td>
          java.util.AbstractSequentialList.iterator
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          overflow.iterator()
        </td>
      </tr><tr>
        <td>
          174
        </td>
        <td>
          48181
        </td>
        <td>
          8381
          -
          8393
        </td>
        <td>
          Apply
        </td>
        <td>
          java.util.Iterator.hasNext
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          iter.hasNext()
        </td>
      </tr><tr>
        <td>
          174
        </td>
        <td>
          48191
        </td>
        <td>
          8395
          -
          8395
        </td>
        <td>
          Apply
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.KNNVisitor.while$2
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          while$2()
        </td>
      </tr><tr>
        <td>
          174
        </td>
        <td>
          48192
        </td>
        <td>
          8395
          -
          8576
        </td>
        <td>
          Block
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          {
  {
    &lt;synthetic&gt; &lt;artifact&gt; private[this] val x$3: (org.geotools.api.feature.simple.SimpleFeature, Double) = (iter.next(): org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.FeatureWithDistance @unchecked) match {
      case (sf: org.geotools.api.feature.simple.SimpleFeature, meters: Double)org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.FeatureWithDistance((sf @ _), (d @ _)) =&gt; scala.Tuple2.apply[org.geotools.api.feature.simple.SimpleFeature, Double](sf, d)
    };
    val sf: org.geotools.api.feature.simple.SimpleFeature = x$3._1;
    val d: Double = x$3._2;
    if (d.&lt;=(window.radius))
      {
        knn.visit(sf, d);
        iter.remove()
      }
    else
      ()
  };
  while$2()
}
        </td>
      </tr><tr>
        <td>
          174
        </td>
        <td>
          48193
        </td>
        <td>
          8374
          -
          8374
        </td>
        <td>
          Literal
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          ()
        </td>
      </tr><tr>
        <td>
          174
        </td>
        <td>
          48194
        </td>
        <td>
          8374
          -
          8374
        </td>
        <td>
          Block
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          ()
        </td>
      </tr><tr>
        <td>
          175
        </td>
        <td>
          48182
        </td>
        <td>
          8433
          -
          8433
        </td>
        <td>
          Select
        </td>
        <td>
          scala.Tuple2._1
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          x$3._1
        </td>
      </tr><tr>
        <td>
          175
        </td>
        <td>
          48183
        </td>
        <td>
          8437
          -
          8437
        </td>
        <td>
          Select
        </td>
        <td>
          scala.Tuple2._2
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          x$3._2
        </td>
      </tr><tr>
        <td>
          176
        </td>
        <td>
          48184
        </td>
        <td>
          8475
          -
          8488
        </td>
        <td>
          Select
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.KnnWindow.radius
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          window.radius
        </td>
      </tr><tr>
        <td>
          176
        </td>
        <td>
          48185
        </td>
        <td>
          8470
          -
          8488
        </td>
        <td>
          Apply
        </td>
        <td>
          scala.Double.&lt;=
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          d.&lt;=(window.radius)
        </td>
      </tr><tr>
        <td>
          176
        </td>
        <td>
          48188
        </td>
        <td>
          8490
          -
          8564
        </td>
        <td>
          Block
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          {
  knn.visit(sf, d);
  iter.remove()
}
        </td>
      </tr><tr>
        <td>
          176
        </td>
        <td>
          48189
        </td>
        <td>
          8466
          -
          8466
        </td>
        <td>
          Literal
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          ()
        </td>
      </tr><tr>
        <td>
          176
        </td>
        <td>
          48190
        </td>
        <td>
          8466
          -
          8466
        </td>
        <td>
          Block
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          ()
        </td>
      </tr><tr>
        <td>
          177
        </td>
        <td>
          48186
        </td>
        <td>
          8506
          -
          8522
        </td>
        <td>
          Apply
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.KnnCalculator.visit
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          knn.visit(sf, d)
        </td>
      </tr><tr>
        <td>
          178
        </td>
        <td>
          48187
        </td>
        <td>
          8537
          -
          8550
        </td>
        <td>
          Apply
        </td>
        <td>
          java.util.Iterator.remove
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          iter.remove()
        </td>
      </tr><tr>
        <td>
          183
        </td>
        <td>
          48195
        </td>
        <td>
          8629
          -
          8664
        </td>
        <td>
          Apply
        </td>
        <td>
          org.geotools.data.simple.SimpleFeatureCollection.features
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          source.getFeatures(next).features()
        </td>
      </tr><tr>
        <td>
          183
        </td>
        <td>
          48206
        </td>
        <td>
          8666
          -
          8666
        </td>
        <td>
          Select
        </td>
        <td>
          org.locationtech.geomesa.utils.io.IsCloseableImplicits.closeableIsCloseable
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          io.this.IsCloseable.closeableIsCloseable
        </td>
      </tr><tr>
        <td>
          183
        </td>
        <td>
          48207
        </td>
        <td>
          8619
          -
          8994
        </td>
        <td>
          ApplyToImplicitArgs
        </td>
        <td>
          org.locationtech.geomesa.utils.io.WithClose.apply
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          org.locationtech.geomesa.utils.io.`package`.WithClose.apply[org.geotools.data.simple.SimpleFeatureIterator, Unit](source.getFeatures(next).features())(((iter: org.geotools.data.simple.SimpleFeatureIterator) =&gt; {
  while$3(){
    if (iter.hasNext())
      {
        {
          val sf: org.geotools.api.feature.simple.SimpleFeature = iter.next();
          knn.visit(sf).foreach[Boolean](((d: Double) =&gt; overflow.add(KNearestNeighborSearchProcess.this.FeatureWithDistance.apply(sf, d))))
        };
        while$3()
      }
    else
      ()
  };
  found = knn.size
}))(io.this.IsCloseable.closeableIsCloseable)
        </td>
      </tr><tr>
        <td>
          184
        </td>
        <td>
          48196
        </td>
        <td>
          8695
          -
          8707
        </td>
        <td>
          Apply
        </td>
        <td>
          org.geotools.feature.FeatureIterator.hasNext
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          iter.hasNext()
        </td>
      </tr><tr>
        <td>
          184
        </td>
        <td>
          48201
        </td>
        <td>
          8709
          -
          8709
        </td>
        <td>
          Apply
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.KNNVisitor.while$3
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          while$3()
        </td>
      </tr><tr>
        <td>
          184
        </td>
        <td>
          48202
        </td>
        <td>
          8709
          -
          8953
        </td>
        <td>
          Block
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          {
  {
    val sf: org.geotools.api.feature.simple.SimpleFeature = iter.next();
    knn.visit(sf).foreach[Boolean](((d: Double) =&gt; overflow.add(KNearestNeighborSearchProcess.this.FeatureWithDistance.apply(sf, d))))
  };
  while$3()
}
        </td>
      </tr><tr>
        <td>
          184
        </td>
        <td>
          48203
        </td>
        <td>
          8688
          -
          8688
        </td>
        <td>
          Literal
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          ()
        </td>
      </tr><tr>
        <td>
          184
        </td>
        <td>
          48204
        </td>
        <td>
          8688
          -
          8688
        </td>
        <td>
          Block
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          ()
        </td>
      </tr><tr>
        <td>
          185
        </td>
        <td>
          48197
        </td>
        <td>
          8734
          -
          8743
        </td>
        <td>
          Apply
        </td>
        <td>
          org.geotools.feature.FeatureIterator.next
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          iter.next()
        </td>
      </tr><tr>
        <td>
          187
        </td>
        <td>
          48198
        </td>
        <td>
          8911
          -
          8937
        </td>
        <td>
          Apply
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.FeatureWithDistance.apply
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          KNearestNeighborSearchProcess.this.FeatureWithDistance.apply(sf, d)
        </td>
      </tr><tr>
        <td>
          187
        </td>
        <td>
          48199
        </td>
        <td>
          8898
          -
          8938
        </td>
        <td>
          Apply
        </td>
        <td>
          java.util.LinkedList.add
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          overflow.add(KNearestNeighborSearchProcess.this.FeatureWithDistance.apply(sf, d))
        </td>
      </tr><tr>
        <td>
          187
        </td>
        <td>
          48200
        </td>
        <td>
          8871
          -
          8939
        </td>
        <td>
          Apply
        </td>
        <td>
          scala.Option.foreach
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          knn.visit(sf).foreach[Boolean](((d: Double) =&gt; overflow.add(KNearestNeighborSearchProcess.this.FeatureWithDistance.apply(sf, d))))
        </td>
      </tr><tr>
        <td>
          189
        </td>
        <td>
          48205
        </td>
        <td>
          8974
          -
          8982
        </td>
        <td>
          Select
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.KnnCalculator.size
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          knn.size
        </td>
      </tr><tr>
        <td>
          192
        </td>
        <td>
          48208
        </td>
        <td>
          9006
          -
          9020
        </td>
        <td>
          Apply
        </td>
        <td>
          scala.Int.+
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          iteration.+(1)
        </td>
      </tr><tr>
        <td>
          200
        </td>
        <td>
          48222
        </td>
        <td>
          9325
          -
          9483
        </td>
        <td>
          Apply
        </td>
        <td>
          java.lang.Object.synchronized
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          collection.synchronized[Unit]({
  var i: Int = 0;
  while$5(){
    if (i.&lt;(found))
      {
        {
          collection.add(results.apply(i).sf);
          i = i.+(1)
        };
        while$5()
      }
    else
      ()
  }
})
        </td>
      </tr><tr>
        <td>
          201
        </td>
        <td>
          48213
        </td>
        <td>
          9369
          -
          9370
        </td>
        <td>
          Literal
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          0
        </td>
      </tr><tr>
        <td>
          202
        </td>
        <td>
          48214
        </td>
        <td>
          9388
          -
          9397
        </td>
        <td>
          Apply
        </td>
        <td>
          scala.Int.&lt;
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          i.&lt;(found)
        </td>
      </tr><tr>
        <td>
          202
        </td>
        <td>
          48218
        </td>
        <td>
          9399
          -
          9399
        </td>
        <td>
          Apply
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.KNNVisitor.while$5
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          while$5()
        </td>
      </tr><tr>
        <td>
          202
        </td>
        <td>
          48219
        </td>
        <td>
          9399
          -
          9473
        </td>
        <td>
          Block
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          {
  {
    collection.add(results.apply(i).sf);
    i = i.+(1)
  };
  while$5()
}
        </td>
      </tr><tr>
        <td>
          202
        </td>
        <td>
          48220
        </td>
        <td>
          9381
          -
          9381
        </td>
        <td>
          Literal
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          ()
        </td>
      </tr><tr>
        <td>
          202
        </td>
        <td>
          48221
        </td>
        <td>
          9381
          -
          9381
        </td>
        <td>
          Block
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          ()
        </td>
      </tr><tr>
        <td>
          203
        </td>
        <td>
          48215
        </td>
        <td>
          9428
          -
          9441
        </td>
        <td>
          Select
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.FeatureWithDistance.sf
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          results.apply(i).sf
        </td>
      </tr><tr>
        <td>
          203
        </td>
        <td>
          48216
        </td>
        <td>
          9413
          -
          9442
        </td>
        <td>
          Apply
        </td>
        <td>
          org.geotools.feature.DefaultFeatureCollection.add
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          collection.add(results.apply(i).sf)
        </td>
      </tr><tr>
        <td>
          204
        </td>
        <td>
          48217
        </td>
        <td>
          9455
          -
          9461
        </td>
        <td>
          Apply
        </td>
        <td>
          scala.Int.+
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          i.+(1)
        </td>
      </tr><tr>
        <td>
          209
        </td>
        <td>
          48223
        </td>
        <td>
          9553
          -
          9559
        </td>
        <td>
          Apply
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.KNNVisitor.run
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          run(p)
        </td>
      </tr><tr>
        <td>
          209
        </td>
        <td>
          48224
        </td>
        <td>
          9523
          -
          9560
        </td>
        <td>
          Apply
        </td>
        <td>
          org.locationtech.geomesa.utils.concurrent.CachedThreadPool.submit
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          org.locationtech.geomesa.utils.concurrent.CachedThreadPool.submit((() =&gt; run(p)))
        </td>
      </tr><tr>
        <td>
          209
        </td>
        <td>
          48225
        </td>
        <td>
          9517
          -
          9517
        </td>
        <td>
          TypeApply
        </td>
        <td>
          scala.collection.immutable.List.canBuildFrom
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          immutable.this.List.canBuildFrom[java.util.concurrent.Future[_]]
        </td>
      </tr><tr>
        <td>
          209
        </td>
        <td>
          48226
        </td>
        <td>
          9570
          -
          9575
        </td>
        <td>
          Apply
        </td>
        <td>
          java.util.concurrent.Future.get
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          x$5.get()
        </td>
      </tr><tr>
        <td>
          209
        </td>
        <td>
          48227
        </td>
        <td>
          9499
          -
          9576
        </td>
        <td>
          Apply
        </td>
        <td>
          scala.collection.immutable.List.foreach
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          KNNVisitor.this.queries.toList.map[java.util.concurrent.Future[_], List[java.util.concurrent.Future[_]]](((p: org.locationtech.jts.geom.Point) =&gt; org.locationtech.geomesa.utils.concurrent.CachedThreadPool.submit((() =&gt; run(p)))))(immutable.this.List.canBuildFrom[java.util.concurrent.Future[_]]).foreach[Any](((x$5: java.util.concurrent.Future[_]) =&gt; x$5.get()))
        </td>
      </tr><tr>
        <td>
          211
        </td>
        <td>
          48228
        </td>
        <td>
          9598
          -
          9623
        </td>
        <td>
          Apply
        </td>
        <td>
          org.locationtech.geomesa.process.FeatureResult.apply
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          org.locationtech.geomesa.process.FeatureResult.apply(collection)
        </td>
      </tr><tr>
        <td>
          211
        </td>
        <td>
          48229
        </td>
        <td>
          9584
          -
          9623
        </td>
        <td>
          Apply
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.KNNVisitor.result_=
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          this.result_=(org.locationtech.geomesa.process.FeatureResult.apply(collection))
        </td>
      </tr><tr>
        <td>
          227
        </td>
        <td>
          48230
        </td>
        <td>
          10090
          -
          10114
        </td>
        <td>
          Apply
        </td>
        <td>
          org.geotools.referencing.GeodeticCalculator.&lt;init&gt;
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          new org.geotools.referencing.GeodeticCalculator()
        </td>
      </tr><tr>
        <td>
          228
        </td>
        <td>
          48231
        </td>
        <td>
          10142
          -
          10147
        </td>
        <td>
          Select
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.KnnWindow.start
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          KnnWindow.this.start
        </td>
      </tr><tr>
        <td>
          231
        </td>
        <td>
          48232
        </td>
        <td>
          10288
          -
          10289
        </td>
        <td>
          Select
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.KnnWindow.p
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          KnnWindow.this.p
        </td>
      </tr><tr>
        <td>
          231
        </td>
        <td>
          48233
        </td>
        <td>
          10291
          -
          10299
        </td>
        <td>
          Select
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.KnnWindow.distance
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          KnnWindow.this.distance
        </td>
      </tr><tr>
        <td>
          231
        </td>
        <td>
          48234
        </td>
        <td>
          10301
          -
          10305
        </td>
        <td>
          Select
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.KnnWindow.calc
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          KnnWindow.this.calc
        </td>
      </tr><tr>
        <td>
          231
        </td>
        <td>
          48235
        </td>
        <td>
          10279
          -
          10306
        </td>
        <td>
          Apply
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope.apply
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          KNearestNeighborSearchProcess.this.Envelope.apply(KnnWindow.this.p, KnnWindow.this.distance, KnnWindow.this.calc)
        </td>
      </tr><tr>
        <td>
          231
        </td>
        <td>
          48236
        </td>
        <td>
          10308
          -
          10312
        </td>
        <td>
          Select
        </td>
        <td>
          scala.None
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          scala.None
        </td>
      </tr><tr>
        <td>
          231
        </td>
        <td>
          48237
        </td>
        <td>
          10265
          -
          10313
        </td>
        <td>
          Apply
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.QueryEnvelope.apply
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          KNearestNeighborSearchProcess.this.QueryEnvelope.apply(KNearestNeighborSearchProcess.this.Envelope.apply(KnnWindow.this.p, KnnWindow.this.distance, KnnWindow.this.calc), scala.None)
        </td>
      </tr><tr>
        <td>
          238
        </td>
        <td>
          48238
        </td>
        <td>
          10422
          -
          10430
        </td>
        <td>
          Select
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.KnnWindow.distance
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          KnnWindow.this.distance
        </td>
      </tr><tr>
        <td>
          245
        </td>
        <td>
          48239
        </td>
        <td>
          10546
          -
          10554
        </td>
        <td>
          Select
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.KnnWindow.envelope
        </td>
        <td>
          
        </td>
        <td style="background: #F0ADAD">
          KnnWindow.this.envelope
        </td>
      </tr><tr>
        <td>
          252
        </td>
        <td>
          48240
        </td>
        <td>
          10702
          -
          10711
        </td>
        <td>
          Select
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.KnnWindow.threshold
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          KnnWindow.this.threshold
        </td>
      </tr><tr>
        <td>
          252
        </td>
        <td>
          48241
        </td>
        <td>
          10691
          -
          10711
        </td>
        <td>
          Apply
        </td>
        <td>
          scala.Double.&lt;
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          KnnWindow.this.distance.&lt;(KnnWindow.this.threshold)
        </td>
      </tr><tr>
        <td>
          261
        </td>
        <td>
          48242
        </td>
        <td>
          10940
          -
          10946
        </td>
        <td>
          Apply
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.KnnWindow.expand
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          KnnWindow.this.expand(found)
        </td>
      </tr><tr>
        <td>
          261
        </td>
        <td>
          48243
        </td>
        <td>
          10926
          -
          10947
        </td>
        <td>
          Apply
        </td>
        <td>
          scala.Option.foreach
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          found.foreach[Unit]({
  ((found: Int) =&gt; KnnWindow.this.expand(found))
})
        </td>
      </tr><tr>
        <td>
          263
        </td>
        <td>
          48244
        </td>
        <td>
          11027
          -
          11031
        </td>
        <td>
          Select
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.KnnWindow.base
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          KnnWindow.this.base
        </td>
      </tr><tr>
        <td>
          263
        </td>
        <td>
          48245
        </td>
        <td>
          11017
          -
          11032
        </td>
        <td>
          Apply
        </td>
        <td>
          org.geotools.api.data.Query.&lt;init&gt;
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          new org.geotools.api.data.Query(KnnWindow.this.base)
        </td>
      </tr><tr>
        <td>
          264
        </td>
        <td>
          48246
        </td>
        <td>
          11064
          -
          11077
        </td>
        <td>
          Apply
        </td>
        <td>
          org.geotools.api.data.Query.getHints
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          KnnWindow.this.base.getHints()
        </td>
      </tr><tr>
        <td>
          264
        </td>
        <td>
          48247
        </td>
        <td>
          11054
          -
          11078
        </td>
        <td>
          Apply
        </td>
        <td>
          org.geotools.util.factory.Hints.&lt;init&gt;
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          new org.geotools.util.factory.Hints(KnnWindow.this.base.getHints())
        </td>
      </tr><tr>
        <td>
          264
        </td>
        <td>
          48248
        </td>
        <td>
          11039
          -
          11079
        </td>
        <td>
          Apply
        </td>
        <td>
          org.geotools.api.data.Query.setHints
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          query.setHints(new org.geotools.util.factory.Hints(KnnWindow.this.base.getHints()))
        </td>
      </tr><tr>
        <td>
          267
        </td>
        <td>
          48249
        </td>
        <td>
          11317
          -
          11321
        </td>
        <td>
          Select
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.KnnWindow.geom
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          KnnWindow.this.geom
        </td>
      </tr><tr>
        <td>
          267
        </td>
        <td>
          48250
        </td>
        <td>
          11306
          -
          11322
        </td>
        <td>
          Apply
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope.toFilter
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          x$6.toFilter(KnnWindow.this.geom)
        </td>
      </tr><tr>
        <td>
          267
        </td>
        <td>
          48251
        </td>
        <td>
          11305
          -
          11305
        </td>
        <td>
          TypeApply
        </td>
        <td>
          scala.collection.Seq.canBuildFrom
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          collection.this.Seq.canBuildFrom[org.geotools.api.filter.Filter]
        </td>
      </tr><tr>
        <td>
          267
        </td>
        <td>
          48252
        </td>
        <td>
          11287
          -
          11323
        </td>
        <td>
          ApplyToImplicitArgs
        </td>
        <td>
          scala.collection.TraversableLike.map
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          KnnWindow.this.envelope.query.map[org.geotools.api.filter.Filter, Seq[org.geotools.api.filter.Filter]](((x$6: org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope) =&gt; x$6.toFilter(KnnWindow.this.geom)))(collection.this.Seq.canBuildFrom[org.geotools.api.filter.Filter])
        </td>
      </tr><tr>
        <td>
          267
        </td>
        <td>
          48253
        </td>
        <td>
          11286
          -
          11286
        </td>
        <td>
          Select
        </td>
        <td>
          org.locationtech.geomesa.filter.ff
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          org.locationtech.geomesa.filter.`package`.ff
        </td>
      </tr><tr>
        <td>
          267
        </td>
        <td>
          48254
        </td>
        <td>
          11245
          -
          11324
        </td>
        <td>
          ApplyToImplicitArgs
        </td>
        <td>
          org.locationtech.geomesa.filter.orFilters
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          org.locationtech.geomesa.filter.`package`.orFilters(KnnWindow.this.envelope.query.map[org.geotools.api.filter.Filter, Seq[org.geotools.api.filter.Filter]](((x$6: org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope) =&gt; x$6.toFilter(KnnWindow.this.geom)))(collection.this.Seq.canBuildFrom[org.geotools.api.filter.Filter]))(org.locationtech.geomesa.filter.`package`.ff)
        </td>
      </tr><tr>
        <td>
          268
        </td>
        <td>
          48255
        </td>
        <td>
          11331
          -
          11345
        </td>
        <td>
          Apply
        </td>
        <td>
          org.geotools.api.data.Query.getFilter
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          KnnWindow.this.base.getFilter()
        </td>
      </tr><tr>
        <td>
          269
        </td>
        <td>
          48256
        </td>
        <td>
          11392
          -
          11415
        </td>
        <td>
          Apply
        </td>
        <td>
          org.geotools.api.data.Query.setFilter
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          query.setFilter(filter)
        </td>
      </tr><tr>
        <td>
          269
        </td>
        <td>
          48257
        </td>
        <td>
          11392
          -
          11415
        </td>
        <td>
          Block
        </td>
        <td>
          org.geotools.api.data.Query.setFilter
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          query.setFilter(filter)
        </td>
      </tr><tr>
        <td>
          270
        </td>
        <td>
          48258
        </td>
        <td>
          11450
          -
          11467
        </td>
        <td>
          Apply
        </td>
        <td>
          org.geotools.api.filter.FilterFactory.and
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          org.locationtech.geomesa.filter.`package`.ff.and(f, filter)
        </td>
      </tr><tr>
        <td>
          270
        </td>
        <td>
          48259
        </td>
        <td>
          11434
          -
          11468
        </td>
        <td>
          Apply
        </td>
        <td>
          org.geotools.api.data.Query.setFilter
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          query.setFilter(org.locationtech.geomesa.filter.`package`.ff.and(f, filter))
        </td>
      </tr><tr>
        <td>
          270
        </td>
        <td>
          48260
        </td>
        <td>
          11434
          -
          11468
        </td>
        <td>
          Block
        </td>
        <td>
          org.geotools.api.data.Query.setFilter
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          query.setFilter(org.locationtech.geomesa.filter.`package`.ff.and(f, filter))
        </td>
      </tr><tr>
        <td>
          293
        </td>
        <td>
          48261
        </td>
        <td>
          12455
          -
          12465
        </td>
        <td>
          Apply
        </td>
        <td>
          scala.Int.==
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          found.==(0)
        </td>
      </tr><tr>
        <td>
          293
        </td>
        <td>
          48262
        </td>
        <td>
          12469
          -
          12481
        </td>
        <td>
          Apply
        </td>
        <td>
          scala.Double.*
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          KnnWindow.this.distance.*(2)
        </td>
      </tr><tr>
        <td>
          293
        </td>
        <td>
          48263
        </td>
        <td>
          12469
          -
          12481
        </td>
        <td>
          Block
        </td>
        <td>
          scala.Double.*
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          KnnWindow.this.distance.*(2)
        </td>
      </tr><tr>
        <td>
          293
        </td>
        <td>
          48273
        </td>
        <td>
          12489
          -
          12597
        </td>
        <td>
          Block
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          {
  val density: Double = found./(scala.math.`package`.pow(2.*(KnnWindow.this.distance), 2.0));
  scala.math.`package`.sqrt(KnnWindow.this.k./(3.141592653589793.*(density)))
}
        </td>
      </tr><tr>
        <td>
          293
        </td>
        <td>
          48274
        </td>
        <td>
          12440
          -
          12597
        </td>
        <td>
          Apply
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.KnnWindow.distance_=
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          KnnWindow.this.distance_=(if (found.==(0))
  KnnWindow.this.distance.*(2)
else
  {
    val density: Double = found./(scala.math.`package`.pow(2.*(KnnWindow.this.distance), 2.0));
    scala.math.`package`.sqrt(KnnWindow.this.k./(3.141592653589793.*(density)))
  })
        </td>
      </tr><tr>
        <td>
          294
        </td>
        <td>
          48264
        </td>
        <td>
          12530
          -
          12531
        </td>
        <td>
          Literal
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          2
        </td>
      </tr><tr>
        <td>
          294
        </td>
        <td>
          48265
        </td>
        <td>
          12534
          -
          12542
        </td>
        <td>
          Select
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.KnnWindow.distance
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          KnnWindow.this.distance
        </td>
      </tr><tr>
        <td>
          294
        </td>
        <td>
          48266
        </td>
        <td>
          12530
          -
          12542
        </td>
        <td>
          Apply
        </td>
        <td>
          scala.Int.*
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          2.*(KnnWindow.this.distance)
        </td>
      </tr><tr>
        <td>
          294
        </td>
        <td>
          48267
        </td>
        <td>
          12544
          -
          12545
        </td>
        <td>
          Literal
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          2.0
        </td>
      </tr><tr>
        <td>
          294
        </td>
        <td>
          48268
        </td>
        <td>
          12521
          -
          12546
        </td>
        <td>
          Apply
        </td>
        <td>
          scala.math.pow
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          scala.math.`package`.pow(2.*(KnnWindow.this.distance), 2.0)
        </td>
      </tr><tr>
        <td>
          294
        </td>
        <td>
          48269
        </td>
        <td>
          12513
          -
          12546
        </td>
        <td>
          Apply
        </td>
        <td>
          scala.Int./
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          found./(scala.math.`package`.pow(2.*(KnnWindow.this.distance), 2.0))
        </td>
      </tr><tr>
        <td>
          295
        </td>
        <td>
          48270
        </td>
        <td>
          12570
          -
          12587
        </td>
        <td>
          Apply
        </td>
        <td>
          scala.Double.*
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          3.141592653589793.*(density)
        </td>
      </tr><tr>
        <td>
          295
        </td>
        <td>
          48271
        </td>
        <td>
          12565
          -
          12588
        </td>
        <td>
          Apply
        </td>
        <td>
          scala.Int./
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          KnnWindow.this.k./(3.141592653589793.*(density))
        </td>
      </tr><tr>
        <td>
          295
        </td>
        <td>
          48272
        </td>
        <td>
          12555
          -
          12589
        </td>
        <td>
          Apply
        </td>
        <td>
          scala.math.sqrt
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          scala.math.`package`.sqrt(KnnWindow.this.k./(3.141592653589793.*(density)))
        </td>
      </tr><tr>
        <td>
          297
        </td>
        <td>
          48275
        </td>
        <td>
          12619
          -
          12628
        </td>
        <td>
          Select
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.KnnWindow.threshold
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          KnnWindow.this.threshold
        </td>
      </tr><tr>
        <td>
          297
        </td>
        <td>
          48276
        </td>
        <td>
          12608
          -
          12628
        </td>
        <td>
          Apply
        </td>
        <td>
          scala.Double.&gt;
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          KnnWindow.this.distance.&gt;(KnnWindow.this.threshold)
        </td>
      </tr><tr>
        <td>
          297
        </td>
        <td>
          48280
        </td>
        <td>
          12604
          -
          12604
        </td>
        <td>
          Literal
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          ()
        </td>
      </tr><tr>
        <td>
          297
        </td>
        <td>
          48281
        </td>
        <td>
          12604
          -
          12604
        </td>
        <td>
          Block
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          ()
        </td>
      </tr><tr>
        <td>
          298
        </td>
        <td>
          48277
        </td>
        <td>
          12651
          -
          12660
        </td>
        <td>
          Select
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.KnnWindow.threshold
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          KnnWindow.this.threshold
        </td>
      </tr><tr>
        <td>
          298
        </td>
        <td>
          48278
        </td>
        <td>
          12640
          -
          12660
        </td>
        <td>
          Apply
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.KnnWindow.distance_=
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          KnnWindow.this.distance_=(KnnWindow.this.threshold)
        </td>
      </tr><tr>
        <td>
          298
        </td>
        <td>
          48279
        </td>
        <td>
          12640
          -
          12660
        </td>
        <td>
          Block
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.KnnWindow.distance_=
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          KnnWindow.this.distance_=(KnnWindow.this.threshold)
        </td>
      </tr><tr>
        <td>
          301
        </td>
        <td>
          48282
        </td>
        <td>
          12692
          -
          12709
        </td>
        <td>
          Select
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.QueryEnvelope.envelope
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          KnnWindow.this.envelope.envelope
        </td>
      </tr><tr>
        <td>
          301
        </td>
        <td>
          48283
        </td>
        <td>
          12687
          -
          12710
        </td>
        <td>
          Apply
        </td>
        <td>
          scala.Some.apply
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          scala.Some.apply[org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope](KnnWindow.this.envelope.envelope)
        </td>
      </tr><tr>
        <td>
          302
        </td>
        <td>
          48284
        </td>
        <td>
          12751
          -
          12752
        </td>
        <td>
          Select
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.KnnWindow.p
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          KnnWindow.this.p
        </td>
      </tr><tr>
        <td>
          302
        </td>
        <td>
          48285
        </td>
        <td>
          12754
          -
          12762
        </td>
        <td>
          Select
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.KnnWindow.distance
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          KnnWindow.this.distance
        </td>
      </tr><tr>
        <td>
          302
        </td>
        <td>
          48286
        </td>
        <td>
          12764
          -
          12768
        </td>
        <td>
          Select
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.KnnWindow.calc
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          KnnWindow.this.calc
        </td>
      </tr><tr>
        <td>
          302
        </td>
        <td>
          48287
        </td>
        <td>
          12742
          -
          12769
        </td>
        <td>
          Apply
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope.apply
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          KNearestNeighborSearchProcess.this.Envelope.apply(KnnWindow.this.p, KnnWindow.this.distance, KnnWindow.this.calc)
        </td>
      </tr><tr>
        <td>
          302
        </td>
        <td>
          48288
        </td>
        <td>
          12728
          -
          12776
        </td>
        <td>
          Apply
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.QueryEnvelope.apply
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          KNearestNeighborSearchProcess.this.QueryEnvelope.apply(KNearestNeighborSearchProcess.this.Envelope.apply(KnnWindow.this.p, KnnWindow.this.distance, KnnWindow.this.calc), hole)
        </td>
      </tr><tr>
        <td>
          302
        </td>
        <td>
          48289
        </td>
        <td>
          12717
          -
          12776
        </td>
        <td>
          Apply
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.KnnWindow.envelope_=
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          KnnWindow.this.envelope_=(KNearestNeighborSearchProcess.this.QueryEnvelope.apply(KNearestNeighborSearchProcess.this.Envelope.apply(KnnWindow.this.p, KnnWindow.this.distance, KnnWindow.this.calc), hole))
        </td>
      </tr><tr>
        <td>
          323
        </td>
        <td>
          48290
        </td>
        <td>
          13361
          -
          13385
        </td>
        <td>
          Apply
        </td>
        <td>
          org.locationtech.geomesa.utils.geometry.DistanceCalculator.&lt;init&gt;
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          new org.locationtech.geomesa.utils.geometry.DistanceCalculator()
        </td>
      </tr><tr>
        <td>
          326
        </td>
        <td>
          48291
        </td>
        <td>
          13470
          -
          13471
        </td>
        <td>
          Select
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.KnnCalculator.k
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          KnnCalculator.this.k
        </td>
      </tr><tr>
        <td>
          326
        </td>
        <td>
          48292
        </td>
        <td>
          13466
          -
          13471
        </td>
        <td>
          Apply
        </td>
        <td>
          scala.Int.&lt;
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          KnnCalculator.this.i.&lt;(KnnCalculator.this.k)
        </td>
      </tr><tr>
        <td>
          326
        </td>
        <td>
          48293
        </td>
        <td>
          13475
          -
          13476
        </td>
        <td>
          Literal
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          0
        </td>
      </tr><tr>
        <td>
          326
        </td>
        <td>
          48294
        </td>
        <td>
          13475
          -
          13476
        </td>
        <td>
          Block
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          0
        </td>
      </tr><tr>
        <td>
          326
        </td>
        <td>
          48295
        </td>
        <td>
          13486
          -
          13494
        </td>
        <td>
          Select
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.KnnCalculator.farthest
        </td>
        <td>
          
        </td>
        <td style="background: #F0ADAD">
          KnnCalculator.this.farthest
        </td>
      </tr><tr>
        <td>
          326
        </td>
        <td>
          48296
        </td>
        <td>
          13486
          -
          13494
        </td>
        <td>
          Block
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.KnnCalculator.farthest
        </td>
        <td>
          
        </td>
        <td style="background: #F0ADAD">
          KnnCalculator.this.farthest
        </td>
      </tr><tr>
        <td>
          333
        </td>
        <td>
          48297
        </td>
        <td>
          13599
          -
          13600
        </td>
        <td>
          Select
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.KnnCalculator.i
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          KnnCalculator.this.i
        </td>
      </tr><tr>
        <td>
          342
        </td>
        <td>
          48298
        </td>
        <td>
          13889
          -
          13915
        </td>
        <td>
          Apply
        </td>
        <td>
          org.geotools.api.feature.simple.SimpleFeature.getDefaultGeometry
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          feature.getDefaultGeometry()
        </td>
      </tr><tr>
        <td>
          343
        </td>
        <td>
          48308
        </td>
        <td>
          13946
          -
          14143
        </td>
        <td>
          Block
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          {
  val meters: Double = KnnCalculator.this.calculator.meters(KnnCalculator.this.query, p);
  if (meters.&gt;(KnnCalculator.this.threshold))
    scala.Some.apply[Double](meters)
  else
    {
      KnnCalculator.this.visit(feature, meters);
      scala.None
    }
}
        </td>
      </tr><tr>
        <td>
          344
        </td>
        <td>
          48299
        </td>
        <td>
          13990
          -
          13995
        </td>
        <td>
          Select
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.KnnCalculator.query
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          KnnCalculator.this.query
        </td>
      </tr><tr>
        <td>
          344
        </td>
        <td>
          48300
        </td>
        <td>
          13972
          -
          13999
        </td>
        <td>
          Apply
        </td>
        <td>
          org.locationtech.geomesa.utils.geometry.DistanceCalculator.meters
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          KnnCalculator.this.calculator.meters(KnnCalculator.this.query, p)
        </td>
      </tr><tr>
        <td>
          345
        </td>
        <td>
          48301
        </td>
        <td>
          14023
          -
          14032
        </td>
        <td>
          Select
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.KnnCalculator.threshold
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          KnnCalculator.this.threshold
        </td>
      </tr><tr>
        <td>
          345
        </td>
        <td>
          48302
        </td>
        <td>
          14014
          -
          14032
        </td>
        <td>
          Apply
        </td>
        <td>
          scala.Double.&gt;
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          meters.&gt;(KnnCalculator.this.threshold)
        </td>
      </tr><tr>
        <td>
          346
        </td>
        <td>
          48303
        </td>
        <td>
          14048
          -
          14060
        </td>
        <td>
          Apply
        </td>
        <td>
          scala.Some.apply
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          scala.Some.apply[Double](meters)
        </td>
      </tr><tr>
        <td>
          346
        </td>
        <td>
          48304
        </td>
        <td>
          14048
          -
          14060
        </td>
        <td>
          Block
        </td>
        <td>
          scala.Some.apply
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          scala.Some.apply[Double](meters)
        </td>
      </tr><tr>
        <td>
          347
        </td>
        <td>
          48307
        </td>
        <td>
          14078
          -
          14143
        </td>
        <td>
          Block
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          {
  KnnCalculator.this.visit(feature, meters);
  scala.None
}
        </td>
      </tr><tr>
        <td>
          348
        </td>
        <td>
          48305
        </td>
        <td>
          14092
          -
          14114
        </td>
        <td>
          Apply
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.KnnCalculator.visit
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          KnnCalculator.this.visit(feature, meters)
        </td>
      </tr><tr>
        <td>
          349
        </td>
        <td>
          48306
        </td>
        <td>
          14127
          -
          14131
        </td>
        <td>
          Select
        </td>
        <td>
          scala.None
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          scala.None
        </td>
      </tr><tr>
        <td>
          352
        </td>
        <td>
          48309
        </td>
        <td>
          14258
          -
          14262
        </td>
        <td>
          Select
        </td>
        <td>
          scala.None
        </td>
        <td>
          
        </td>
        <td style="background: #F0ADAD">
          scala.None
        </td>
      </tr><tr>
        <td>
          352
        </td>
        <td>
          48310
        </td>
        <td>
          14160
          -
          14262
        </td>
        <td>
          Block
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td>
          
        </td>
        <td style="background: #F0ADAD">
          {
  (if (KnnCalculator.this.logger.underlying.isWarnEnabled())
    KnnCalculator.this.logger.underlying.warn(&quot;KNN query not implemented for non-point geometries, skipping this feature: {}&quot;, (g: AnyRef))
  else
    (): Unit);
  scala.None
}
        </td>
      </tr><tr>
        <td>
          363
        </td>
        <td>
          48311
        </td>
        <td>
          14562
          -
          14563
        </td>
        <td>
          Select
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.KnnCalculator.k
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          KnnCalculator.this.k
        </td>
      </tr><tr>
        <td>
          363
        </td>
        <td>
          48312
        </td>
        <td>
          14558
          -
          14563
        </td>
        <td>
          Apply
        </td>
        <td>
          scala.Int.&lt;
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          KnnCalculator.this.i.&lt;(KnnCalculator.this.k)
        </td>
      </tr><tr>
        <td>
          363
        </td>
        <td>
          48325
        </td>
        <td>
          14565
          -
          14904
        </td>
        <td>
          Block
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          {
  KnnCalculator.this.results.update(KnnCalculator.this.i, KNearestNeighborSearchProcess.this.FeatureWithDistance.apply(feature, distance));
  KnnCalculator.this.i_=(KnnCalculator.this.i.+(1));
  if (KnnCalculator.this.i.==(KnnCalculator.this.k))
    KnnCalculator.this.fi_=(KnnCalculator.this.farthest)
  else
    ()
}
        </td>
      </tr><tr>
        <td>
          365
        </td>
        <td>
          48313
        </td>
        <td>
          14675
          -
          14676
        </td>
        <td>
          Select
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.KnnCalculator.i
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          KnnCalculator.this.i
        </td>
      </tr><tr>
        <td>
          365
        </td>
        <td>
          48314
        </td>
        <td>
          14680
          -
          14718
        </td>
        <td>
          Apply
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.FeatureWithDistance.apply
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          KNearestNeighborSearchProcess.this.FeatureWithDistance.apply(feature, distance)
        </td>
      </tr><tr>
        <td>
          365
        </td>
        <td>
          48315
        </td>
        <td>
          14667
          -
          14718
        </td>
        <td>
          Apply
        </td>
        <td>
          scala.Array.update
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          KnnCalculator.this.results.update(KnnCalculator.this.i, KNearestNeighborSearchProcess.this.FeatureWithDistance.apply(feature, distance))
        </td>
      </tr><tr>
        <td>
          366
        </td>
        <td>
          48316
        </td>
        <td>
          14727
          -
          14733
        </td>
        <td>
          Apply
        </td>
        <td>
          scala.Int.+
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          KnnCalculator.this.i.+(1)
        </td>
      </tr><tr>
        <td>
          366
        </td>
        <td>
          48317
        </td>
        <td>
          14727
          -
          14733
        </td>
        <td>
          Apply
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.KnnCalculator.i_=
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          KnnCalculator.this.i_=(KnnCalculator.this.i.+(1))
        </td>
      </tr><tr>
        <td>
          367
        </td>
        <td>
          48318
        </td>
        <td>
          14751
          -
          14752
        </td>
        <td>
          Select
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.KnnCalculator.k
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          KnnCalculator.this.k
        </td>
      </tr><tr>
        <td>
          367
        </td>
        <td>
          48319
        </td>
        <td>
          14746
          -
          14752
        </td>
        <td>
          Apply
        </td>
        <td>
          scala.Int.==
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          KnnCalculator.this.i.==(KnnCalculator.this.k)
        </td>
      </tr><tr>
        <td>
          367
        </td>
        <td>
          48323
        </td>
        <td>
          14742
          -
          14742
        </td>
        <td>
          Literal
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          ()
        </td>
      </tr><tr>
        <td>
          367
        </td>
        <td>
          48324
        </td>
        <td>
          14742
          -
          14742
        </td>
        <td>
          Block
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          ()
        </td>
      </tr><tr>
        <td>
          369
        </td>
        <td>
          48320
        </td>
        <td>
          14878
          -
          14886
        </td>
        <td>
          Select
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.KnnCalculator.farthest
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          KnnCalculator.this.farthest
        </td>
      </tr><tr>
        <td>
          369
        </td>
        <td>
          48321
        </td>
        <td>
          14873
          -
          14886
        </td>
        <td>
          Apply
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.KnnCalculator.fi_=
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          KnnCalculator.this.fi_=(KnnCalculator.this.farthest)
        </td>
      </tr><tr>
        <td>
          369
        </td>
        <td>
          48322
        </td>
        <td>
          14873
          -
          14886
        </td>
        <td>
          Block
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.KnnCalculator.fi_=
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          KnnCalculator.this.fi_=(KnnCalculator.this.farthest)
        </td>
      </tr><tr>
        <td>
          371
        </td>
        <td>
          48326
        </td>
        <td>
          14933
          -
          14935
        </td>
        <td>
          Select
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.KnnCalculator.fi
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          KnnCalculator.this.fi
        </td>
      </tr><tr>
        <td>
          371
        </td>
        <td>
          48327
        </td>
        <td>
          14925
          -
          14943
        </td>
        <td>
          Select
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.FeatureWithDistance.meters
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          KnnCalculator.this.results.apply(KnnCalculator.this.fi).meters
        </td>
      </tr><tr>
        <td>
          371
        </td>
        <td>
          48328
        </td>
        <td>
          14914
          -
          14943
        </td>
        <td>
          Apply
        </td>
        <td>
          scala.Double.&lt;
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          distance.&lt;(KnnCalculator.this.results.apply(KnnCalculator.this.fi).meters)
        </td>
      </tr><tr>
        <td>
          371
        </td>
        <td>
          48334
        </td>
        <td>
          14945
          -
          15127
        </td>
        <td>
          Block
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          {
  KnnCalculator.this.results.update(KnnCalculator.this.fi, KNearestNeighborSearchProcess.this.FeatureWithDistance.apply(feature, distance));
  KnnCalculator.this.fi_=(KnnCalculator.this.farthest)
}
        </td>
      </tr><tr>
        <td>
          371
        </td>
        <td>
          48335
        </td>
        <td>
          14910
          -
          14910
        </td>
        <td>
          Literal
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          ()
        </td>
      </tr><tr>
        <td>
          371
        </td>
        <td>
          48336
        </td>
        <td>
          14910
          -
          14910
        </td>
        <td>
          Block
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          ()
        </td>
      </tr><tr>
        <td>
          371
        </td>
        <td>
          48337
        </td>
        <td>
          14910
          -
          15127
        </td>
        <td>
          If
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          if (distance.&lt;(KnnCalculator.this.results.apply(KnnCalculator.this.fi).meters))
  {
    KnnCalculator.this.results.update(KnnCalculator.this.fi, KNearestNeighborSearchProcess.this.FeatureWithDistance.apply(feature, distance));
    KnnCalculator.this.fi_=(KnnCalculator.this.farthest)
  }
else
  ()
        </td>
      </tr><tr>
        <td>
          373
        </td>
        <td>
          48329
        </td>
        <td>
          15053
          -
          15055
        </td>
        <td>
          Select
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.KnnCalculator.fi
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          KnnCalculator.this.fi
        </td>
      </tr><tr>
        <td>
          373
        </td>
        <td>
          48330
        </td>
        <td>
          15059
          -
          15097
        </td>
        <td>
          Apply
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.FeatureWithDistance.apply
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          KNearestNeighborSearchProcess.this.FeatureWithDistance.apply(feature, distance)
        </td>
      </tr><tr>
        <td>
          373
        </td>
        <td>
          48331
        </td>
        <td>
          15045
          -
          15097
        </td>
        <td>
          Apply
        </td>
        <td>
          scala.Array.update
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          KnnCalculator.this.results.update(KnnCalculator.this.fi, KNearestNeighborSearchProcess.this.FeatureWithDistance.apply(feature, distance))
        </td>
      </tr><tr>
        <td>
          374
        </td>
        <td>
          48332
        </td>
        <td>
          15111
          -
          15119
        </td>
        <td>
          Select
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.KnnCalculator.farthest
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          KnnCalculator.this.farthest
        </td>
      </tr><tr>
        <td>
          374
        </td>
        <td>
          48333
        </td>
        <td>
          15106
          -
          15119
        </td>
        <td>
          Apply
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.KnnCalculator.fi_=
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          KnnCalculator.this.fi_=(KnnCalculator.this.farthest)
        </td>
      </tr><tr>
        <td>
          384
        </td>
        <td>
          48338
        </td>
        <td>
          15334
          -
          15341
        </td>
        <td>
          Select
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.KnnCalculator.results
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          KnnCalculator.this.results
        </td>
      </tr><tr>
        <td>
          384
        </td>
        <td>
          48339
        </td>
        <td>
          15334
          -
          15353
        </td>
        <td>
          Select
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.FeatureWithDistance.meters
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          scala.Predef.refArrayOps[org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.FeatureWithDistance](KnnCalculator.this.results).head.meters
        </td>
      </tr><tr>
        <td>
          385
        </td>
        <td>
          48340
        </td>
        <td>
          15373
          -
          15374
        </td>
        <td>
          Literal
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          0
        </td>
      </tr><tr>
        <td>
          386
        </td>
        <td>
          48341
        </td>
        <td>
          15389
          -
          15390
        </td>
        <td>
          Literal
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          1
        </td>
      </tr><tr>
        <td>
          387
        </td>
        <td>
          48342
        </td>
        <td>
          15408
          -
          15422
        </td>
        <td>
          Select
        </td>
        <td>
          scala.Array.length
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          KnnCalculator.this.results.length
        </td>
      </tr><tr>
        <td>
          387
        </td>
        <td>
          48343
        </td>
        <td>
          15404
          -
          15422
        </td>
        <td>
          Apply
        </td>
        <td>
          scala.Int.&lt;
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          i.&lt;(KnnCalculator.this.results.length)
        </td>
      </tr><tr>
        <td>
          387
        </td>
        <td>
          48350
        </td>
        <td>
          15424
          -
          15424
        </td>
        <td>
          Apply
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.KnnCalculator.while$6
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          while$6()
        </td>
      </tr><tr>
        <td>
          387
        </td>
        <td>
          48351
        </td>
        <td>
          15424
          -
          15552
        </td>
        <td>
          Block
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          {
  {
    if (KnnCalculator.this.results.apply(i).meters.&gt;(max))
      {
        max = KnnCalculator.this.results.apply(i).meters;
        result = i
      }
    else
      ();
    i = i.+(1)
  };
  while$6()
}
        </td>
      </tr><tr>
        <td>
          387
        </td>
        <td>
          48352
        </td>
        <td>
          15397
          -
          15397
        </td>
        <td>
          Literal
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          ()
        </td>
      </tr><tr>
        <td>
          387
        </td>
        <td>
          48353
        </td>
        <td>
          15397
          -
          15397
        </td>
        <td>
          Block
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          ()
        </td>
      </tr><tr>
        <td>
          388
        </td>
        <td>
          48344
        </td>
        <td>
          15438
          -
          15461
        </td>
        <td>
          Apply
        </td>
        <td>
          scala.Double.&gt;
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          KnnCalculator.this.results.apply(i).meters.&gt;(max)
        </td>
      </tr><tr>
        <td>
          388
        </td>
        <td>
          48346
        </td>
        <td>
          15463
          -
          15529
        </td>
        <td>
          Block
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          {
  max = KnnCalculator.this.results.apply(i).meters;
  result = i
}
        </td>
      </tr><tr>
        <td>
          388
        </td>
        <td>
          48347
        </td>
        <td>
          15434
          -
          15434
        </td>
        <td>
          Literal
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          ()
        </td>
      </tr><tr>
        <td>
          388
        </td>
        <td>
          48348
        </td>
        <td>
          15434
          -
          15434
        </td>
        <td>
          Block
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          ()
        </td>
      </tr><tr>
        <td>
          389
        </td>
        <td>
          48345
        </td>
        <td>
          15481
          -
          15498
        </td>
        <td>
          Select
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.FeatureWithDistance.meters
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          KnnCalculator.this.results.apply(i).meters
        </td>
      </tr><tr>
        <td>
          392
        </td>
        <td>
          48349
        </td>
        <td>
          15538
          -
          15544
        </td>
        <td>
          Apply
        </td>
        <td>
          scala.Int.+
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          i.+(1)
        </td>
      </tr><tr>
        <td>
          405
        </td>
        <td>
          48354
        </td>
        <td>
          15918
          -
          15924
        </td>
        <td>
          Select
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.FeatureWithDistance.meters
        </td>
        <td>
          
        </td>
        <td style="background: #F0ADAD">
          FeatureWithDistance.this.meters
        </td>
      </tr><tr>
        <td>
          405
        </td>
        <td>
          48355
        </td>
        <td>
          15926
          -
          15934
        </td>
        <td>
          Select
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.FeatureWithDistance.meters
        </td>
        <td>
          
        </td>
        <td style="background: #F0ADAD">
          o.meters
        </td>
      </tr><tr>
        <td>
          405
        </td>
        <td>
          48356
        </td>
        <td>
          15893
          -
          15935
        </td>
        <td>
          Apply
        </td>
        <td>
          java.lang.Double.compare
        </td>
        <td>
          
        </td>
        <td style="background: #F0ADAD">
          java.lang.Double.compare(FeatureWithDistance.this.meters, o.meters)
        </td>
      </tr><tr>
        <td>
          423
        </td>
        <td>
          48357
        </td>
        <td>
          16406
          -
          16410
        </td>
        <td>
          Select
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.QueryEnvelope.hole
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          QueryEnvelope.this.hole
        </td>
      </tr><tr>
        <td>
          424
        </td>
        <td>
          48358
        </td>
        <td>
          16440
          -
          16456
        </td>
        <td>
          Select
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope.toWorld
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          QueryEnvelope.this.envelope.toWorld
        </td>
      </tr><tr>
        <td>
          424
        </td>
        <td>
          48359
        </td>
        <td>
          16440
          -
          16456
        </td>
        <td>
          Block
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope.toWorld
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          QueryEnvelope.this.envelope.toWorld
        </td>
      </tr><tr>
        <td>
          425
        </td>
        <td>
          48369
        </td>
        <td>
          16478
          -
          16617
        </td>
        <td>
          Block
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          {
  val holes: Seq[org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope] = h.toWorld;
  QueryEnvelope.this.envelope.toWorld.flatMap[org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope, Seq[org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope]](((e: org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope) =&gt; holes.foldLeft[Seq[org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope]](scala.collection.Seq.apply[org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope](e))(((x0$1: Seq[org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope], x1$1: org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope) =&gt; scala.Tuple2.apply[Seq[org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope], org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope](x0$1, x1$1) match {
    case (_1: Seq[org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope], _2: org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope)(Seq[org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope], org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope)((r @ _), (h @ _)) =&gt; r.flatMap[org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope, Seq[org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope]](((x$7: org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope) =&gt; x$7.minus(h)))(collection.this.Seq.canBuildFrom[org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope])
  }))))(collection.this.Seq.canBuildFrom[org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope])
}
        </td>
      </tr><tr>
        <td>
          426
        </td>
        <td>
          48360
        </td>
        <td>
          16503
          -
          16512
        </td>
        <td>
          Select
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope.toWorld
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          h.toWorld
        </td>
      </tr><tr>
        <td>
          427
        </td>
        <td>
          48361
        </td>
        <td>
          16568
          -
          16574
        </td>
        <td>
          Apply
        </td>
        <td>
          scala.collection.generic.GenericCompanion.apply
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          scala.collection.Seq.apply[org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope](e)
        </td>
      </tr><tr>
        <td>
          427
        </td>
        <td>
          48362
        </td>
        <td>
          16603
          -
          16613
        </td>
        <td>
          Apply
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope.minus
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          x$7.minus(h)
        </td>
      </tr><tr>
        <td>
          427
        </td>
        <td>
          48363
        </td>
        <td>
          16602
          -
          16602
        </td>
        <td>
          TypeApply
        </td>
        <td>
          scala.collection.Seq.canBuildFrom
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          collection.this.Seq.canBuildFrom[org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope]
        </td>
      </tr><tr>
        <td>
          427
        </td>
        <td>
          48364
        </td>
        <td>
          16593
          -
          16614
        </td>
        <td>
          ApplyToImplicitArgs
        </td>
        <td>
          scala.collection.TraversableLike.flatMap
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          r.flatMap[org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope, Seq[org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope]](((x$7: org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope) =&gt; x$7.minus(h)))(collection.this.Seq.canBuildFrom[org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope])
        </td>
      </tr><tr>
        <td>
          427
        </td>
        <td>
          48365
        </td>
        <td>
          16593
          -
          16614
        </td>
        <td>
          Block
        </td>
        <td>
          scala.collection.TraversableLike.flatMap
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          r.flatMap[org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope, Seq[org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope]](((x$7: org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope) =&gt; x$7.minus(h)))(collection.this.Seq.canBuildFrom[org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope])
        </td>
      </tr><tr>
        <td>
          427
        </td>
        <td>
          48366
        </td>
        <td>
          16553
          -
          16616
        </td>
        <td>
          Apply
        </td>
        <td>
          scala.collection.TraversableOnce.foldLeft
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          holes.foldLeft[Seq[org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope]](scala.collection.Seq.apply[org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope](e))(((x0$1: Seq[org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope], x1$1: org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope) =&gt; scala.Tuple2.apply[Seq[org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope], org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope](x0$1, x1$1) match {
  case (_1: Seq[org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope], _2: org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope)(Seq[org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope], org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope)((r @ _), (h @ _)) =&gt; r.flatMap[org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope, Seq[org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope]](((x$7: org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope) =&gt; x$7.minus(h)))(collection.this.Seq.canBuildFrom[org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope])
}))
        </td>
      </tr><tr>
        <td>
          427
        </td>
        <td>
          48367
        </td>
        <td>
          16547
          -
          16547
        </td>
        <td>
          TypeApply
        </td>
        <td>
          scala.collection.Seq.canBuildFrom
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          collection.this.Seq.canBuildFrom[org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope]
        </td>
      </tr><tr>
        <td>
          427
        </td>
        <td>
          48368
        </td>
        <td>
          16523
          -
          16617
        </td>
        <td>
          ApplyToImplicitArgs
        </td>
        <td>
          scala.collection.TraversableLike.flatMap
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          QueryEnvelope.this.envelope.toWorld.flatMap[org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope, Seq[org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope]](((e: org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope) =&gt; holes.foldLeft[Seq[org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope]](scala.collection.Seq.apply[org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope](e))(((x0$1: Seq[org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope], x1$1: org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope) =&gt; scala.Tuple2.apply[Seq[org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope], org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope](x0$1, x1$1) match {
  case (_1: Seq[org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope], _2: org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope)(Seq[org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope], org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope)((r @ _), (h @ _)) =&gt; r.flatMap[org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope, Seq[org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope]](((x$7: org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope) =&gt; x$7.minus(h)))(collection.this.Seq.canBuildFrom[org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope])
}))))(collection.this.Seq.canBuildFrom[org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope])
        </td>
      </tr><tr>
        <td>
          436
        </td>
        <td>
          48370
        </td>
        <td>
          16746
          -
          16750
        </td>
        <td>
          Select
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.QueryEnvelope.hole
        </td>
        <td>
          
        </td>
        <td style="background: #F0ADAD">
          QueryEnvelope.this.hole
        </td>
      </tr><tr>
        <td>
          437
        </td>
        <td>
          48371
        </td>
        <td>
          16782
          -
          16796
        </td>
        <td>
          Select
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope.debug
        </td>
        <td>
          
        </td>
        <td style="background: #F0ADAD">
          QueryEnvelope.this.envelope.debug
        </td>
      </tr><tr>
        <td>
          437
        </td>
        <td>
          48372
        </td>
        <td>
          16778
          -
          16797
        </td>
        <td>
          Apply
        </td>
        <td>
          scala.collection.generic.GenericCompanion.apply
        </td>
        <td>
          
        </td>
        <td style="background: #F0ADAD">
          scala.collection.Seq.apply[String](QueryEnvelope.this.envelope.debug)
        </td>
      </tr><tr>
        <td>
          437
        </td>
        <td>
          48373
        </td>
        <td>
          16778
          -
          16797
        </td>
        <td>
          Block
        </td>
        <td>
          scala.collection.generic.GenericCompanion.apply
        </td>
        <td>
          
        </td>
        <td style="background: #F0ADAD">
          scala.collection.Seq.apply[String](QueryEnvelope.this.envelope.debug)
        </td>
      </tr><tr>
        <td>
          438
        </td>
        <td>
          48382
        </td>
        <td>
          16817
          -
          16928
        </td>
        <td>
          Block
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td>
          
        </td>
        <td style="background: #F0ADAD">
          {
  val diff: Seq[org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope] = QueryEnvelope.this.envelope.minus(h);
  if (diff.isEmpty)
    scala.collection.Seq.apply[String](&quot;[empty]&quot;)
  else
    diff.map[String, Seq[String]](((x$8: org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope) =&gt; x$8.debug))(collection.this.Seq.canBuildFrom[String])
}
        </td>
      </tr><tr>
        <td>
          439
        </td>
        <td>
          48374
        </td>
        <td>
          16839
          -
          16856
        </td>
        <td>
          Apply
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope.minus
        </td>
        <td>
          
        </td>
        <td style="background: #F0ADAD">
          QueryEnvelope.this.envelope.minus(h)
        </td>
      </tr><tr>
        <td>
          440
        </td>
        <td>
          48375
        </td>
        <td>
          16869
          -
          16881
        </td>
        <td>
          Select
        </td>
        <td>
          scala.collection.SeqLike.isEmpty
        </td>
        <td>
          
        </td>
        <td style="background: #F0ADAD">
          diff.isEmpty
        </td>
      </tr><tr>
        <td>
          440
        </td>
        <td>
          48376
        </td>
        <td>
          16885
          -
          16899
        </td>
        <td>
          Apply
        </td>
        <td>
          scala.collection.generic.GenericCompanion.apply
        </td>
        <td>
          
        </td>
        <td style="background: #F0ADAD">
          scala.collection.Seq.apply[String](&quot;[empty]&quot;)
        </td>
      </tr><tr>
        <td>
          440
        </td>
        <td>
          48377
        </td>
        <td>
          16885
          -
          16899
        </td>
        <td>
          Block
        </td>
        <td>
          scala.collection.generic.GenericCompanion.apply
        </td>
        <td>
          
        </td>
        <td style="background: #F0ADAD">
          scala.collection.Seq.apply[String](&quot;[empty]&quot;)
        </td>
      </tr><tr>
        <td>
          440
        </td>
        <td>
          48378
        </td>
        <td>
          16918
          -
          16925
        </td>
        <td>
          Select
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope.debug
        </td>
        <td>
          
        </td>
        <td style="background: #F0ADAD">
          x$8.debug
        </td>
      </tr><tr>
        <td>
          440
        </td>
        <td>
          48379
        </td>
        <td>
          16917
          -
          16917
        </td>
        <td>
          TypeApply
        </td>
        <td>
          scala.collection.Seq.canBuildFrom
        </td>
        <td>
          
        </td>
        <td style="background: #F0ADAD">
          collection.this.Seq.canBuildFrom[String]
        </td>
      </tr><tr>
        <td>
          440
        </td>
        <td>
          48380
        </td>
        <td>
          16909
          -
          16926
        </td>
        <td>
          ApplyToImplicitArgs
        </td>
        <td>
          scala.collection.TraversableLike.map
        </td>
        <td>
          
        </td>
        <td style="background: #F0ADAD">
          diff.map[String, Seq[String]](((x$8: org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope) =&gt; x$8.debug))(collection.this.Seq.canBuildFrom[String])
        </td>
      </tr><tr>
        <td>
          440
        </td>
        <td>
          48381
        </td>
        <td>
          16909
          -
          16926
        </td>
        <td>
          Block
        </td>
        <td>
          scala.collection.TraversableLike.map
        </td>
        <td>
          
        </td>
        <td style="background: #F0ADAD">
          diff.map[String, Seq[String]](((x$8: org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope) =&gt; x$8.debug))(collection.this.Seq.canBuildFrom[String])
        </td>
      </tr><tr>
        <td>
          454
        </td>
        <td>
          48383
        </td>
        <td>
          17276
          -
          17280
        </td>
        <td>
          Select
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope.xmax
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          Envelope.this.xmax
        </td>
      </tr><tr>
        <td>
          454
        </td>
        <td>
          48384
        </td>
        <td>
          17292
          -
          17296
        </td>
        <td>
          Select
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope.ymax
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          Envelope.this.ymax
        </td>
      </tr><tr>
        <td>
          454
        </td>
        <td>
          48385
        </td>
        <td>
          17284
          -
          17296
        </td>
        <td>
          Apply
        </td>
        <td>
          scala.Double.&lt;=
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          Envelope.this.ymin.&lt;=(Envelope.this.ymax)
        </td>
      </tr><tr>
        <td>
          454
        </td>
        <td>
          48386
        </td>
        <td>
          17268
          -
          17296
        </td>
        <td>
          Apply
        </td>
        <td>
          scala.Boolean.&amp;&amp;
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          Envelope.this.xmin.&lt;=(Envelope.this.xmax).&amp;&amp;(Envelope.this.ymin.&lt;=(Envelope.this.ymax))
        </td>
      </tr><tr>
        <td>
          454
        </td>
        <td>
          48387
        </td>
        <td>
          17300
          -
          17324
        </td>
        <td>
          Literal
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td>
          
        </td>
        <td style="background: #F0ADAD">
          &quot;Envelope is inverted: [&quot;
        </td>
      </tr><tr>
        <td>
          454
        </td>
        <td>
          48388
        </td>
        <td>
          17328
          -
          17331
        </td>
        <td>
          Literal
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td>
          
        </td>
        <td style="background: #F0ADAD">
          &quot;, &quot;
        </td>
      </tr><tr>
        <td>
          454
        </td>
        <td>
          48389
        </td>
        <td>
          17335
          -
          17338
        </td>
        <td>
          Literal
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td>
          
        </td>
        <td style="background: #F0ADAD">
          &quot;, &quot;
        </td>
      </tr><tr>
        <td>
          454
        </td>
        <td>
          48390
        </td>
        <td>
          17342
          -
          17345
        </td>
        <td>
          Literal
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td>
          
        </td>
        <td style="background: #F0ADAD">
          &quot;, &quot;
        </td>
      </tr><tr>
        <td>
          454
        </td>
        <td>
          48391
        </td>
        <td>
          17349
          -
          17351
        </td>
        <td>
          Literal
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td>
          
        </td>
        <td style="background: #F0ADAD">
          &quot;]&quot;
        </td>
      </tr><tr>
        <td>
          454
        </td>
        <td>
          48392
        </td>
        <td>
          17324
          -
          17328
        </td>
        <td>
          Select
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope.xmin
        </td>
        <td>
          
        </td>
        <td style="background: #F0ADAD">
          Envelope.this.xmin
        </td>
      </tr><tr>
        <td>
          454
        </td>
        <td>
          48393
        </td>
        <td>
          17331
          -
          17335
        </td>
        <td>
          Select
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope.xmax
        </td>
        <td>
          
        </td>
        <td style="background: #F0ADAD">
          Envelope.this.xmax
        </td>
      </tr><tr>
        <td>
          454
        </td>
        <td>
          48394
        </td>
        <td>
          17338
          -
          17342
        </td>
        <td>
          Select
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope.ymin
        </td>
        <td>
          
        </td>
        <td style="background: #F0ADAD">
          Envelope.this.ymin
        </td>
      </tr><tr>
        <td>
          454
        </td>
        <td>
          48395
        </td>
        <td>
          17345
          -
          17349
        </td>
        <td>
          Select
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope.ymax
        </td>
        <td>
          
        </td>
        <td style="background: #F0ADAD">
          Envelope.this.ymax
        </td>
      </tr><tr>
        <td>
          454
        </td>
        <td>
          48396
        </td>
        <td>
          17298
          -
          17351
        </td>
        <td>
          Apply
        </td>
        <td>
          scala.StringContext.s
        </td>
        <td>
          
        </td>
        <td style="background: #F0ADAD">
          scala.StringContext.apply(&quot;Envelope is inverted: [&quot;, &quot;, &quot;, &quot;, &quot;, &quot;, &quot;, &quot;]&quot;).s(Envelope.this.xmin, Envelope.this.xmax, Envelope.this.ymin, Envelope.this.ymax)
        </td>
      </tr><tr>
        <td>
          454
        </td>
        <td>
          48397
        </td>
        <td>
          17260
          -
          17352
        </td>
        <td>
          Apply
        </td>
        <td>
          scala.Predef.require
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          scala.Predef.require(Envelope.this.xmin.&lt;=(Envelope.this.xmax).&amp;&amp;(Envelope.this.ymin.&lt;=(Envelope.this.ymax)), scala.StringContext.apply(&quot;Envelope is inverted: [&quot;, &quot;, &quot;, &quot;, &quot;, &quot;, &quot;, &quot;]&quot;).s(Envelope.this.xmin, Envelope.this.xmax, Envelope.this.ymin, Envelope.this.ymax))
        </td>
      </tr><tr>
        <td>
          466
        </td>
        <td>
          48398
        </td>
        <td>
          17640
          -
          17644
        </td>
        <td>
          Select
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope.xmin
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          Envelope.this.xmin
        </td>
      </tr><tr>
        <td>
          466
        </td>
        <td>
          48399
        </td>
        <td>
          17646
          -
          17656
        </td>
        <td>
          Select
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope.xmin
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          other.xmin
        </td>
      </tr><tr>
        <td>
          466
        </td>
        <td>
          48400
        </td>
        <td>
          17631
          -
          17657
        </td>
        <td>
          Apply
        </td>
        <td>
          scala.math.max
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          scala.math.`package`.max(Envelope.this.xmin, other.xmin)
        </td>
      </tr><tr>
        <td>
          467
        </td>
        <td>
          48401
        </td>
        <td>
          17685
          -
          17689
        </td>
        <td>
          Select
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope.xmax
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          Envelope.this.xmax
        </td>
      </tr><tr>
        <td>
          467
        </td>
        <td>
          48402
        </td>
        <td>
          17691
          -
          17701
        </td>
        <td>
          Select
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope.xmax
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          other.xmax
        </td>
      </tr><tr>
        <td>
          467
        </td>
        <td>
          48403
        </td>
        <td>
          17676
          -
          17702
        </td>
        <td>
          Apply
        </td>
        <td>
          scala.math.min
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          scala.math.`package`.min(Envelope.this.xmax, other.xmax)
        </td>
      </tr><tr>
        <td>
          468
        </td>
        <td>
          48404
        </td>
        <td>
          17713
          -
          17726
        </td>
        <td>
          Apply
        </td>
        <td>
          scala.Double.&gt;
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          ixmin.&gt;(ixmax)
        </td>
      </tr><tr>
        <td>
          468
        </td>
        <td>
          48405
        </td>
        <td>
          17730
          -
          17734
        </td>
        <td>
          Select
        </td>
        <td>
          scala.None
        </td>
        <td>
          
        </td>
        <td style="background: #F0ADAD">
          scala.None
        </td>
      </tr><tr>
        <td>
          468
        </td>
        <td>
          48406
        </td>
        <td>
          17730
          -
          17734
        </td>
        <td>
          Block
        </td>
        <td>
          scala.None
        </td>
        <td>
          
        </td>
        <td style="background: #F0ADAD">
          scala.None
        </td>
      </tr><tr>
        <td>
          468
        </td>
        <td>
          48419
        </td>
        <td>
          17742
          -
          17951
        </td>
        <td>
          Block
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          {
  val iymin: Double = scala.math.`package`.max(Envelope.this.ymin, other.ymin);
  val iymax: Double = scala.math.`package`.min(Envelope.this.ymax, other.ymax);
  if (iymin.&gt;(iymax))
    scala.None
  else
    scala.Some.apply[org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope](KNearestNeighborSearchProcess.this.Envelope.apply(ixmin, ixmax, iymin, iymax))
}
        </td>
      </tr><tr>
        <td>
          469
        </td>
        <td>
          48407
        </td>
        <td>
          17773
          -
          17777
        </td>
        <td>
          Select
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope.ymin
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          Envelope.this.ymin
        </td>
      </tr><tr>
        <td>
          469
        </td>
        <td>
          48408
        </td>
        <td>
          17779
          -
          17789
        </td>
        <td>
          Select
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope.ymin
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          other.ymin
        </td>
      </tr><tr>
        <td>
          469
        </td>
        <td>
          48409
        </td>
        <td>
          17764
          -
          17790
        </td>
        <td>
          Apply
        </td>
        <td>
          scala.math.max
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          scala.math.`package`.max(Envelope.this.ymin, other.ymin)
        </td>
      </tr><tr>
        <td>
          470
        </td>
        <td>
          48410
        </td>
        <td>
          17820
          -
          17824
        </td>
        <td>
          Select
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope.ymax
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          Envelope.this.ymax
        </td>
      </tr><tr>
        <td>
          470
        </td>
        <td>
          48411
        </td>
        <td>
          17826
          -
          17836
        </td>
        <td>
          Select
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope.ymax
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          other.ymax
        </td>
      </tr><tr>
        <td>
          470
        </td>
        <td>
          48412
        </td>
        <td>
          17811
          -
          17837
        </td>
        <td>
          Apply
        </td>
        <td>
          scala.math.min
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          scala.math.`package`.min(Envelope.this.ymax, other.ymax)
        </td>
      </tr><tr>
        <td>
          471
        </td>
        <td>
          48413
        </td>
        <td>
          17850
          -
          17863
        </td>
        <td>
          Apply
        </td>
        <td>
          scala.Double.&gt;
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          iymin.&gt;(iymax)
        </td>
      </tr><tr>
        <td>
          471
        </td>
        <td>
          48414
        </td>
        <td>
          17867
          -
          17871
        </td>
        <td>
          Select
        </td>
        <td>
          scala.None
        </td>
        <td>
          
        </td>
        <td style="background: #F0ADAD">
          scala.None
        </td>
      </tr><tr>
        <td>
          471
        </td>
        <td>
          48415
        </td>
        <td>
          17867
          -
          17871
        </td>
        <td>
          Block
        </td>
        <td>
          scala.None
        </td>
        <td>
          
        </td>
        <td style="background: #F0ADAD">
          scala.None
        </td>
      </tr><tr>
        <td>
          472
        </td>
        <td>
          48416
        </td>
        <td>
          17896
          -
          17932
        </td>
        <td>
          Apply
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope.apply
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          KNearestNeighborSearchProcess.this.Envelope.apply(ixmin, ixmax, iymin, iymax)
        </td>
      </tr><tr>
        <td>
          472
        </td>
        <td>
          48417
        </td>
        <td>
          17891
          -
          17933
        </td>
        <td>
          Apply
        </td>
        <td>
          scala.Some.apply
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          scala.Some.apply[org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope](KNearestNeighborSearchProcess.this.Envelope.apply(ixmin, ixmax, iymin, iymax))
        </td>
      </tr><tr>
        <td>
          472
        </td>
        <td>
          48418
        </td>
        <td>
          17891
          -
          17933
        </td>
        <td>
          Block
        </td>
        <td>
          scala.Some.apply
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          scala.Some.apply[org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope](KNearestNeighborSearchProcess.this.Envelope.apply(ixmin, ixmax, iymin, iymax))
        </td>
      </tr><tr>
        <td>
          484
        </td>
        <td>
          48420
        </td>
        <td>
          18143
          -
          18147
        </td>
        <td>
          Select
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope.xmax
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          Envelope.this.xmax
        </td>
      </tr><tr>
        <td>
          484
        </td>
        <td>
          48421
        </td>
        <td>
          18165
          -
          18169
        </td>
        <td>
          Select
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope.xmin
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          Envelope.this.xmin
        </td>
      </tr><tr>
        <td>
          484
        </td>
        <td>
          48422
        </td>
        <td>
          18151
          -
          18169
        </td>
        <td>
          Apply
        </td>
        <td>
          scala.Double.&gt;=
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          other.xmax.&gt;=(Envelope.this.xmin)
        </td>
      </tr><tr>
        <td>
          484
        </td>
        <td>
          48423
        </td>
        <td>
          18187
          -
          18191
        </td>
        <td>
          Select
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope.ymax
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          Envelope.this.ymax
        </td>
      </tr><tr>
        <td>
          484
        </td>
        <td>
          48424
        </td>
        <td>
          18173
          -
          18191
        </td>
        <td>
          Apply
        </td>
        <td>
          scala.Double.&lt;=
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          other.ymin.&lt;=(Envelope.this.ymax)
        </td>
      </tr><tr>
        <td>
          484
        </td>
        <td>
          48425
        </td>
        <td>
          18209
          -
          18213
        </td>
        <td>
          Select
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope.ymin
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          Envelope.this.ymin
        </td>
      </tr><tr>
        <td>
          484
        </td>
        <td>
          48426
        </td>
        <td>
          18195
          -
          18213
        </td>
        <td>
          Apply
        </td>
        <td>
          scala.Double.&gt;=
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          other.ymax.&gt;=(Envelope.this.ymin)
        </td>
      </tr><tr>
        <td>
          484
        </td>
        <td>
          48427
        </td>
        <td>
          18129
          -
          18213
        </td>
        <td>
          Apply
        </td>
        <td>
          scala.Boolean.&amp;&amp;
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          other.xmin.&lt;=(Envelope.this.xmax).&amp;&amp;(other.xmax.&gt;=(Envelope.this.xmin)).&amp;&amp;(other.ymin.&lt;=(Envelope.this.ymax)).&amp;&amp;(other.ymax.&gt;=(Envelope.this.ymin))
        </td>
      </tr><tr>
        <td>
          496
        </td>
        <td>
          48428
        </td>
        <td>
          18626
          -
          18644
        </td>
        <td>
          Select
        </td>
        <td>
          scala.Boolean.unary_!
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          Envelope.this.intersects(other).unary_!
        </td>
      </tr><tr>
        <td>
          496
        </td>
        <td>
          48429
        </td>
        <td>
          18648
          -
          18657
        </td>
        <td>
          Apply
        </td>
        <td>
          scala.collection.generic.GenericCompanion.apply
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          scala.collection.Seq.apply[org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope](this)
        </td>
      </tr><tr>
        <td>
          496
        </td>
        <td>
          48430
        </td>
        <td>
          18648
          -
          18657
        </td>
        <td>
          Block
        </td>
        <td>
          scala.collection.generic.GenericCompanion.apply
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          scala.collection.Seq.apply[org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope](this)
        </td>
      </tr><tr>
        <td>
          496
        </td>
        <td>
          48467
        </td>
        <td>
          18665
          -
          19487
        </td>
        <td>
          Block
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          {
  val builder: scala.collection.mutable.Builder[org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope,Seq[org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope]] = scala.collection.Seq.newBuilder[org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope];
  val sidemax: Double = if (other.ymax.&gt;=(Envelope.this.ymax))
    Envelope.this.ymax
  else
    {
      builder.+=({
        &lt;artifact&gt; val x$1: Double = other.ymax;
        &lt;artifact&gt; val x$2: Double = Envelope.this.copy$default$1;
        &lt;artifact&gt; val x$3: Double = Envelope.this.copy$default$2;
        &lt;artifact&gt; val x$4: Double = Envelope.this.copy$default$4;
        Envelope.this.copy(x$2, x$3, x$1, x$4)
      });
      other.ymax
    };
  val sidemin: Double = if (other.ymin.&lt;=(Envelope.this.ymin))
    Envelope.this.ymin
  else
    {
      builder.+=({
        &lt;artifact&gt; val x$5: Double = other.ymin;
        &lt;artifact&gt; val x$6: Double = Envelope.this.copy$default$1;
        &lt;artifact&gt; val x$7: Double = Envelope.this.copy$default$2;
        &lt;artifact&gt; val x$8: Double = Envelope.this.copy$default$3;
        Envelope.this.copy(x$6, x$7, x$8, x$5)
      });
      other.ymin
    };
  if (other.xmin.&gt;(Envelope.this.xmin))
    builder.+=({
      &lt;artifact&gt; val x$9: Double = other.xmin;
      &lt;artifact&gt; val x$10: Double = sidemin;
      &lt;artifact&gt; val x$11: Double = sidemax;
      &lt;artifact&gt; val x$12: Double = Envelope.this.copy$default$1;
      Envelope.this.copy(x$12, x$9, x$10, x$11)
    })
  else
    ();
  if (other.xmax.&lt;(Envelope.this.xmax))
    builder.+=({
      &lt;artifact&gt; val x$13: Double = other.xmax;
      &lt;artifact&gt; val x$14: Double = sidemin;
      &lt;artifact&gt; val x$15: Double = sidemax;
      &lt;artifact&gt; val x$16: Double = Envelope.this.copy$default$2;
      Envelope.this.copy(x$13, x$16, x$14, x$15)
    })
  else
    ();
  builder.result()
}
        </td>
      </tr><tr>
        <td>
          497
        </td>
        <td>
          48431
        </td>
        <td>
          18689
          -
          18713
        </td>
        <td>
          TypeApply
        </td>
        <td>
          scala.collection.Seq.newBuilder
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          scala.collection.Seq.newBuilder[org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope]
        </td>
      </tr><tr>
        <td>
          499
        </td>
        <td>
          48432
        </td>
        <td>
          18841
          -
          18845
        </td>
        <td>
          Select
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope.ymax
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          Envelope.this.ymax
        </td>
      </tr><tr>
        <td>
          499
        </td>
        <td>
          48433
        </td>
        <td>
          18827
          -
          18845
        </td>
        <td>
          Apply
        </td>
        <td>
          scala.Double.&gt;=
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          other.ymax.&gt;=(Envelope.this.ymax)
        </td>
      </tr><tr>
        <td>
          499
        </td>
        <td>
          48434
        </td>
        <td>
          18849
          -
          18853
        </td>
        <td>
          Select
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope.ymax
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          Envelope.this.ymax
        </td>
      </tr><tr>
        <td>
          499
        </td>
        <td>
          48435
        </td>
        <td>
          18849
          -
          18853
        </td>
        <td>
          Block
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope.ymax
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          Envelope.this.ymax
        </td>
      </tr><tr>
        <td>
          499
        </td>
        <td>
          48440
        </td>
        <td>
          18861
          -
          18938
        </td>
        <td>
          Block
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          {
  builder.+=({
    &lt;artifact&gt; val x$1: Double = other.ymax;
    &lt;artifact&gt; val x$2: Double = Envelope.this.copy$default$1;
    &lt;artifact&gt; val x$3: Double = Envelope.this.copy$default$2;
    &lt;artifact&gt; val x$4: Double = Envelope.this.copy$default$4;
    Envelope.this.copy(x$2, x$3, x$1, x$4)
  });
  other.ymax
}
        </td>
      </tr><tr>
        <td>
          500
        </td>
        <td>
          48436
        </td>
        <td>
          18896
          -
          18906
        </td>
        <td>
          Select
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope.ymax
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          other.ymax
        </td>
      </tr><tr>
        <td>
          500
        </td>
        <td>
          48437
        </td>
        <td>
          18884
          -
          18907
        </td>
        <td>
          Apply
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope.copy
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          Envelope.this.copy(x$2, x$3, x$1, x$4)
        </td>
      </tr><tr>
        <td>
          500
        </td>
        <td>
          48438
        </td>
        <td>
          18873
          -
          18907
        </td>
        <td>
          Apply
        </td>
        <td>
          scala.collection.mutable.Builder.+=
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          builder.+=({
  &lt;artifact&gt; val x$1: Double = other.ymax;
  &lt;artifact&gt; val x$2: Double = Envelope.this.copy$default$1;
  &lt;artifact&gt; val x$3: Double = Envelope.this.copy$default$2;
  &lt;artifact&gt; val x$4: Double = Envelope.this.copy$default$4;
  Envelope.this.copy(x$2, x$3, x$1, x$4)
})
        </td>
      </tr><tr>
        <td>
          501
        </td>
        <td>
          48439
        </td>
        <td>
          18918
          -
          18928
        </td>
        <td>
          Select
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope.ymax
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          other.ymax
        </td>
      </tr><tr>
        <td>
          504
        </td>
        <td>
          48441
        </td>
        <td>
          19069
          -
          19073
        </td>
        <td>
          Select
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope.ymin
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          Envelope.this.ymin
        </td>
      </tr><tr>
        <td>
          504
        </td>
        <td>
          48442
        </td>
        <td>
          19055
          -
          19073
        </td>
        <td>
          Apply
        </td>
        <td>
          scala.Double.&lt;=
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          other.ymin.&lt;=(Envelope.this.ymin)
        </td>
      </tr><tr>
        <td>
          504
        </td>
        <td>
          48443
        </td>
        <td>
          19077
          -
          19081
        </td>
        <td>
          Select
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope.ymin
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          Envelope.this.ymin
        </td>
      </tr><tr>
        <td>
          504
        </td>
        <td>
          48444
        </td>
        <td>
          19077
          -
          19081
        </td>
        <td>
          Block
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope.ymin
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          Envelope.this.ymin
        </td>
      </tr><tr>
        <td>
          504
        </td>
        <td>
          48449
        </td>
        <td>
          19089
          -
          19166
        </td>
        <td>
          Block
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          {
  builder.+=({
    &lt;artifact&gt; val x$5: Double = other.ymin;
    &lt;artifact&gt; val x$6: Double = Envelope.this.copy$default$1;
    &lt;artifact&gt; val x$7: Double = Envelope.this.copy$default$2;
    &lt;artifact&gt; val x$8: Double = Envelope.this.copy$default$3;
    Envelope.this.copy(x$6, x$7, x$8, x$5)
  });
  other.ymin
}
        </td>
      </tr><tr>
        <td>
          505
        </td>
        <td>
          48445
        </td>
        <td>
          19124
          -
          19134
        </td>
        <td>
          Select
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope.ymin
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          other.ymin
        </td>
      </tr><tr>
        <td>
          505
        </td>
        <td>
          48446
        </td>
        <td>
          19112
          -
          19135
        </td>
        <td>
          Apply
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope.copy
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          Envelope.this.copy(x$6, x$7, x$8, x$5)
        </td>
      </tr><tr>
        <td>
          505
        </td>
        <td>
          48447
        </td>
        <td>
          19101
          -
          19135
        </td>
        <td>
          Apply
        </td>
        <td>
          scala.collection.mutable.Builder.+=
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          builder.+=({
  &lt;artifact&gt; val x$5: Double = other.ymin;
  &lt;artifact&gt; val x$6: Double = Envelope.this.copy$default$1;
  &lt;artifact&gt; val x$7: Double = Envelope.this.copy$default$2;
  &lt;artifact&gt; val x$8: Double = Envelope.this.copy$default$3;
  Envelope.this.copy(x$6, x$7, x$8, x$5)
})
        </td>
      </tr><tr>
        <td>
          506
        </td>
        <td>
          48448
        </td>
        <td>
          19146
          -
          19156
        </td>
        <td>
          Select
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope.ymin
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          other.ymin
        </td>
      </tr><tr>
        <td>
          509
        </td>
        <td>
          48450
        </td>
        <td>
          19242
          -
          19246
        </td>
        <td>
          Select
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope.xmin
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          Envelope.this.xmin
        </td>
      </tr><tr>
        <td>
          509
        </td>
        <td>
          48451
        </td>
        <td>
          19229
          -
          19246
        </td>
        <td>
          Apply
        </td>
        <td>
          scala.Double.&gt;
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          other.xmin.&gt;(Envelope.this.xmin)
        </td>
      </tr><tr>
        <td>
          509
        </td>
        <td>
          48456
        </td>
        <td>
          19225
          -
          19225
        </td>
        <td>
          Literal
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          ()
        </td>
      </tr><tr>
        <td>
          509
        </td>
        <td>
          48457
        </td>
        <td>
          19225
          -
          19225
        </td>
        <td>
          Block
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          ()
        </td>
      </tr><tr>
        <td>
          510
        </td>
        <td>
          48452
        </td>
        <td>
          19283
          -
          19293
        </td>
        <td>
          Select
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope.xmin
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          other.xmin
        </td>
      </tr><tr>
        <td>
          510
        </td>
        <td>
          48453
        </td>
        <td>
          19271
          -
          19326
        </td>
        <td>
          Apply
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope.copy
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          Envelope.this.copy(x$12, x$9, x$10, x$11)
        </td>
      </tr><tr>
        <td>
          510
        </td>
        <td>
          48454
        </td>
        <td>
          19260
          -
          19326
        </td>
        <td>
          Apply
        </td>
        <td>
          scala.collection.mutable.Builder.+=
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          builder.+=({
  &lt;artifact&gt; val x$9: Double = other.xmin;
  &lt;artifact&gt; val x$10: Double = sidemin;
  &lt;artifact&gt; val x$11: Double = sidemax;
  &lt;artifact&gt; val x$12: Double = Envelope.this.copy$default$1;
  Envelope.this.copy(x$12, x$9, x$10, x$11)
})
        </td>
      </tr><tr>
        <td>
          510
        </td>
        <td>
          48455
        </td>
        <td>
          19260
          -
          19326
        </td>
        <td>
          Block
        </td>
        <td>
          scala.collection.mutable.Builder.+=
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          builder.+=({
  &lt;artifact&gt; val x$9: Double = other.xmin;
  &lt;artifact&gt; val x$10: Double = sidemin;
  &lt;artifact&gt; val x$11: Double = sidemax;
  &lt;artifact&gt; val x$12: Double = Envelope.this.copy$default$1;
  Envelope.this.copy(x$12, x$9, x$10, x$11)
})
        </td>
      </tr><tr>
        <td>
          512
        </td>
        <td>
          48458
        </td>
        <td>
          19362
          -
          19366
        </td>
        <td>
          Select
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope.xmax
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          Envelope.this.xmax
        </td>
      </tr><tr>
        <td>
          512
        </td>
        <td>
          48459
        </td>
        <td>
          19349
          -
          19366
        </td>
        <td>
          Apply
        </td>
        <td>
          scala.Double.&lt;
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          other.xmax.&lt;(Envelope.this.xmax)
        </td>
      </tr><tr>
        <td>
          512
        </td>
        <td>
          48464
        </td>
        <td>
          19345
          -
          19345
        </td>
        <td>
          Literal
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          ()
        </td>
      </tr><tr>
        <td>
          512
        </td>
        <td>
          48465
        </td>
        <td>
          19345
          -
          19345
        </td>
        <td>
          Block
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          ()
        </td>
      </tr><tr>
        <td>
          513
        </td>
        <td>
          48460
        </td>
        <td>
          19403
          -
          19413
        </td>
        <td>
          Select
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope.xmax
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          other.xmax
        </td>
      </tr><tr>
        <td>
          513
        </td>
        <td>
          48461
        </td>
        <td>
          19391
          -
          19446
        </td>
        <td>
          Apply
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope.copy
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          Envelope.this.copy(x$13, x$16, x$14, x$15)
        </td>
      </tr><tr>
        <td>
          513
        </td>
        <td>
          48462
        </td>
        <td>
          19380
          -
          19446
        </td>
        <td>
          Apply
        </td>
        <td>
          scala.collection.mutable.Builder.+=
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          builder.+=({
  &lt;artifact&gt; val x$13: Double = other.xmax;
  &lt;artifact&gt; val x$14: Double = sidemin;
  &lt;artifact&gt; val x$15: Double = sidemax;
  &lt;artifact&gt; val x$16: Double = Envelope.this.copy$default$2;
  Envelope.this.copy(x$13, x$16, x$14, x$15)
})
        </td>
      </tr><tr>
        <td>
          513
        </td>
        <td>
          48463
        </td>
        <td>
          19380
          -
          19446
        </td>
        <td>
          Block
        </td>
        <td>
          scala.collection.mutable.Builder.+=
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          builder.+=({
  &lt;artifact&gt; val x$13: Double = other.xmax;
  &lt;artifact&gt; val x$14: Double = sidemin;
  &lt;artifact&gt; val x$15: Double = sidemax;
  &lt;artifact&gt; val x$16: Double = Envelope.this.copy$default$2;
  Envelope.this.copy(x$13, x$16, x$14, x$15)
})
        </td>
      </tr><tr>
        <td>
          515
        </td>
        <td>
          48466
        </td>
        <td>
          19465
          -
          19479
        </td>
        <td>
          Apply
        </td>
        <td>
          scala.collection.mutable.Builder.result
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          builder.result()
        </td>
      </tr><tr>
        <td>
          528
        </td>
        <td>
          48468
        </td>
        <td>
          19861
          -
          19872
        </td>
        <td>
          Apply
        </td>
        <td>
          scala.Double.&lt;
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          Envelope.this.ymin.&lt;(-90.0)
        </td>
      </tr><tr>
        <td>
          529
        </td>
        <td>
          48469
        </td>
        <td>
          19897
          -
          19902
        </td>
        <td>
          Literal
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          -180.0
        </td>
      </tr><tr>
        <td>
          529
        </td>
        <td>
          48470
        </td>
        <td>
          19904
          -
          19908
        </td>
        <td>
          Literal
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          180.0
        </td>
      </tr><tr>
        <td>
          529
        </td>
        <td>
          48471
        </td>
        <td>
          19910
          -
          19913
        </td>
        <td>
          Literal
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          -90.0
        </td>
      </tr><tr>
        <td>
          529
        </td>
        <td>
          48472
        </td>
        <td>
          19924
          -
          19928
        </td>
        <td>
          Select
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope.ymax
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          Envelope.this.ymax
        </td>
      </tr><tr>
        <td>
          529
        </td>
        <td>
          48473
        </td>
        <td>
          19930
          -
          19933
        </td>
        <td>
          Literal
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          90.0
        </td>
      </tr><tr>
        <td>
          529
        </td>
        <td>
          48474
        </td>
        <td>
          19915
          -
          19934
        </td>
        <td>
          Apply
        </td>
        <td>
          scala.math.min
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          scala.math.`package`.min(Envelope.this.ymax, 90.0)
        </td>
      </tr><tr>
        <td>
          529
        </td>
        <td>
          48475
        </td>
        <td>
          19888
          -
          19935
        </td>
        <td>
          Apply
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope.apply
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          KNearestNeighborSearchProcess.this.Envelope.apply(-180.0, 180.0, -90.0, scala.math.`package`.min(Envelope.this.ymax, 90.0))
        </td>
      </tr><tr>
        <td>
          529
        </td>
        <td>
          48476
        </td>
        <td>
          19884
          -
          19936
        </td>
        <td>
          Apply
        </td>
        <td>
          scala.collection.generic.GenericCompanion.apply
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          scala.collection.Seq.apply[org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope](KNearestNeighborSearchProcess.this.Envelope.apply(-180.0, 180.0, -90.0, scala.math.`package`.min(Envelope.this.ymax, 90.0)))
        </td>
      </tr><tr>
        <td>
          529
        </td>
        <td>
          48477
        </td>
        <td>
          19884
          -
          19936
        </td>
        <td>
          Block
        </td>
        <td>
          scala.collection.generic.GenericCompanion.apply
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          scala.collection.Seq.apply[org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope](KNearestNeighborSearchProcess.this.Envelope.apply(-180.0, 180.0, -90.0, scala.math.`package`.min(Envelope.this.ymax, 90.0)))
        </td>
      </tr><tr>
        <td>
          530
        </td>
        <td>
          48478
        </td>
        <td>
          19954
          -
          19964
        </td>
        <td>
          Apply
        </td>
        <td>
          scala.Double.&gt;
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          Envelope.this.ymax.&gt;(90.0)
        </td>
      </tr><tr>
        <td>
          530
        </td>
        <td>
          48527
        </td>
        <td>
          19950
          -
          20646
        </td>
        <td>
          If
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          if (Envelope.this.ymax.&gt;(90.0))
  scala.collection.Seq.apply[org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope](KNearestNeighborSearchProcess.this.Envelope.apply(-180.0, 180.0, scala.math.`package`.max(Envelope.this.ymin, -90.0), 90.0))
else
  if (Envelope.this.width.&gt;=(360.0))
    scala.collection.Seq.apply[org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope](Envelope.this.copy(-180.0, 180.0, Envelope.this.copy$default$3, Envelope.this.copy$default$4))
  else
    if (Envelope.this.xmin.&lt;(-180.0))
      Envelope.this.intersection(KNearestNeighborSearchProcess.this.WholeWorldEnvelope) match {
        case scala.None =&gt; scala.collection.Seq.apply[org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope](Envelope.this.copy(Envelope.this.xmin.+(360.0), Envelope.this.xmax.+(360.0), Envelope.this.copy$default$3, Envelope.this.copy$default$4))
        case (value: org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope)Some[org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope]((trimmed @ _)) =&gt; scala.collection.Seq.apply[org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope](trimmed, Envelope.this.copy(Envelope.this.xmin.+(360.0), 180.0, Envelope.this.copy$default$3, Envelope.this.copy$default$4))
      }
    else
      if (Envelope.this.xmax.&gt;(180.0))
        Envelope.this.intersection(KNearestNeighborSearchProcess.this.WholeWorldEnvelope) match {
          case scala.None =&gt; scala.collection.Seq.apply[org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope](Envelope.this.copy(Envelope.this.xmin.-(360.0), Envelope.this.xmax.-(360.0), Envelope.this.copy$default$3, Envelope.this.copy$default$4))
          case (value: org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope)Some[org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope]((trimmed @ _)) =&gt; scala.collection.Seq.apply[org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope](trimmed, Envelope.this.copy(-180.0, Envelope.this.xmax.-(360.0), Envelope.this.copy$default$3, Envelope.this.copy$default$4))
        }
      else
        scala.collection.Seq.apply[org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope](this)
        </td>
      </tr><tr>
        <td>
          531
        </td>
        <td>
          48479
        </td>
        <td>
          19989
          -
          19994
        </td>
        <td>
          Literal
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          -180.0
        </td>
      </tr><tr>
        <td>
          531
        </td>
        <td>
          48480
        </td>
        <td>
          19996
          -
          20000
        </td>
        <td>
          Literal
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          180.0
        </td>
      </tr><tr>
        <td>
          531
        </td>
        <td>
          48481
        </td>
        <td>
          20011
          -
          20015
        </td>
        <td>
          Select
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope.ymin
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          Envelope.this.ymin
        </td>
      </tr><tr>
        <td>
          531
        </td>
        <td>
          48482
        </td>
        <td>
          20017
          -
          20020
        </td>
        <td>
          Literal
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          -90.0
        </td>
      </tr><tr>
        <td>
          531
        </td>
        <td>
          48483
        </td>
        <td>
          20002
          -
          20021
        </td>
        <td>
          Apply
        </td>
        <td>
          scala.math.max
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          scala.math.`package`.max(Envelope.this.ymin, -90.0)
        </td>
      </tr><tr>
        <td>
          531
        </td>
        <td>
          48484
        </td>
        <td>
          20023
          -
          20026
        </td>
        <td>
          Literal
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          90.0
        </td>
      </tr><tr>
        <td>
          531
        </td>
        <td>
          48485
        </td>
        <td>
          19980
          -
          20027
        </td>
        <td>
          Apply
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope.apply
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          KNearestNeighborSearchProcess.this.Envelope.apply(-180.0, 180.0, scala.math.`package`.max(Envelope.this.ymin, -90.0), 90.0)
        </td>
      </tr><tr>
        <td>
          531
        </td>
        <td>
          48486
        </td>
        <td>
          19976
          -
          20028
        </td>
        <td>
          Apply
        </td>
        <td>
          scala.collection.generic.GenericCompanion.apply
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          scala.collection.Seq.apply[org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope](KNearestNeighborSearchProcess.this.Envelope.apply(-180.0, 180.0, scala.math.`package`.max(Envelope.this.ymin, -90.0), 90.0))
        </td>
      </tr><tr>
        <td>
          531
        </td>
        <td>
          48487
        </td>
        <td>
          19976
          -
          20028
        </td>
        <td>
          Block
        </td>
        <td>
          scala.collection.generic.GenericCompanion.apply
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          scala.collection.Seq.apply[org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope](KNearestNeighborSearchProcess.this.Envelope.apply(-180.0, 180.0, scala.math.`package`.max(Envelope.this.ymin, -90.0), 90.0))
        </td>
      </tr><tr>
        <td>
          532
        </td>
        <td>
          48488
        </td>
        <td>
          20046
          -
          20059
        </td>
        <td>
          Apply
        </td>
        <td>
          scala.Double.&gt;=
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          Envelope.this.width.&gt;=(360.0)
        </td>
      </tr><tr>
        <td>
          532
        </td>
        <td>
          48526
        </td>
        <td>
          20042
          -
          20646
        </td>
        <td>
          If
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          if (Envelope.this.width.&gt;=(360.0))
  scala.collection.Seq.apply[org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope](Envelope.this.copy(-180.0, 180.0, Envelope.this.copy$default$3, Envelope.this.copy$default$4))
else
  if (Envelope.this.xmin.&lt;(-180.0))
    Envelope.this.intersection(KNearestNeighborSearchProcess.this.WholeWorldEnvelope) match {
      case scala.None =&gt; scala.collection.Seq.apply[org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope](Envelope.this.copy(Envelope.this.xmin.+(360.0), Envelope.this.xmax.+(360.0), Envelope.this.copy$default$3, Envelope.this.copy$default$4))
      case (value: org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope)Some[org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope]((trimmed @ _)) =&gt; scala.collection.Seq.apply[org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope](trimmed, Envelope.this.copy(Envelope.this.xmin.+(360.0), 180.0, Envelope.this.copy$default$3, Envelope.this.copy$default$4))
    }
  else
    if (Envelope.this.xmax.&gt;(180.0))
      Envelope.this.intersection(KNearestNeighborSearchProcess.this.WholeWorldEnvelope) match {
        case scala.None =&gt; scala.collection.Seq.apply[org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope](Envelope.this.copy(Envelope.this.xmin.-(360.0), Envelope.this.xmax.-(360.0), Envelope.this.copy$default$3, Envelope.this.copy$default$4))
        case (value: org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope)Some[org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope]((trimmed @ _)) =&gt; scala.collection.Seq.apply[org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope](trimmed, Envelope.this.copy(-180.0, Envelope.this.xmax.-(360.0), Envelope.this.copy$default$3, Envelope.this.copy$default$4))
      }
    else
      scala.collection.Seq.apply[org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope](this)
        </td>
      </tr><tr>
        <td>
          533
        </td>
        <td>
          48489
        </td>
        <td>
          20087
          -
          20092
        </td>
        <td>
          Literal
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          -180.0
        </td>
      </tr><tr>
        <td>
          533
        </td>
        <td>
          48490
        </td>
        <td>
          20101
          -
          20105
        </td>
        <td>
          Literal
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          180.0
        </td>
      </tr><tr>
        <td>
          533
        </td>
        <td>
          48491
        </td>
        <td>
          20075
          -
          20106
        </td>
        <td>
          Apply
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope.copy
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          Envelope.this.copy(-180.0, 180.0, Envelope.this.copy$default$3, Envelope.this.copy$default$4)
        </td>
      </tr><tr>
        <td>
          533
        </td>
        <td>
          48492
        </td>
        <td>
          20071
          -
          20107
        </td>
        <td>
          Apply
        </td>
        <td>
          scala.collection.generic.GenericCompanion.apply
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          scala.collection.Seq.apply[org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope](Envelope.this.copy(-180.0, 180.0, Envelope.this.copy$default$3, Envelope.this.copy$default$4))
        </td>
      </tr><tr>
        <td>
          533
        </td>
        <td>
          48493
        </td>
        <td>
          20071
          -
          20107
        </td>
        <td>
          Block
        </td>
        <td>
          scala.collection.generic.GenericCompanion.apply
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          scala.collection.Seq.apply[org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope](Envelope.this.copy(-180.0, 180.0, Envelope.this.copy$default$3, Envelope.this.copy$default$4))
        </td>
      </tr><tr>
        <td>
          534
        </td>
        <td>
          48494
        </td>
        <td>
          20125
          -
          20137
        </td>
        <td>
          Apply
        </td>
        <td>
          scala.Double.&lt;
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          Envelope.this.xmin.&lt;(-180.0)
        </td>
      </tr><tr>
        <td>
          534
        </td>
        <td>
          48525
        </td>
        <td>
          20121
          -
          20646
        </td>
        <td>
          If
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          if (Envelope.this.xmin.&lt;(-180.0))
  Envelope.this.intersection(KNearestNeighborSearchProcess.this.WholeWorldEnvelope) match {
    case scala.None =&gt; scala.collection.Seq.apply[org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope](Envelope.this.copy(Envelope.this.xmin.+(360.0), Envelope.this.xmax.+(360.0), Envelope.this.copy$default$3, Envelope.this.copy$default$4))
    case (value: org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope)Some[org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope]((trimmed @ _)) =&gt; scala.collection.Seq.apply[org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope](trimmed, Envelope.this.copy(Envelope.this.xmin.+(360.0), 180.0, Envelope.this.copy$default$3, Envelope.this.copy$default$4))
  }
else
  if (Envelope.this.xmax.&gt;(180.0))
    Envelope.this.intersection(KNearestNeighborSearchProcess.this.WholeWorldEnvelope) match {
      case scala.None =&gt; scala.collection.Seq.apply[org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope](Envelope.this.copy(Envelope.this.xmin.-(360.0), Envelope.this.xmax.-(360.0), Envelope.this.copy$default$3, Envelope.this.copy$default$4))
      case (value: org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope)Some[org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope]((trimmed @ _)) =&gt; scala.collection.Seq.apply[org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope](trimmed, Envelope.this.copy(-180.0, Envelope.this.xmax.-(360.0), Envelope.this.copy$default$3, Envelope.this.copy$default$4))
    }
  else
    scala.collection.Seq.apply[org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope](this)
        </td>
      </tr><tr>
        <td>
          535
        </td>
        <td>
          48495
        </td>
        <td>
          20162
          -
          20180
        </td>
        <td>
          Select
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.WholeWorldEnvelope
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          KNearestNeighborSearchProcess.this.WholeWorldEnvelope
        </td>
      </tr><tr>
        <td>
          535
        </td>
        <td>
          48496
        </td>
        <td>
          20149
          -
          20181
        </td>
        <td>
          Apply
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope.intersection
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          Envelope.this.intersection(KNearestNeighborSearchProcess.this.WholeWorldEnvelope)
        </td>
      </tr><tr>
        <td>
          535
        </td>
        <td>
          48507
        </td>
        <td>
          20149
          -
          20356
        </td>
        <td>
          Match
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          Envelope.this.intersection(KNearestNeighborSearchProcess.this.WholeWorldEnvelope) match {
  case scala.None =&gt; scala.collection.Seq.apply[org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope](Envelope.this.copy(Envelope.this.xmin.+(360.0), Envelope.this.xmax.+(360.0), Envelope.this.copy$default$3, Envelope.this.copy$default$4))
  case (value: org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope)Some[org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope]((trimmed @ _)) =&gt; scala.collection.Seq.apply[org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope](trimmed, Envelope.this.copy(Envelope.this.xmin.+(360.0), 180.0, Envelope.this.copy$default$3, Envelope.this.copy$default$4))
}
        </td>
      </tr><tr>
        <td>
          536
        </td>
        <td>
          48497
        </td>
        <td>
          20229
          -
          20240
        </td>
        <td>
          Apply
        </td>
        <td>
          scala.Double.+
        </td>
        <td>
          
        </td>
        <td style="background: #F0ADAD">
          Envelope.this.xmin.+(360.0)
        </td>
      </tr><tr>
        <td>
          536
        </td>
        <td>
          48498
        </td>
        <td>
          20249
          -
          20260
        </td>
        <td>
          Apply
        </td>
        <td>
          scala.Double.+
        </td>
        <td>
          
        </td>
        <td style="background: #F0ADAD">
          Envelope.this.xmax.+(360.0)
        </td>
      </tr><tr>
        <td>
          536
        </td>
        <td>
          48499
        </td>
        <td>
          20217
          -
          20261
        </td>
        <td>
          Apply
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope.copy
        </td>
        <td>
          
        </td>
        <td style="background: #F0ADAD">
          Envelope.this.copy(Envelope.this.xmin.+(360.0), Envelope.this.xmax.+(360.0), Envelope.this.copy$default$3, Envelope.this.copy$default$4)
        </td>
      </tr><tr>
        <td>
          536
        </td>
        <td>
          48500
        </td>
        <td>
          20213
          -
          20262
        </td>
        <td>
          Apply
        </td>
        <td>
          scala.collection.generic.GenericCompanion.apply
        </td>
        <td>
          
        </td>
        <td style="background: #F0ADAD">
          scala.collection.Seq.apply[org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope](Envelope.this.copy(Envelope.this.xmin.+(360.0), Envelope.this.xmax.+(360.0), Envelope.this.copy$default$3, Envelope.this.copy$default$4))
        </td>
      </tr><tr>
        <td>
          536
        </td>
        <td>
          48501
        </td>
        <td>
          20213
          -
          20262
        </td>
        <td>
          Block
        </td>
        <td>
          scala.collection.generic.GenericCompanion.apply
        </td>
        <td>
          
        </td>
        <td style="background: #F0ADAD">
          scala.collection.Seq.apply[org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope](Envelope.this.copy(Envelope.this.xmin.+(360.0), Envelope.this.xmax.+(360.0), Envelope.this.copy$default$3, Envelope.this.copy$default$4))
        </td>
      </tr><tr>
        <td>
          537
        </td>
        <td>
          48502
        </td>
        <td>
          20320
          -
          20331
        </td>
        <td>
          Apply
        </td>
        <td>
          scala.Double.+
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          Envelope.this.xmin.+(360.0)
        </td>
      </tr><tr>
        <td>
          537
        </td>
        <td>
          48503
        </td>
        <td>
          20340
          -
          20344
        </td>
        <td>
          Literal
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          180.0
        </td>
      </tr><tr>
        <td>
          537
        </td>
        <td>
          48504
        </td>
        <td>
          20308
          -
          20345
        </td>
        <td>
          Apply
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope.copy
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          Envelope.this.copy(Envelope.this.xmin.+(360.0), 180.0, Envelope.this.copy$default$3, Envelope.this.copy$default$4)
        </td>
      </tr><tr>
        <td>
          537
        </td>
        <td>
          48505
        </td>
        <td>
          20295
          -
          20346
        </td>
        <td>
          Apply
        </td>
        <td>
          scala.collection.generic.GenericCompanion.apply
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          scala.collection.Seq.apply[org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope](trimmed, Envelope.this.copy(Envelope.this.xmin.+(360.0), 180.0, Envelope.this.copy$default$3, Envelope.this.copy$default$4))
        </td>
      </tr><tr>
        <td>
          537
        </td>
        <td>
          48506
        </td>
        <td>
          20295
          -
          20346
        </td>
        <td>
          Block
        </td>
        <td>
          scala.collection.generic.GenericCompanion.apply
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          scala.collection.Seq.apply[org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope](trimmed, Envelope.this.copy(Envelope.this.xmin.+(360.0), 180.0, Envelope.this.copy$default$3, Envelope.this.copy$default$4))
        </td>
      </tr><tr>
        <td>
          539
        </td>
        <td>
          48508
        </td>
        <td>
          20374
          -
          20385
        </td>
        <td>
          Apply
        </td>
        <td>
          scala.Double.&gt;
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          Envelope.this.xmax.&gt;(180.0)
        </td>
      </tr><tr>
        <td>
          539
        </td>
        <td>
          48524
        </td>
        <td>
          20370
          -
          20646
        </td>
        <td>
          If
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          if (Envelope.this.xmax.&gt;(180.0))
  Envelope.this.intersection(KNearestNeighborSearchProcess.this.WholeWorldEnvelope) match {
    case scala.None =&gt; scala.collection.Seq.apply[org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope](Envelope.this.copy(Envelope.this.xmin.-(360.0), Envelope.this.xmax.-(360.0), Envelope.this.copy$default$3, Envelope.this.copy$default$4))
    case (value: org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope)Some[org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope]((trimmed @ _)) =&gt; scala.collection.Seq.apply[org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope](trimmed, Envelope.this.copy(-180.0, Envelope.this.xmax.-(360.0), Envelope.this.copy$default$3, Envelope.this.copy$default$4))
  }
else
  scala.collection.Seq.apply[org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope](this)
        </td>
      </tr><tr>
        <td>
          540
        </td>
        <td>
          48509
        </td>
        <td>
          20410
          -
          20428
        </td>
        <td>
          Select
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.WholeWorldEnvelope
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          KNearestNeighborSearchProcess.this.WholeWorldEnvelope
        </td>
      </tr><tr>
        <td>
          540
        </td>
        <td>
          48510
        </td>
        <td>
          20397
          -
          20429
        </td>
        <td>
          Apply
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope.intersection
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          Envelope.this.intersection(KNearestNeighborSearchProcess.this.WholeWorldEnvelope)
        </td>
      </tr><tr>
        <td>
          540
        </td>
        <td>
          48521
        </td>
        <td>
          20397
          -
          20605
        </td>
        <td>
          Match
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          Envelope.this.intersection(KNearestNeighborSearchProcess.this.WholeWorldEnvelope) match {
  case scala.None =&gt; scala.collection.Seq.apply[org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope](Envelope.this.copy(Envelope.this.xmin.-(360.0), Envelope.this.xmax.-(360.0), Envelope.this.copy$default$3, Envelope.this.copy$default$4))
  case (value: org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope)Some[org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope]((trimmed @ _)) =&gt; scala.collection.Seq.apply[org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope](trimmed, Envelope.this.copy(-180.0, Envelope.this.xmax.-(360.0), Envelope.this.copy$default$3, Envelope.this.copy$default$4))
}
        </td>
      </tr><tr>
        <td>
          541
        </td>
        <td>
          48511
        </td>
        <td>
          20477
          -
          20488
        </td>
        <td>
          Apply
        </td>
        <td>
          scala.Double.-
        </td>
        <td>
          
        </td>
        <td style="background: #F0ADAD">
          Envelope.this.xmin.-(360.0)
        </td>
      </tr><tr>
        <td>
          541
        </td>
        <td>
          48512
        </td>
        <td>
          20497
          -
          20508
        </td>
        <td>
          Apply
        </td>
        <td>
          scala.Double.-
        </td>
        <td>
          
        </td>
        <td style="background: #F0ADAD">
          Envelope.this.xmax.-(360.0)
        </td>
      </tr><tr>
        <td>
          541
        </td>
        <td>
          48513
        </td>
        <td>
          20465
          -
          20509
        </td>
        <td>
          Apply
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope.copy
        </td>
        <td>
          
        </td>
        <td style="background: #F0ADAD">
          Envelope.this.copy(Envelope.this.xmin.-(360.0), Envelope.this.xmax.-(360.0), Envelope.this.copy$default$3, Envelope.this.copy$default$4)
        </td>
      </tr><tr>
        <td>
          541
        </td>
        <td>
          48514
        </td>
        <td>
          20461
          -
          20510
        </td>
        <td>
          Apply
        </td>
        <td>
          scala.collection.generic.GenericCompanion.apply
        </td>
        <td>
          
        </td>
        <td style="background: #F0ADAD">
          scala.collection.Seq.apply[org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope](Envelope.this.copy(Envelope.this.xmin.-(360.0), Envelope.this.xmax.-(360.0), Envelope.this.copy$default$3, Envelope.this.copy$default$4))
        </td>
      </tr><tr>
        <td>
          541
        </td>
        <td>
          48515
        </td>
        <td>
          20461
          -
          20510
        </td>
        <td>
          Block
        </td>
        <td>
          scala.collection.generic.GenericCompanion.apply
        </td>
        <td>
          
        </td>
        <td style="background: #F0ADAD">
          scala.collection.Seq.apply[org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope](Envelope.this.copy(Envelope.this.xmin.-(360.0), Envelope.this.xmax.-(360.0), Envelope.this.copy$default$3, Envelope.this.copy$default$4))
        </td>
      </tr><tr>
        <td>
          542
        </td>
        <td>
          48516
        </td>
        <td>
          20568
          -
          20573
        </td>
        <td>
          Literal
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          -180.0
        </td>
      </tr><tr>
        <td>
          542
        </td>
        <td>
          48517
        </td>
        <td>
          20582
          -
          20593
        </td>
        <td>
          Apply
        </td>
        <td>
          scala.Double.-
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          Envelope.this.xmax.-(360.0)
        </td>
      </tr><tr>
        <td>
          542
        </td>
        <td>
          48518
        </td>
        <td>
          20556
          -
          20594
        </td>
        <td>
          Apply
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope.copy
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          Envelope.this.copy(-180.0, Envelope.this.xmax.-(360.0), Envelope.this.copy$default$3, Envelope.this.copy$default$4)
        </td>
      </tr><tr>
        <td>
          542
        </td>
        <td>
          48519
        </td>
        <td>
          20543
          -
          20595
        </td>
        <td>
          Apply
        </td>
        <td>
          scala.collection.generic.GenericCompanion.apply
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          scala.collection.Seq.apply[org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope](trimmed, Envelope.this.copy(-180.0, Envelope.this.xmax.-(360.0), Envelope.this.copy$default$3, Envelope.this.copy$default$4))
        </td>
      </tr><tr>
        <td>
          542
        </td>
        <td>
          48520
        </td>
        <td>
          20543
          -
          20595
        </td>
        <td>
          Block
        </td>
        <td>
          scala.collection.generic.GenericCompanion.apply
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          scala.collection.Seq.apply[org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope](trimmed, Envelope.this.copy(-180.0, Envelope.this.xmax.-(360.0), Envelope.this.copy$default$3, Envelope.this.copy$default$4))
        </td>
      </tr><tr>
        <td>
          545
        </td>
        <td>
          48522
        </td>
        <td>
          20629
          -
          20638
        </td>
        <td>
          Apply
        </td>
        <td>
          scala.collection.generic.GenericCompanion.apply
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          scala.collection.Seq.apply[org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope](this)
        </td>
      </tr><tr>
        <td>
          545
        </td>
        <td>
          48523
        </td>
        <td>
          20629
          -
          20638
        </td>
        <td>
          Block
        </td>
        <td>
          scala.collection.generic.GenericCompanion.apply
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          scala.collection.Seq.apply[org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope](this)
        </td>
      </tr><tr>
        <td>
          556
        </td>
        <td>
          48528
        </td>
        <td>
          20858
          -
          20862
        </td>
        <td>
          Select
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope.xmin
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          Envelope.this.xmin
        </td>
      </tr><tr>
        <td>
          556
        </td>
        <td>
          48529
        </td>
        <td>
          20864
          -
          20868
        </td>
        <td>
          Select
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope.xmax
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          Envelope.this.xmax
        </td>
      </tr><tr>
        <td>
          556
        </td>
        <td>
          48530
        </td>
        <td>
          20870
          -
          20874
        </td>
        <td>
          Select
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope.ymin
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          Envelope.this.ymin
        </td>
      </tr><tr>
        <td>
          556
        </td>
        <td>
          48531
        </td>
        <td>
          20876
          -
          20880
        </td>
        <td>
          Select
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope.ymax
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          Envelope.this.ymax
        </td>
      </tr><tr>
        <td>
          556
        </td>
        <td>
          48532
        </td>
        <td>
          20835
          -
          20896
        </td>
        <td>
          Apply
        </td>
        <td>
          org.geotools.geometry.jts.ReferencedEnvelope.&lt;init&gt;
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          new org.geotools.geometry.jts.ReferencedEnvelope(Envelope.this.xmin, Envelope.this.xmax, Envelope.this.ymin, Envelope.this.ymax, org.locationtech.geomesa.utils.geotools.`package`.CRS_EPSG_4326)
        </td>
      </tr><tr>
        <td>
          556
        </td>
        <td>
          48533
        </td>
        <td>
          20821
          -
          20897
        </td>
        <td>
          Apply
        </td>
        <td>
          org.geotools.api.filter.FilterFactory.bbox
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          org.locationtech.geomesa.filter.`package`.ff.bbox(geom, new org.geotools.geometry.jts.ReferencedEnvelope(Envelope.this.xmin, Envelope.this.xmax, Envelope.this.ymin, Envelope.this.ymax, org.locationtech.geomesa.utils.geotools.`package`.CRS_EPSG_4326))
        </td>
      </tr><tr>
        <td>
          563
        </td>
        <td>
          48534
        </td>
        <td>
          21065
          -
          21069
        </td>
        <td>
          Select
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope.xmin
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          Envelope.this.xmin
        </td>
      </tr><tr>
        <td>
          563
        </td>
        <td>
          48535
        </td>
        <td>
          21071
          -
          21075
        </td>
        <td>
          Select
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope.xmax
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          Envelope.this.xmax
        </td>
      </tr><tr>
        <td>
          563
        </td>
        <td>
          48536
        </td>
        <td>
          21077
          -
          21081
        </td>
        <td>
          Select
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope.ymin
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          Envelope.this.ymin
        </td>
      </tr><tr>
        <td>
          563
        </td>
        <td>
          48537
        </td>
        <td>
          21083
          -
          21087
        </td>
        <td>
          Select
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope.ymax
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          Envelope.this.ymax
        </td>
      </tr><tr>
        <td>
          563
        </td>
        <td>
          48538
        </td>
        <td>
          21026
          -
          21088
        </td>
        <td>
          Apply
        </td>
        <td>
          org.locationtech.jts.geom.Envelope.&lt;init&gt;
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          new org.locationtech.jts.geom.Envelope(Envelope.this.xmin, Envelope.this.xmax, Envelope.this.ymin, Envelope.this.ymax)
        </td>
      </tr><tr>
        <td>
          570
        </td>
        <td>
          48539
        </td>
        <td>
          21178
          -
          21180
        </td>
        <td>
          Literal
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td>
          
        </td>
        <td style="background: #F0ADAD">
          &quot;[&quot;
        </td>
      </tr><tr>
        <td>
          570
        </td>
        <td>
          48540
        </td>
        <td>
          21184
          -
          21187
        </td>
        <td>
          Literal
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td>
          
        </td>
        <td style="background: #F0ADAD">
          &quot;, &quot;
        </td>
      </tr><tr>
        <td>
          570
        </td>
        <td>
          48541
        </td>
        <td>
          21191
          -
          21194
        </td>
        <td>
          Literal
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td>
          
        </td>
        <td style="background: #F0ADAD">
          &quot;, &quot;
        </td>
      </tr><tr>
        <td>
          570
        </td>
        <td>
          48542
        </td>
        <td>
          21198
          -
          21201
        </td>
        <td>
          Literal
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td>
          
        </td>
        <td style="background: #F0ADAD">
          &quot;, &quot;
        </td>
      </tr><tr>
        <td>
          570
        </td>
        <td>
          48543
        </td>
        <td>
          21205
          -
          21207
        </td>
        <td>
          Literal
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td>
          
        </td>
        <td style="background: #F0ADAD">
          &quot;]&quot;
        </td>
      </tr><tr>
        <td>
          570
        </td>
        <td>
          48544
        </td>
        <td>
          21180
          -
          21184
        </td>
        <td>
          Select
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope.xmin
        </td>
        <td>
          
        </td>
        <td style="background: #F0ADAD">
          Envelope.this.xmin
        </td>
      </tr><tr>
        <td>
          570
        </td>
        <td>
          48545
        </td>
        <td>
          21187
          -
          21191
        </td>
        <td>
          Select
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope.xmax
        </td>
        <td>
          
        </td>
        <td style="background: #F0ADAD">
          Envelope.this.xmax
        </td>
      </tr><tr>
        <td>
          570
        </td>
        <td>
          48546
        </td>
        <td>
          21194
          -
          21198
        </td>
        <td>
          Select
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope.ymin
        </td>
        <td>
          
        </td>
        <td style="background: #F0ADAD">
          Envelope.this.ymin
        </td>
      </tr><tr>
        <td>
          570
        </td>
        <td>
          48547
        </td>
        <td>
          21201
          -
          21205
        </td>
        <td>
          Select
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope.ymax
        </td>
        <td>
          
        </td>
        <td style="background: #F0ADAD">
          Envelope.this.ymax
        </td>
      </tr><tr>
        <td>
          570
        </td>
        <td>
          48548
        </td>
        <td>
          21176
          -
          21207
        </td>
        <td>
          Apply
        </td>
        <td>
          scala.StringContext.s
        </td>
        <td>
          
        </td>
        <td style="background: #F0ADAD">
          scala.StringContext.apply(&quot;[&quot;, &quot;, &quot;, &quot;, &quot;, &quot;, &quot;, &quot;]&quot;).s(Envelope.this.xmin, Envelope.this.xmax, Envelope.this.ymin, Envelope.this.ymax)
        </td>
      </tr><tr>
        <td>
          584
        </td>
        <td>
          48549
        </td>
        <td>
          21564
          -
          21564
        </td>
        <td>
          Select
        </td>
        <td>
          scala.Tuple2._1
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          x$9._1
        </td>
      </tr><tr>
        <td>
          584
        </td>
        <td>
          48550
        </td>
        <td>
          21570
          -
          21570
        </td>
        <td>
          Select
        </td>
        <td>
          scala.Tuple2._2
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          x$9._2
        </td>
      </tr><tr>
        <td>
          585
        </td>
        <td>
          48551
        </td>
        <td>
          21648
          -
          21665
        </td>
        <td>
          Apply
        </td>
        <td>
          scala.Double.-
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          point.getX().-(east)
        </td>
      </tr><tr>
        <td>
          585
        </td>
        <td>
          48552
        </td>
        <td>
          21667
          -
          21684
        </td>
        <td>
          Apply
        </td>
        <td>
          scala.Double.+
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          point.getX().+(east)
        </td>
      </tr><tr>
        <td>
          585
        </td>
        <td>
          48553
        </td>
        <td>
          21686
          -
          21704
        </td>
        <td>
          Apply
        </td>
        <td>
          scala.Double.-
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          point.getY().-(north)
        </td>
      </tr><tr>
        <td>
          585
        </td>
        <td>
          48554
        </td>
        <td>
          21706
          -
          21724
        </td>
        <td>
          Apply
        </td>
        <td>
          scala.Double.+
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          point.getY().+(north)
        </td>
      </tr><tr>
        <td>
          585
        </td>
        <td>
          48555
        </td>
        <td>
          21639
          -
          21725
        </td>
        <td>
          Apply
        </td>
        <td>
          org.locationtech.geomesa.process.query.KNearestNeighborSearchProcess.Envelope.apply
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          KNearestNeighborSearchProcess.this.Envelope.apply(point.getX().-(east), point.getX().+(east), point.getY().-(north), point.getY().+(north))
        </td>
      </tr>
    </table>
          </div>
        </div>
      </body>
    </html>