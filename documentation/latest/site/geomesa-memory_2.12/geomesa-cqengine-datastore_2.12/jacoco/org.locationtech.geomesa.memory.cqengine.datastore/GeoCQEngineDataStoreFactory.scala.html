<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang=""><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>GeoCQEngineDataStoreFactory.scala</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">GeoMesa Geo-CQ Engine DataStore</a> &gt; <a href="index.source.html" class="el_package">org.locationtech.geomesa.memory.cqengine.datastore</a> &gt; <span class="el_source">GeoCQEngineDataStoreFactory.scala</span></div><h1>GeoCQEngineDataStoreFactory.scala</h1><pre class="source lang-java linenums">/***********************************************************************
 * Copyright (c) 2013-2025 General Atomics Integrated Intelligence, Inc.
 * All rights reserved. This program and the accompanying materials
 * are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at
 * https://www.apache.org/licenses/LICENSE-2.0
 ***********************************************************************/

package org.locationtech.geomesa.memory.cqengine.datastore

import org.geotools.api.data.DataAccessFactory.Param
import org.geotools.api.data.{DataStore, DataStoreFactorySpi}
import org.locationtech.geomesa.memory.cqengine.datastore.GeoCQEngineDataStoreFactory.{CqEngineParam, NamespaceParam}

import java.awt.RenderingHints.Key
import java.util

<span class="nc" id="L18">class GeoCQEngineDataStoreFactory extends DataStoreFactorySpi {</span>

  override def createDataStore(params: java.util.Map[String, _]): DataStore = {
<span class="nc" id="L21">    val namespace = Option(NamespaceParam.lookUp(params).asInstanceOf[String])</span>
<span class="nc" id="L22">    GeoCQEngineDataStore.getStore(GeoCQEngineDataStoreFactory.getUseGeoIndex(params), namespace)</span>
  }

<span class="nc" id="L25">  override def createNewDataStore(params: java.util.Map[String, _]): DataStore = createDataStore(params)</span>

<span class="nc" id="L27">  override def getDisplayName: String = &quot;GeoCQEngine DataStore&quot;</span>

<span class="nc" id="L29">  override def getDescription: String = &quot;GeoCQEngine DataStore&quot;</span>

  override def canProcess(params: util.Map[String, _]): Boolean =
<span class="nc bnc" id="L32" title="All 4 branches missed.">    params.containsKey(CqEngineParam.key) &amp;&amp; CqEngineParam.lookUp(params).asInstanceOf[java.lang.Boolean].booleanValue()</span>

<span class="nc" id="L34">  override def isAvailable: Boolean = true</span>

  override def getParametersInfo: Array[Param] =
<span class="nc" id="L37">    GeoCQEngineDataStoreFactory.params</span>

<span class="nc" id="L39">  override def getImplementationHints: util.Map[Key, _] = null</span>
}

<span class="nc" id="L42">object GeoCQEngineDataStoreFactory {</span>

<span class="nc" id="L44">  private val UseGeoIndexKey = &quot;useGeoIndex&quot;</span>
<span class="nc" id="L45">  private val UseGeoIndexDefault = true</span>

<span class="nc" id="L47">  val CqEngineParam: Param = new Param(</span>
<span class="nc" id="L48">    &quot;cqengine&quot;,</span>
<span class="nc" id="L49">    classOf[java.lang.Boolean],</span>
<span class="nc" id="L50">    &quot;Use the CQEngine data store&quot;,</span>
<span class="nc" id="L51">    true</span>
  )

<span class="nc" id="L54">  val UseGeoIndexParam: Param = new Param(</span>
<span class="nc" id="L55">    UseGeoIndexKey,</span>
<span class="nc" id="L56">    classOf[java.lang.Boolean],</span>
<span class="nc" id="L57">    &quot;Enable an index on the default geometry&quot;,</span>
<span class="nc" id="L58">    false,</span>
<span class="nc" id="L59">    UseGeoIndexDefault</span>
  )

<span class="nc" id="L62">  val NamespaceParam: Param = new Param(&quot;namespace&quot;, classOf[String], &quot;Namespace&quot;, false)</span>

<span class="nc" id="L64">  val params: Array[Param] = Array(</span>
<span class="nc" id="L65">    CqEngineParam,</span>
<span class="nc" id="L66">    UseGeoIndexParam,</span>
<span class="nc" id="L67">    NamespaceParam,</span>
  )

  def getUseGeoIndex(params: java.util.Map[String, _]): Boolean = {
<span class="nc bnc" id="L71" title="All 2 branches missed.">    if (params.containsKey(UseGeoIndexKey)) {</span>
<span class="nc" id="L72">      UseGeoIndexParam.lookUp(params).asInstanceOf[Boolean]</span>
    } else {
<span class="nc" id="L74">      UseGeoIndexDefault</span>
    }
  }
<span class="nc" id="L77">}</span>
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.14.202510111229</span></div></body></html>