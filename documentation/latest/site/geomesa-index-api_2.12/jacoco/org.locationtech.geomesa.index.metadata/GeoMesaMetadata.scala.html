<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang=""><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>GeoMesaMetadata.scala</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">GeoMesa Index API</a> &gt; <a href="index.source.html" class="el_package">org.locationtech.geomesa.index.metadata</a> &gt; <span class="el_source">GeoMesaMetadata.scala</span></div><h1>GeoMesaMetadata.scala</h1><pre class="source lang-java linenums">/***********************************************************************
 * Copyright (c) 2013-2025 General Atomics Integrated Intelligence, Inc.
 * All rights reserved. This program and the accompanying materials
 * are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at
 * https://www.apache.org/licenses/LICENSE-2.0
 ***********************************************************************/

package org.locationtech.geomesa.index.metadata

import java.io.Closeable

/**
 * GeoMesa Metadata/Catalog abstraction using key/value String pairs storing
 * them on a per-typeName basis
 */
<span class="nc" id="L17">trait GeoMesaMetadata[T] extends Closeable {</span>

  /**
   * Returns existing simple feature types
   *
   * @return simple feature type names
   */
  def getFeatureTypes: Array[String]

  /**
   * Insert a value - any existing value under the given key will be overwritten
   *
   * @param typeName simple feature type name
   * @param key key
   * @param value value
   */
  def insert(typeName: String, key: String, value: T): Unit

  /**
   * Insert multiple values at once - may be more efficient than single inserts
   *
   * @param typeName simple feature type name
   * @param kvPairs key/values
   */
  def insert(typeName: String, kvPairs: Map[String, T]): Unit

  /**
    * Delete a key
    *
    * @param typeName simple feature type name
    * @param key key
    */
  def remove(typeName: String, key: String): Unit

  /**
    * Delete multiple keys at once - may be more efficient than single deletes
    *
    * @param typeName simple feature type name
    * @param keys keys
    */
  def remove(typeName: String, keys: Seq[String]): Unit

  /**
   * Reads a value
   *
   * @param typeName simple feature type name
   * @param key key
   * @param cache may return a cached value if true, otherwise may use a slower lookup
   * @return value, if present
   */
<span class="nc" id="L67">  def read(typeName: String, key: String, cache: Boolean = true): Option[T]</span>

  /**
   * Reads a value. Throws an exception if value is missing
   *
   * @param typeName simple feature type name
   * @param key key
   * @return value
   */
  def readRequired(typeName: String, key: String): T =
<span class="nc" id="L77">    read(typeName, key).getOrElse {</span>
<span class="nc" id="L78">      throw new RuntimeException(s&quot;Unable to find required metadata property for $typeName:$key&quot;)</span>
    }

  /**
    * Scan for keys starting with a given prefix
    *
    * @param typeName simple feature type name
    * @param prefix key prefix
    * @param cache may return a cached value if true, otherwise may use a slower lookup
    * @return keys -&gt; values
    */
<span class="nc" id="L89">  def scan(typeName: String, prefix: String, cache: Boolean = true): Seq[(String, T)]</span>

  /**
    * Invalidates any cached value for the given key
    *
    * @param typeName simple feature type name
    * @param key key
    */
  def invalidateCache(typeName: String, key: String): Unit

  /**
   * Deletes all values associated with a given feature type
   *
   * @param typeName simple feature type name
   */
  def delete(typeName: String)

  /**
    * Create a back up of this metadata
    *
    * @param typeName simple feature type name
    */
  def backup(typeName: String): Unit

  /**
   * table cache should be cleared up when catalog is deleted in database
   */
  def resetCache(): Unit
}

<span class="nc" id="L119">object GeoMesaMetadata {</span>

  // Metadata keys
<span class="nc" id="L122">  val AttributesKey      = &quot;attributes&quot;</span>
<span class="nc" id="L123">  val VersionKey         = &quot;version&quot;</span>
<span class="nc" id="L124">  val StatsGenerationKey = &quot;stats-date&quot;</span>
<span class="nc" id="L125">  val StatsIntervalKey   = &quot;stats-interval&quot;</span>

  /**
    * Gets an empty metadata instance. This instance will not persist or return any values
    *
    * @tparam T type binding
    * @return
    */
<span class="nc" id="L133">  def empty[T]: GeoMesaMetadata[T] = NoOpMetadata.asInstanceOf[GeoMesaMetadata[T]]</span>
}
<span class="nc" id="L135"></span>
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.14.202510111229</span></div></body></html>