<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>12.3. Converter Processors &mdash; GeoMesa 5.0.0 Manuals</title>
      <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/css/theme_custom.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/copybutton.css" type="text/css" />
      <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:400,700" type="text/css" />
      <link rel="stylesheet" href="../../_static/tabs.css" type="text/css" />
    <link rel="canonical" href="https://www.geomesa.org/documentation/user/nifi/converters.html"/>
  <!--[if lt IE 9]>
    <script src="../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
        <script src="../../_static/jquery.js"></script>
        <script src="../../_static/underscore.js"></script>
        <script src="../../_static/doctools.js"></script>
        <script src="../../_static/clipboard.min.js"></script>
        <script src="../../_static/copybutton.js"></script>
    <script src="../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="12.4. Record Processors" href="records.html" />
    <link rel="prev" title="12.2. Processors" href="processors.html" />


</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="../../index.html" class="icon icon-home"> GeoMesa
          </a>
              <div class="version">
                5.1.0-SNAPSHOT
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="../index.html">User Manual</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../introduction.html">1. Introduction</a></li>
<li class="toctree-l2"><a class="reference internal" href="../getting_started.html">2. Getting Started</a></li>
<li class="toctree-l2"><a class="reference internal" href="../download.html">3. Versions and Downloads</a></li>
<li class="toctree-l2"><a class="reference internal" href="../install.html">4. Installation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../architecture.html">5. Architecture Overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="../geotools.html">6. GeoTools Overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="../datastores/index.html">7. GeoMesa Data Stores</a></li>
<li class="toctree-l2"><a class="reference internal" href="../cli/index.html">8. Command-Line Tools</a></li>
<li class="toctree-l2"><a class="reference internal" href="../convert/index.html">9. GeoMesa Converters</a></li>
<li class="toctree-l2"><a class="reference internal" href="../geoserver.html">10. GeoServer Plugins</a></li>
<li class="toctree-l2"><a class="reference internal" href="../spark/index.html">11. GeoMesa Spark</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="index.html">12. GeoMesa NiFi Bundle</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="install.html">12.1. Installation</a></li>
<li class="toctree-l3"><a class="reference internal" href="processors.html">12.2. Processors</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">12.3. Converter Processors</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#defining-simplefeaturetypes-and-converters">12.3.1. Defining SimpleFeatureTypes and Converters</a></li>
<li class="toctree-l4"><a class="reference internal" href="#initializing-schemas">12.3.2. Initializing Schemas</a></li>
<li class="toctree-l4"><a class="reference internal" href="#converter-metrics">12.3.3. Converter Metrics</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="records.html">12.4. Record Processors</a></li>
<li class="toctree-l3"><a class="reference internal" href="avro.html">12.5. Avro Processors</a></li>
<li class="toctree-l3"><a class="reference internal" href="updates.html">12.6. Record Update Processors</a></li>
<li class="toctree-l3"><a class="reference internal" href="datastores.html">12.7. Data Store Services</a></li>
<li class="toctree-l3"><a class="reference internal" href="ingress.html">12.8. Ingress Processors</a></li>
<li class="toctree-l3"><a class="reference internal" href="conversions.html">12.9. Conversion Processors</a></li>
<li class="toctree-l3"><a class="reference internal" href="integrations.html">12.10. Cloud Provider Integrations</a></li>
<li class="toctree-l3"><a class="reference internal" href="examples.html">12.11. Examples</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../process.html">13. GeoMesa Processes</a></li>
<li class="toctree-l2"><a class="reference internal" href="../hbase/index.html">14. HBase Data Store</a></li>
<li class="toctree-l2"><a class="reference internal" href="../accumulo/index.html">15. Accumulo Data Store</a></li>
<li class="toctree-l2"><a class="reference internal" href="../cassandra/index.html">16. Cassandra Data Store</a></li>
<li class="toctree-l2"><a class="reference internal" href="../kafka/index.html">17. Kafka Data Store</a></li>
<li class="toctree-l2"><a class="reference internal" href="../redis/index.html">18. Redis Data Store</a></li>
<li class="toctree-l2"><a class="reference internal" href="../filesystem/index.html">19. FileSystem Data Store</a></li>
<li class="toctree-l2"><a class="reference internal" href="../postgis/index.html">20. Partitioned PostGIS Data Store</a></li>
<li class="toctree-l2"><a class="reference internal" href="../lambda/index.html">21. Lambda Data Store</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ds_views.html">22. Combined Data Store Views</a></li>
<li class="toctree-l2"><a class="reference internal" href="../upgrade.html">23. Upgrade Guide</a></li>
<li class="toctree-l2"><a class="reference internal" href="../index.html#appendix">Appendix</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../tutorials/index.html">Tutorials</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">GeoMesa</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../index.html" class="icon icon-home"></a></li>
          <li class="breadcrumb-item"><a href="../index.html">User Manual</a></li>
          <li class="breadcrumb-item"><a href="index.html"><span class="section-number">12. </span>GeoMesa NiFi Bundle</a></li>
      <li class="breadcrumb-item active"><span class="section-number">12.3. </span>Converter Processors</li>
      <li class="wy-breadcrumbs-aside">
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="converter-processors">
<span id="nifi-converter-processors"></span><h1><span class="section-number">12.3. </span>Converter Processors<a class="headerlink" href="#converter-processors" title="Permalink to this headline">¶</a></h1>
<p>Converter processors (<code class="docutils literal notranslate"><span class="pre">PutGeoMesa</span></code> and <code class="docutils literal notranslate"><span class="pre">ConvertToGeoFile</span></code>) accept the following configuration parameters for
specifying the input source:</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 26%" />
<col style="width: 74%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Property</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">SftName</span></code></p></td>
<td><p>Name of the SFT on the classpath to use. This property overrides SftSpec.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">SftSpec</span></code></p></td>
<td><p>SFT specification String. Overridden by SftName if both are set.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">FeatureNameOverride</span></code></p></td>
<td><p>Override the feature type name on ingest from SftName or SftSpec.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">ConverterName</span></code></p></td>
<td><p>Name of converter on the classpath to use. This property overrides ConverterSpec.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">ConverterSpec</span></code></p></td>
<td><p>Converter specification string. Overridden by ConverterName if both are set.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">ConverterErrorMode</span></code></p></td>
<td><p>Override the converter error mode (<code class="docutils literal notranslate"><span class="pre">log-errors</span></code> or <code class="docutils literal notranslate"><span class="pre">raise-errors</span></code>)</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">ConverterMetricReporters</span></code></p></td>
<td><p>Override the converter metrics reporters (see below)</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">ConvertFlowFileAttributes</span></code></p></td>
<td><p>Expose flow file attributes to the converter framework, referenced by name</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">ExtraClasspaths</span></code></p></td>
<td><p>Additional resources to add to the classpath, e.g. converter and SFT definitions</p></td>
</tr>
</tbody>
</table>
<p>Additionally, the <code class="docutils literal notranslate"><span class="pre">PutGeoMesa</span></code> processor accepts additional configuration:</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 26%" />
<col style="width: 74%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Property</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">InitializeSchemas</span></code></p></td>
<td><p>Initialize schemas in the underlying data store when the processor is started. Schemas
should be defined in standard Java properties format, with the type name as the key,
and the feature type specification or lookup as the value</p></td>
</tr>
</tbody>
</table>
<section id="defining-simplefeaturetypes-and-converters">
<h2><span class="section-number">12.3.1. </span>Defining SimpleFeatureTypes and Converters<a class="headerlink" href="#defining-simplefeaturetypes-and-converters" title="Permalink to this headline">¶</a></h2>
<p>The GeoMesa NiFi processors package a set of predefined SimpleFeatureType schema definitions and GeoMesa
converter definitions for popular data sources such as Twitter, GDelt and OpenStreetMaps.</p>
<p>The full list of provided sources can be found in <a class="reference internal" href="../convert/premade/index.html#prepackaged-converters"><span class="std std-ref">Prepackaged Converter Definitions</span></a>.</p>
<p>For custom data sources, there are two ways of providing custom SFTs and converters:</p>
<section id="providing-simplefeaturetypes-and-converters-on-the-classpath">
<h3><span class="section-number">12.3.1.1. </span>Providing SimpleFeatureTypes and Converters on the Classpath<a class="headerlink" href="#providing-simplefeaturetypes-and-converters-on-the-classpath" title="Permalink to this headline">¶</a></h3>
<p>To bundle configuration in a JAR file simply place your config in a file named <code class="docutils literal notranslate"><span class="pre">reference.conf</span></code> and place it <strong>at
the root level</strong> of a JAR file:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span>jar<span class="w"> </span>cvf<span class="w"> </span>data-formats.jar<span class="w"> </span>reference.conf
</pre></div>
</div>
<p>You can verify your JAR was built properly:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span>jar<span class="w"> </span>tvf<span class="w"> </span>data-formats.jar
<span class="w">     </span><span class="m">0</span><span class="w"> </span>Mon<span class="w"> </span>Mar<span class="w"> </span><span class="m">20</span><span class="w"> </span><span class="m">18</span>:18:36<span class="w"> </span>EDT<span class="w"> </span><span class="m">2017</span><span class="w"> </span>META-INF/
<span class="w">    </span><span class="m">69</span><span class="w"> </span>Mon<span class="w"> </span>Mar<span class="w"> </span><span class="m">20</span><span class="w"> </span><span class="m">18</span>:18:36<span class="w"> </span>EDT<span class="w"> </span><span class="m">2017</span><span class="w"> </span>META-INF/MANIFEST.MF
<span class="w"> </span><span class="m">28473</span><span class="w"> </span>Mon<span class="w"> </span>Mar<span class="w"> </span><span class="m">20</span><span class="w"> </span><span class="m">14</span>:49:54<span class="w"> </span>EDT<span class="w"> </span><span class="m">2017</span><span class="w"> </span>reference.conf
</pre></div>
</div>
<p>Use the <code class="docutils literal notranslate"><span class="pre">ExtraClasspaths</span></code> property to point your processor to the JAR file. The property takes a list of
comma-delimited resources. Once set, the <code class="docutils literal notranslate"><span class="pre">SftName</span></code> and/or <code class="docutils literal notranslate"><span class="pre">ConverterName</span></code> properties will update with the
name of your converters. You will need to close the configuration panel and re-open it in order for the
properties to update.</p>
</section>
<section id="defining-simplefeaturetypes-and-converters-via-the-ui">
<h3><span class="section-number">12.3.1.2. </span>Defining SimpleFeatureTypes and Converters via the UI<a class="headerlink" href="#defining-simplefeaturetypes-and-converters-via-the-ui" title="Permalink to this headline">¶</a></h3>
<p>You may also provide SimpleFeatureTypes and Converters directly in the Processor configuration via the NiFi UI.
Simply paste your TypeSafe configuration into the <code class="docutils literal notranslate"><span class="pre">SftSpec</span></code> and <code class="docutils literal notranslate"><span class="pre">ConverterSpec</span></code> property fields.</p>
</section>
<section id="defining-simplefeaturetypes-and-converters-via-flow-file-attributes">
<h3><span class="section-number">12.3.1.3. </span>Defining SimpleFeatureTypes and Converters via Flow File Attributes<a class="headerlink" href="#defining-simplefeaturetypes-and-converters-via-flow-file-attributes" title="Permalink to this headline">¶</a></h3>
<p>You may also override the Processor configuration fields with flow file attributes. The following attributes
are available:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">geomesa.sft.name</span></code> corresponds to the Processor configuration <code class="docutils literal notranslate"><span class="pre">FeatureNameOverride</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">geomesa.sft.spec</span></code> corresponds to the Processor configuration <code class="docutils literal notranslate"><span class="pre">SftSpec</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">geomesa.converter</span></code> corresponds to the Processor configuration <code class="docutils literal notranslate"><span class="pre">ConverterSpec</span></code></p></li>
</ul>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Configuration via flow file attributes should be used with care, as any misconfigurations may multiply.
For example, setting <code class="docutils literal notranslate"><span class="pre">geomesa.sft.name</span></code> to a non-recurring value could end up creating a new schema for each
flow file, potentially crashing your database by creating too many tables.</p>
</div>
</section>
</section>
<section id="initializing-schemas">
<h2><span class="section-number">12.3.2. </span>Initializing Schemas<a class="headerlink" href="#initializing-schemas" title="Permalink to this headline">¶</a></h2>
<p>The <code class="docutils literal notranslate"><span class="pre">InitializeSchemas</span></code> configuration can be used to create schemas in the underlying data store when the
processor is started, instead of having to wait for data to flow through the processor. The schemas are defined
as a standard Java properties file, where each line of the configuration should contain the name of a feature type
as the key and the definition of the type as the value, corresponding to <code class="docutils literal notranslate"><span class="pre">FeatureNameOverride</span></code> and
<code class="docutils literal notranslate"><span class="pre">SftName</span></code> / <code class="docutils literal notranslate"><span class="pre">SftSpec</span></code> (see above). For example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">gdelt</span><span class="o">=</span><span class="n">gdelt2</span>
<span class="n">example</span><span class="o">-</span><span class="n">csv</span><span class="o">=</span><span class="n">example</span><span class="o">-</span><span class="n">csv</span>
<span class="n">test</span><span class="o">=</span><span class="n">name</span><span class="p">:</span><span class="n">String</span><span class="p">,</span><span class="n">dtg</span><span class="p">:</span><span class="n">Date</span><span class="p">,</span><span class="o">*</span><span class="n">geom</span><span class="p">:</span><span class="n">Point</span><span class="p">:</span><span class="n">srid</span><span class="o">=</span><span class="mi">436</span>
</pre></div>
</div>
</section>
<section id="converter-metrics">
<h2><span class="section-number">12.3.3. </span>Converter Metrics<a class="headerlink" href="#converter-metrics" title="Permalink to this headline">¶</a></h2>
<p>GeoMesa supports publishing metrics on the ingest conversion process. See <a class="reference internal" href="../convert/parsing_and_validation.html#converter-metrics"><span class="std std-ref">Metrics</span></a> and
<a class="reference internal" href="../appendix/metrics.html#geomesa-metrics"><span class="std std-ref">GeoMesa Metrics</span></a> for details. The GeoMesa NiFi converter processors allow the metrics reporters to be
configured directly in NiFi with the <code class="docutils literal notranslate"><span class="pre">ConverterMetricReporters</span></code> property, instead of in the converter definition.
The property expects a TypeSafe Config block defining the reporters or list of reporters, for example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="nb">type</span>     <span class="o">=</span> <span class="s2">&quot;slf4j&quot;</span>
  <span class="n">units</span>    <span class="o">=</span> <span class="s2">&quot;milliseconds&quot;</span>
  <span class="n">interval</span> <span class="o">=</span> <span class="s2">&quot;60 seconds&quot;</span>
  <span class="n">logger</span>   <span class="o">=</span> <span class="s2">&quot;org.locationtech.geomesa.metrics&quot;</span>
  <span class="n">level</span>    <span class="o">=</span> <span class="s2">&quot;debug&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="processors.html" class="btn btn-neutral float-left" title="12.2. Processors" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="records.html" class="btn btn-neutral float-right" title="12.4. Record Processors" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p></p>
  </div>

  

<div role="contentinfo">
  <p>
    &copy; Copyright 2013-2024 <a href="https://www.ga-ccri.com/">General Atomics</a>
    <br/>
    Licensed under the <a href="https://www.opensource.org/licenses/apache2.0.php">Apache License, Version 2.0</a>
  </p>
</div>

<div role="contentinfo">
  <p>
    Built with <a href="https://www.sphinx-doc.org/">Sphinx</a>
    using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>
    - contribute to this page on
    <a href="https://github.com/locationtech/geomesa/edit/main/docs/user/nifi/converters.rst">GitHub <img src="../../_static/launch.svg"/></a>
  </p>

</div>



</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>