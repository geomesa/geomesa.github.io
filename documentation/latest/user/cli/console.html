<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>8.10. GeoMesa Scala Console &mdash; GeoMesa 4.0.5 Manuals</title>
      <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/css/theme_custom.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/copybutton.css" type="text/css" />
      <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:400,700" type="text/css" />
      <link rel="stylesheet" href="../../_static/tabs.css" type="text/css" />
    <link rel="canonical" href="https://www.geomesa.org/documentation/user/cli/console.html"/>
  <!--[if lt IE 9]>
    <script src="../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
        <script src="../../_static/jquery.js"></script>
        <script src="../../_static/underscore.js"></script>
        <script src="../../_static/doctools.js"></script>
        <script src="../../_static/clipboard.min.js"></script>
        <script src="../../_static/copybutton.js"></script>
        <script src="../../_static/tabs.js"></script>
    <script src="../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="8.11. Nailgun Server" href="nailgun.html" />
    <link rel="prev" title="8.9. Remote File System Support" href="filesystems.html" />


</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="../../index.html" class="icon icon-home"> GeoMesa
          </a>
              <div class="version">
                5.0.0-SNAPSHOT
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="../index.html">User Manual</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../introduction.html">1. Introduction</a></li>
<li class="toctree-l2"><a class="reference internal" href="../getting_started.html">2. Getting Started</a></li>
<li class="toctree-l2"><a class="reference internal" href="../download.html">3. Versions and Downloads</a></li>
<li class="toctree-l2"><a class="reference internal" href="../install.html">4. Installation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../architecture.html">5. Architecture Overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="../geotools.html">6. GeoTools Overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="../datastores/index.html">7. GeoMesa Data Stores</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="index.html">8. Command-Line Tools</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="status.html">8.1. Environment and Status Commands</a></li>
<li class="toctree-l3"><a class="reference internal" href="schemas.html">8.2. Schema Commands</a></li>
<li class="toctree-l3"><a class="reference internal" href="ingest.html">8.3. Ingest Commands</a></li>
<li class="toctree-l3"><a class="reference internal" href="export.html">8.4. Query and Export Commands</a></li>
<li class="toctree-l3"><a class="reference internal" href="analytic.html">8.5. Analytic Commands</a></li>
<li class="toctree-l3"><a class="reference internal" href="sfts.html">8.6. Defining Simple Feature Types</a></li>
<li class="toctree-l3"><a class="reference internal" href="converters.html">8.7. Defining Simple Feature Converters</a></li>
<li class="toctree-l3"><a class="reference internal" href="logging.html">8.8. Logging Configuration</a></li>
<li class="toctree-l3"><a class="reference internal" href="filesystems.html">8.9. Remote File System Support</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">8.10. GeoMesa Scala Console</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#example-usage">8.10.1. Example Usage</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="nailgun.html">8.11. Nailgun Server</a></li>
<li class="toctree-l3"><a class="reference internal" href="geotools.html">8.12. GeoTools Command-Line Tools</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../convert/index.html">9. GeoMesa Converters</a></li>
<li class="toctree-l2"><a class="reference internal" href="../geoserver.html">10. GeoServer Plugins</a></li>
<li class="toctree-l2"><a class="reference internal" href="../spark/index.html">11. GeoMesa Spark</a></li>
<li class="toctree-l2"><a class="reference internal" href="../nifi/index.html">12. GeoMesa NiFi Bundle</a></li>
<li class="toctree-l2"><a class="reference internal" href="../process.html">13. GeoMesa Processes</a></li>
<li class="toctree-l2"><a class="reference internal" href="../hbase/index.html">14. HBase Data Store</a></li>
<li class="toctree-l2"><a class="reference internal" href="../accumulo/index.html">15. Accumulo Data Store</a></li>
<li class="toctree-l2"><a class="reference internal" href="../cassandra/index.html">16. Cassandra Data Store</a></li>
<li class="toctree-l2"><a class="reference internal" href="../kafka/index.html">17. Kafka Data Store</a></li>
<li class="toctree-l2"><a class="reference internal" href="../redis/index.html">18. Redis Data Store</a></li>
<li class="toctree-l2"><a class="reference internal" href="../filesystem/index.html">19. FileSystem Data Store</a></li>
<li class="toctree-l2"><a class="reference internal" href="../postgis/index.html">20. Partitioned PostGIS Data Store</a></li>
<li class="toctree-l2"><a class="reference internal" href="../lambda/index.html">21. Lambda Data Store</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ds_views.html">22. Combined Data Store Views</a></li>
<li class="toctree-l2"><a class="reference internal" href="../upgrade.html">23. Upgrade Guide</a></li>
<li class="toctree-l2"><a class="reference internal" href="../index.html#appendix">Appendix</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../tutorials/index.html">Tutorials</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">GeoMesa</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../index.html" class="icon icon-home"></a></li>
          <li class="breadcrumb-item"><a href="../index.html">User Manual</a></li>
          <li class="breadcrumb-item"><a href="index.html"><span class="section-number">8. </span>Command-Line Tools</a></li>
      <li class="breadcrumb-item active"><span class="section-number">8.10. </span>GeoMesa Scala Console</li>
      <li class="wy-breadcrumbs-aside">
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="geomesa-scala-console">
<h1><span class="section-number">8.10. </span>GeoMesa Scala Console<a class="headerlink" href="#geomesa-scala-console" title="Permalink to this headline">¶</a></h1>
<p>The GeoMesa tools have a <code class="docutils literal notranslate"><span class="pre">scala-console</span></code> command that starts a Scala REPL (read/evaluate/print/loop) configured
for use with GeoMesa. The command will place the GeoMesa classpath and configuration
for that distribution on the REPL’s classpath. Additionally it will preload commonly
used imports. The command also comes with tooling that will provide the option to
download and run the appropriate version Scala if it is not available. This is a
portable install and will not alter the machine’s current configuration.</p>
<section id="example-usage">
<h2><span class="section-number">8.10.1. </span>Example Usage<a class="headerlink" href="#example-usage" title="Permalink to this headline">¶</a></h2>
<p>The following example was performed against the FileSystem data store generated by the
<a class="reference internal" href="../../tutorials/geomesa-quickstart-fsds.html#fsds-quickstart"><span class="std std-ref">GeoMesa FileSystem Quick Start</span></a>. It shows how to use the <code class="docutils literal notranslate"><span class="pre">scala-console</span></code> command to connect
to a FileSystem Datastore, discover the feature type names, get the schema and query for data.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This code is running against the output of the FileSystem Datastore. To reproduce
this code exactly you must run the FileSystem Datastore Quickstart first.</p>
</div>
<div class="sphinx-tabs docutils container">
<div aria-label="Tabbed content" class="closeable" role="tablist"><button aria-controls="panel-0-0-0" aria-selected="true" class="sphinx-tabs-tab" id="tab-0-0-0" name="0-0" role="tab" tabindex="0">Demo</button><button aria-controls="panel-0-0-1" aria-selected="false" class="sphinx-tabs-tab" id="tab-0-0-1" name="0-1" role="tab" tabindex="-1">Transcript</button></div><div aria-labelledby="tab-0-0-0" class="sphinx-tabs-panel" id="panel-0-0-0" name="0-0" role="tabpanel" tabindex="0"><script src="https://asciinema.org/a/163034.js" id="asciicast-163034" async></script></div><div aria-labelledby="tab-0-0-1" class="sphinx-tabs-panel" hidden="true" id="panel-0-0-1" name="0-1" role="tabpanel" tabindex="0"><p>First we run the command, this starts up the Scala REPL with all of the
resources we need.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span>bin/geomesa-fs<span class="w"> </span>scala-console
</pre></div>
</div>
<p>We see it import commonly used libraries and present us with the REPL prompt.</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>Loading /tmp/geomesa-fs_2.11-2.0.0-SNAPSHOT/conf/.scala_repl_init...
import org.geotools.data._
import org.geotools.filter.text.ecql.ECQL
import org.opengis.feature.simple._
import org.locationtech.geomesa.utils.geotools.SimpleFeatureTypes
import org.locationtech.geomesa.features.ScalaSimpleFeature
import org.locationtech.geomesa.utils.collection.SelfClosingIterator
import scala.collection.JavaConverters._

Welcome to Scala 2.11.8 (Java HotSpot(TM) 64-Bit Server VM, Java 1.8.0_101).
Type in expressions for evaluation. Or try :help.

scala&gt;
</pre></div>
</div>
<p>Next we get a connection to the FileSystem Datastore.</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>scala&gt; val dsParams = Map(&quot;fs.path&quot; -&gt; &quot;file:///tmp/fsds/&quot;, &quot;fs.encoding&quot; -&gt; &quot;parquet&quot;)
dsParams: scala.collection.immutable.Map[String,String] = Map(fs.path -&gt; file:///tmp/fsds/, fs.encoding -&gt; parquet)

scala&gt; val ds = DataStoreFinder.getDataStore(dsParams.asJava)
ds: org.geotools.data.DataStore = org.locationtech.geomesa.fs.FileSystemDataStore@27a7ef08
</pre></div>
</div>
<p>Now we do some example discovery to see what feature types and schemas are stored
in the database.</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>scala&gt; ds.getTypeNames()
res0: Array[String] = Array(gdelt-quickstart)

scala&gt; val sft = ds.getSchema(&quot;gdelt-quickstart&quot;)
sft: org.opengis.feature.simple.SimpleFeatureType = SimpleFeatureTypeImpl gdelt-quickstart identified extends Feature(GLOBALEVENTID:GLOBALEVENTID,Actor1Name:Actor1Name,Actor1CountryCode:Actor1CountryCode,Actor2Name:Actor2Name,Actor2CountryCode:Actor2CountryCode,EventCode:EventCode,NumMentions:NumMentions,NumSources:NumSources,NumArticles:NumArticles,ActionGeo_Type:ActionGeo_Type,ActionGeo_FullName:ActionGeo_FullName,ActionGeo_CountryCode:ActionGeo_CountryCode,dtg:dtg,geom:geom)
</pre></div>
</div>
<p>In order to sample the data we create a <code class="docutils literal notranslate"><span class="pre">Query</span></code> and a <code class="docutils literal notranslate"><span class="pre">FeatureReader</span></code> and
then run the query.</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>scala&gt; val query = new Query(sft.getName.toString())
query: org.geotools.data.Query =
Query:
   feature type: gdelt-quickstart
   filter: Filter.INCLUDE
   [properties:  ALL ]

scala&gt; val reader = ds.getFeatureReader(query, Transaction.AUTO_COMMIT)
reader: org.geotools.data.FeatureReader[org.opengis.feature.simple.SimpleFeatureType,org.opengis.feature.simple.SimpleFeature] = org.geotools.data.simple.DelegateSimpleFeatureReader@7bd96822
</pre></div>
</div>
<p>Next, we consume the <code class="docutils literal notranslate"><span class="pre">FeatureReader</span></code>, printing out the results.</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>scala&gt; while (reader.hasNext()) { println(reader.next().toString()) }
ScalaSimpleFeature:719024956:719024956|||GANG||120|6|1|6|1|Brazil|BR|Sun Dec 31 19:00:00 EST 2017|POINT (-55 -10)
ScalaSimpleFeature:719024898:719024898|||SYDNEY|AUS|010|14|2|14|4|Sydney, New South Wales, Australia|AS|Sun Dec 31 19:00:00 EST 2017|POINT (151.217 -33.8833)
ScalaSimpleFeature:719024882:719024882|SECURITY COUNCIL||PYONGYANG|PRK|163|2|1|2|1|Russia|RS|Sun Dec 24 19:00:00 EST 2017|POINT (100 60)
ScalaSimpleFeature:719024881:719024881|||RUSSIA|RUS|042|2|1|2|3|Allegheny County, Pennsylvania, United States|US|Sun Dec 24 19:00:00 EST 2017|POINT (-80.1251 40.6253)
ScalaSimpleFeature:719025149:719025149|ARGENTINE|ARG|DIOCESE||010|1|1|1|4|Corrientes, Corrientes, Argentina|AR|Sun Dec 31 19:00:00 EST 2017|POINT (-58.8341 -27.4806)
...
</pre></div>
</div>
<p>Finally, we cleanup our connections.</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>scala&gt; reader.close()

scala&gt; ds.dispose()
</pre></div>
</div>
</div></div>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="filesystems.html" class="btn btn-neutral float-left" title="8.9. Remote File System Support" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="nailgun.html" class="btn btn-neutral float-right" title="8.11. Nailgun Server" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p></p>
  </div>

  

<div role="contentinfo">
  <p>
    &copy; Copyright 2013-2024 <a href="https://www.ga-ccri.com/">General Atomics</a>
    <br/>
    Licensed under the <a href="https://www.opensource.org/licenses/apache2.0.php">Apache License, Version 2.0</a>
  </p>
</div>

<div role="contentinfo">
  <p>
    Built with <a href="https://www.sphinx-doc.org/">Sphinx</a>
    using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>
    - contribute to this page on
    <a href="https://github.com/locationtech/geomesa/edit/main/docs/user/cli/console.rst">GitHub <img src="../../_static/launch.svg"/></a>
  </p>

</div>



</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>