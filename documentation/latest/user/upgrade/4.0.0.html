<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>24.8. Version 4.0.0 &mdash; GeoMesa 6.0.0-SNAPSHOT Manuals</title>
      <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/css/theme_custom.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/copybutton.css" type="text/css" />
      <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:400,700" type="text/css" />
      <link rel="stylesheet" href="../../_static/tabs.css" type="text/css" />
    <link rel="canonical" href="https://www.geomesa.org/documentation/stable/user/upgrade/4.0.0.html"/>
  <!--[if lt IE 9]>
    <script src="../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
        <script src="../../_static/jquery.js"></script>
        <script src="../../_static/underscore.js"></script>
        <script src="../../_static/doctools.js"></script>
        <script src="../../_static/clipboard.min.js"></script>
        <script src="../../_static/copybutton.js"></script>
    <script src="../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="24.9. Version 3.5.0" href="3.5.0.html" />
    <link rel="prev" title="24.7. Version 5.0.0" href="5.0.0.html" />


</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="../../index.html" class="icon icon-home"> GeoMesa
          </a>
              <div class="version">
                6.0.0-SNAPSHOT
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="../index.html">User Manual</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../introduction.html">1. Introduction</a></li>
<li class="toctree-l2"><a class="reference internal" href="../getting_started.html">2. Getting Started</a></li>
<li class="toctree-l2"><a class="reference internal" href="../download.html">3. Versions and Downloads</a></li>
<li class="toctree-l2"><a class="reference internal" href="../install.html">4. Installation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../architecture.html">5. Architecture Overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="../geotools.html">6. GeoTools Overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="../datastores/index.html">7. GeoMesa Data Stores</a></li>
<li class="toctree-l2"><a class="reference internal" href="../cli/index.html">8. Command-Line Tools</a></li>
<li class="toctree-l2"><a class="reference internal" href="../convert/index.html">9. GeoMesa Converters</a></li>
<li class="toctree-l2"><a class="reference internal" href="../geoserver.html">10. GeoServer Plugins</a></li>
<li class="toctree-l2"><a class="reference internal" href="../spark/index.html">11. GeoMesa Spark</a></li>
<li class="toctree-l2"><a class="reference internal" href="../nifi/index.html">12. GeoMesa NiFi Bundle</a></li>
<li class="toctree-l2"><a class="reference internal" href="../process.html">13. GeoMesa Processes</a></li>
<li class="toctree-l2"><a class="reference internal" href="../accumulo/index.html">14. Accumulo Data Store</a></li>
<li class="toctree-l2"><a class="reference internal" href="../hbase/index.html">15. HBase Data Store</a></li>
<li class="toctree-l2"><a class="reference internal" href="../cassandra/index.html">16. Cassandra Data Store</a></li>
<li class="toctree-l2"><a class="reference internal" href="../scylladb/index.html">17. ScyllaDB Data Store</a></li>
<li class="toctree-l2"><a class="reference internal" href="../postgis/index.html">18. Partitioned PostGIS Data Store</a></li>
<li class="toctree-l2"><a class="reference internal" href="../kafka/index.html">19. Kafka Data Store</a></li>
<li class="toctree-l2"><a class="reference internal" href="../redis/index.html">20. Redis Data Store</a></li>
<li class="toctree-l2"><a class="reference internal" href="../filesystem/index.html">21. FileSystem Data Store</a></li>
<li class="toctree-l2"><a class="reference internal" href="../lambda/index.html">22. Lambda Data Store</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ds_views.html">23. Combined Data Store Views</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="index.html">24. Upgrade Guide</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="compatibility.html">24.1. Compatibility Across Versions</a></li>
<li class="toctree-l3"><a class="reference internal" href="6.0.0.html">24.2. Version 6.0.0</a></li>
<li class="toctree-l3"><a class="reference internal" href="5.4.0.html">24.3. Version 5.4.0</a></li>
<li class="toctree-l3"><a class="reference internal" href="5.3.0.html">24.4. Version 5.3.0</a></li>
<li class="toctree-l3"><a class="reference internal" href="5.2.0.html">24.5. Version 5.2.0</a></li>
<li class="toctree-l3"><a class="reference internal" href="5.1.0.html">24.6. Version 5.1.0</a></li>
<li class="toctree-l3"><a class="reference internal" href="5.0.0.html">24.7. Version 5.0.0</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">24.8. Version 4.0.0</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#version-compatibility">24.8.1. Version Compatibility</a></li>
<li class="toctree-l4"><a class="reference internal" href="#scala-versions">24.8.2. Scala Versions</a></li>
<li class="toctree-l4"><a class="reference internal" href="#geotools-geoserver-versions">24.8.3. GeoTools/GeoServer Versions</a></li>
<li class="toctree-l4"><a class="reference internal" href="#dependency-version-upgrades">24.8.4. Dependency Version Upgrades</a></li>
<li class="toctree-l4"><a class="reference internal" href="#minimum-library-versions">24.8.5. Minimum Library Versions</a></li>
<li class="toctree-l4"><a class="reference internal" href="#removal-of-deprecated-modules">24.8.6. Removal of Deprecated Modules</a></li>
<li class="toctree-l4"><a class="reference internal" href="#package-changes">24.8.7. Package Changes</a></li>
<li class="toctree-l4"><a class="reference internal" href="#geomesa-nifi-changes">24.8.8. GeoMesa NiFi Changes</a></li>
<li class="toctree-l4"><a class="reference internal" href="#scan-range-changes">24.8.9. Scan Range Changes</a></li>
<li class="toctree-l4"><a class="reference internal" href="#partitioned-postgis-query-changes">24.8.10. Partitioned PostGIS Query Changes</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="3.5.0.html">24.9. Version 3.5.0</a></li>
<li class="toctree-l3"><a class="reference internal" href="older.html">24.10. Older Versions</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../index.html#appendix">Appendix</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../tutorials/index.html">Tutorials</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">GeoMesa</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../index.html" class="icon icon-home"></a></li>
          <li class="breadcrumb-item"><a href="../index.html">User Manual</a></li>
          <li class="breadcrumb-item"><a href="index.html"><span class="section-number">24. </span>Upgrade Guide</a></li>
      <li class="breadcrumb-item active"><span class="section-number">24.8. </span>Version 4.0.0</li>
      <li class="wy-breadcrumbs-aside">
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="version-4-0-0">
<h1><span class="section-number">24.8. </span>Version 4.0.0<a class="headerlink" href="#version-4-0-0" title="Permalink to this headline">¶</a></h1>
<section id="version-compatibility">
<h2><span class="section-number">24.8.1. </span>Version Compatibility<a class="headerlink" href="#version-compatibility" title="Permalink to this headline">¶</a></h2>
<p>GeoMesa 4.0.0 is focused on upgrading dependency versions and removing deprecated features, and only contains
a few new features. To make upgrading easier, version 4.0.x is generally compatible with version 3.5.x across
different environments. This means that it is possible to upgrade in parts; i.e. upgrade GeoServer to 4.0.0
but keep NiFi at 3.5.1. Please note that previously deprecated functionality (see below) may no longer work once
any part of the environment is upgraded to 4.0.0.</p>
</section>
<section id="scala-versions">
<h2><span class="section-number">24.8.2. </span>Scala Versions<a class="headerlink" href="#scala-versions" title="Permalink to this headline">¶</a></h2>
<p>Scala 2.11 support has been removed, and Scala 2.13 support has been added (in addition to the existing
Scala 2.12 support).</p>
</section>
<section id="geotools-geoserver-versions">
<h2><span class="section-number">24.8.3. </span>GeoTools/GeoServer Versions<a class="headerlink" href="#geotools-geoserver-versions" title="Permalink to this headline">¶</a></h2>
<p>GeoTools has been upgraded from <code class="docutils literal notranslate"><span class="pre">23.3</span></code> to <code class="docutils literal notranslate"><span class="pre">28.2</span></code>. GeoServer has been upgrade from <code class="docutils literal notranslate"><span class="pre">2.17.3</span></code> to <code class="docutils literal notranslate"><span class="pre">2.22.2</span></code>.
JTS has been upgraded from <code class="docutils literal notranslate"><span class="pre">1.17.0</span></code> to <code class="docutils literal notranslate"><span class="pre">1.19.0</span></code>.</p>
<p>As part of this upgrade, various GeoTools methods have changed in incompatible ways. Several classes, in
particular <code class="docutils literal notranslate"><span class="pre">Query</span></code> and <code class="docutils literal notranslate"><span class="pre">SimpleFeatureBuilder</span></code>, have changed from accepting arrays to using varargs (variable
arguments). Additionally, the various <code class="docutils literal notranslate"><span class="pre">DataStore</span></code> methods, such as <code class="docutils literal notranslate"><span class="pre">DataStoreFinder</span></code>, now require
<code class="docutils literal notranslate"><span class="pre">Map&lt;String,</span> <span class="pre">?&gt;</span></code> instead of <code class="docutils literal notranslate"><span class="pre">Map&lt;String,</span> <span class="pre">?</span> <span class="pre">extends</span> <span class="pre">Serializable&gt;</span></code>.</p>
</section>
<section id="dependency-version-upgrades">
<h2><span class="section-number">24.8.4. </span>Dependency Version Upgrades<a class="headerlink" href="#dependency-version-upgrades" title="Permalink to this headline">¶</a></h2>
<p>The following high-level dependencies have been upgraded:</p>
<ul class="simple">
<li><p>Apache Hadoop <code class="docutils literal notranslate"><span class="pre">2.8.5</span></code> -&gt; <code class="docutils literal notranslate"><span class="pre">2.10.2</span></code></p></li>
<li><p>Apache Spark <code class="docutils literal notranslate"><span class="pre">2.4.7</span></code> -&gt; <code class="docutils literal notranslate"><span class="pre">3.3.1</span></code></p></li>
<li><p>Apache Accumulo <code class="docutils literal notranslate"><span class="pre">2.0.0</span></code> -&gt; <code class="docutils literal notranslate"><span class="pre">2.0.1</span></code></p></li>
<li><p>Apache HBase <code class="docutils literal notranslate"><span class="pre">1.4.12</span></code> -&gt; <code class="docutils literal notranslate"><span class="pre">1.4.14</span></code>, <code class="docutils literal notranslate"><span class="pre">2.2.3</span></code> -&gt; <code class="docutils literal notranslate"><span class="pre">2.5.2</span></code></p></li>
<li><p>Apache Kafka <code class="docutils literal notranslate"><span class="pre">2.1.1</span></code> -&gt; <code class="docutils literal notranslate"><span class="pre">2.8.2</span></code></p></li>
<li><p>Apache Arrow <code class="docutils literal notranslate"><span class="pre">0.16.0</span></code> -&gt; <code class="docutils literal notranslate"><span class="pre">11.0.0</span></code></p></li>
<li><p>Apache Avro <code class="docutils literal notranslate"><span class="pre">1.8.2</span></code> -&gt; <code class="docutils literal notranslate"><span class="pre">1.11.1</span></code></p></li>
<li><p>Apache Parquet <code class="docutils literal notranslate"><span class="pre">1.9.0</span></code> -&gt; <code class="docutils literal notranslate"><span class="pre">1.12.3</span></code></p></li>
<li><p>Apache Orc <code class="docutils literal notranslate"><span class="pre">1.5.4</span></code> -&gt; <code class="docutils literal notranslate"><span class="pre">1.8.2</span></code></p></li>
<li><p>Jedis <code class="docutils literal notranslate"><span class="pre">3.0.1</span></code> -&gt; <code class="docutils literal notranslate"><span class="pre">4.3.1</span></code></p></li>
<li><p>Confluent <code class="docutils literal notranslate"><span class="pre">5.1.0</span></code> -&gt; <code class="docutils literal notranslate"><span class="pre">6.2.7</span></code></p></li>
<li><p>Kryo <code class="docutils literal notranslate"><span class="pre">3.0.3</span></code> -&gt; <code class="docutils literal notranslate"><span class="pre">4.0.2</span></code></p></li>
<li><p>Typesafe Config <code class="docutils literal notranslate"><span class="pre">1.3.3</span></code> -&gt; <code class="docutils literal notranslate"><span class="pre">1.4.2</span></code></p></li>
<li><p>EJML <code class="docutils literal notranslate"><span class="pre">0.34</span></code> -&gt; <code class="docutils literal notranslate"><span class="pre">0.41</span></code></p></li>
<li><p>Saxon <code class="docutils literal notranslate"><span class="pre">9.7.0-20</span></code> -&gt; <code class="docutils literal notranslate"><span class="pre">11.4</span></code></p></li>
</ul>
<p>For a full changelist of all dependencies, see the diff
<a class="reference external" href="https://gist.github.com/elahrvivaz/f86d31f78b57bf92113c16661a886c12/revisions?diff=split">here</a>.</p>
</section>
<section id="minimum-library-versions">
<h2><span class="section-number">24.8.5. </span>Minimum Library Versions<a class="headerlink" href="#minimum-library-versions" title="Permalink to this headline">¶</a></h2>
<p>Support for older versions of some libraries has been dropped. The following minimum versions are now required:</p>
<ul class="simple">
<li><p>Apache Accumulo <code class="docutils literal notranslate"><span class="pre">2.0.0</span></code> (dropped support for <code class="docutils literal notranslate"><span class="pre">1.7</span></code>, <code class="docutils literal notranslate"><span class="pre">1.8</span></code>, <code class="docutils literal notranslate"><span class="pre">1.9</span></code>, and <code class="docutils literal notranslate"><span class="pre">1.10</span></code>)</p></li>
<li><p>Apache Spark <code class="docutils literal notranslate"><span class="pre">3.0</span></code> (dropped support for <code class="docutils literal notranslate"><span class="pre">2.4</span></code>)</p></li>
<li><p>Apache Kafka <code class="docutils literal notranslate"><span class="pre">2.0</span></code> (dropped support for <code class="docutils literal notranslate"><span class="pre">0.10</span></code>, <code class="docutils literal notranslate"><span class="pre">0.11</span></code>, <code class="docutils literal notranslate"><span class="pre">1.0</span></code>, and <code class="docutils literal notranslate"><span class="pre">1.1</span></code>)</p></li>
</ul>
</section>
<section id="removal-of-deprecated-modules">
<h2><span class="section-number">24.8.6. </span>Removal of Deprecated Modules<a class="headerlink" href="#removal-of-deprecated-modules" title="Permalink to this headline">¶</a></h2>
<p>The following deprecated modules were removed:</p>
<ul class="simple">
<li><p>geomesa-bigtable</p></li>
<li><p>geomesa-kudu</p></li>
<li><p>geomesa-stream</p></li>
<li><p>geomesa-geojson</p></li>
<li><p>geomesa-web</p></li>
<li><p>geomesa-feature-nio</p></li>
<li><p>geomesa-convert-metrics-cloudwatch</p></li>
<li><p>geomesa-convert-metrics-ganglia</p></li>
<li><p>geomesa-convert-metrics-graphite</p></li>
</ul>
<p>In addition, various other deprecated classes and methods were removed. To identify any code that requires changes,
build your project against GeoMesa 3.5.1 and note any deprecation warnings generated by the compiler.</p>
</section>
<section id="package-changes">
<h2><span class="section-number">24.8.7. </span>Package Changes<a class="headerlink" href="#package-changes" title="Permalink to this headline">¶</a></h2>
<p>The following packages were moved, renamed or split in order to support Java 11 modules:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">org.locationtech.geomesa.jobs.accumulo</span></code> -&gt; <code class="docutils literal notranslate"><span class="pre">org.locationtech.geomesa.accumulo.jobs</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">org.locationtech.geomesa.spark.accumulo</span></code> -&gt; <code class="docutils literal notranslate"><span class="pre">org.locationtech.geomesa.accumulo.spark</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">org.locationtech.geomesa.spark.hbase</span></code> -&gt; <code class="docutils literal notranslate"><span class="pre">org.locationtech.geomesa.hbase.spark</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">org.locationtech.geomesa.arrow.vector</span></code> (partial) -&gt; <code class="docutils literal notranslate"><span class="pre">package</span> <span class="pre">org.locationtech.geomesa.arrow.jts</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">org.locationtech.geomesa.parquet</span></code> -&gt; <code class="docutils literal notranslate"><span class="pre">org.locationtech.geomesa.fs.storage.parquet</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">org.locationtech.geomesa.process</span></code> (partial) -&gt; <code class="docutils literal notranslate"><span class="pre">org.locationtech.geomesa.process.wps</span></code></p></li>
</ul>
</section>
<section id="geomesa-nifi-changes">
<h2><span class="section-number">24.8.8. </span>GeoMesa NiFi Changes<a class="headerlink" href="#geomesa-nifi-changes" title="Permalink to this headline">¶</a></h2>
<p>GeoMesa NiFi is now built against NiFi 1.19.1. The GeoMesa NARs and JARs have been renamed to include the Scala
version (i.e. <code class="docutils literal notranslate"><span class="pre">geomesa-datastore-services-nar_2.12-4.0.0.nar</span></code>). The datastore-specific processors (e.g.
<code class="docutils literal notranslate"><span class="pre">PutGeoMesaHBase</span></code>) have been removed in favor of the generic processors (e.g. <code class="docutils literal notranslate"><span class="pre">PutGeoMesa</span></code>). The
recommended upgrade path is to first upgrade to GeoMesa NiFi 3.5.1, and replace all the datastore-specific
processors in the flow. This will ensure that the flow is still valid after upgrading to GeoMesa NiFi 4.0.0.
The <code class="docutils literal notranslate"><span class="pre">geomesa-accumulo2-nar</span></code> has been replaced with <code class="docutils literal notranslate"><span class="pre">geomesa-accumulo20-nar</span></code>, and there is an additional
<code class="docutils literal notranslate"><span class="pre">geomesa-accumulo21-nar</span></code> for Accumulo 2.1 support.</p>
</section>
<section id="scan-range-changes">
<h2><span class="section-number">24.8.9. </span>Scan Range Changes<a class="headerlink" href="#scan-range-changes" title="Permalink to this headline">¶</a></h2>
<p>GeoMesa will now generate a more accurate number of ranges based on <code class="docutils literal notranslate"><span class="pre">geomesa.scan.ranges.target</span></code>. Users
who have configured this property should verify their setting is still appropriate, especially if set to a
large value. Setting <code class="docutils literal notranslate"><span class="pre">geomesa.scan.ranges.recurse</span></code> to <code class="docutils literal notranslate"><span class="pre">7</span></code> will restore the old behavior if needed.</p>
</section>
<section id="partitioned-postgis-query-changes">
<h2><span class="section-number">24.8.10. </span>Partitioned PostGIS Query Changes<a class="headerlink" href="#partitioned-postgis-query-changes" title="Permalink to this headline">¶</a></h2>
<p>GeoMesa will now ignore queries that encompass the entire world in the partitioned PostGIS data store. For more
information, refer to <a class="reference internal" href="../postgis/index_config.html#postgis-filter-world"><span class="std std-ref">Configuring Filter Optimizations</span></a>.</p>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="5.0.0.html" class="btn btn-neutral float-left" title="24.7. Version 5.0.0" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="3.5.0.html" class="btn btn-neutral float-right" title="24.9. Version 3.5.0" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p></p>
  </div>

  

<div role="contentinfo">
  <p>
    &copy; Copyright 2013-2025 <a href="https://www.ga-intelligence.com/">General Atomics</a>
    <br/>
    Licensed under the <a href="https://www.apache.org/licenses/LICENSE-2.0">Apache License, Version 2.0</a>
  </p>
</div>

<div role="contentinfo">
  <p>
    Built with <a href="https://www.sphinx-doc.org/">Sphinx</a>
    using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>
    - contribute to this page on
    <a href="https://github.com/locationtech/geomesa/edit/main/docs/user/upgrade/4.0.0.rst">GitHub <img src="../../_static/launch.svg"/></a>
  </p>

</div>



</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>