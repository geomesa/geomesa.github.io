<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>18.2. Kafka Data Store Parameters &mdash; GeoMesa 5.5.0-SNAPSHOT Manuals</title>
      <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/css/theme_custom.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/copybutton.css" type="text/css" />
      <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:400,700" type="text/css" />
      <link rel="stylesheet" href="../../_static/tabs.css" type="text/css" />
    <link rel="canonical" href="https://www.geomesa.org/documentation/stable/user/kafka/usage.html"/>
  <!--[if lt IE 9]>
    <script src="../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
        <script src="../../_static/jquery.js"></script>
        <script src="../../_static/underscore.js"></script>
        <script src="../../_static/doctools.js"></script>
        <script src="../../_static/clipboard.min.js"></script>
        <script src="../../_static/copybutton.js"></script>
    <script src="../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="18.3. Data Producers" href="producers.html" />
    <link rel="prev" title="18.1. Installing GeoMesa Kafka" href="install.html" />


</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="../../index.html" class="icon icon-home"> GeoMesa
          </a>
              <div class="version">
                5.5.0-SNAPSHOT
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="../index.html">User Manual</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../introduction.html">1. Introduction</a></li>
<li class="toctree-l2"><a class="reference internal" href="../getting_started.html">2. Getting Started</a></li>
<li class="toctree-l2"><a class="reference internal" href="../download.html">3. Versions and Downloads</a></li>
<li class="toctree-l2"><a class="reference internal" href="../install.html">4. Installation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../architecture.html">5. Architecture Overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="../geotools.html">6. GeoTools Overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="../datastores/index.html">7. GeoMesa Data Stores</a></li>
<li class="toctree-l2"><a class="reference internal" href="../cli/index.html">8. Command-Line Tools</a></li>
<li class="toctree-l2"><a class="reference internal" href="../convert/index.html">9. GeoMesa Converters</a></li>
<li class="toctree-l2"><a class="reference internal" href="../geoserver.html">10. GeoServer Plugins</a></li>
<li class="toctree-l2"><a class="reference internal" href="../spark/index.html">11. GeoMesa Spark</a></li>
<li class="toctree-l2"><a class="reference internal" href="../nifi/index.html">12. GeoMesa NiFi Bundle</a></li>
<li class="toctree-l2"><a class="reference internal" href="../process.html">13. GeoMesa Processes</a></li>
<li class="toctree-l2"><a class="reference internal" href="../accumulo/index.html">14. Accumulo Data Store</a></li>
<li class="toctree-l2"><a class="reference internal" href="../hbase/index.html">15. HBase Data Store</a></li>
<li class="toctree-l2"><a class="reference internal" href="../cassandra/index.html">16. Cassandra Data Store</a></li>
<li class="toctree-l2"><a class="reference internal" href="../postgis/index.html">17. Partitioned PostGIS Data Store</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="index.html">18. Kafka Data Store</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="install.html">18.1. Installing GeoMesa Kafka</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">18.2. Kafka Data Store Parameters</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#programmatic-access">18.2.1. Programmatic Access</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="producers.html">18.3. Data Producers</a></li>
<li class="toctree-l3"><a class="reference internal" href="consumers.html">18.4. Data Consumers</a></li>
<li class="toctree-l3"><a class="reference internal" href="geoserver.html">18.5. Using the Kafka Data Store in GeoServer</a></li>
<li class="toctree-l3"><a class="reference internal" href="commandline.html">18.6. Kafka Command-Line Tools</a></li>
<li class="toctree-l3"><a class="reference internal" href="index_config.html">18.7. Kafka Index Configuration</a></li>
<li class="toctree-l3"><a class="reference internal" href="data.html">18.8. Data Management</a></li>
<li class="toctree-l3"><a class="reference internal" href="transactional_writes.html">18.9. Transactional Writes</a></li>
<li class="toctree-l3"><a class="reference internal" href="feature_events.html">18.10. Kafka Feature Events</a></li>
<li class="toctree-l3"><a class="reference internal" href="layer_views.html">18.11. Layer Views</a></li>
<li class="toctree-l3"><a class="reference internal" href="confluent.html">18.12. Confluent Integration</a></li>
<li class="toctree-l3"><a class="reference internal" href="streams.html">18.13. Kafka Streams Integration</a></li>
<li class="toctree-l3"><a class="reference internal" href="zookeeper.html">18.14. Zookeeper-less Usage</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../redis/index.html">19. Redis Data Store</a></li>
<li class="toctree-l2"><a class="reference internal" href="../filesystem/index.html">20. FileSystem Data Store</a></li>
<li class="toctree-l2"><a class="reference internal" href="../lambda/index.html">21. Lambda Data Store</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ds_views.html">22. Combined Data Store Views</a></li>
<li class="toctree-l2"><a class="reference internal" href="../upgrade.html">23. Upgrade Guide</a></li>
<li class="toctree-l2"><a class="reference internal" href="../index.html#appendix">Appendix</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../tutorials/index.html">Tutorials</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">GeoMesa</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../index.html" class="icon icon-home"></a></li>
          <li class="breadcrumb-item"><a href="../index.html">User Manual</a></li>
          <li class="breadcrumb-item"><a href="index.html"><span class="section-number">18. </span>Kafka Data Store</a></li>
      <li class="breadcrumb-item active"><span class="section-number">18.2. </span>Kafka Data Store Parameters</li>
      <li class="wy-breadcrumbs-aside">
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="kafka-data-store-parameters">
<span id="kafka-parameters"></span><h1><span class="section-number">18.2. </span>Kafka Data Store Parameters<a class="headerlink" href="#kafka-data-store-parameters" title="Permalink to this headline">¶</a></h1>
<p>The Kafka data store differs from most data stores in that the data set is kept entirely in memory. Because of this,
the in-memory indexing can be configured at runtime through data store parameters. See <a class="reference internal" href="index_config.html#kafka-index-config"><span class="std std-ref">Kafka Index Configuration</span></a> for
more information on the available indexing options.</p>
<p>Because configuration options can reference attributes from a particular SimpleFeatureType, it may be necessary to
create multiple Kafka data store instances when dealing with multiple schemas.</p>
<p>Use the following parameters for a Kafka data store (required parameters are marked with <code class="docutils literal notranslate"><span class="pre">*</span></code>):</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 29%" />
<col style="width: 5%" />
<col style="width: 66%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Parameter</p></th>
<th class="head"><p>Type</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">kafka.brokers</span> <span class="pre">*</span></code></p></td>
<td><p>String</p></td>
<td><p>Kafka brokers, e.g. <code class="docutils literal notranslate"><span class="pre">localhost:9092</span></code></p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">kafka.zookeepers</span></code></p></td>
<td><p>String</p></td>
<td><p>Kafka zookeepers, e.g <code class="docutils literal notranslate"><span class="pre">localhost:2181</span></code>, used to persist GeoMesa metadata in Zookeeper instead
of in Kafka topics. See <a class="reference internal" href="zookeeper.html#no-zookeeper"><span class="std std-ref">Zookeeper-less Usage</span></a> for details.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">kafka.catalog.topic</span></code></p></td>
<td><p>String</p></td>
<td><p>The Kafka topic used to store schema metadata (when not using Zookeeper)</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">kafka.zk.path</span></code></p></td>
<td><p>String</p></td>
<td><p>Zookeeper discoverable path, can be used to namespace feature types (when using Zookeeper)</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">kafka.producer.config</span></code></p></td>
<td><p>String</p></td>
<td><p>Configuration options for kafka producer, in Java properties
format. See <a class="reference external" href="https://kafka.apache.org/documentation.html#producerconfigs">Producer Configs</a></p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">kafka.producer.clear</span></code></p></td>
<td><p>Boolean</p></td>
<td><p>Send a ‘clear’ message on startup. This will cause clients to ignore any data that was in the
topic prior to startup</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">kafka.consumer.config</span></code></p></td>
<td><p>String</p></td>
<td><p>Configuration options for kafka consumer, in Java properties
format. See <a class="reference external" href="https://kafka.apache.org/documentation.html#consumerconfigs">Consumer Configs</a></p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">kafka.consumer.read-back</span></code></p></td>
<td><p>String</p></td>
<td><p>On start up, read messages that were written within this time frame (vs ignore old messages), e.g.
<code class="docutils literal notranslate"><span class="pre">1</span> <span class="pre">hour</span></code>. Use <code class="docutils literal notranslate"><span class="pre">Inf</span></code> to read all messages. If enabled, features will not be available for query
until all existing messages are processed. However, feature listeners will still be invoked as
normal. See <a class="reference internal" href="index_config.html#kafka-initial-load"><span class="std std-ref">Initial Load (Replay)</span></a></p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">kafka.consumer.count</span></code></p></td>
<td><p>Integer</p></td>
<td><p>Number of kafka consumers used per feature type. Set to 0 to disable consuming (i.e. producer only)</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">kafka.consumer.offset-commit-interval</span></code></p></td>
<td><p>String</p></td>
<td><p>How often to commit offsets for the consumer group, by default <code class="docutils literal notranslate"><span class="pre">10</span> <span class="pre">seconds</span></code></p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">kafka.consumer.group-prefix</span></code></p></td>
<td><p>String</p></td>
<td><p>Prefix to use for kafka group ID, to more easily identify particular data stores</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">kafka.consumer.start-on-demand</span></code></p></td>
<td><p>Boolean</p></td>
<td><p>The default behavior is to start consuming a topic only when that feature type is first requested.
This can reduce load if some layers are never queried. Note that care should be taken when setting
this to false, as the store will immediately start consuming from Kafka for all known feature types,
which may require significant memory overhead.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">kafka.topic.partitions</span></code></p></td>
<td><p>Integer</p></td>
<td><p>Number of partitions to use in new kafka topics</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">kafka.topic.replication</span></code></p></td>
<td><p>Integer</p></td>
<td><p>Replication factor to use in new kafka topics</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">kafka.serialization.type</span></code></p></td>
<td><p>String</p></td>
<td><p>Internal serialization format to use for kafka messages. Must be one of <code class="docutils literal notranslate"><span class="pre">kryo</span></code>, <code class="docutils literal notranslate"><span class="pre">avro</span></code>
or <code class="docutils literal notranslate"><span class="pre">avro-native</span></code></p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">kafka.cache.expiry</span></code></p></td>
<td><p>String</p></td>
<td><p>Expire features from in-memory cache after this delay, e.g. <code class="docutils literal notranslate"><span class="pre">10</span> <span class="pre">minutes</span></code>. See <a class="reference internal" href="index_config.html#kafka-expiry"><span class="std std-ref">Feature Expiration</span></a></p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">kafka.cache.expiry.dynamic</span></code></p></td>
<td><p>String</p></td>
<td><p>Expire features dynamically based on CQL predicates. See <a class="reference internal" href="index_config.html#kafka-expiry"><span class="std std-ref">Feature Expiration</span></a></p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">kafka.cache.event-time</span></code></p></td>
<td><p>String</p></td>
<td><p>Instead of message time, determine expiry based on feature data. See <a class="reference internal" href="index_config.html#kafka-event-time"><span class="std std-ref">Feature Event Time</span></a></p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">kafka.cache.event-time.ordering</span></code></p></td>
<td><p>Boolean</p></td>
<td><p>Instead of message time, determine feature ordering based on the feature event time.
See <a class="reference internal" href="index_config.html#kafka-event-time"><span class="std std-ref">Feature Event Time</span></a></p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">kafka.index.cqengine</span></code></p></td>
<td><p>String</p></td>
<td><p>Use CQEngine-based attribute indices for the in-memory feature cache. See <a class="reference internal" href="index_config.html#kafka-cqengine"><span class="std std-ref">CQEngine Indexing</span></a></p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">kafka.index.resolution.x</span></code></p></td>
<td><p>Integer</p></td>
<td><p>Number of bins in the x-dimension of the spatial index, by default 360. See
<a class="reference internal" href="index_config.html#kafka-index-resolution"><span class="std std-ref">Spatial Index Resolution</span></a></p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">kafka.index.resolution.y</span></code></p></td>
<td><p>Integer</p></td>
<td><p>Number of bins in the y-dimension of the spatial index, by default 180. See
<a class="reference internal" href="index_config.html#kafka-index-resolution"><span class="std std-ref">Spatial Index Resolution</span></a></p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">kafka.index.tiers</span></code></p></td>
<td><p>String</p></td>
<td><p>Number and size of tiers used for indexing geometries with extents, in the form <code class="docutils literal notranslate"><span class="pre">x1:y1,x2:y2</span></code>.
See <a class="reference internal" href="index_config.html#kafka-ssi"><span class="std std-ref">Spatial Index Tiering</span></a></p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">kafka.serialization.lazy</span></code></p></td>
<td><p>Boolean</p></td>
<td><p>Use lazy deserialization of features. This may improve processing load at
the expense of slightly slower query times</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">kafka.layer.views</span></code></p></td>
<td><p>String</p></td>
<td><p>Additional views on existing schemas to expose as layers. See <a class="reference internal" href="layer_views.html#kafka-layer-views"><span class="std std-ref">Layer Views</span></a> for details</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">geomesa.metrics.registry</span></code></p></td>
<td><p>String</p></td>
<td><p>Specify the type of registry used to publish metrics. Must be one of <code class="docutils literal notranslate"><span class="pre">none</span></code>,
<code class="docutils literal notranslate"><span class="pre">prometheus</span></code>, or <code class="docutils literal notranslate"><span class="pre">cloudwatch</span></code>. See <a class="reference internal" href="../appendix/metrics.html#geomesa-metrics"><span class="std std-ref">Micrometer Metrics</span></a> for registry details.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">geomesa.metrics.registry.config</span></code></p></td>
<td><p>String</p></td>
<td><p>Override the default registry config. See <a class="reference internal" href="../appendix/metrics.html#geomesa-metrics"><span class="std std-ref">Micrometer Metrics</span></a> for configuration details.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">geomesa.query.loose-bounding-box</span></code></p></td>
<td><p>Boolean</p></td>
<td><p>Use loose bounding boxes, which offer improved performance but are not exact</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">geomesa.query.audit</span></code></p></td>
<td><p>Boolean</p></td>
<td><p>Audit incoming queries. By default audits are written to a log file</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">geomesa.security.auths</span></code></p></td>
<td><p>String</p></td>
<td><p>Default authorizations used to query data, comma-separated</p></td>
</tr>
</tbody>
</table>
<section id="programmatic-access">
<h2><span class="section-number">18.2.1. </span>Programmatic Access<a class="headerlink" href="#programmatic-access" title="Permalink to this headline">¶</a></h2>
<p>An instance of a Kafka data store can be obtained through the normal GeoTools discovery methods,
assuming that the GeoMesa code is on the classpath.</p>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="n">Map</span><span class="o">&lt;</span><span class="n">String</span><span class="p">,</span><span class="w"> </span><span class="n">Serializable</span><span class="o">&gt;</span><span class="w"> </span><span class="n">parameters</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">HashMap</span><span class="o">&lt;&gt;</span><span class="p">();</span>
<span class="n">parameters</span><span class="p">.</span><span class="na">put</span><span class="p">(</span><span class="s">&quot;kafka.brokers&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;localhost:9092&quot;</span><span class="p">);</span>
<span class="n">org</span><span class="p">.</span><span class="na">geotools</span><span class="p">.</span><span class="na">api</span><span class="p">.</span><span class="na">data</span><span class="p">.</span><span class="na">DataStore</span><span class="w"> </span><span class="n">dataStore</span><span class="w"> </span><span class="o">=</span>
<span class="w">    </span><span class="n">org</span><span class="p">.</span><span class="na">geotools</span><span class="p">.</span><span class="na">api</span><span class="p">.</span><span class="na">data</span><span class="p">.</span><span class="na">DataStoreFinder</span><span class="p">.</span><span class="na">getDataStore</span><span class="p">(</span><span class="n">parameters</span><span class="p">);</span>
</pre></div>
</div>
<p>More information on using GeoTools can be found in the <a class="reference external" href="https://docs.geotools.org/stable/userguide/">GeoTools user guide</a>.</p>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="install.html" class="btn btn-neutral float-left" title="18.1. Installing GeoMesa Kafka" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="producers.html" class="btn btn-neutral float-right" title="18.3. Data Producers" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p></p>
  </div>

  

<div role="contentinfo">
  <p>
    &copy; Copyright 2013-2025 <a href="https://www.ga-ccri.com/">General Atomics</a>
    <br/>
    Licensed under the <a href="https://www.apache.org/licenses/LICENSE-2.0">Apache License, Version 2.0</a>
  </p>
</div>

<div role="contentinfo">
  <p>
    Built with <a href="https://www.sphinx-doc.org/">Sphinx</a>
    using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>
    - contribute to this page on
    <a href="https://github.com/locationtech/geomesa/edit/main/docs/user/kafka/usage.rst">GitHub <img src="../../_static/launch.svg"/></a>
  </p>

</div>



</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>