

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>17.3. Kudu Index Configuration &mdash; GeoMesa 2.3.1 Manuals</title>
  

  
  
  
  
    <link rel="canonical" href="https://www.geomesa.org/documentation/user/kudu/index_config.html"/>
  

  

  
  
    

  

  <link rel="stylesheet" href="../../_static/css/theme_custom.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/sphinx_tabs/tabs.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/sphinx_tabs/semantic-ui-2.2.10/segment.min.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/sphinx_tabs/semantic-ui-2.2.10/menu.min.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/sphinx_tabs/semantic-ui-2.2.10/tab.min.css" type="text/css" />
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:400,700" type="text/css" />
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="17.4. Using the Kudu Data Store Programmatically" href="usage.html" />
    <link rel="prev" title="17.2. Kudu Data Store Configuration" href="configuration.html" /> 

  
  <script src="../../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../../index.html" class="icon icon-home"> GeoMesa
          

          
          </a>

          
            
            
              <div class="version">
                2.3.1
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="../index.html">User Manual</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../introduction.html">1. Introduction</a></li>
<li class="toctree-l2"><a class="reference internal" href="../download.html">2. Versions and Downloads</a></li>
<li class="toctree-l2"><a class="reference internal" href="../install.html">3. Installation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../getting_started.html">4. Getting Started</a></li>
<li class="toctree-l2"><a class="reference internal" href="../architecture.html">5. Architecture Overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="../datastores/index.html">6. GeoMesa Data Stores</a></li>
<li class="toctree-l2"><a class="reference internal" href="../cli/index.html">7. Command-Line Tools</a></li>
<li class="toctree-l2"><a class="reference internal" href="../geoserver.html">8. GeoServer Plugins</a></li>
<li class="toctree-l2"><a class="reference internal" href="../spark/index.html">9. GeoMesa Spark</a></li>
<li class="toctree-l2"><a class="reference internal" href="../hbase/index.html">10. HBase Data Store</a></li>
<li class="toctree-l2"><a class="reference internal" href="../accumulo/index.html">11. Accumulo Data Store</a></li>
<li class="toctree-l2"><a class="reference internal" href="../bigtable/index.html">12. Bigtable Data Store</a></li>
<li class="toctree-l2"><a class="reference internal" href="../cassandra/index.html">13. Cassandra Data Store</a></li>
<li class="toctree-l2"><a class="reference internal" href="../kafka/index.html">14. Kafka Data Store</a></li>
<li class="toctree-l2"><a class="reference internal" href="../redis/index.html">15. Redis Data Store</a></li>
<li class="toctree-l2"><a class="reference internal" href="../filesystem/index.html">16. FileSystem Data Store</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="index.html">17. Kudu Data Store</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="install.html">17.1. Installing GeoMesa Kudu</a></li>
<li class="toctree-l3"><a class="reference internal" href="configuration.html">17.2. Kudu Data Store Configuration</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">17.3. Kudu Index Configuration</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#default-index-creation">17.3.1. Default Index Creation</a></li>
<li class="toctree-l4"><a class="reference internal" href="#table-partitioning">17.3.2. Table Partitioning</a></li>
<li class="toctree-l4"><a class="reference internal" href="#column-encoding">17.3.3. Column Encoding</a></li>
<li class="toctree-l4"><a class="reference internal" href="#column-compression">17.3.4. Column Compression</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="usage.html">17.4. Using the Kudu Data Store Programmatically</a></li>
<li class="toctree-l3"><a class="reference internal" href="geoserver.html">17.5. Using the Kudu Data Store in GeoServer</a></li>
<li class="toctree-l3"><a class="reference internal" href="commandline.html">17.6. Using the Kudu Command-Line Tools</a></li>
<li class="toctree-l3"><a class="reference internal" href="spark.html">17.7. Using the Kudu Data Store With Spark</a></li>
<li class="toctree-l3"><a class="reference internal" href="visibilities.html">17.8. Visibilities in Kudu</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../lambda/index.html">18. Lambda Data Store</a></li>
<li class="toctree-l2"><a class="reference internal" href="../merged_view.html">19. Merged Data Store View</a></li>
<li class="toctree-l2"><a class="reference internal" href="../convert/index.html">20. GeoMesa Convert</a></li>
<li class="toctree-l2"><a class="reference internal" href="../process.html">21. GeoMesa Processes</a></li>
<li class="toctree-l2"><a class="reference internal" href="../geojson.html">22. GeoMesa GeoJSON</a></li>
<li class="toctree-l2"><a class="reference internal" href="../nifi.html">23. GeoMesa NiFi Bundle</a></li>
<li class="toctree-l2"><a class="reference internal" href="../blobstore.html">24. GeoMesa Blob Store</a></li>
<li class="toctree-l2"><a class="reference internal" href="../native_api.html">25. GeoMesa Native API</a></li>
<li class="toctree-l2"><a class="reference internal" href="../stream.html">26. GeoMesa Stream Processing</a></li>
<li class="toctree-l2"><a class="reference internal" href="../upgrade.html">27. Upgrade Guide</a></li>
<li class="toctree-l2"><a class="reference internal" href="../index.html#appendix">Appendix</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../developer/index.html">Developer Manual</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../tutorials/index.html">Tutorials</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">GeoMesa</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../index.html">Docs</a> &raquo;</li>
        
          <li><a href="../index.html">User Manual</a> &raquo;</li>
        
          <li><a href="index.html">17. Kudu Data Store</a> &raquo;</li>
        
      <li>17.3. Kudu Index Configuration</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="kudu-index-configuration">
<h1>17.3. Kudu Index Configuration<a class="headerlink" href="#kudu-index-configuration" title="Permalink to this headline">¶</a></h1>
<p>GeoMesa exposes a variety of configuration options that can be used to customize and optimize a given installation.
This section contains Kudu-specific options; general options can be found under <a class="reference internal" href="../datastores/index_config.html#index-config"><span class="std std-ref">Index Configuration</span></a>.</p>
<div class="section" id="default-index-creation">
<h2>17.3.1. Default Index Creation<a class="headerlink" href="#default-index-creation" title="Permalink to this headline">¶</a></h2>
<p>By default GeoMesa will only create a single Z3 (or XZ3) index for Kudu. Due to predicate push-downs,
partition pruning and other advanced optimizations, queries on non-indexed fields are still quite fast.
To create additional indices, specify them explicitly. See <a class="reference internal" href="../datastores/index_config.html#customizing-index-creation"><span class="std std-ref">Customizing Index Creation</span></a> for details.</p>
<p>Note that because they do not have an incrementing time field in the primary key, other indices may eventually
run out of space. Initial partitioning is especially important in this case (see next).</p>
</div>
<div class="section" id="table-partitioning">
<h2>17.3.2. Table Partitioning<a class="headerlink" href="#table-partitioning" title="Permalink to this headline">¶</a></h2>
<p>Partitioning is import in Kudu, and GeoMesa supports both Kudu hash and range partitions. See
<a class="reference internal" href="../datastores/index_config.html#configuring-z-shards"><span class="std std-ref">Configuring Z-Index Shards</span></a> and <a class="reference internal" href="../datastores/index_config.html#configuring-attr-shards"><span class="std std-ref">Configuring Attribute Index Shards</span></a> for details on configuring shards, which will be
translated to Kudu hash partitions. See <a class="reference internal" href="../datastores/index_config.html#table-split-config"><span class="std std-ref">Configuring Index Splits</span></a> for details on configuring table splits,
which will be translated to Kudu range partitions. By default, the Z3/XZ3 index will create a new range partition
for every time period (week by default).</p>
<p>See the <a class="reference external" href="http://kudu.apache.org/docs/schema_design.html#partitioning">Kudu documentation</a> for more details on Kudu
partitioning.</p>
</div>
<div class="section" id="column-encoding">
<h2>17.3.3. Column Encoding<a class="headerlink" href="#column-encoding" title="Permalink to this headline">¶</a></h2>
<p>Kudu has multiple ways to encode data. Each column (attribute) in a schema is encoded separately. The best
encoding will depend on the data being written; for example low-cardinality string columns work will with
dictionary encoding. If nothing is specified, then the Kudu default encoding will be used based on the attribute
type.</p>
<p>Valid encodings depend on the attribute type:</p>
<table border="1" class="docutils">
<colgroup>
<col width="42%" />
<col width="42%" />
<col width="15%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Attribute Type</th>
<th class="head">Encodings</th>
<th class="head">Default</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>Integer, Long, Date</td>
<td>plain, bit shuffle, run length</td>
<td>bit shuffle</td>
</tr>
<tr class="row-odd"><td>Float, Double</td>
<td>plain, bit shuffle</td>
<td>bit shuffle</td>
</tr>
<tr class="row-even"><td>Boolean</td>
<td>plain, run length</td>
<td>run length</td>
</tr>
<tr class="row-odd"><td>String, Bytes, UUID, List, Map</td>
<td>plain, prefix, dictionary</td>
<td>dictionary</td>
</tr>
<tr class="row-even"><td>Point</td>
<td>plain, bit shuffle</td>
<td>bit shuffle</td>
</tr>
<tr class="row-odd"><td>Non-point geometry</td>
<td>plain, prefix, dictionary</td>
<td>dictionary</td>
</tr>
</tbody>
</table>
<p>The encoding must be specified by its enumeration:</p>
<table border="1" class="docutils">
<colgroup>
<col width="33%" />
<col width="67%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Encoding</th>
<th class="head">Keyword</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>plain</td>
<td><code class="docutils literal notranslate"><span class="pre">PLAIN_ENCODING</span></code></td>
</tr>
<tr class="row-odd"><td>prefix</td>
<td><code class="docutils literal notranslate"><span class="pre">PREFIX_ENCODING</span></code></td>
</tr>
<tr class="row-even"><td>run length</td>
<td><code class="docutils literal notranslate"><span class="pre">RLE</span></code></td>
</tr>
<tr class="row-odd"><td>dictionary</td>
<td><code class="docutils literal notranslate"><span class="pre">DICT_ENCODING</span></code></td>
</tr>
<tr class="row-even"><td>bitshuffle</td>
<td><code class="docutils literal notranslate"><span class="pre">BIT_SHUFFLE</span></code></td>
</tr>
</tbody>
</table>
<p>Encodings are set in the attribute user data. See <a class="reference internal" href="../datastores/index_config.html#attribute-options"><span class="std std-ref">Setting Attribute Options</span></a> for more information on how
to configure attributes.</p>
<div class="sphinx-tabs docutils container">
<div class="ui top attached tabular menu sphinx-menu docutils container">
<div class="active item sphinx-data-tab-SmF2YQ== docutils container">
<div class="docutils container">
Java</div>
</div>
<div class="item sphinx-data-tab-U2NhbGE= docutils container">
<div class="docutils container">
Scala</div>
</div>
<div class="item sphinx-data-tab-Q29uZmln docutils container">
<div class="docutils container">
Config</div>
</div>
</div>
<div class="ui bottom attached sphinx-tab tab segment sphinx-data-tab-SmF2YQ== active docutils container">
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">org.locationtech.geomesa.utils.interop.SimpleFeatureTypes</span><span class="o">;</span>

<span class="n">SimpleFeatureTypes</span><span class="o">.</span><span class="na">createType</span><span class="o">(</span><span class="s">&quot;example&quot;</span><span class="o">,</span> <span class="s">&quot;name:String:encoding=DICT_ENCODING&quot;</span><span class="o">);</span>
</pre></div>
</div>
</div>
<div class="ui bottom attached sphinx-tab tab segment sphinx-data-tab-U2NhbGE= docutils container">
<div class="highlight-scala notranslate"><div class="highlight"><pre><span></span><span class="k">import</span> <span class="nn">org.locationtech.geomesa.utils.geotools.SimpleFeatureTypes</span>

<span class="nc">SimpleFeatureTypes</span><span class="o">.</span><span class="n">createType</span><span class="o">(</span><span class="s">&quot;example&quot;</span><span class="o">,</span> <span class="s">&quot;name:String:encoding=DICT_ENCODING&quot;</span><span class="o">)</span>
</pre></div>
</div>
</div>
<div class="ui bottom attached sphinx-tab tab segment sphinx-data-tab-Q29uZmln docutils container">
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="nx">geomesa</span> <span class="o">=</span> <span class="p">{</span>
  <span class="nx">sfts</span> <span class="o">=</span> <span class="p">{</span>
    <span class="nx">example</span> <span class="o">=</span> <span class="p">{</span>
      <span class="nx">attributes</span> <span class="o">=</span> <span class="p">[</span>
        <span class="p">{</span> <span class="nx">name</span> <span class="o">=</span> <span class="s2">&quot;name&quot;</span><span class="p">,</span> <span class="nx">type</span> <span class="o">=</span> <span class="s2">&quot;String&quot;</span><span class="p">,</span> <span class="nx">encoding</span> <span class="o">=</span> <span class="s2">&quot;DICT_ENCODING&quot;</span> <span class="p">}</span>
      <span class="p">]</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
</div>
<p>See the <a class="reference external" href="http://kudu.apache.org/docs/schema_design.html#encoding">Kudu documentation</a> for more information.</p>
</div>
<div class="section" id="column-compression">
<span id="kudu-column-compression"></span><h2>17.3.4. Column Compression<a class="headerlink" href="#column-compression" title="Permalink to this headline">¶</a></h2>
<p>Kudu also allows compression on a per-column basis. Compression may be one of <code class="docutils literal notranslate"><span class="pre">NO_COMPRESSION</span></code>, <code class="docutils literal notranslate"><span class="pre">SNAPPY</span></code>,
<code class="docutils literal notranslate"><span class="pre">LZ4</span></code>, or <code class="docutils literal notranslate"><span class="pre">ZLIB</span></code>. If not specified, GeoMesa will default to <code class="docutils literal notranslate"><span class="pre">LZ4</span></code>.</p>
<p>Note that columns that are bit-shuffle encoded are compressed as part of the bit-shuffle algorithm, so it
is not recommended to compress them further. GeoMesa will ignore attempts to do so.</p>
<p>Compressions are set in the attribute user data. See <a class="reference internal" href="../datastores/index_config.html#attribute-options"><span class="std std-ref">Setting Attribute Options</span></a> for more information on how
to configure attributes.</p>
<div class="sphinx-tabs docutils container">
<div class="ui top attached tabular menu sphinx-menu docutils container">
<div class="active item sphinx-data-tab-SmF2YQ== docutils container">
<div class="docutils container">
Java</div>
</div>
<div class="item sphinx-data-tab-U2NhbGE= docutils container">
<div class="docutils container">
Scala</div>
</div>
<div class="item sphinx-data-tab-Q29uZmln docutils container">
<div class="docutils container">
Config</div>
</div>
</div>
<div class="ui bottom attached sphinx-tab tab segment sphinx-data-tab-SmF2YQ== active docutils container">
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">org.locationtech.geomesa.utils.interop.SimpleFeatureTypes</span><span class="o">;</span>

<span class="n">SimpleFeatureTypes</span><span class="o">.</span><span class="na">createType</span><span class="o">(</span><span class="s">&quot;example&quot;</span><span class="o">,</span> <span class="s">&quot;name:String:compression=SNAPPY&quot;</span><span class="o">);</span>
</pre></div>
</div>
</div>
<div class="ui bottom attached sphinx-tab tab segment sphinx-data-tab-U2NhbGE= docutils container">
<div class="highlight-scala notranslate"><div class="highlight"><pre><span></span><span class="k">import</span> <span class="nn">org.locationtech.geomesa.utils.geotools.SimpleFeatureTypes</span>

<span class="nc">SimpleFeatureTypes</span><span class="o">.</span><span class="n">createType</span><span class="o">(</span><span class="s">&quot;example&quot;</span><span class="o">,</span> <span class="s">&quot;name:String:compression=SNAPPY&quot;</span><span class="o">)</span>
</pre></div>
</div>
</div>
<div class="ui bottom attached sphinx-tab tab segment sphinx-data-tab-Q29uZmln docutils container">
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="nx">geomesa</span> <span class="o">=</span> <span class="p">{</span>
  <span class="nx">sfts</span> <span class="o">=</span> <span class="p">{</span>
    <span class="nx">example</span> <span class="o">=</span> <span class="p">{</span>
      <span class="nx">attributes</span> <span class="o">=</span> <span class="p">[</span>
        <span class="p">{</span> <span class="nx">name</span> <span class="o">=</span> <span class="s2">&quot;name&quot;</span><span class="p">,</span> <span class="nx">type</span> <span class="o">=</span> <span class="s2">&quot;String&quot;</span><span class="p">,</span> <span class="nx">compression</span> <span class="o">=</span> <span class="s2">&quot;SNAPPY&quot;</span> <span class="p">}</span>
      <span class="p">]</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
</div>
<p>See the <a class="reference external" href="http://kudu.apache.org/docs/schema_design.html#compression">Kudu documentation</a> for more information.</p>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="usage.html" class="btn btn-neutral float-right" title="17.4. Using the Kudu Data Store Programmatically" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="configuration.html" class="btn btn-neutral" title="17.2. Kudu Data Store Configuration" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>

    </p>
  </div>

<div role="contentinfo">
  <p>
    &copy; Copyright 2013-2019 <a href="https://www.ccri.com/">Commonwealth Computer Research, Inc.</a>
    <br/>
    Licensed under the <a href="http://www.opensource.org/licenses/apache2.0.php">Apache License, Version 2.0</a>
  </p>
</div>

<div role="contentinfo">
  <p>
    Built with <a href="http://sphinx-doc.org/">Sphinx</a>
    using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>
    
    - view <a href="../../_sources/user/kudu/index_config.rst.txt" rel="nofollow">page source</a>
    
  </p>
</div>



</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
        <script type="text/javascript" src="../../_static/jquery.js"></script>
        <script type="text/javascript" src="../../_static/underscore.js"></script>
        <script type="text/javascript" src="../../_static/doctools.js"></script>
        <script type="text/javascript" src="../../_static/sphinx_tabs/tabs.js"></script>
        <script type="text/javascript" src="../../_static/sphinx_tabs/semantic-ui-2.2.10/tab.min.js"></script>
    

  

  <script type="text/javascript" src="../../_static/js/theme.js"></script>

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>
 

<!-- analytics -->
<script>
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
ga('create', 'UA-53087457-1', 'auto');
ga('send', 'pageview');
</script>




</body>
</html>