

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>20.2. Installing GeoMesa FileSystem &mdash; GeoMesa 3.1.2-SNAPSHOT Manuals</title>
  

  
  
  
  
    <link rel="canonical" href="https://www.geomesa.org/documentation/user/filesystem/install.html"/>
  

  

  
  
    

  

  <link rel="stylesheet" href="../../_static/css/theme_custom.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:400,700" type="text/css" />
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="20.3. Using the FileSystem Data Store Programmatically" href="usage.html" />
    <link rel="prev" title="20.1. Architecture" href="architecture.html" /> 

  
  <script src="../../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../../index.html" class="icon icon-home"> GeoMesa
          

          
          </a>

          
            
            
              <div class="version">
                3.1.2-SNAPSHOT
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="../index.html">User Manual</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../introduction.html">1. Introduction</a></li>
<li class="toctree-l2"><a class="reference internal" href="../download.html">2. Versions and Downloads</a></li>
<li class="toctree-l2"><a class="reference internal" href="../install.html">3. Installation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../getting_started.html">4. Getting Started</a></li>
<li class="toctree-l2"><a class="reference internal" href="../geotools.html">5. GeoTools Overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="../architecture.html">6. Architecture Overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="../datastores/index.html">7. GeoMesa Data Stores</a></li>
<li class="toctree-l2"><a class="reference internal" href="../cli/index.html">8. Command-Line Tools</a></li>
<li class="toctree-l2"><a class="reference internal" href="../convert/index.html">9. GeoMesa Convert</a></li>
<li class="toctree-l2"><a class="reference internal" href="../geoserver.html">10. GeoServer Plugins</a></li>
<li class="toctree-l2"><a class="reference internal" href="../spark/index.html">11. GeoMesa Spark</a></li>
<li class="toctree-l2"><a class="reference internal" href="../nifi.html">12. GeoMesa NiFi Bundle</a></li>
<li class="toctree-l2"><a class="reference internal" href="../process.html">13. GeoMesa Processes</a></li>
<li class="toctree-l2"><a class="reference internal" href="../hbase/index.html">14. HBase Data Store</a></li>
<li class="toctree-l2"><a class="reference internal" href="../accumulo/index.html">15. Accumulo Data Store</a></li>
<li class="toctree-l2"><a class="reference internal" href="../cassandra/index.html">16. Cassandra Data Store</a></li>
<li class="toctree-l2"><a class="reference internal" href="../bigtable/index.html">17. Bigtable Data Store</a></li>
<li class="toctree-l2"><a class="reference internal" href="../kafka/index.html">18. Kafka Data Store</a></li>
<li class="toctree-l2"><a class="reference internal" href="../redis/index.html">19. Redis Data Store</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="index.html">20. FileSystem Data Store</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="architecture.html">20.1. Architecture</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">20.2. Installing GeoMesa FileSystem</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#installing-from-the-binary-distribution">20.2.1. Installing from the Binary Distribution</a></li>
<li class="toctree-l4"><a class="reference internal" href="#building-from-source">20.2.2. Building from Source</a></li>
<li class="toctree-l4"><a class="reference internal" href="#setting-up-the-filesystem-command-line-tools">20.2.3. Setting up the FileSystem Command Line Tools</a></li>
<li class="toctree-l4"><a class="reference internal" href="#installing-geomesa-filesystem-in-geoserver">20.2.4. Installing GeoMesa FileSystem in GeoServer</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="usage.html">20.3. Using the FileSystem Data Store Programmatically</a></li>
<li class="toctree-l3"><a class="reference internal" href="geoserver.html">20.4. Using the FileSystem Data Store in GeoServer</a></li>
<li class="toctree-l3"><a class="reference internal" href="commandline.html">20.5. FileSystem Command-Line Tools</a></li>
<li class="toctree-l3"><a class="reference internal" href="configuration.html">20.6. FileSystem DataStore Configuration</a></li>
<li class="toctree-l3"><a class="reference internal" href="index_config.html">20.7. Index Configuration</a></li>
<li class="toctree-l3"><a class="reference internal" href="partition_schemes.html">20.8. Partition Schemes</a></li>
<li class="toctree-l3"><a class="reference internal" href="metadata.html">20.9. FileSystem Metadata</a></li>
<li class="toctree-l3"><a class="reference internal" href="modify_features.html">20.10. Modifying Features</a></li>
<li class="toctree-l3"><a class="reference internal" href="example.html">20.11. FileSystem Data Store Example</a></li>
<li class="toctree-l3"><a class="reference internal" href="spark_example.html">20.12. FileSystem Data Store Spark SQL Example</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../kudu/index.html">21. Kudu Data Store</a></li>
<li class="toctree-l2"><a class="reference internal" href="../lambda/index.html">22. Lambda Data Store</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ds_views.html">23. Combined Data Store Views</a></li>
<li class="toctree-l2"><a class="reference internal" href="../geojson.html">24. GeoMesa GeoJSON</a></li>
<li class="toctree-l2"><a class="reference internal" href="../stream.html">25. GeoMesa Stream Processing</a></li>
<li class="toctree-l2"><a class="reference internal" href="../upgrade.html">26. Upgrade Guide</a></li>
<li class="toctree-l2"><a class="reference internal" href="../index.html#appendix">Appendix</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../developer/index.html">Developer Manual</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../tutorials/index.html">Tutorials</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">GeoMesa</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../index.html">Docs</a> &raquo;</li>
        
          <li><a href="../index.html">User Manual</a> &raquo;</li>
        
          <li><a href="index.html">20. FileSystem Data Store</a> &raquo;</li>
        
      <li>20.2. Installing GeoMesa FileSystem</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="installing-geomesa-filesystem">
<h1>20.2. Installing GeoMesa FileSystem<a class="headerlink" href="#installing-geomesa-filesystem" title="Permalink to this headline">¶</a></h1>
<div class="section" id="installing-from-the-binary-distribution">
<h2>20.2.1. Installing from the Binary Distribution<a class="headerlink" href="#installing-from-the-binary-distribution" title="Permalink to this headline">¶</a></h2>
<p>GeoMesa FileSystem artifacts are available for download or can be built from source.
The easiest way to get started is to download the most recent binary version
(3.1.2-SNAPSHOT) from <a class="reference external" href="https://github.com/locationtech/geomesa/releases">GitHub</a>.</p>
<p>Extract it somewhere convenient:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># download and unpackage the most recent distribution:</span>
$ wget <span class="s2">&quot;https://github.com/locationtech/geomesa/releases/download/geomesa_2.11-</span><span class="nv">$VERSION</span><span class="s2">/geomesa-fs_2.11-</span><span class="nv">$VERSION</span><span class="s2">-bin.tar.gz&quot;</span>
$ tar xvf geomesa-fs_2.11-<span class="nv">$VERSION</span>-bin.tar.gz
$ <span class="nb">cd</span> geomesa-fs_2.11-<span class="nv">$VERSION</span>
$ ls
bin/  conf/  dist/  docs/  examples/  lib/  LICENSE.txt  logs/
</pre></div>
</div>
</div>
<div class="section" id="building-from-source">
<span id="fsds-install-source"></span><h2>20.2.2. Building from Source<a class="headerlink" href="#building-from-source" title="Permalink to this headline">¶</a></h2>
<p>GeoMesa FileSystem may also be built from source. For more information refer to <a class="reference internal" href="../../developer/introduction.html#building-from-source"><span class="std std-ref">Building from Source</span></a>
in the developer manual, or to the <code class="docutils literal notranslate"><span class="pre">README.md</span></code> file in the the source distribution.
The remainder of the instructions in this chapter assume the use of the binary GeoMesa
distribution. If you have built from source, the distribution is created in the <code class="docutils literal notranslate"><span class="pre">target</span></code> directory of
<code class="docutils literal notranslate"><span class="pre">geomesa-fs/geomesa-fs-dist</span></code>.</p>
<p>More information about developing with GeoMesa may be found in the <a class="reference internal" href="../../developer/index.html"><span class="doc">Developer Manual</span></a>.</p>
</div>
<div class="section" id="setting-up-the-filesystem-command-line-tools">
<span id="setting-up-fsds-commandline"></span><h2>20.2.3. Setting up the FileSystem Command Line Tools<a class="headerlink" href="#setting-up-the-filesystem-command-line-tools" title="Permalink to this headline">¶</a></h2>
<p>The FileSystem command line tools require Hadoop to run. If <code class="docutils literal notranslate"><span class="pre">HADOOP_HOME</span></code> is defined, or <code class="docutils literal notranslate"><span class="pre">hadoop</span></code> is available
on the path, the tools will use the local Hadoop installation. Otherwise, when first run they will prompt to download
the necessary JARs. Environment variables can be specified in <code class="docutils literal notranslate"><span class="pre">conf/*-env.sh</span></code> and dependency versions can be
specified in <code class="docutils literal notranslate"><span class="pre">conf/dependencies.sh</span></code>.</p>
<p>Note that you will need the proper Yarn/Hadoop environment configured if you would like to run a distributed ingest
job.</p>
<p>If you are using a service such as Amazon Elastic MapReduce (EMR) or have a distribution of Apache Hadoop, Cloudera, or
Hortonworks installed you can likely run something like this to configure hadoop for the tools:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># These will be specific to your Hadoop environment</span>
. /etc/hadoop/conf/hadoop-env.sh
. /etc/hadoop/conf/yarn-env.sh
<span class="nb">export</span> <span class="nv">HADOOP_CONF_DIR</span><span class="o">=</span>/etc/hadoop/conf
</pre></div>
</div>
<p>After installing the tarball you should be able to run the <code class="docutils literal notranslate"><span class="pre">geomesa-fs</span></code> command like this:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ <span class="nb">cd</span> <span class="nv">$GEOMESA_FS_HOME</span>
$ bin/geomesa-fs
</pre></div>
</div>
<p>The output should look like this:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">INFO</span>  <span class="n">Usage</span><span class="p">:</span> <span class="n">geomesa</span><span class="o">-</span><span class="n">fs</span> <span class="p">[</span><span class="n">command</span><span class="p">]</span> <span class="p">[</span><span class="n">command</span> <span class="n">options</span><span class="p">]</span>
  <span class="n">Commands</span><span class="p">:</span>
    <span class="o">...</span>
</pre></div>
</div>
</div>
<div class="section" id="installing-geomesa-filesystem-in-geoserver">
<span id="install-fsds-geoserver"></span><h2>20.2.4. Installing GeoMesa FileSystem in GeoServer<a class="headerlink" href="#installing-geomesa-filesystem-in-geoserver" title="Permalink to this headline">¶</a></h2>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">See <a class="reference internal" href="../geoserver.html#geoserver-versions"><span class="std std-ref">GeoServer Versions</span></a> to ensure that GeoServer is compatible with your GeoMesa version.</p>
</div>
<p>The FileSystem GeoServer plugin is bundled by default in the GeoMesa FS binary distribution. To install, extract
<code class="docutils literal notranslate"><span class="pre">$GEOMESA_FS_HOME/dist/gs-plugins/geomesa-fs-gs-plugin_2.11-$VERSION-install.tar.gz</span></code> into GeoServer’s
<code class="docutils literal notranslate"><span class="pre">WEB-INF/lib</span></code> directory. Note that this plugin contains a shaded JAR with Parquet 1.9.0
bundled. If you require a different version, modify the <code class="docutils literal notranslate"><span class="pre">pom.xml</span></code> and build the GeoMesa FileSystem geoserver plugin
project from scratch with Maven.</p>
<p>This distribution does not include the Hadoop JARs; the following JARs should be copied from the <code class="docutils literal notranslate"><span class="pre">lib</span></code> directory of
your Hadoop installations into GeoServer’s <code class="docutils literal notranslate"><span class="pre">WEB-INF/lib</span></code> directory:</p>
<p>(Note the versions may vary depending on your installation.)</p>
<blockquote>
<div><ul class="simple">
<li>hadoop-auth-2.8.4.jar</li>
<li>hadoop-common-2.8.4.jar</li>
<li>hadoop-hdfs-2.8.4.jar</li>
<li>hadoop-hdfs-client-2.8.4.jar</li>
<li>snappy-java-1.1.1.6.jar</li>
<li>commons-configuration-1.6.jar</li>
<li>commons-logging-1.1.3.jar</li>
<li>commons-cli-1.2.jar</li>
<li>commons-io-2.5.jar</li>
<li>protobuf-java-2.5.0.jar</li>
<li>hadoop-aws-2.8.4.jar</li>
<li>aws-java-sdk-core-1.10.6.jar</li>
<li>aws-java-sdk-s3-1.10.6.jar</li>
<li>joda-time-2.8.1.jar</li>
<li>httpclient-4.3.4.jar</li>
<li>httpcore-4.3.3.jar</li>
<li>commons-httpclient-3.1.jar</li>
</ul>
</div></blockquote>
<p>You can use the bundled <code class="docutils literal notranslate"><span class="pre">$GEOMESA_FS_HOME/bin/install-dependencies.sh</span></code> script to install these JARs.</p>
<p>The FileSystem data store requires the configuration file <code class="docutils literal notranslate"><span class="pre">core-site.xml</span></code> to be on the classpath. This can
be accomplished by placing the file in <code class="docutils literal notranslate"><span class="pre">geoserver/WEB-INF/classes</span></code> (you should make the directory if it
doesn’t exist). Utilizing a symbolic link will be useful here so any changes are reflected in GeoServer.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ ln -s /path/to/core-site.xml /path/to/geoserver/WEB-INF/classes/core-site.xml
</pre></div>
</div>
<p>Restart GeoServer after the JARs are installed.</p>
<div class="section" id="geomesa-process">
<h3>20.2.4.1. GeoMesa Process<a class="headerlink" href="#geomesa-process" title="Permalink to this headline">¶</a></h3>
<p>GeoMesa-specific WPS processes (such as <code class="docutils literal notranslate"><span class="pre">geomesa:Density</span></code>, which is used to generate heat maps), require the
installation of the <code class="docutils literal notranslate"><span class="pre">geomesa-process-wps_2.11-$VERSION.jar</span></code> in <code class="docutils literal notranslate"><span class="pre">geoserver/WEB-INF/lib</span></code>. This JAR is included
in the <code class="docutils literal notranslate"><span class="pre">geomesa-fs_2.11-$VERSION/dist/gs-plugins</span></code> directory of the binary distribution, or is built in the
<code class="docutils literal notranslate"><span class="pre">geomesa-process</span></code> module of the source distribution.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The WPS JAR requires the installation of the
<a class="reference external" href="http://docs.geoserver.org/stable/en/user/services/wps/install.html">GeoServer WPS Plugin</a>.</p>
</div>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="usage.html" class="btn btn-neutral float-right" title="20.3. Using the FileSystem Data Store Programmatically" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="architecture.html" class="btn btn-neutral" title="20.1. Architecture" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>

    </p>
  </div>

<div role="contentinfo">
  <p>
    &copy; Copyright 2013-2020 <a href="https://www.ccri.com/">Commonwealth Computer Research, Inc.</a>
    <br/>
    Licensed under the <a href="http://www.opensource.org/licenses/apache2.0.php">Apache License, Version 2.0</a>
  </p>
</div>

<div role="contentinfo">
  <p>
    Built with <a href="http://sphinx-doc.org/">Sphinx</a>
    using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>
    
    - view <a href="../../_sources/user/filesystem/install.rst.txt" rel="nofollow">page source</a>
    
  </p>
</div>



</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
        <script type="text/javascript" src="../../_static/jquery.js"></script>
        <script type="text/javascript" src="../../_static/underscore.js"></script>
        <script type="text/javascript" src="../../_static/doctools.js"></script>
    

  

  <script type="text/javascript" src="../../_static/js/theme.js"></script>

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>
 

<!-- analytics -->
<script>
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
ga('create', 'UA-53087457-1', 'auto');
ga('send', 'pageview');
</script>




</body>
</html>