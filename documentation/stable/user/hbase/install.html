<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>14.1. Installing GeoMesa HBase &mdash; GeoMesa 4.0.1 Manuals</title>
      <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/css/theme_custom.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/copybutton.css" type="text/css" />
      <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:400,700" type="text/css" />
      <link rel="stylesheet" href="../../_static/tabs.css" type="text/css" />
    <link rel="canonical" href="https://www.geomesa.org/documentation/user/hbase/install.html"/>
  <!--[if lt IE 9]>
    <script src="../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
        <script src="../../_static/jquery.js"></script>
        <script src="../../_static/underscore.js"></script>
        <script src="../../_static/doctools.js"></script>
        <script src="../../_static/clipboard.min.js"></script>
        <script src="../../_static/copybutton.js"></script>
        <script src="../../_static/tabs.js"></script>
    <script src="../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="14.2. Manual Coprocessors Registration" href="coprocessor_install.html" />
    <link rel="prev" title="14. HBase Data Store" href="index.html" />


</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="../../index.html" class="icon icon-home"> GeoMesa
          </a>
              <div class="version">
                4.0.1
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="../index.html">User Manual</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../introduction.html">1. Introduction</a></li>
<li class="toctree-l2"><a class="reference internal" href="../getting_started.html">2. Getting Started</a></li>
<li class="toctree-l2"><a class="reference internal" href="../download.html">3. Versions and Downloads</a></li>
<li class="toctree-l2"><a class="reference internal" href="../install.html">4. Installation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../architecture.html">5. Architecture Overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="../geotools.html">6. GeoTools Overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="../datastores/index.html">7. GeoMesa Data Stores</a></li>
<li class="toctree-l2"><a class="reference internal" href="../cli/index.html">8. Command-Line Tools</a></li>
<li class="toctree-l2"><a class="reference internal" href="../convert/index.html">9. GeoMesa Converters</a></li>
<li class="toctree-l2"><a class="reference internal" href="../geoserver.html">10. GeoServer Plugins</a></li>
<li class="toctree-l2"><a class="reference internal" href="../spark/index.html">11. GeoMesa Spark</a></li>
<li class="toctree-l2"><a class="reference internal" href="../nifi/index.html">12. GeoMesa NiFi Bundle</a></li>
<li class="toctree-l2"><a class="reference internal" href="../process.html">13. GeoMesa Processes</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="index.html">14. HBase Data Store</a><ul class="current">
<li class="toctree-l3 current"><a class="current reference internal" href="#">14.1. Installing GeoMesa HBase</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#installing-the-binary-distribution">14.1.1. Installing the Binary Distribution</a></li>
<li class="toctree-l4"><a class="reference internal" href="#building-from-source">14.1.2. Building from Source</a></li>
<li class="toctree-l4"><a class="reference internal" href="#installing-the-geomesa-distributed-runtime-jar">14.1.3. Installing the GeoMesa Distributed Runtime JAR</a></li>
<li class="toctree-l4"><a class="reference internal" href="#setting-up-the-hbase-command-line-tools">14.1.4. Setting up the HBase Command Line Tools</a></li>
<li class="toctree-l4"><a class="reference internal" href="#installing-geomesa-hbase-in-geoserver">14.1.5. Installing GeoMesa HBase in GeoServer</a></li>
<li class="toctree-l4"><a class="reference internal" href="#connecting-to-external-hbase-clusters-backed-by-s3">14.1.6. Connecting to External HBase Clusters Backed By S3</a></li>
<li class="toctree-l4"><a class="reference internal" href="#configuring-hbase-on-azure-hdinsight">14.1.7. Configuring HBase on Azure HDInsight</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="coprocessor_install.html">14.2. Manual Coprocessors Registration</a></li>
<li class="toctree-l3"><a class="reference internal" href="usage.html">14.3. Using the HBase Data Store Programmatically</a></li>
<li class="toctree-l3"><a class="reference internal" href="geoserver.html">14.4. Using the HBase Data Store in GeoServer</a></li>
<li class="toctree-l3"><a class="reference internal" href="commandline.html">14.5. HBase Command-Line Tools</a></li>
<li class="toctree-l3"><a class="reference internal" href="configuration.html">14.6. HBase Configuration</a></li>
<li class="toctree-l3"><a class="reference internal" href="index_config.html">14.7. HBase Index Configuration</a></li>
<li class="toctree-l3"><a class="reference internal" href="visibilities.html">14.8. HBase Visibilities</a></li>
<li class="toctree-l3"><a class="reference internal" href="kerberos.html">14.9. Kerberos</a></li>
<li class="toctree-l3"><a class="reference internal" href="heatmaps.html">14.10. HBase Heatmaps</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../accumulo/index.html">15. Accumulo Data Store</a></li>
<li class="toctree-l2"><a class="reference internal" href="../cassandra/index.html">16. Cassandra Data Store</a></li>
<li class="toctree-l2"><a class="reference internal" href="../kafka/index.html">17. Kafka Data Store</a></li>
<li class="toctree-l2"><a class="reference internal" href="../redis/index.html">18. Redis Data Store</a></li>
<li class="toctree-l2"><a class="reference internal" href="../filesystem/index.html">19. FileSystem Data Store</a></li>
<li class="toctree-l2"><a class="reference internal" href="../postgis/index.html">20. Partitioned PostGIS Data Store</a></li>
<li class="toctree-l2"><a class="reference internal" href="../lambda/index.html">21. Lambda Data Store</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ds_views.html">22. Combined Data Store Views</a></li>
<li class="toctree-l2"><a class="reference internal" href="../upgrade.html">23. Upgrade Guide</a></li>
<li class="toctree-l2"><a class="reference internal" href="../index.html#appendix">Appendix</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../tutorials/index.html">Tutorials</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">GeoMesa</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../index.html" class="icon icon-home"></a></li>
          <li class="breadcrumb-item"><a href="../index.html">User Manual</a></li>
          <li class="breadcrumb-item"><a href="index.html"><span class="section-number">14. </span>HBase Data Store</a></li>
      <li class="breadcrumb-item active"><span class="section-number">14.1. </span>Installing GeoMesa HBase</li>
      <li class="wy-breadcrumbs-aside">
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="installing-geomesa-hbase">
<h1><span class="section-number">14.1. </span>Installing GeoMesa HBase<a class="headerlink" href="#installing-geomesa-hbase" title="Permalink to this headline">¶</a></h1>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>GeoMesa currently supports HBase versions 2.5 and 1.4.</p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The examples below expect a version to be set in the environment:</p>
<pre class="literal-block">$ export TAG=&quot;4.0.1&quot;
$ export VERSION=&quot;2.12-${TAG}&quot; # note: 2.12 is the Scala build version</pre>
</div>
<p>GeoMesa supports traditional HBase installations as well as HBase running on <a class="reference external" href="https://aws.amazon.com/emr/">Amazon’s EMR</a>
, <a class="reference external" href="https://hortonworks.com/products/data-center/hdp/">Hortonworks’ Data Platform (HDP)</a>, and the
<a class="reference external" href="https://www.cloudera.com/products/enterprise-data-hub.html">Cloudera Distribution of Hadoop (CDH)</a>. For details
on bootstrapping an EMR cluster, see <a class="reference internal" href="../../tutorials/geomesa-hbase-s3-on-aws.html"><span class="doc">Bootstrapping GeoMesa HBase on AWS S3</span></a>. For details on deploying to
Cloudera CDH, see <a class="reference internal" href="../../tutorials/geomesa-hbase-on-cdh.html"><span class="doc">Deploying GeoMesa HBase on Cloudera CDH 5.X</span></a>.</p>
<section id="installing-the-binary-distribution">
<h2><span class="section-number">14.1.1. </span>Installing the Binary Distribution<a class="headerlink" href="#installing-the-binary-distribution" title="Permalink to this headline">¶</a></h2>
<p>GeoMesa HBase artifacts are available for download or can be built from source.
The easiest way to get started is to download the most recent binary version from <a class="reference external" href="https://github.com/locationtech/geomesa/releases">GitHub</a>.</p>
<p>Download and extract it somewhere convenient:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># download and unpackage the most recent distribution:</span>
$<span class="w"> </span>wget<span class="w"> </span><span class="s2">&quot;https://github.com/locationtech/geomesa/releases/download/geomesa-</span><span class="si">${</span><span class="nv">TAG</span><span class="si">}</span><span class="s2">/geomesa-hbase_</span><span class="si">${</span><span class="nv">VERSION</span><span class="si">}</span><span class="s2">-bin.tar.gz&quot;</span>
$<span class="w"> </span>tar<span class="w"> </span>xvf<span class="w"> </span>geomesa-hbase_<span class="si">${</span><span class="nv">VERSION</span><span class="si">}</span>-bin.tar.gz
$<span class="w"> </span><span class="nb">cd</span><span class="w"> </span>geomesa-hbase_<span class="si">${</span><span class="nv">VERSION</span><span class="si">}</span>
</pre></div>
</div>
</section>
<section id="building-from-source">
<span id="hbase-install-source"></span><h2><span class="section-number">14.1.2. </span>Building from Source<a class="headerlink" href="#building-from-source" title="Permalink to this headline">¶</a></h2>
<p>GeoMesa HBase may also be built from source. For more information, refer to the instructions on
<a class="reference external" href="https://github.com/locationtech/geomesa#building-from-source">GitHub</a>.
The remainder of the instructions in this chapter assume the use of the binary GeoMesa HBase
distribution. If you have built from source, the distribution is created in the <code class="docutils literal notranslate"><span class="pre">target</span></code> directory of
<code class="docutils literal notranslate"><span class="pre">geomesa-hbase/geomesa-hbase-dist</span></code>.</p>
</section>
<section id="installing-the-geomesa-distributed-runtime-jar">
<span id="hbase-deploy-distributed-runtime"></span><h2><span class="section-number">14.1.3. </span>Installing the GeoMesa Distributed Runtime JAR<a class="headerlink" href="#installing-the-geomesa-distributed-runtime-jar" title="Permalink to this headline">¶</a></h2>
<p>GeoMesa uses custom HBase filters and coprocessors to speed up queries. There are two distributed runtime JARs
provided by GeoMesa, one for HBase 1.x and one for HBase 2.x.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Make sure that you use the correct GeoMesa distributed JAR for your HBase version</p>
</div>
<p>You must deploy the distributed runtime jar to the directory specified by the HBase configuration variable
<code class="docutils literal notranslate"><span class="pre">hbase.dynamic.jars.dir</span></code>.  This is set to <code class="docutils literal notranslate"><span class="pre">${hbase.rootdir}/lib</span></code> by default. Copy the distribute runtime jar to
this directory as follows:</p>
<div class="sphinx-tabs docutils container">
<div aria-label="Tabbed content" class="closeable" role="tablist"><button aria-controls="panel-0-SEJhc2UgMi54" aria-selected="true" class="sphinx-tabs-tab group-tab" id="tab-0-SEJhc2UgMi54" name="SEJhc2UgMi54" role="tab" tabindex="0">HBase 2.x</button><button aria-controls="panel-0-SEJhc2UgMS54" aria-selected="false" class="sphinx-tabs-tab group-tab" id="tab-0-SEJhc2UgMS54" name="SEJhc2UgMS54" role="tab" tabindex="-1">HBase 1.x</button></div><div aria-labelledby="tab-0-SEJhc2UgMi54" class="sphinx-tabs-panel group-tab" id="panel-0-SEJhc2UgMi54" name="SEJhc2UgMi54" role="tabpanel" tabindex="0"><div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span>hadoop<span class="w"> </span>fs<span class="w"> </span>-put<span class="w"> </span><span class="si">${</span><span class="nv">GEOMESA_HBASE_HOME</span><span class="si">}</span>/dist/hbase/geomesa-hbase-distributed-runtime-hbase2_<span class="si">${</span><span class="nv">VERSION</span><span class="si">}</span>.jar<span class="w"> </span><span class="si">${</span><span class="nv">hbase</span><span class="p">.dynamic.jars.dir</span><span class="si">}</span>/
</pre></div>
</div>
</div><div aria-labelledby="tab-0-SEJhc2UgMS54" class="sphinx-tabs-panel group-tab" hidden="true" id="panel-0-SEJhc2UgMS54" name="SEJhc2UgMS54" role="tabpanel" tabindex="0"><div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span>hadoop<span class="w"> </span>fs<span class="w"> </span>-put<span class="w"> </span><span class="si">${</span><span class="nv">GEOMESA_HBASE_HOME</span><span class="si">}</span>/dist/hbase/geomesa-hbase-distributed-runtime-hbase1_<span class="si">${</span><span class="nv">VERSION</span><span class="si">}</span>.jar<span class="w"> </span><span class="si">${</span><span class="nv">hbase</span><span class="p">.dynamic.jars.dir</span><span class="si">}</span>/
</pre></div>
</div>
</div></div>
<p>If running on top of Amazon S3, you will need to use the <code class="docutils literal notranslate"><span class="pre">aws</span> <span class="pre">s3</span></code> command line tool.</p>
<div class="sphinx-tabs docutils container">
<div aria-label="Tabbed content" class="closeable" role="tablist"><button aria-controls="panel-1-SEJhc2UgMi54" aria-selected="true" class="sphinx-tabs-tab group-tab" id="tab-1-SEJhc2UgMi54" name="SEJhc2UgMi54" role="tab" tabindex="0">HBase 2.x</button><button aria-controls="panel-1-SEJhc2UgMS54" aria-selected="false" class="sphinx-tabs-tab group-tab" id="tab-1-SEJhc2UgMS54" name="SEJhc2UgMS54" role="tab" tabindex="-1">HBase 1.x</button></div><div aria-labelledby="tab-1-SEJhc2UgMi54" class="sphinx-tabs-panel group-tab" id="panel-1-SEJhc2UgMi54" name="SEJhc2UgMi54" role="tabpanel" tabindex="0"><div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span>aws<span class="w"> </span>s3<span class="w"> </span>cp<span class="w"> </span><span class="si">${</span><span class="nv">GEOMESA_HBASE_HOME</span><span class="si">}</span>/dist/hbase/geomesa-hbase-distributed-runtime-hbase2_<span class="si">${</span><span class="nv">VERSION</span><span class="si">}</span>.jar<span class="w"> </span>s3://<span class="si">${</span><span class="nv">hbase</span><span class="p">.dynamic.jars.dir</span><span class="si">}</span>/
</pre></div>
</div>
</div><div aria-labelledby="tab-1-SEJhc2UgMS54" class="sphinx-tabs-panel group-tab" hidden="true" id="panel-1-SEJhc2UgMS54" name="SEJhc2UgMS54" role="tabpanel" tabindex="0"><div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span>aws<span class="w"> </span>s3<span class="w"> </span>cp<span class="w"> </span><span class="si">${</span><span class="nv">GEOMESA_HBASE_HOME</span><span class="si">}</span>/dist/hbase/geomesa-hbase-distributed-runtime-hbase1_<span class="si">${</span><span class="nv">VERSION</span><span class="si">}</span>.jar<span class="w"> </span>s3://<span class="si">${</span><span class="nv">hbase</span><span class="p">.dynamic.jars.dir</span><span class="si">}</span>/
</pre></div>
</div>
</div></div>
<p>If required, you may disable distributed processing by setting the system property <code class="docutils literal notranslate"><span class="pre">geomesa.hbase.remote.filtering</span></code>
to <code class="docutils literal notranslate"><span class="pre">false</span></code>. Note that this may have an adverse effect on performance.</p>
<section id="register-the-coprocessors">
<span id="registering-coprocessors"></span><h3><span class="section-number">14.1.3.1. </span>Register the Coprocessors<a class="headerlink" href="#register-the-coprocessors" title="Permalink to this headline">¶</a></h3>
<p>Assuming that you have installed the distributed runtime JAR under <code class="docutils literal notranslate"><span class="pre">hbase.dynamic.jars.dir</span></code>, coprocessors will be
registered automatically when you call <code class="docutils literal notranslate"><span class="pre">createSchema</span></code> on a data store. Alternatively, the coprocessors may be
registered manually. See <a class="reference internal" href="coprocessor_install.html#coprocessor-alternate"><span class="std std-ref">Manual Coprocessors Registration</span></a> for details.</p>
<p>For more information on managing coprocessors see
<a class="reference external" href="https://blogs.apache.org/hbase/entry/coprocessor_introduction">Coprocessor Introduction</a> on Apache’s Blog.</p>
</section>
</section>
<section id="setting-up-the-hbase-command-line-tools">
<span id="setting-up-hbase-commandline"></span><h2><span class="section-number">14.1.4. </span>Setting up the HBase Command Line Tools<a class="headerlink" href="#setting-up-the-hbase-command-line-tools" title="Permalink to this headline">¶</a></h2>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>To use the HBase data store with the command line tools, you need to install
the distributed runtime first. See <a class="reference internal" href="#hbase-deploy-distributed-runtime"><span class="std std-ref">Installing the GeoMesa Distributed Runtime JAR</span></a>.</p>
</div>
<p>GeoMesa comes with a set of command line tools for managing HBase features located in
<code class="docutils literal notranslate"><span class="pre">geomesa-hbase_${VERSION}/bin/</span></code> of the binary distribution.</p>
<p>GeoMesa requires <code class="docutils literal notranslate"><span class="pre">java</span></code> to be available on the default path.</p>
<section id="configuring-the-classpath">
<h3><span class="section-number">14.1.4.1. </span>Configuring the Classpath<a class="headerlink" href="#configuring-the-classpath" title="Permalink to this headline">¶</a></h3>
<p>GeoMesa needs HBase and Hadoop JARs on the classpath. These are not bundled by default, as they should match
the versions installed on the target system.</p>
<p>If the environment variables <code class="docutils literal notranslate"><span class="pre">HBASE_HOME</span></code> and <code class="docutils literal notranslate"><span class="pre">HADOOP_HOME</span></code> are set, then GeoMesa will load the appropriate
JARs and configuration files from those locations and no further configuration is required. Otherwise, you will
be prompted to download the appropriate JARs the first time you invoke the tools. Environment variables can be
specified in <code class="docutils literal notranslate"><span class="pre">conf/*-env.sh</span></code> and dependency versions can be specified in <code class="docutils literal notranslate"><span class="pre">conf/dependencies.sh</span></code>.</p>
<p>For advanced scenarios, the environmental variables <code class="docutils literal notranslate"><span class="pre">GEOMESA_HADOOP_CLASSPATH</span></code> and <code class="docutils literal notranslate"><span class="pre">GEOMESA_HBASE_CLASSPATH</span></code>
can be set to override all other logic.</p>
<p>If no environment variables are set but the <code class="docutils literal notranslate"><span class="pre">hbase</span></code> and <code class="docutils literal notranslate"><span class="pre">hadoop</span></code> commands are available, then
GeoMesa will interrogate them for their classpaths by running the <code class="docutils literal notranslate"><span class="pre">hadoop</span> <span class="pre">classpath</span></code> and <code class="docutils literal notranslate"><span class="pre">hbase</span> <span class="pre">classpath</span></code>
commands. Note that this can be slow, so it is usually better to use <code class="docutils literal notranslate"><span class="pre">GEOMESA_HADOOP_CLASSPATH</span></code> and
<code class="docutils literal notranslate"><span class="pre">GEOMESA_HBASE_CLASSPATH</span></code> as described above.</p>
<div class="sphinx-tabs docutils container">
<div aria-label="Tabbed content" class="closeable" role="tablist"><button aria-controls="panel-2-U3RhbmRhcmQ=" aria-selected="true" class="sphinx-tabs-tab group-tab" id="tab-2-U3RhbmRhcmQ=" name="U3RhbmRhcmQ=" role="tab" tabindex="0">Standard</button><button aria-controls="panel-2-QW1hem9uIEVNUg==" aria-selected="false" class="sphinx-tabs-tab group-tab" id="tab-2-QW1hem9uIEVNUg==" name="QW1hem9uIEVNUg==" role="tab" tabindex="-1">Amazon EMR</button><button aria-controls="panel-2-SERQ" aria-selected="false" class="sphinx-tabs-tab group-tab" id="tab-2-SERQ" name="SERQ" role="tab" tabindex="-1">HDP</button><button aria-controls="panel-2-U3RhbmRhbG9uZQ==" aria-selected="false" class="sphinx-tabs-tab group-tab" id="tab-2-U3RhbmRhbG9uZQ==" name="U3RhbmRhbG9uZQ==" role="tab" tabindex="-1">Standalone</button></div><div aria-labelledby="tab-2-U3RhbmRhcmQ=" class="sphinx-tabs-panel group-tab" id="panel-2-U3RhbmRhcmQ=" name="U3RhbmRhcmQ=" role="tabpanel" tabindex="0"><p>Configure GeoMesa to use pre-installed HBase and Hadoop distributions:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span><span class="nb">export</span><span class="w"> </span><span class="nv">HADOOP_HOME</span><span class="o">=</span>/path/to/hadoop
$<span class="w"> </span><span class="nb">export</span><span class="w"> </span><span class="nv">HBASE_HOME</span><span class="o">=</span>/path/to/hbase
$<span class="w"> </span><span class="nb">export</span><span class="w"> </span><span class="nv">GEOMESA_HBASE_HOME</span><span class="o">=</span>/opt/geomesa
$<span class="w"> </span><span class="nb">export</span><span class="w"> </span><span class="nv">PATH</span><span class="o">=</span><span class="s2">&quot;</span><span class="si">${</span><span class="nv">PATH</span><span class="si">}</span><span class="s2">:</span><span class="si">${</span><span class="nv">GEOMESA_HBASE_HOME</span><span class="si">}</span><span class="s2">/bin&quot;</span>
</pre></div>
</div>
</div><div aria-labelledby="tab-2-QW1hem9uIEVNUg==" class="sphinx-tabs-panel group-tab" hidden="true" id="panel-2-QW1hem9uIEVNUg==" name="QW1hem9uIEVNUg==" role="tabpanel" tabindex="0"><p>When using EMR to install HBase or Hadoop there are AWS specific jars that need to be used (e.g. EMR FS).
It is recommended to use EMR to install Hadoop and/or HBase in order to properly configure and install these
dependencies (especially when using HBase on S3).</p>
<p>If you used EMR to install Hadoop and HBase, you can view their classpaths using the <code class="docutils literal notranslate"><span class="pre">hadoop</span> <span class="pre">classpath</span></code> and
<code class="docutils literal notranslate"><span class="pre">hbase</span> <span class="pre">classpath</span></code> commands to build an appropriate classpath to include jars and configuration files for
GeoMesa HBase:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span><span class="nb">export</span><span class="w"> </span><span class="nv">GEOMESA_HADOOP_CLASSPATH</span><span class="o">=</span><span class="k">$(</span>hadoop<span class="w"> </span>classpath<span class="k">)</span>
$<span class="w"> </span><span class="nb">export</span><span class="w"> </span><span class="nv">GEOMESA_HBASE_CLASSPATH</span><span class="o">=</span><span class="k">$(</span>hbase<span class="w"> </span>classpath<span class="k">)</span>
$<span class="w"> </span><span class="nb">export</span><span class="w"> </span><span class="nv">GEOMESA_HBASE_HOME</span><span class="o">=</span>/opt/geomesa
$<span class="w"> </span><span class="nb">export</span><span class="w"> </span><span class="nv">PATH</span><span class="o">=</span><span class="s2">&quot;</span><span class="si">${</span><span class="nv">PATH</span><span class="si">}</span><span class="s2">:</span><span class="si">${</span><span class="nv">GEOMESA_HBASE_HOME</span><span class="si">}</span><span class="s2">/bin&quot;</span>
</pre></div>
</div>
</div><div aria-labelledby="tab-2-SERQ" class="sphinx-tabs-panel group-tab" hidden="true" id="panel-2-SERQ" name="SERQ" role="tabpanel" tabindex="0"><p>Configure the environment to use an HDP install:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span><span class="nb">export</span><span class="w"> </span><span class="nv">HADOOP_HOME</span><span class="o">=</span>/usr/hdp/current/hadoop-client/
$<span class="w"> </span><span class="nb">export</span><span class="w"> </span><span class="nv">HBASE_HOME</span><span class="o">=</span>/usr/hdp/current/hbase-client/
$<span class="w"> </span><span class="nb">export</span><span class="w"> </span><span class="nv">GEOMESA_HBASE_HOME</span><span class="o">=</span>/opt/geomesa
$<span class="w"> </span><span class="nb">export</span><span class="w"> </span><span class="nv">PATH</span><span class="o">=</span><span class="s2">&quot;</span><span class="si">${</span><span class="nv">PATH</span><span class="si">}</span><span class="s2">:</span><span class="si">${</span><span class="nv">GEOMESA_HBASE_HOME</span><span class="si">}</span><span class="s2">/bin&quot;</span>
</pre></div>
</div>
</div><div aria-labelledby="tab-2-U3RhbmRhbG9uZQ==" class="sphinx-tabs-panel group-tab" hidden="true" id="panel-2-U3RhbmRhbG9uZQ==" name="U3RhbmRhbG9uZQ==" role="tabpanel" tabindex="0"><p>If there is no local HBase instance, the necessary JARs can be installed by downloading them. Modify the
version numbers in <code class="docutils literal notranslate"><span class="pre">geomesa-hbase_${VERSION}/conf/dependencies.sh</span></code> to match the target system and use
<code class="docutils literal notranslate"><span class="pre">geomesa-hbase_${VERSION}/bin/install-dependencies.sh</span></code> to install them:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span><span class="nb">cd</span><span class="w"> </span>geomesa-hbase_<span class="si">${</span><span class="nv">VERSION</span><span class="si">}</span>/bin
$<span class="w"> </span>./install-dependencies.sh
</pre></div>
</div>
<p>In order to connect to a cluster, an appropriate <code class="docutils literal notranslate"><span class="pre">hbase-site.xml</span></code> is required. Copy it from your cluster
into <code class="docutils literal notranslate"><span class="pre">geomesa-hbase_${VERSION}/conf/</span></code>.</p>
<p>In order to run map/reduce jobs, copy the Hadoop <code class="docutils literal notranslate"><span class="pre">*-site.xml</span></code> configuration files
from your Hadoop installation into <code class="docutils literal notranslate"><span class="pre">geomesa-hbase_${VERSION}/conf</span></code>.</p>
</div></div>
<p>In order to run map/reduce and Spark jobs, you will need to put <code class="docutils literal notranslate"><span class="pre">hbase-site.xml</span></code> into a JAR on the distributed
classpath. Add it at the root level of the <code class="docutils literal notranslate"><span class="pre">geomesa-hbase-datastore</span></code> JAR in the <code class="docutils literal notranslate"><span class="pre">lib</span></code> folder:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span>zip<span class="w"> </span>-r<span class="w"> </span>lib/geomesa-hbase-datastore_<span class="si">${</span><span class="nv">VERSION</span><span class="si">}</span>.jar<span class="w"> </span>hbase-site.xml
</pre></div>
</div>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Ensure that the <code class="docutils literal notranslate"><span class="pre">hbase-site.xml</span></code> is at the root (top) level of your JAR, otherwise it will not be picked up.</p>
</div>
<p>GeoMesa also provides the ability to add additional JARs to the classpath using the environmental variable
<code class="docutils literal notranslate"><span class="pre">$GEOMESA_EXTRA_CLASSPATHS</span></code>. GeoMesa will prepend the contents of this environmental variable  to the computed
classpath, giving it highest precedence in the classpath. Users can provide directories of jar files or individual
files using a colon (<code class="docutils literal notranslate"><span class="pre">:</span></code>) as a delimiter. These entries will also be added the the map-reduce libjars variable.</p>
<p>Due to licensing restrictions, dependencies for shape file support must be separately installed.
Do this with the following command:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span>./bin/install-shapefile-support.sh
</pre></div>
</div>
<p>For logging, see <a class="reference internal" href="../cli/logging.html#slf4j-configuration"><span class="std std-ref">Logging Configuration</span></a> for information about configuring the SLF4J implementation.</p>
<p>Use the <code class="docutils literal notranslate"><span class="pre">geomesa-hbase</span> <span class="pre">classpath</span></code> command to print the final classpath that will be used when executing GeoMesa
commands.</p>
</section>
<section id="configuring-the-path">
<h3><span class="section-number">14.1.4.2. </span>Configuring the Path<a class="headerlink" href="#configuring-the-path" title="Permalink to this headline">¶</a></h3>
<p>In order to be able to run the <code class="docutils literal notranslate"><span class="pre">geomesa-hbase</span></code> command from anywhere, you can set the environment
variable <code class="docutils literal notranslate"><span class="pre">GEOMESA_HBASE_HOME</span></code> and add it to your path by modifying your bashrc file:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span><span class="nb">echo</span><span class="w"> </span><span class="s1">&#39;export GEOMESA_HBASE_HOME=/path/to/geomesa-hbase_${VERSION}&#39;</span><span class="w"> </span>&gt;&gt;<span class="w"> </span>~/.bashrc
$<span class="w"> </span><span class="nb">echo</span><span class="w"> </span><span class="s1">&#39;export PATH=${GEOMESA_HBASE_HOME}/bin:$PATH&#39;</span><span class="w"> </span>&gt;&gt;<span class="w"> </span>~/.bashrc
$<span class="w"> </span><span class="nb">source</span><span class="w"> </span>~/.bashrc
$<span class="w"> </span>which<span class="w"> </span>geomesa-hbae
</pre></div>
</div>
</section>
<section id="running-commands">
<h3><span class="section-number">14.1.4.3. </span>Running Commands<a class="headerlink" href="#running-commands" title="Permalink to this headline">¶</a></h3>
<p>Test the command that invokes the GeoMesa Tools:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span>geomesa-hbase
</pre></div>
</div>
<p>The output should look like this:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Usage</span><span class="p">:</span> <span class="n">geomesa</span><span class="o">-</span><span class="n">hbase</span> <span class="p">[</span><span class="n">command</span><span class="p">]</span> <span class="p">[</span><span class="n">command</span> <span class="n">options</span><span class="p">]</span>
  <span class="n">Commands</span><span class="p">:</span>
  <span class="o">...</span>
</pre></div>
</div>
<p>For details on the available commands, see <a class="reference internal" href="commandline.html#hbase-tools"><span class="std std-ref">HBase Command-Line Tools</span></a>.</p>
</section>
</section>
<section id="installing-geomesa-hbase-in-geoserver">
<span id="install-hbase-geoserver"></span><h2><span class="section-number">14.1.5. </span>Installing GeoMesa HBase in GeoServer<a class="headerlink" href="#installing-geomesa-hbase-in-geoserver" title="Permalink to this headline">¶</a></h2>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>See <a class="reference internal" href="../geoserver.html#geoserver-versions"><span class="std std-ref">GeoServer Versions</span></a> to ensure that GeoServer is compatible with your GeoMesa version.</p>
</div>
<p>The HBase GeoServer plugin is bundled by default in a GeoMesa binary distribution. To install, extract
<code class="docutils literal notranslate"><span class="pre">$GEOMESA_HBASE_HOME/dist/gs-plugins/geomesa-hbase-gs-plugin_${VERSION}-install.tar.gz</span></code> into GeoServer’s
<code class="docutils literal notranslate"><span class="pre">WEB-INF/lib</span></code> directory.</p>
<p>This distribution does not include the HBase client, Hadoop or Zookeeper JARs. These JARs can be installed
using the <code class="docutils literal notranslate"><span class="pre">bin/install-dependencies.sh</span></code> script included in the binary distribution. Before
running, set the version numbers in <code class="docutils literal notranslate"><span class="pre">conf/dependencies.sh</span></code> to match your target installation as needed.</p>
<p>The HBase data store requires the configuration file <code class="docutils literal notranslate"><span class="pre">hbase-site.xml</span></code> to be on the classpath. This can
be accomplished by placing the file in <code class="docutils literal notranslate"><span class="pre">geoserver/WEB-INF/classes</span></code> (you should make the directory if it
doesn’t exist).</p>
<p>Restart GeoServer after the JARs are installed.</p>
</section>
<section id="connecting-to-external-hbase-clusters-backed-by-s3">
<h2><span class="section-number">14.1.6. </span>Connecting to External HBase Clusters Backed By S3<a class="headerlink" href="#connecting-to-external-hbase-clusters-backed-by-s3" title="Permalink to this headline">¶</a></h2>
<p>To use a EMR cluster to connect to an existing, external HBase Cluster first follow the above instructions to setup the
new cluster and install GeoMesa.</p>
<p>The next step is to obtain the <code class="docutils literal notranslate"><span class="pre">hbase-site.xml</span></code> for the external HBase Cluster, copy to the new EMR cluster and
copy it into <code class="docutils literal notranslate"><span class="pre">${GEOMESA_HBASE_HOME}/conf</span></code>. At this point you may run the <code class="docutils literal notranslate"><span class="pre">geomesa-hbase</span></code> command line tools.
In order to run Spark or Map/Reduce jobs, ensure that <code class="docutils literal notranslate"><span class="pre">hbase-site.xml</span></code> is zipped into a JAR, as described above.</p>
</section>
<section id="configuring-hbase-on-azure-hdinsight">
<h2><span class="section-number">14.1.7. </span>Configuring HBase on Azure HDInsight<a class="headerlink" href="#configuring-hbase-on-azure-hdinsight" title="Permalink to this headline">¶</a></h2>
<p>HDInsight generally creates <code class="docutils literal notranslate"><span class="pre">HBASE_HOME</span></code> in HDFS under the path <code class="docutils literal notranslate"><span class="pre">/hbase</span></code>. In order to make the GeoMesa
coprocessors and filters available to the region servers, use the <code class="docutils literal notranslate"><span class="pre">hadoop</span></code> filesystem command to put
the GeoMesa JAR there:</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>hadoop<span class="w"> </span>fs<span class="w"> </span>-mkdir<span class="w"> </span>/hbase/lib
hadoop<span class="w"> </span>fs<span class="w"> </span>-put<span class="w"> </span>geomesa-hbase-distributed-runtime-hbase1-<span class="nv">$VERSION</span>.jar<span class="w"> </span>/hbase/lib/
</pre></div>
</div>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="index.html" class="btn btn-neutral float-left" title="14. HBase Data Store" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="coprocessor_install.html" class="btn btn-neutral float-right" title="14.2. Manual Coprocessors Registration" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p></p>
  </div>

  

<div role="contentinfo">
  <p>
    &copy; Copyright 2013-2023 <a href="https://www.ccri.com/">Commonwealth Computer Research, Inc.</a>
    <br/>
    Licensed under the <a href="https://www.opensource.org/licenses/apache2.0.php">Apache License, Version 2.0</a>
  </p>
</div>

<div role="contentinfo">
  <p>
    Built with <a href="https://www.sphinx-doc.org/">Sphinx</a>
    using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>
    - contribute to this page on
    <a href="https://github.com/locationtech/geomesa/edit/main/docs/user/hbase/install.rst">GitHub <img src="../../_static/launch.svg"/></a>
  </p>

</div>



</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>