<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>16.1. Installing GeoMesa Cassandra &mdash; GeoMesa 4.0.1 Manuals</title>
      <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/css/theme_custom.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/copybutton.css" type="text/css" />
      <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:400,700" type="text/css" />
      <link rel="stylesheet" href="../../_static/tabs.css" type="text/css" />
    <link rel="canonical" href="https://www.geomesa.org/documentation/user/cassandra/install.html"/>
  <!--[if lt IE 9]>
    <script src="../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
        <script src="../../_static/jquery.js"></script>
        <script src="../../_static/underscore.js"></script>
        <script src="../../_static/doctools.js"></script>
        <script src="../../_static/clipboard.min.js"></script>
        <script src="../../_static/copybutton.js"></script>
    <script src="../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="16.2. Using the Cassandra DataStore Programmatically" href="usage.html" />
    <link rel="prev" title="16. Cassandra Data Store" href="index.html" />


</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="../../index.html" class="icon icon-home"> GeoMesa
          </a>
              <div class="version">
                4.0.4
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="../index.html">User Manual</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../introduction.html">1. Introduction</a></li>
<li class="toctree-l2"><a class="reference internal" href="../getting_started.html">2. Getting Started</a></li>
<li class="toctree-l2"><a class="reference internal" href="../download.html">3. Versions and Downloads</a></li>
<li class="toctree-l2"><a class="reference internal" href="../install.html">4. Installation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../architecture.html">5. Architecture Overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="../geotools.html">6. GeoTools Overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="../datastores/index.html">7. GeoMesa Data Stores</a></li>
<li class="toctree-l2"><a class="reference internal" href="../cli/index.html">8. Command-Line Tools</a></li>
<li class="toctree-l2"><a class="reference internal" href="../convert/index.html">9. GeoMesa Converters</a></li>
<li class="toctree-l2"><a class="reference internal" href="../geoserver.html">10. GeoServer Plugins</a></li>
<li class="toctree-l2"><a class="reference internal" href="../spark/index.html">11. GeoMesa Spark</a></li>
<li class="toctree-l2"><a class="reference internal" href="../nifi/index.html">12. GeoMesa NiFi Bundle</a></li>
<li class="toctree-l2"><a class="reference internal" href="../process.html">13. GeoMesa Processes</a></li>
<li class="toctree-l2"><a class="reference internal" href="../hbase/index.html">14. HBase Data Store</a></li>
<li class="toctree-l2"><a class="reference internal" href="../accumulo/index.html">15. Accumulo Data Store</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="index.html">16. Cassandra Data Store</a><ul class="current">
<li class="toctree-l3 current"><a class="current reference internal" href="#">16.1. Installing GeoMesa Cassandra</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#connecting-to-cassandra">16.1.1. Connecting to Cassandra</a></li>
<li class="toctree-l4"><a class="reference internal" href="#installing-from-the-binary-distribution">16.1.2. Installing from the Binary Distribution</a></li>
<li class="toctree-l4"><a class="reference internal" href="#building-from-source">16.1.3. Building from Source</a></li>
<li class="toctree-l4"><a class="reference internal" href="#setting-up-the-cassandra-command-line-tools">16.1.4. Setting up the Cassandra Command Line Tools</a></li>
<li class="toctree-l4"><a class="reference internal" href="#installing-geomesa-cassandra-in-geoserver">16.1.5. Installing GeoMesa Cassandra in GeoServer</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="usage.html">16.2. Using the Cassandra DataStore Programmatically</a></li>
<li class="toctree-l3"><a class="reference internal" href="geoserver.html">16.3. Using the Cassandra Data Store in GeoServer</a></li>
<li class="toctree-l3"><a class="reference internal" href="commandline.html">16.4. Cassandra Command-Line Tools</a></li>
<li class="toctree-l3"><a class="reference internal" href="configuration.html">16.5. Cassandra Configuration</a></li>
<li class="toctree-l3"><a class="reference internal" href="heatmaps.html">16.6. Cassandra Heatmaps</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../kafka/index.html">17. Kafka Data Store</a></li>
<li class="toctree-l2"><a class="reference internal" href="../redis/index.html">18. Redis Data Store</a></li>
<li class="toctree-l2"><a class="reference internal" href="../filesystem/index.html">19. FileSystem Data Store</a></li>
<li class="toctree-l2"><a class="reference internal" href="../postgis/index.html">20. Partitioned PostGIS Data Store</a></li>
<li class="toctree-l2"><a class="reference internal" href="../lambda/index.html">21. Lambda Data Store</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ds_views.html">22. Combined Data Store Views</a></li>
<li class="toctree-l2"><a class="reference internal" href="../upgrade.html">23. Upgrade Guide</a></li>
<li class="toctree-l2"><a class="reference internal" href="../index.html#appendix">Appendix</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../tutorials/index.html">Tutorials</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">GeoMesa</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../index.html" class="icon icon-home"></a></li>
          <li class="breadcrumb-item"><a href="../index.html">User Manual</a></li>
          <li class="breadcrumb-item"><a href="index.html"><span class="section-number">16. </span>Cassandra Data Store</a></li>
      <li class="breadcrumb-item active"><span class="section-number">16.1. </span>Installing GeoMesa Cassandra</li>
      <li class="wy-breadcrumbs-aside">
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="installing-geomesa-cassandra">
<h1><span class="section-number">16.1. </span>Installing GeoMesa Cassandra<a class="headerlink" href="#installing-geomesa-cassandra" title="Permalink to this headline">¶</a></h1>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>GeoMesa currently supports Cassandra version 3.</p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The examples below expect a version to be set in the environment:</p>
<pre class="literal-block">$ export TAG=&quot;4.0.1&quot;
$ export VERSION=&quot;2.12-${TAG}&quot; # note: 2.12 is the Scala build version</pre>
</div>
<section id="connecting-to-cassandra">
<h2><span class="section-number">16.1.1. </span>Connecting to Cassandra<a class="headerlink" href="#connecting-to-cassandra" title="Permalink to this headline">¶</a></h2>
<p>The first step to getting started with Cassandra and GeoMesa is to install
Cassandra itself. You can find good directions for downloading and installing
Cassandra online. For example, see Cassandra’s official <a class="reference external" href="https://cassandra.apache.org/doc/latest/getting_started/index.html">getting started</a> documentation.</p>
<p>Once you have Cassandra installed, the next step is to prepare your Cassandra installation
to integrate with GeoMesa. First, create a key space within Cassandra. The easiest way to
do this with <code class="docutils literal notranslate"><span class="pre">cqlsh</span></code>, which should have been installed as part of your Cassandra installation.
Start <code class="docutils literal notranslate"><span class="pre">cqlsh</span></code>, then type:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">CREATE</span> <span class="n">KEYSPACE</span> <span class="n">mykeyspace</span> <span class="n">WITH</span> <span class="n">REPLICATION</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;class&#39;</span><span class="p">:</span> <span class="s1">&#39;SimpleStrategy&#39;</span><span class="p">,</span> <span class="s1">&#39;replication_factor&#39;</span> <span class="p">:</span> <span class="mi">3</span><span class="p">};</span>
</pre></div>
</div>
<p>This creates a key space called “mykeyspace”. This is a top-level name space within Cassandra
and it will provide a place for GeoMesa to put all of its data, including data for spatial features
and associated metadata.</p>
<p>Next, you’ll need to set the <code class="docutils literal notranslate"><span class="pre">CASSANDRA_HOME</span></code> environment variable. GeoMesa uses this variable
to find the Cassandra jars. These jars should be in the <code class="docutils literal notranslate"><span class="pre">lib</span></code> directory of your Cassandra
installation. To set the variable add the following line to your <code class="docutils literal notranslate"><span class="pre">.profile</span></code> or <code class="docutils literal notranslate"><span class="pre">.bashrc</span></code> file:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">export</span> <span class="n">CASSANDRA_HOME</span><span class="o">=/</span><span class="n">path</span><span class="o">/</span><span class="n">to</span><span class="o">/</span><span class="n">cassandra</span>
</pre></div>
</div>
<p>Finally, make sure you know a contact point for your Cassandra instance.
If you are just trying things locally, and using the default Cassandra settings,
the contact point would be <code class="docutils literal notranslate"><span class="pre">127.0.0.1:9042</span></code>. You can check and configure the
port you are using using the <code class="docutils literal notranslate"><span class="pre">native_transport_port</span></code> in the Cassandra
configuration file (located at <code class="docutils literal notranslate"><span class="pre">conf/cassandra.yaml</span></code> in your Cassandra
installation directory).</p>
</section>
<section id="installing-from-the-binary-distribution">
<h2><span class="section-number">16.1.2. </span>Installing from the Binary Distribution<a class="headerlink" href="#installing-from-the-binary-distribution" title="Permalink to this headline">¶</a></h2>
<p>GeoMesa Cassandra artifacts are available for download or can be built from source.
The easiest way to get started is to download the most recent binary version from <a class="reference external" href="https://github.com/locationtech/geomesa/releases">GitHub</a>.</p>
<p>Download and extract it somewhere convenient:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># download and unpackage the most recent distribution:</span>
$<span class="w"> </span>wget<span class="w"> </span><span class="s2">&quot;https://github.com/locationtech/geomesa/releases/download/geomesa-</span><span class="si">${</span><span class="nv">TAG</span><span class="si">}</span><span class="s2">/geomesa-cassandra_</span><span class="si">${</span><span class="nv">VERSION</span><span class="si">}</span><span class="s2">-bin.tar.gz&quot;</span>
$<span class="w"> </span>tar<span class="w"> </span>xvf<span class="w"> </span>geomesa-cassandra_<span class="si">${</span><span class="nv">VERSION</span><span class="si">}</span>-bin.tar.gz
$<span class="w"> </span><span class="nb">cd</span><span class="w"> </span>geomesa-cassandra_<span class="si">${</span><span class="nv">VERSION</span><span class="si">}</span>
</pre></div>
</div>
</section>
<section id="building-from-source">
<span id="cassandra-install-source"></span><h2><span class="section-number">16.1.3. </span>Building from Source<a class="headerlink" href="#building-from-source" title="Permalink to this headline">¶</a></h2>
<p>GeoMesa Cassandra may also be built from source. For more information, refer to the instructions on
<a class="reference external" href="https://github.com/locationtech/geomesa#building-from-source">GitHub</a>.
<a class="reference external" href="https://github.com/locationtech/geomesa#building-from-source">GitHub</a>.
The remainder of the instructions in this chapter assume the use of the binary GeoMesa Cassandra
distribution. If you have built from source, the distribution is created in the <code class="docutils literal notranslate"><span class="pre">target</span></code> directory of
<code class="docutils literal notranslate"><span class="pre">geomesa-cassandra/geomesa-cassandra-dist</span></code>.</p>
</section>
<section id="setting-up-the-cassandra-command-line-tools">
<span id="setting-up-cassandra-commandline"></span><h2><span class="section-number">16.1.4. </span>Setting up the Cassandra Command Line Tools<a class="headerlink" href="#setting-up-the-cassandra-command-line-tools" title="Permalink to this headline">¶</a></h2>
<p>GeoMesa Cassandra comes with a set of command line tools for managing Cassandra features located in
<code class="docutils literal notranslate"><span class="pre">geomesa-cassandra_${VERSION}/bin/</span></code> of the binary distribution.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>You can configure environment variables and classpath settings in <code class="docutils literal notranslate"><span class="pre">geomesa-cassandra_${VERSION}/conf/*-env.sh</span></code>.</p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p><code class="docutils literal notranslate"><span class="pre">geomesa-cassandra</span></code> will read the <code class="docutils literal notranslate"><span class="pre">$CASSANDRA_HOME</span></code> and <code class="docutils literal notranslate"><span class="pre">$HADOOP_HOME</span></code> environment variables to load the
appropriate JAR files for Cassandra and Hadoop. In addition, <code class="docutils literal notranslate"><span class="pre">geomesa-cassandra</span></code> will pull any
additional JARs from the <code class="docutils literal notranslate"><span class="pre">$GEOMESA_EXTRA_CLASSPATHS</span></code> environment variable into the class path.
Use the <code class="docutils literal notranslate"><span class="pre">geomesa-cassandra</span> <span class="pre">classpath</span></code> command in order to see what JARs are being used.</p>
</div>
<p>If you do not have a local Cassandra installation, the first time you run the tools it will prompt you to download
the necessary JARs. You may also do this manually using the scripts provided with the distribution:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span>./bin/install-dependencies.sh
</pre></div>
</div>
<p>Due to licensing restrictions, dependencies for shape file support must be separately installed.
Do this with the following command:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span>./bin/install-shapefile-support.sh
</pre></div>
</div>
<p>Run <code class="docutils literal notranslate"><span class="pre">geomesa-cassandra</span></code> without arguments to confirm that the tools work.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ bin/geomesa-cassandra
</pre></div>
</div>
<p>The output should look like this:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">INFO</span>  <span class="n">Usage</span><span class="p">:</span> <span class="n">geomesa</span><span class="o">-</span><span class="n">cassandra</span> <span class="p">[</span><span class="n">command</span><span class="p">]</span> <span class="p">[</span><span class="n">command</span> <span class="n">options</span><span class="p">]</span>
  <span class="n">Commands</span><span class="p">:</span>
  <span class="o">...</span>
</pre></div>
</div>
</section>
<section id="installing-geomesa-cassandra-in-geoserver">
<span id="install-cassandra-geoserver"></span><h2><span class="section-number">16.1.5. </span>Installing GeoMesa Cassandra in GeoServer<a class="headerlink" href="#installing-geomesa-cassandra-in-geoserver" title="Permalink to this headline">¶</a></h2>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>See <a class="reference internal" href="../geoserver.html#geoserver-versions"><span class="std std-ref">GeoServer Versions</span></a> to ensure that GeoServer is compatible with your GeoMesa version.</p>
</div>
<p>The GeoMesa Cassandra distribution includes a GeoServer plugin for including
Cassandra data stores in GeoServer. The plugin files are in the
<code class="docutils literal notranslate"><span class="pre">dist/gs-plugins/geomesa-cassandra-gs-plugin_${VERSION}-install.tar.gz</span></code> archive within the
GeoMesa Cassandra distribution directory.</p>
<p>To install the plugins, extract the archive and copy the contents to the <code class="docutils literal notranslate"><span class="pre">WEB-INF/lib</span></code>
directory of your GeoServer installation:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">..</span> <span class="n">code</span><span class="o">-</span><span class="n">block</span><span class="p">::</span> <span class="n">bash</span>
</pre></div>
</div>
<blockquote>
<div><dl class="simple">
<dt>$ tar -xzvf </dt><dd><p>geomesa-cassandra_${VERSION}/dist/gs-plugins/geomesa-cassandra-gs-plugin_${VERSION}-install.tar.gz -C /path/to/geoserver/webapps/geoserver/WEB-INF/lib</p>
</dd>
</dl>
</div></blockquote>
<p>Next, install the JARs for Cassandra. By default, JARs will be downloaded from Maven central. You may
override this by setting the environment variable <code class="docutils literal notranslate"><span class="pre">GEOMESA_MAVEN_URL</span></code>. If you do no have an internet connection
you can download the JARs manually.</p>
<p>Edit the file <code class="docutils literal notranslate"><span class="pre">geomesa-cassandra_${VERSION}/conf/dependencies.sh</span></code> to set the version of Cassandra
to match the target environment, and then run the script:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span>./bin/install-dependencies.sh<span class="w"> </span>/path/to/geoserver/webapps/geoserver/WEB-INF/lib
</pre></div>
</div>
<p>Restart GeoServer after the JARs are installed.</p>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="index.html" class="btn btn-neutral float-left" title="16. Cassandra Data Store" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="usage.html" class="btn btn-neutral float-right" title="16.2. Using the Cassandra DataStore Programmatically" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p></p>
  </div>

  

<div role="contentinfo">
  <p>
    &copy; Copyright 2013-2023 <a href="https://www.ccri.com/">Commonwealth Computer Research, Inc.</a>
    <br/>
    Licensed under the <a href="https://www.opensource.org/licenses/apache2.0.php">Apache License, Version 2.0</a>
  </p>
</div>

<div role="contentinfo">
  <p>
    Built with <a href="https://www.sphinx-doc.org/">Sphinx</a>
    using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>
    - contribute to this page on
    <a href="https://github.com/locationtech/geomesa/edit/main/docs/user/cassandra/install.rst">GitHub <img src="../../_static/launch.svg"/></a>
  </p>

</div>



</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>