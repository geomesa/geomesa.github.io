<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>13. GeoMesa Processes &mdash; GeoMesa 3.5.0 Manuals</title>
      <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../_static/css/theme_custom.css" type="text/css" />
      <link rel="stylesheet" href="../_static/copybutton.css" type="text/css" />
      <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:400,700" type="text/css" />
      <link rel="stylesheet" href="../_static/tabs.css" type="text/css" />
    <link rel="canonical" href="https://www.geomesa.org/documentation/user/process.html"/>
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
        <script src="../_static/clipboard.min.js"></script>
        <script src="../_static/copybutton.js"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="14. HBase Data Store" href="hbase/index.html" />
    <link rel="prev" title="12.11. Examples" href="nifi/examples.html" />


</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="../index.html" class="icon icon-home"> GeoMesa
          </a>
              <div class="version">
                3.5.1
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="index.html">User Manual</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="introduction.html">1. Introduction</a></li>
<li class="toctree-l2"><a class="reference internal" href="download.html">2. Versions and Downloads</a></li>
<li class="toctree-l2"><a class="reference internal" href="install.html">3. Installation</a></li>
<li class="toctree-l2"><a class="reference internal" href="getting_started.html">4. Getting Started</a></li>
<li class="toctree-l2"><a class="reference internal" href="geotools.html">5. GeoTools Overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="architecture.html">6. Architecture Overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="datastores/index.html">7. GeoMesa Data Stores</a></li>
<li class="toctree-l2"><a class="reference internal" href="cli/index.html">8. Command-Line Tools</a></li>
<li class="toctree-l2"><a class="reference internal" href="convert/index.html">9. GeoMesa Convert</a></li>
<li class="toctree-l2"><a class="reference internal" href="geoserver.html">10. GeoServer Plugins</a></li>
<li class="toctree-l2"><a class="reference internal" href="spark/index.html">11. GeoMesa Spark</a></li>
<li class="toctree-l2"><a class="reference internal" href="nifi/index.html">12. GeoMesa NiFi Bundle</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">13. GeoMesa Processes</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#installation">13.1. Installation</a></li>
<li class="toctree-l3"><a class="reference internal" href="#processors">13.2. Processors</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#arrowconversionprocess">13.2.1. ArrowConversionProcess</a></li>
<li class="toctree-l4"><a class="reference internal" href="#binconversionprocess">13.2.2. BinConversionProcess</a></li>
<li class="toctree-l4"><a class="reference internal" href="#densityprocess">13.2.3. DensityProcess</a></li>
<li class="toctree-l4"><a class="reference internal" href="#dateoffsetprocess">13.2.4. DateOffsetProcess</a></li>
<li class="toctree-l4"><a class="reference internal" href="#hashattributeprocess">13.2.5. HashAttributeProcess</a></li>
<li class="toctree-l4"><a class="reference internal" href="#hashattributecolorprocess">13.2.6. HashAttributeColorProcess</a></li>
<li class="toctree-l4"><a class="reference internal" href="#joinprocess">13.2.7. JoinProcess</a></li>
<li class="toctree-l4"><a class="reference internal" href="#knearestneighborsearchprocess">13.2.8. KNearestNeighborSearchProcess</a></li>
<li class="toctree-l4"><a class="reference internal" href="#point2pointprocess">13.2.9. Point2PointProcess</a></li>
<li class="toctree-l4"><a class="reference internal" href="#proximitysearchprocess">13.2.10. ProximitySearchProcess</a></li>
<li class="toctree-l4"><a class="reference internal" href="#routesearchprocess">13.2.11. RouteSearchProcess</a></li>
<li class="toctree-l4"><a class="reference internal" href="#samplingprocess">13.2.12. SamplingProcess</a></li>
<li class="toctree-l4"><a class="reference internal" href="#statsprocess">13.2.13. StatsProcess</a></li>
<li class="toctree-l4"><a class="reference internal" href="#tracklabelprocess">13.2.14. TrackLabelProcess</a></li>
<li class="toctree-l4"><a class="reference internal" href="#tubeselectprocess">13.2.15. TubeSelectProcess</a></li>
<li class="toctree-l4"><a class="reference internal" href="#queryprocess">13.2.16. QueryProcess</a></li>
<li class="toctree-l4"><a class="reference internal" href="#uniqueprocess">13.2.17. UniqueProcess</a></li>
<li class="toctree-l4"><a class="reference internal" href="#chaining-processes">13.2.18. Chaining Processes</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="hbase/index.html">14. HBase Data Store</a></li>
<li class="toctree-l2"><a class="reference internal" href="accumulo/index.html">15. Accumulo Data Store</a></li>
<li class="toctree-l2"><a class="reference internal" href="cassandra/index.html">16. Cassandra Data Store</a></li>
<li class="toctree-l2"><a class="reference internal" href="bigtable/index.html">17. Bigtable Data Store</a></li>
<li class="toctree-l2"><a class="reference internal" href="kafka/index.html">18. Kafka Data Store</a></li>
<li class="toctree-l2"><a class="reference internal" href="redis/index.html">19. Redis Data Store</a></li>
<li class="toctree-l2"><a class="reference internal" href="filesystem/index.html">20. FileSystem Data Store</a></li>
<li class="toctree-l2"><a class="reference internal" href="kudu/index.html">21. Kudu Data Store</a></li>
<li class="toctree-l2"><a class="reference internal" href="postgis/index.html">22. Partitioned PostGIS Data Store</a></li>
<li class="toctree-l2"><a class="reference internal" href="lambda/index.html">23. Lambda Data Store</a></li>
<li class="toctree-l2"><a class="reference internal" href="ds_views.html">24. Combined Data Store Views</a></li>
<li class="toctree-l2"><a class="reference internal" href="geojson.html">25. GeoMesa GeoJSON</a></li>
<li class="toctree-l2"><a class="reference internal" href="stream.html">26. GeoMesa Stream Processing</a></li>
<li class="toctree-l2"><a class="reference internal" href="upgrade.html">27. Upgrade Guide</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#appendix">Appendix</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../developer/index.html">Developer Manual</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tutorials/index.html">Tutorials</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">GeoMesa</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home"></a></li>
          <li class="breadcrumb-item"><a href="index.html">User Manual</a></li>
      <li class="breadcrumb-item active"><span class="section-number">13. </span>GeoMesa Processes</li>
      <li class="wy-breadcrumbs-aside">
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="geomesa-processes">
<span id="geomesa-process"></span><h1><span class="section-number">13. </span>GeoMesa Processes<a class="headerlink" href="#geomesa-processes" title="Permalink to this headline">¶</a></h1>
<p>The following analytic processes are available and optimized on GeoMesa
data stores, found in the <code class="docutils literal notranslate"><span class="pre">geomesa-process</span></code> module:</p>
<ul class="simple">
<li><p><a class="reference internal" href="#arrow-conversion-process"><span class="std std-ref">ArrowConversionProcess</span></a> - encodes simple features in the <a class="reference external" href="https://arrow.apache.org/">Apache Arrow</a> format</p></li>
<li><p><a class="reference internal" href="#bin-conversion-process"><span class="std std-ref">BinConversionProcess</span></a> - encodes simple features in a minimized 16-byte format</p></li>
<li><p><a class="reference internal" href="#density-process"><span class="std std-ref">DensityProcess</span></a> - computes a density heatmap for a CQL query</p></li>
<li><p><a class="reference internal" href="#date-offset-process"><span class="std std-ref">DateOffsetProcess</span></a> - modifies the specified date field in a feature collection by an input time period.</p></li>
<li><p><a class="reference internal" href="#hash-process"><span class="std std-ref">HashAttributeProcess</span></a>/<a class="reference internal" href="#hash-color-process"><span class="std std-ref">HashAttributeColorProcess</span></a> - computes an additional ‘hash’ attribute which is useful for styling.</p></li>
<li><p><a class="reference internal" href="#join-process"><span class="std std-ref">JoinProcess</span></a> - merges features from two different schemas using a common attribute field</p></li>
<li><p><a class="reference internal" href="#knn-process"><span class="std std-ref">KNearestNeighborSearchProcess</span></a> - performs a KNN search</p></li>
<li><p><a class="reference internal" href="#point2point-process"><span class="std std-ref">Point2PointProcess</span></a> - aggregates a collection of points into a collection of line segments</p></li>
<li><p><a class="reference internal" href="#proximity-process"><span class="std std-ref">ProximitySearchProcess</span></a> - searches near a set input features</p></li>
<li><p><a class="reference internal" href="#query-process"><span class="std std-ref">QueryProcess</span></a> - performs a Geomesa query, useful as input for nested requests</p></li>
<li><p><a class="reference internal" href="#routesearch-process"><span class="std std-ref">RouteSearchProcess</span></a> - matches features traveling along a given route</p></li>
<li><p><a class="reference internal" href="#sampling-process"><span class="std std-ref">SamplingProcess</span></a> - uses statistical sampling to reduces the features returned by a query</p></li>
<li><p><a class="reference internal" href="#statsiterator-process"><span class="std std-ref">StatsProcess</span></a> - returns various stats for a CQL query</p></li>
<li><p><a class="reference internal" href="#tracklabel-process"><span class="std std-ref">TrackLabelProcess</span></a> - selects the last feature in a track based on a common attribute, useful for styling</p></li>
<li><p><a class="reference internal" href="#tubeselect-process"><span class="std std-ref">TubeSelectProcess</span></a> - performs a correlated search across time and space</p></li>
<li><p><a class="reference internal" href="#unique-process"><span class="std std-ref">UniqueProcess</span></a> - identifies unique values for an attribute</p></li>
</ul>
<p>Where possible, the calculations are pushed out to a distributed system for faster performance. Currently
this has been implemented in the Accumulo data store and partially in the HBase data store. Other
back-ends can still be used, but local processing will be used.</p>
<section id="installation">
<h2><span class="section-number">13.1. </span>Installation<a class="headerlink" href="#installation" title="Permalink to this headline">¶</a></h2>
<p>While they can be used independently, the common use case is to use them
with GeoServer. To deploy them in GeoServer requires:</p>
<ol class="arabic simple">
<li><p>a GeoMesa datastore plugin</p></li>
<li><p>the GeoServer WPS extension</p></li>
</ol>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Some processes also require custom output formats, available separately in the GPL licensed
<a class="reference external" href="https://github.com/geomesa/geomesa-geoserver">GeoMesa GeoServer WFS module</a></p>
</div>
<p>The GeoMesa datastore plugin is available in the binary distribution in the gs-plugins directory.</p>
<p>Documentation about the GeoServer WPS Extension (including download
instructions) is available <a class="reference external" href="http://docs.geoserver.org/stable/en/user/services/wps/install.html">here</a>.</p>
<p>To verify the install, start GeoServer, and you should see a line like
<code class="docutils literal notranslate"><span class="pre">INFO</span> <span class="pre">[geoserver.wps]</span> <span class="pre">-</span> <span class="pre">Found</span> <span class="pre">15</span> <span class="pre">bindable</span> <span class="pre">processes</span> <span class="pre">in</span> <span class="pre">GeoMesa</span> <span class="pre">Process</span> <span class="pre">Factory</span></code>.</p>
<p>In the GeoServer web UI, click ‘Demos’ and then ‘WPS request builder’.
From the request builder, under ‘Choose Process’, click on any of the
‘geomesa:’ options to build up example requests and in some cases see
results.</p>
</section>
<section id="processors">
<h2><span class="section-number">13.2. </span>Processors<a class="headerlink" href="#processors" title="Permalink to this headline">¶</a></h2>
<section id="arrowconversionprocess">
<span id="arrow-conversion-process"></span><h3><span class="section-number">13.2.1. </span>ArrowConversionProcess<a class="headerlink" href="#arrowconversionprocess" title="Permalink to this headline">¶</a></h3>
<p>The <code class="docutils literal notranslate"><span class="pre">ArrowConversionProcess</span></code> converts an input feature collection to arrow format.</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 19%" />
<col style="width: 81%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Parameters</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>features</p></td>
<td><p>Input feature collection to encode</p></td>
</tr>
<tr class="row-odd"><td><p>includeFids</p></td>
<td><p>Include feature IDs in arrow file</p></td>
</tr>
<tr class="row-even"><td><p>proxyFids</p></td>
<td><p>Proxy feature IDs to integers instead of strings</p></td>
</tr>
<tr class="row-odd"><td><p>formatVersion</p></td>
<td><p>Arrow IPC format version</p></td>
</tr>
<tr class="row-even"><td><p>dictionaryFields</p></td>
<td><p>Attributes to dictionary encode</p></td>
</tr>
<tr class="row-odd"><td><p>useCachedDictionaries</p></td>
<td><p>Use cached top-k stats (if available), or run a dynamic stats query to build dictionaries</p></td>
</tr>
<tr class="row-even"><td><p>sortField</p></td>
<td><p>Attribute to sort by</p></td>
</tr>
<tr class="row-odd"><td><p>sortReverse</p></td>
<td><p>Reverse the default sort order</p></td>
</tr>
<tr class="row-even"><td><p>batchSize</p></td>
<td><p>Number of features to include in each record batch</p></td>
</tr>
<tr class="row-odd"><td><p>doublePass</p></td>
<td><p>Build dictionaries first, then query results in a separate scan</p></td>
</tr>
</tbody>
</table>
</section>
<section id="binconversionprocess">
<span id="bin-conversion-process"></span><h3><span class="section-number">13.2.2. </span>BinConversionProcess<a class="headerlink" href="#binconversionprocess" title="Permalink to this headline">¶</a></h3>
<p>The <code class="docutils literal notranslate"><span class="pre">BinConversionProcess</span></code> converts an input feature collection to BIN format.</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 10%" />
<col style="width: 90%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Parameters</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>features</p></td>
<td><p>Input feature collection to query</p></td>
</tr>
<tr class="row-odd"><td><p>track</p></td>
<td><p>Track field to use for BIN records</p></td>
</tr>
<tr class="row-even"><td><p>geom</p></td>
<td><p>Geometry field to use for BIN records</p></td>
</tr>
<tr class="row-odd"><td><p>dtg</p></td>
<td><p>Use cached top-k stats (if available), or run a dynamic stats query to build dictionaries</p></td>
</tr>
<tr class="row-even"><td><p>label</p></td>
<td><p>Attribute to sort by</p></td>
</tr>
<tr class="row-odd"><td><p>axisOrder</p></td>
<td><p>Reverse the default sort order</p></td>
</tr>
</tbody>
</table>
</section>
<section id="densityprocess">
<span id="density-process"></span><h3><span class="section-number">13.2.3. </span>DensityProcess<a class="headerlink" href="#densityprocess" title="Permalink to this headline">¶</a></h3>
<p>The <code class="docutils literal notranslate"><span class="pre">DensityProcess</span></code> computes a density map over a set of features stored in GeoMesa. A raster image is returned.</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 13%" />
<col style="width: 87%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Parameters</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>data</p></td>
<td><p>Input Simple Feature Collection to run the density process over</p></td>
</tr>
<tr class="row-odd"><td><p>radiusPixels</p></td>
<td><p>Radius of the density kernel in pixels. Controls the “fuzziness” of the density map</p></td>
</tr>
<tr class="row-even"><td><p>weightAttr</p></td>
<td><p>Name of the attribute to use for data point weights</p></td>
</tr>
<tr class="row-odd"><td><p>outputBBOX</p></td>
<td><p>Bounding box and CRS of the output raster</p></td>
</tr>
<tr class="row-even"><td><p>outputWidth</p></td>
<td><p>Width of the output raster in pixels</p></td>
</tr>
<tr class="row-odd"><td><p>outputHeight</p></td>
<td><p>Height of the output raster in pixels</p></td>
</tr>
</tbody>
</table>
</section>
<section id="dateoffsetprocess">
<span id="date-offset-process"></span><h3><span class="section-number">13.2.4. </span>DateOffsetProcess<a class="headerlink" href="#dateoffsetprocess" title="Permalink to this headline">¶</a></h3>
<p>The <code class="docutils literal notranslate"><span class="pre">DateOffsetProcess</span></code> modifies the specified date field in a feature collection by an input time period.</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 30%" />
<col style="width: 70%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Parameters</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>data</p></td>
<td><p>Input features</p></td>
</tr>
<tr class="row-odd"><td><p>dateField</p></td>
<td><p>The date attribute to modify</p></td>
</tr>
<tr class="row-even"><td><p>timeOffset</p></td>
<td><p>Time offset (e.g. P1D)</p></td>
</tr>
</tbody>
</table>
</section>
<section id="hashattributeprocess">
<span id="hash-process"></span><h3><span class="section-number">13.2.5. </span>HashAttributeProcess<a class="headerlink" href="#hashattributeprocess" title="Permalink to this headline">¶</a></h3>
<p>The <code class="docutils literal notranslate"><span class="pre">HashAttributeProcess</span></code> adds an attribute to each SimpleFeature that hashes the configured attribute modulo the configured param.</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 17%" />
<col style="width: 83%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Parameters</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>data</p></td>
<td><p>Input Simple Feature Collection to run the hash process over</p></td>
</tr>
<tr class="row-odd"><td><p>attribute</p></td>
<td><p>The attribute to hash on</p></td>
</tr>
<tr class="row-even"><td><p>modulo</p></td>
<td><p>The divisor</p></td>
</tr>
</tbody>
</table>
<section id="hash-example-xml">
<span id="hashexamplexml"></span><h4><span class="section-number">13.2.5.1. </span>Hash example (XML)<a class="headerlink" href="#hash-example-xml" title="Permalink to this headline">¶</a></h4>
<p><a class="reference download internal" download="" href="../_downloads/a29f8afc7c85f759883bbd1266907c0c/HashProcess_wps.xml"><code class="xref download docutils literal notranslate"><span class="pre">HashAttributeProcess_wps.xml</span></code></a> is a geoserver WPS call to the GeoMesa HashAttributeProcess. It can be run with the following curl call:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>curl<span class="w"> </span>-v<span class="w"> </span>-u<span class="w"> </span>admin:geoserver<span class="w"> </span>-H<span class="w"> </span><span class="s2">&quot;Content-Type: text/xml&quot;</span><span class="w"> </span>-d@HashAttributeProcess_wps.xml<span class="w"> </span>localhost:8080/geoserver/wps
</pre></div>
</div>
<p>The query should generate results that look like <a class="reference download internal" download="" href="../_downloads/38559407864d2e4588df46baab4e3273/HashProcess_results.json"><code class="xref download docutils literal notranslate"><span class="pre">this</span></code></a>:</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;id&quot;</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;d0971735-f8fe-47ed-a7cd-2e12280e8ac1&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;geometry&quot;</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;coordinates&quot;</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">            </span><span class="mf">151.1554</span><span class="p">,</span>
<span class="w">            </span><span class="mf">18.2014</span>
<span class="w">        </span><span class="p">],</span>
<span class="w">        </span><span class="nt">&quot;type&quot;</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Point&quot;</span>
<span class="w">    </span><span class="p">},</span>
<span class="w">    </span><span class="nt">&quot;type&quot;</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Feature&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;properties&quot;</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;Vitesse&quot;</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mi">614</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;Heading&quot;</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mi">244</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;Date&quot;</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;2016-05-02T18:00:44.030+0000&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;hash&quot;</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mi">237</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;CabId&quot;</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mi">150002</span><span class="p">,</span>
<span class="w">     </span><span class="p">}</span>
<span class="w"> </span><span class="p">}</span>
</pre></div>
</div>
</section>
</section>
<section id="hashattributecolorprocess">
<span id="hash-color-process"></span><h3><span class="section-number">13.2.6. </span>HashAttributeColorProcess<a class="headerlink" href="#hashattributecolorprocess" title="Permalink to this headline">¶</a></h3>
<p>The <code class="docutils literal notranslate"><span class="pre">HashAttributeColorProcess</span></code> adds an attribute to each SimpleFeature that hashes the configured attribute modulo the configured param and emit a color.</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 17%" />
<col style="width: 83%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Parameters</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>data</p></td>
<td><p>Input Simple Feature Collection to run the hash process over</p></td>
</tr>
<tr class="row-odd"><td><p>attribute</p></td>
<td><p>The attribute to hash on</p></td>
</tr>
<tr class="row-even"><td><p>modulo</p></td>
<td><p>The divisor</p></td>
</tr>
</tbody>
</table>
</section>
<section id="joinprocess">
<span id="join-process"></span><h3><span class="section-number">13.2.7. </span>JoinProcess<a class="headerlink" href="#joinprocess" title="Permalink to this headline">¶</a></h3>
<p>The <code class="docutils literal notranslate"><span class="pre">JoinProcess</span></code> queries a feature type based on attributes from a second feature type.</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 12%" />
<col style="width: 88%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Parameters</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>primary</p></td>
<td><p>Primary feature collection being queried</p></td>
</tr>
<tr class="row-odd"><td><p>secondary</p></td>
<td><p>Secondary feature collection to be joined</p></td>
</tr>
<tr class="row-even"><td><p>joinAttribute</p></td>
<td><p>Attribute field to join on</p></td>
</tr>
<tr class="row-odd"><td><p>joinFilter</p></td>
<td><p>Additional filter to apply to joined features</p></td>
</tr>
<tr class="row-even"><td><p>attributes</p></td>
<td><p>Attributes to return. Attribute names should be qualified with the schema name, e.g. foo.bar</p></td>
</tr>
</tbody>
</table>
</section>
<section id="knearestneighborsearchprocess">
<span id="knn-process"></span><h3><span class="section-number">13.2.8. </span>KNearestNeighborSearchProcess<a class="headerlink" href="#knearestneighborsearchprocess" title="Permalink to this headline">¶</a></h3>
<p>The <code class="docutils literal notranslate"><span class="pre">KNearestNeighborSearchProcess</span></code> performs a K-nearest-neighbor search on a feature collection using a second
feature collection as input. It returns <code class="docutils literal notranslate"><span class="pre">k</span></code> neighbors for each point in the input data set. Note that if a feature
is the nearest neighbor of multiple points in the input data set, it is returned only once.</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 14%" />
<col style="width: 86%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Parameter</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>inputFeatures</p></td>
<td><p>Input feature collection. The geometries of the features defines the KNN search</p></td>
</tr>
<tr class="row-odd"><td><p>dataFeatures</p></td>
<td><p>The data set to query for neighbors</p></td>
</tr>
<tr class="row-even"><td><p>numDesired</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">k</span></code>, number of nearest neighbors to return</p></td>
</tr>
<tr class="row-odd"><td><p>estimatedDistance</p></td>
<td><p>Estimate of the distance in meters for the <code class="docutils literal notranslate"><span class="pre">k</span></code>-th nearest neighbor, used for the initial query window</p></td>
</tr>
<tr class="row-even"><td><p>maxSearchDistance</p></td>
<td><p>Maximum search distance in meters, used to prevent runaway queries of the entire data set</p></td>
</tr>
</tbody>
</table>
<section id="k-nearest-neighbor-example-xml">
<span id="knnexamplexml"></span><h4><span class="section-number">13.2.8.1. </span>K-Nearest-Neighbor Example (XML)<a class="headerlink" href="#k-nearest-neighbor-example-xml" title="Permalink to this headline">¶</a></h4>
<p><a class="reference download internal" download="" href="../_downloads/bd3413575206dfe80ce9b6bea16993f2/KNNProcess_wps.xml"><code class="xref download docutils literal notranslate"><span class="pre">KNNProcess_wps.xml</span></code></a> is a geoserver WPS call to the GeoMesa
KNearestNeighborSearchProcess. In this example, it is chained with a Query process (see <a class="reference internal" href="#chaining-processes"><span class="std std-ref">Chaining Processes</span></a>),
in order to avoid returning the query features as data. It can be run with the following curl call:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>curl<span class="w"> </span>-v<span class="w"> </span>-u<span class="w"> </span>admin:geoserver<span class="w"> </span>-H<span class="w"> </span><span class="s2">&quot;Content-Type: text/xml&quot;</span><span class="w"> </span>-d@KNNProcess_wps.xml<span class="w"> </span>localhost:8080/geoserver/wps
</pre></div>
</div>
</section>
</section>
<section id="point2pointprocess">
<span id="point2point-process"></span><h3><span class="section-number">13.2.9. </span>Point2PointProcess<a class="headerlink" href="#point2pointprocess" title="Permalink to this headline">¶</a></h3>
<p>The <code class="docutils literal notranslate"><span class="pre">Point2PointProcess</span></code> aggregates a collection of points into a collection of line segments.</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 31%" />
<col style="width: 69%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Parameters</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>data</p></td>
<td><p>Input feature collection</p></td>
</tr>
<tr class="row-odd"><td><p>groupingField</p></td>
<td><p>Field on which to group</p></td>
</tr>
<tr class="row-even"><td><p>sortField</p></td>
<td><p>Field on which to sort (must be Date type)</p></td>
</tr>
<tr class="row-odd"><td><p>minimumNumberOfPoints</p></td>
<td><p>Minimum number of points</p></td>
</tr>
<tr class="row-even"><td><p>breakOnDay</p></td>
<td><p>Break connections on day marks</p></td>
</tr>
<tr class="row-odd"><td><p>filterSingularPoints</p></td>
<td><p>Filter out segments that fall on the same point</p></td>
</tr>
</tbody>
</table>
<section id="point2point-example-xml">
<span id="point2pointexamplexml"></span><h4><span class="section-number">13.2.9.1. </span>Point2Point example (XML)<a class="headerlink" href="#point2point-example-xml" title="Permalink to this headline">¶</a></h4>
<p><a class="reference download internal" download="" href="../_downloads/94f53e84be80b463ff1a91270f965bc0/Point2PointProcess_wps.xml"><code class="xref download docutils literal notranslate"><span class="pre">Point2PointProcess_wps.xml</span></code></a> is a geoserver WPS call to the GeoMesa Point2PointProcess. It can be run with the following curl call:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>curl<span class="w"> </span>-v<span class="w"> </span>-u<span class="w"> </span>admin:geoserver<span class="w"> </span>-H<span class="w"> </span><span class="s2">&quot;Content-Type: text/xml&quot;</span><span class="w"> </span>-d@Point2PointProcess_wps.xml<span class="w"> </span>localhost:8080/geoserver/wps
</pre></div>
</div>
<p id="point2pointexampleresults">The query should generate results that look like <a class="reference download internal" download="" href="../_downloads/b24d22aee339c8edcdb859edc1c1789a/Point2PointProcess_results.json"><code class="xref download docutils literal notranslate"><span class="pre">this</span></code></a>:</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;id&quot;</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;367152240-4&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;geometry&quot;</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;coordinates&quot;</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">            </span><span class="p">[</span>
<span class="w">                </span><span class="mf">-13.4041</span><span class="p">,</span>
<span class="w">                </span><span class="mf">37.8067</span>
<span class="w">            </span><span class="p">],</span>
<span class="w">            </span><span class="p">[</span>
<span class="w">                </span><span class="mf">-13.4041</span><span class="p">,</span>
<span class="w">                </span><span class="mf">37.8068</span>
<span class="w">            </span><span class="p">]</span>
<span class="w">        </span><span class="p">],</span>
<span class="w">        </span><span class="nt">&quot;type&quot;</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;LineString&quot;</span>
<span class="w">    </span><span class="p">},</span>
<span class="w">    </span><span class="nt">&quot;type&quot;</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Feature&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;properties&quot;</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;Date_end&quot;</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;2018-02-05T14:54:36.598+0000&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;CabId&quot;</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mi">367152240</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;Date_start&quot;</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;2018-02-05T14:53:58.078+0000&quot;</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</section>
</section>
<section id="proximitysearchprocess">
<span id="proximity-process"></span><h3><span class="section-number">13.2.10. </span>ProximitySearchProcess<a class="headerlink" href="#proximitysearchprocess" title="Permalink to this headline">¶</a></h3>
<p>The <code class="docutils literal notranslate"><span class="pre">ProximitySearchProcess</span></code> performs a proximity search on a Geomesa feature collection using another feature collection as input.</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 27%" />
<col style="width: 73%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Parameters</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>inputFeatures</p></td>
<td><p>Input feature collection that defines the proximity search</p></td>
</tr>
<tr class="row-odd"><td><p>dataFeatures</p></td>
<td><p>The data set to query for matching features</p></td>
</tr>
<tr class="row-even"><td><p>bufferDistance</p></td>
<td><p>Buffer size in meters</p></td>
</tr>
</tbody>
</table>
<section id="proximity-search-example-xml">
<span id="proximityexamplexml"></span><h4><span class="section-number">13.2.10.1. </span>Proximity search example (XML)<a class="headerlink" href="#proximity-search-example-xml" title="Permalink to this headline">¶</a></h4>
<p><a class="reference download internal" download="" href="../_downloads/adb6a4d13ec2cfc008126bfd9894e202/ProximitySearchProcess_wps.xml"><code class="xref download docutils literal notranslate"><span class="pre">ProximitySearchProcess_wps.xml</span></code></a> is a geoserver WPS call to the GeoMesa ProximitySearchProcess. It can be run with the following curl call:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>curl<span class="w"> </span>-v<span class="w"> </span>-u<span class="w"> </span>admin:geoserver<span class="w"> </span>-H<span class="w"> </span><span class="s2">&quot;Content-Type: text/xml&quot;</span><span class="w"> </span>-d@ProximitySearchProcess_wps.xml<span class="w"> </span>localhost:8080/geoserver/wps
</pre></div>
</div>
</section>
</section>
<section id="routesearchprocess">
<span id="routesearch-process"></span><h3><span class="section-number">13.2.11. </span>RouteSearchProcess<a class="headerlink" href="#routesearchprocess" title="Permalink to this headline">¶</a></h3>
<p>The <code class="docutils literal notranslate"><span class="pre">RouteSearchProcess</span></code> finds features around a route that are heading along the route and not just crossing over it.</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 11%" />
<col style="width: 89%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Parameters</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>features</p></td>
<td><p>Input feature collection to query</p></td>
</tr>
<tr class="row-odd"><td><p>routes</p></td>
<td><p>Routes to search along. Features must have a geometry of LineString</p></td>
</tr>
<tr class="row-even"><td><p>bufferSize</p></td>
<td><p>Buffer size (in meters) to search around the route</p></td>
</tr>
<tr class="row-odd"><td><p>headingThreshold</p></td>
<td><p>Threshold for comparing headings, in degrees</p></td>
</tr>
<tr class="row-even"><td><p>routeGeomField</p></td>
<td><p>Attribute that will be examined for routes to match. Must be a LineString</p></td>
</tr>
<tr class="row-odd"><td><p>geomField</p></td>
<td><p>Attribute that will be examined for route matching</p></td>
</tr>
<tr class="row-even"><td><p>bidirectional</p></td>
<td><p>Consider the direction of the route or just the path of the route</p></td>
</tr>
<tr class="row-odd"><td><p>headingField</p></td>
<td><p>Attribute that will be examined for heading in the input features. If not provided, input features geometries must be LineStrings</p></td>
</tr>
</tbody>
</table>
<section id="route-search-example-xml">
<span id="routesearchexamplexml"></span><h4><span class="section-number">13.2.11.1. </span>Route search example (XML)<a class="headerlink" href="#route-search-example-xml" title="Permalink to this headline">¶</a></h4>
<p><a class="reference download internal" download="" href="../_downloads/62466333ef2cea4bdced452ed18a6d5f/RouteSearchProcess_wps.xml"><code class="xref download docutils literal notranslate"><span class="pre">RouteSearchProcess_wps.xml</span></code></a> is a geoserver WPS call to the GeoMesa RouteSearchProcess. It can be run with the following curl call:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>curl<span class="w"> </span>-v<span class="w"> </span>-u<span class="w"> </span>admin:geoserver<span class="w"> </span>-H<span class="w"> </span><span class="s2">&quot;Content-Type: text/xml&quot;</span><span class="w"> </span>-d@RouteSearchProcess_wps.xml<span class="w"> </span>localhost:8080/geoserver/wps
</pre></div>
</div>
</section>
</section>
<section id="samplingprocess">
<span id="sampling-process"></span><h3><span class="section-number">13.2.12. </span>SamplingProcess<a class="headerlink" href="#samplingprocess" title="Permalink to this headline">¶</a></h3>
<p>The <code class="docutils literal notranslate"><span class="pre">SamplingProcess</span></code> uses statistical sampling to reduces the features returned by a query.</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 19%" />
<col style="width: 81%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Parameters</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>data</p></td>
<td><p>Input features.</p></td>
</tr>
<tr class="row-odd"><td><p>samplePercent</p></td>
<td><p>Percent of features to return, between 0 and 1.</p></td>
</tr>
<tr class="row-even"><td><p>threadBy</p></td>
<td><p>Attribute field to link associated features for sampling.</p></td>
</tr>
</tbody>
</table>
<section id="sampling-example-xml">
<span id="samplingexamplexml"></span><h4><span class="section-number">13.2.12.1. </span>Sampling example (XML)<a class="headerlink" href="#sampling-example-xml" title="Permalink to this headline">¶</a></h4>
<p><a class="reference download internal" download="" href="../_downloads/82c40ad9761ceeb465c5af4c0f060d71/SamplingProcess_wps.xml"><code class="xref download docutils literal notranslate"><span class="pre">SamplingProcess_wps.xml</span></code></a> is a geoserver WPS call to the GeoMesa SamplingProcess. It can be run with the following curl call:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>curl<span class="w"> </span>-v<span class="w"> </span>-u<span class="w"> </span>admin:geoserver<span class="w"> </span>-H<span class="w"> </span><span class="s2">&quot;Content-Type: text/xml&quot;</span><span class="w"> </span>-d@SamplingProcess_wps.xml<span class="w"> </span>localhost:8080/geoserver/wps
</pre></div>
</div>
</section>
</section>
<section id="statsprocess">
<span id="statsiterator-process"></span><h3><span class="section-number">13.2.13. </span>StatsProcess<a class="headerlink" href="#statsprocess" title="Permalink to this headline">¶</a></h3>
<p>The <code class="docutils literal notranslate"><span class="pre">StatsProcess</span></code> allows the running of statistics on a given feature set.</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 8%" />
<col style="width: 92%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Parameters</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>features</p></td>
<td><p>The feature set on which to query. Can be a raw text input, reference to a remote URL, a subquery or a vector layer</p></td>
</tr>
<tr class="row-odd"><td><p>statString</p></td>
<td><p>Stat string indicating which stats to instantiate - see below</p></td>
</tr>
<tr class="row-even"><td><p>encode</p></td>
<td><p>Return the values encoded as json. Must be <code class="docutils literal notranslate"><span class="pre">true</span></code> or <code class="docutils literal notranslate"><span class="pre">false</span></code>; empty values will not work</p></td>
</tr>
<tr class="row-odd"><td><p>properties</p></td>
<td><p>The properties / transforms to apply before gathering stats</p></td>
</tr>
</tbody>
</table>
<section id="stat-strings">
<h4><span class="section-number">13.2.13.1. </span>Stat Strings<a class="headerlink" href="#stat-strings" title="Permalink to this headline">¶</a></h4>
<p>Stat strings are a GeoMesa domain specific language (DSL) that allows the specification of stats for the iterators
to collect. See <a class="reference internal" href="datastores/analytic_queries.html#statistical-queries"><span class="std std-ref">Statistical Queries</span></a> for an explanation of the available stats.</p>
</section>
</section>
<section id="tracklabelprocess">
<span id="tracklabel-process"></span><h3><span class="section-number">13.2.14. </span>TrackLabelProcess<a class="headerlink" href="#tracklabelprocess" title="Permalink to this headline">¶</a></h3>
<p>The <code class="docutils literal notranslate"><span class="pre">TrackLabelProcess</span></code> returns a single feature that is the head of a track of related simple features.</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 19%" />
<col style="width: 81%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Parameters</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>data</p></td>
<td><p>Input features</p></td>
</tr>
<tr class="row-odd"><td><p>track</p></td>
<td><p>Track attribute to use for grouping features</p></td>
</tr>
<tr class="row-even"><td><p>dtg</p></td>
<td><p>Date attribute to use for ordering tracks</p></td>
</tr>
</tbody>
</table>
<section id="tracklabel-example-xml">
<span id="tracklabelexamplexml"></span><h4><span class="section-number">13.2.14.1. </span>TrackLabel example (XML)<a class="headerlink" href="#tracklabel-example-xml" title="Permalink to this headline">¶</a></h4>
<p><a class="reference download internal" download="" href="../_downloads/5a247f53287475ea510a23246541f7f8/TrackLabelProcess_wps.xml"><code class="xref download docutils literal notranslate"><span class="pre">TrackLabelProcess_wps.xml</span></code></a> is a geoserver WPS call to the GeoMesa TrackLabelProcess. It can be run with the following curl call:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>curl<span class="w"> </span>-v<span class="w"> </span>-u<span class="w"> </span>admin:geoserver<span class="w"> </span>-H<span class="w"> </span><span class="s2">&quot;Content-Type: text/xml&quot;</span><span class="w"> </span>-d@TrackLabelProcess_wps.xml<span class="w"> </span>localhost:8080/geoserver/wps
</pre></div>
</div>
</section>
</section>
<section id="tubeselectprocess">
<span id="tubeselect-process"></span><h3><span class="section-number">13.2.15. </span>TubeSelectProcess<a class="headerlink" href="#tubeselectprocess" title="Permalink to this headline">¶</a></h3>
<p>The <code class="docutils literal notranslate"><span class="pre">TubeSelectProcess</span></code> performs a tube select on a Geomesa feature collection based on another feature collection. To get more informations on <code class="docutils literal notranslate"><span class="pre">TubeSelectProcess</span></code> and how to use it, you can read <a class="reference external" href="http://www.geomesa.org/documentation/tutorials/geomesa-tubeselect.html">this tutorial</a>.</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 20%" />
<col style="width: 80%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Parameters</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>tubeFeatures</p></td>
<td><p>Input feature collection (must have geometry and datetime)</p></td>
</tr>
<tr class="row-odd"><td><p>featureCollection</p></td>
<td><p>The data set to query for matching features</p></td>
</tr>
<tr class="row-even"><td><p>filter</p></td>
<td><p>The filter to apply to the featureCollection</p></td>
</tr>
<tr class="row-odd"><td><p>maxSpeed</p></td>
<td><p>Max speed of the object in m/s for nofill &amp; line gapfill methods</p></td>
</tr>
<tr class="row-even"><td><p>maxTime</p></td>
<td><p>Time as seconds for nofill &amp; line gapfill methods</p></td>
</tr>
<tr class="row-odd"><td><p>bufferSize</p></td>
<td><p>Buffer size in meters to use instead of maxSpeed/maxTime calculation</p></td>
</tr>
<tr class="row-even"><td><p>maxBins</p></td>
<td><p>Number of bins to use for breaking up query into individual queries</p></td>
</tr>
<tr class="row-odd"><td><p>gapFill</p></td>
<td><p>Method of filling gap (nofill, line)</p></td>
</tr>
</tbody>
</table>
<section id="tubeselect-example-xml">
<span id="tubeselectexamplexml"></span><h4><span class="section-number">13.2.15.1. </span>TubeSelect example (XML)<a class="headerlink" href="#tubeselect-example-xml" title="Permalink to this headline">¶</a></h4>
<p><a class="reference download internal" download="" href="../_downloads/01452f8b3349157a3640a199970466fd/TubeSelectProcess_wps.xml"><code class="xref download docutils literal notranslate"><span class="pre">TubeSelectProcess_wps.xml</span></code></a> is a geoserver WPS call to the GeoMesa TubeSelectProcess. It can be run with the following curl call:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>curl<span class="w"> </span>-v<span class="w"> </span>-u<span class="w"> </span>admin:geoserver<span class="w"> </span>-H<span class="w"> </span><span class="s2">&quot;Content-Type: text/xml&quot;</span><span class="w"> </span>-d@TubeSelectProcess_wps.xml<span class="w"> </span>localhost:8080/geoserver/wps
</pre></div>
</div>
</section>
</section>
<section id="queryprocess">
<span id="query-process"></span><h3><span class="section-number">13.2.16. </span>QueryProcess<a class="headerlink" href="#queryprocess" title="Permalink to this headline">¶</a></h3>
<p>The <code class="docutils literal notranslate"><span class="pre">QueryProcess</span></code> takes an (E)CQL query/filter for a given feature set as a text object and returns
the result as a json object.</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 9%" />
<col style="width: 91%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Parameters</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>features</p></td>
<td><dl class="simple">
<dt>The data source feature collection to query. Reference as <code class="docutils literal notranslate"><span class="pre">store:layername</span></code>.</dt><dd><p>For an XML file enter <code class="docutils literal notranslate"><span class="pre">&lt;wfs:Query</span> <span class="pre">typeName=store:layername</span> <span class="pre">/&gt;</span></code>
For interactive WPS request builder select <code class="docutils literal notranslate"><span class="pre">VECTOR_LAYER</span></code> &amp; choose <code class="docutils literal notranslate"><span class="pre">store:layername</span></code></p>
</dd>
</dl>
</td>
</tr>
<tr class="row-odd"><td><p>filter</p></td>
<td><dl class="simple">
<dt>The filter to apply to the feature collection.</dt><dd><p>For an XML file enter:</p>
</dd>
</dl>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;wps:ComplexData</span><span class="w"> </span><span class="na">mimeType=</span><span class="s">&quot;text/plain; subtype=cql&quot;</span><span class="nt">&gt;</span>
<span class="w">   </span><span class="cp">&lt;![CDATA[some-query-text]]</span>
<span class="cp">&lt;/wps:ComplexData&gt;</span>
</pre></div>
</div>
<dl class="simple">
<dt>For interactive WPS request builder select TEXT &amp; choose <code class="docutils literal notranslate"><span class="pre">&quot;text/plain;</span> <span class="pre">subtype=cql&quot;</span></code></dt><dd><p>enter the query text in the text box</p>
</dd>
</dl>
</td>
</tr>
<tr class="row-even"><td><p>output</p></td>
<td><dl class="simple">
<dt>Specify how the output feature collection will be presented.</dt><dd><p>For an XML file enter:</p>
</dd>
</dl>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;wps:ResponseForm&gt;</span>
<span class="w">   </span><span class="nt">&lt;wps:RawDataOutput</span><span class="w"> </span><span class="na">mimeType=</span><span class="s">&quot;application/json&quot;</span><span class="nt">&gt;</span>
<span class="w">      </span><span class="nt">&lt;ows:Identifier&gt;</span>result<span class="nt">&lt;/ows:Identifier&gt;</span>
<span class="w">   </span><span class="nt">&lt;/wps:RawDataOutput&gt;</span>
<span class="nt">&lt;/wps:ResponseForm&gt;</span>
</pre></div>
</div>
<p>For interactive WPS request builder check the Generate box and choose “application/json”</p>
</td>
</tr>
<tr class="row-odd"><td><p>properties</p></td>
<td><p>The properties / transforms to apply before gathering stats.</p></td>
</tr>
</tbody>
</table>
<section id="query-example-xml">
<span id="queryexamplexml"></span><h4><span class="section-number">13.2.16.1. </span>Query example (XML)<a class="headerlink" href="#query-example-xml" title="Permalink to this headline">¶</a></h4>
<p><a class="reference download internal" download="" href="../_downloads/5ee97e862eb5794466d4e289b7802967/QueryProcess_wps.xml"><code class="xref download docutils literal notranslate"><span class="pre">QueryProcess_wps.xml</span></code></a> is a geoserver WPS call to the GeoMesa QueryProcess that performs the same query shown
in the <a class="reference external" href="http://www.geomesa.org/documentation/tutorials/geomesa-quickstart-accumulo.html">Accumulo-quickstart</a>. It can be run with the following curl call:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>curl<span class="w"> </span>-v<span class="w"> </span>-u<span class="w"> </span>admin:geoserver<span class="w"> </span>-H<span class="w"> </span><span class="s2">&quot;Content-Type: text/xml&quot;</span><span class="w"> </span>-d@QueryProcess_wps.xml<span class="w"> </span>localhost:8080/geoserver/wps
</pre></div>
</div>
<p>The query should generate results that look like <a class="reference download internal" download="" href="../_downloads/2c158f6ec67e2ab553c402692e5f9b88/QueryProcess_results.json"><code class="xref download docutils literal notranslate"><span class="pre">this</span></code></a>:</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
<span class="w">  </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;FeatureCollection&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;features&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">      </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Feature&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;geometry&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Point&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;coordinates&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">          </span><span class="mf">-76.513</span><span class="p">,</span>
<span class="w">          </span><span class="mf">-37.4941</span>
<span class="w">        </span><span class="p">]</span>
<span class="w">      </span><span class="p">},</span>
<span class="w">      </span><span class="nt">&quot;properties&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;Who&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Bierce&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;What&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">931</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;When&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;2014-07-04T22:25:38.000+0000&quot;</span>
<span class="w">      </span><span class="p">},</span>
<span class="w">      </span><span class="nt">&quot;id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Observation.931&quot;</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">  </span><span class="p">]</span>
<span class="p">}</span>
</pre></div>
</div>
</section>
</section>
<section id="uniqueprocess">
<span id="unique-process"></span><h3><span class="section-number">13.2.17. </span>UniqueProcess<a class="headerlink" href="#uniqueprocess" title="Permalink to this headline">¶</a></h3>
<p>The <code class="docutils literal notranslate"><span class="pre">UniqueProcess</span></code> class is optimized for GeoMesa to find unique attributes values for a feature collection,
which are returned as a json object.</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 10%" />
<col style="width: 90%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Parameters</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>features</p></td>
<td><dl class="simple">
<dt>The data source feature collection to query. Reference as <code class="docutils literal notranslate"><span class="pre">store:layername</span></code>.</dt><dd><p>For an XML file enter <code class="docutils literal notranslate"><span class="pre">&lt;wfs:Query</span> <span class="pre">typeName=store:layername</span> <span class="pre">/&gt;</span></code>
For interactive WPS request builder select <code class="docutils literal notranslate"><span class="pre">VECTOR_LAYER</span></code> &amp; choose <code class="docutils literal notranslate"><span class="pre">store:layername</span></code></p>
</dd>
</dl>
</td>
</tr>
<tr class="row-odd"><td><p>attribute</p></td>
<td><dl class="simple">
<dt>The attribute for which unique values will be extracted. Attributes are expressed as a string.</dt><dd><p>For an XML file enter <code class="docutils literal notranslate"><span class="pre">&lt;wps:LiteralData&gt;attribute-name&lt;/wps:LiteralData&gt;</span></code></p>
</dd>
</dl>
</td>
</tr>
<tr class="row-even"><td><p>filter</p></td>
<td><dl class="simple">
<dt>The filter to apply to the feature collection.</dt><dd><p>For an XML file enter:</p>
</dd>
</dl>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;wps:ComplexData</span><span class="w"> </span><span class="na">mimeType=</span><span class="s">&quot;text/plain; subtype=cql&quot;</span><span class="nt">&gt;</span>
<span class="w">   </span><span class="cp">&lt;![CDATA[some-query-text]]</span>
<span class="cp">&lt;/wps:ComplexData&gt;</span>
</pre></div>
</div>
<dl class="simple">
<dt>For interactive WPS request builder select TEXT &amp; choose <code class="docutils literal notranslate"><span class="pre">&quot;text/plain;</span> <span class="pre">subtype=cql&quot;</span></code></dt><dd><p>enter the query text in the text box.</p>
</dd>
</dl>
</td>
</tr>
<tr class="row-odd"><td><p>histogram</p></td>
<td><dl class="simple">
<dt>Create a histogram of attribute values. Expressed as a boolean (true/false).</dt><dd><p>For an XML file enter <code class="docutils literal notranslate"><span class="pre">&lt;wps:LiteralData&gt;true/false&lt;/wps:LiteralData&gt;</span></code></p>
</dd>
</dl>
</td>
</tr>
<tr class="row-even"><td><p>sort</p></td>
<td><dl class="simple">
<dt>Sort the results. Expressed as a string; allowed values are ASC or DESC.</dt><dd><p>For an XML file enter <code class="docutils literal notranslate"><span class="pre">&lt;wps:LiteralData&gt;ASC/DESC&lt;/wps:LiteralData&gt;</span></code></p>
</dd>
</dl>
</td>
</tr>
<tr class="row-odd"><td><p>sortByCount</p></td>
<td><dl class="simple">
<dt>Sort by histogram counts instead of attribute values. Expressed as a boolean (true/false).</dt><dd><p>For an XML file enter <code class="docutils literal notranslate"><span class="pre">&lt;wps:LiteralData&gt;true/false&lt;/wps:LiteralData&gt;</span></code></p>
</dd>
</dl>
</td>
</tr>
<tr class="row-even"><td><p>output</p></td>
<td><dl class="simple">
<dt>Specify how the output feature collection will be presented.</dt><dd><p>For an XML file enter:</p>
</dd>
</dl>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;wps:ResponseForm&gt;</span>
<span class="w">   </span><span class="nt">&lt;wps:RawDataOutput</span><span class="w"> </span><span class="na">mimeType=</span><span class="s">&quot;application/json&quot;</span><span class="nt">&gt;</span>
<span class="w">      </span><span class="nt">&lt;ows:Identifier&gt;</span>result<span class="nt">&lt;/ows:Identifier&gt;</span>
<span class="w">   </span><span class="nt">&lt;/wps:RawDataOutput&gt;</span>
<span class="nt">&lt;/wps:ResponseForm&gt;</span>
</pre></div>
</div>
<p>For interactive WPS request builder check the Generate box and choose “application/json”</p>
</td>
</tr>
</tbody>
</table>
<section id="unique-example-xml">
<span id="uniqueexamplexml"></span><h4><span class="section-number">13.2.17.1. </span>Unique example (XML)<a class="headerlink" href="#unique-example-xml" title="Permalink to this headline">¶</a></h4>
<p><a class="reference download internal" download="" href="../_downloads/ecdc6286d55dd67ac0c30c9e3dee3ae9/UniqueProcess_wps.xml"><code class="xref download docutils literal notranslate"><span class="pre">UniqueProcess_wps.xml</span></code></a> is a geoserver WPS call to the GeoMesa UniqueProcess that reports the unique names
in in the ‘Who’ field of the Accumulo quickstart data for a restricted bounding box (-77.5, -37.5, -76.5, -36.5)). It can be run with the following curl call:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>curl<span class="w"> </span>-v<span class="w"> </span>-u<span class="w"> </span>admin:geoserver<span class="w"> </span>-H<span class="w"> </span><span class="s2">&quot;Content-Type: text/xml&quot;</span><span class="w"> </span>-d@UniqueProcess_wps.xml<span class="w"> </span>localhost:8080/geoserver/wps
</pre></div>
</div>
<p id="uniqueexampleresults">The query should generate results that look like this:</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
<span class="w">  </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;FeatureCollection&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;features&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">      </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Feature&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;properties&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;value&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Addams&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;count&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">37</span>
<span class="w">      </span><span class="p">},</span>
<span class="w">      </span><span class="nt">&quot;id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;fid--21d4eb0_15b68e0e8ca_-7fd6&quot;</span>
<span class="w">    </span><span class="p">},</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">      </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Feature&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;properties&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;value&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Bierce&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;count&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">43</span>
<span class="w">      </span><span class="p">},</span>
<span class="w">      </span><span class="nt">&quot;id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;fid--21d4eb0_15b68e0e8ca_-7fd5&quot;</span>
<span class="w">    </span><span class="p">},</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">      </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Feature&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;properties&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;value&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Clemens&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;count&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">48</span>
<span class="w">      </span><span class="p">},</span>
<span class="w">      </span><span class="nt">&quot;id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;fid--21d4eb0_15b68e0e8ca_-7fd4&quot;</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">  </span><span class="p">]</span>
<span class="p">}</span>
</pre></div>
</div>
</section>
</section>
<section id="chaining-processes">
<span id="id1"></span><h3><span class="section-number">13.2.18. </span>Chaining Processes<a class="headerlink" href="#chaining-processes" title="Permalink to this headline">¶</a></h3>
<p>WPS processes can be chained, using the result of one process as the input for another. For example, a bounding box
in a GeoMesa <a class="reference internal" href="#query-process"><span class="std std-ref">QueryProcess</span></a> can be used to restrict data sent to <a class="reference internal" href="#statsiterator-process"><span class="std std-ref">StatsProcess</span></a>.
<a class="reference download internal" download="" href="../_downloads/3d6475b813605e7695ebdc6500c28730/GeoMesa_WPS_chain_example.xml"><code class="xref download docutils literal notranslate"><span class="pre">GeoMesa_WPS_chain_example.xml</span></code></a> will get all points from
the AccumuloQuickStart table that are within a specified bounding box (-77.5, -37.5, -76.5, -36.5), and calculate
descriptive statistics on the ‘What’ attribute of the results.</p>
<p>The query should generate results that look like this:</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
<span class="w">  </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;FeatureCollection&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;features&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">      </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Feature&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;geometry&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Point&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;coordinates&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">          </span><span class="mi">0</span><span class="p">,</span>
<span class="w">          </span><span class="mi">0</span>
<span class="w">        </span><span class="p">]</span>
<span class="w">      </span><span class="p">},</span>
<span class="w">      </span><span class="nt">&quot;properties&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;stats&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;{\&quot;count\&quot;:128,\&quot;minimum\&quot;:[29.0],\&quot;maximum\&quot;:[991.0],\&quot;mean\&quot;:[508.5781249999999],\&quot;population_variance\&quot;:[85116.25952148438],\&quot;population_standard_deviation\&quot;:[291.74691004616375],\&quot;population_skewness\&quot;:[-0.11170819256679464],\&quot;population_kurtosis\&quot;:[1.7823482287566166],\&quot;population_excess_kurtosis\&quot;:[-1.2176517712433834],\&quot;sample_variance\&quot;:[85786.46628937007],\&quot;sample_standard_deviation\&quot;:[292.893267743337],\&quot;sample_skewness\&quot;:[-0.11303718280959842],\&quot;sample_kurtosis\&quot;:[1.8519712064424219],\&quot;sample_excess_kurtosis\&quot;:[-1.1480287935575781],\&quot;population_covariance\&quot;:[85116.25952148438],\&quot;population_correlation\&quot;:[1.0],\&quot;sample_covariance\&quot;:[85786.46628937007],\&quot;sample_correlation\&quot;:[1.0]}&quot;</span>
<span class="w">      </span><span class="p">},</span>
<span class="w">      </span><span class="nt">&quot;id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;stat&quot;</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">  </span><span class="p">]</span>
<span class="p">}</span>
</pre></div>
</div>
</section>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="nifi/examples.html" class="btn btn-neutral float-left" title="12.11. Examples" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="hbase/index.html" class="btn btn-neutral float-right" title="14. HBase Data Store" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p></p>
  </div>

  

<div role="contentinfo">
  <p>
    &copy; Copyright 2013-2021 <a href="https://www.ccri.com/">Commonwealth Computer Research, Inc.</a>
    <br/>
    Licensed under the <a href="http://www.opensource.org/licenses/apache2.0.php">Apache License, Version 2.0</a>
  </p>
</div>

<div role="contentinfo">
  <p>
    Built with <a href="http://sphinx-doc.org/">Sphinx</a>
    using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>
    
    - view <a href="../_sources/user/process.rst.txt" rel="nofollow">page source</a>
    
  </p>
</div>



</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>