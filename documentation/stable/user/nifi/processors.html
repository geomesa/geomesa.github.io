

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>12.2. Processors &mdash; GeoMesa 3.2.0 Manuals</title>
  

  
  
  
  
    <link rel="canonical" href="https://www.geomesa.org/documentation/user/nifi/processors.html"/>
  

  

  
  
    

  

  <link rel="stylesheet" href="../../_static/css/theme_custom.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:400,700" type="text/css" />
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="12.3. Converter Processors" href="converters.html" />
    <link rel="prev" title="12.1. Installation" href="install.html" /> 

  
  <script src="../../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../../index.html" class="icon icon-home"> GeoMesa
          

          
          </a>

          
            
            
              <div class="version">
                3.2.0
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="../index.html">User Manual</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../introduction.html">1. Introduction</a></li>
<li class="toctree-l2"><a class="reference internal" href="../download.html">2. Versions and Downloads</a></li>
<li class="toctree-l2"><a class="reference internal" href="../install.html">3. Installation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../getting_started.html">4. Getting Started</a></li>
<li class="toctree-l2"><a class="reference internal" href="../geotools.html">5. GeoTools Overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="../architecture.html">6. Architecture Overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="../datastores/index.html">7. GeoMesa Data Stores</a></li>
<li class="toctree-l2"><a class="reference internal" href="../cli/index.html">8. Command-Line Tools</a></li>
<li class="toctree-l2"><a class="reference internal" href="../convert/index.html">9. GeoMesa Convert</a></li>
<li class="toctree-l2"><a class="reference internal" href="../geoserver.html">10. GeoServer Plugins</a></li>
<li class="toctree-l2"><a class="reference internal" href="../spark/index.html">11. GeoMesa Spark</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="index.html">12. GeoMesa NiFi Bundle</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="install.html">12.1. Installation</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">12.2. Processors</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#records-converters-and-avro">12.2.1. Records, Converters, and Avro</a></li>
<li class="toctree-l4"><a class="reference internal" href="#common-configuration">12.2.2. Common Configuration</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="converters.html">12.3. Converter Processors</a></li>
<li class="toctree-l3"><a class="reference internal" href="records.html">12.4. Record Processors</a></li>
<li class="toctree-l3"><a class="reference internal" href="avro.html">12.5. Avro Processors</a></li>
<li class="toctree-l3"><a class="reference internal" href="updates.html">12.6. Record Update Processors</a></li>
<li class="toctree-l3"><a class="reference internal" href="datastores.html">12.7. DataStore Processors</a></li>
<li class="toctree-l3"><a class="reference internal" href="ingress.html">12.8. Ingress Processors</a></li>
<li class="toctree-l3"><a class="reference internal" href="conversions.html">12.9. Conversion Processors</a></li>
<li class="toctree-l3"><a class="reference internal" href="integrations.html">12.10. Cloud Provider Integrations</a></li>
<li class="toctree-l3"><a class="reference internal" href="examples.html">12.11. Examples</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../process.html">13. GeoMesa Processes</a></li>
<li class="toctree-l2"><a class="reference internal" href="../hbase/index.html">14. HBase Data Store</a></li>
<li class="toctree-l2"><a class="reference internal" href="../accumulo/index.html">15. Accumulo Data Store</a></li>
<li class="toctree-l2"><a class="reference internal" href="../cassandra/index.html">16. Cassandra Data Store</a></li>
<li class="toctree-l2"><a class="reference internal" href="../bigtable/index.html">17. Bigtable Data Store</a></li>
<li class="toctree-l2"><a class="reference internal" href="../kafka/index.html">18. Kafka Data Store</a></li>
<li class="toctree-l2"><a class="reference internal" href="../redis/index.html">19. Redis Data Store</a></li>
<li class="toctree-l2"><a class="reference internal" href="../filesystem/index.html">20. FileSystem Data Store</a></li>
<li class="toctree-l2"><a class="reference internal" href="../kudu/index.html">21. Kudu Data Store</a></li>
<li class="toctree-l2"><a class="reference internal" href="../lambda/index.html">22. Lambda Data Store</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ds_views.html">23. Combined Data Store Views</a></li>
<li class="toctree-l2"><a class="reference internal" href="../geojson.html">24. GeoMesa GeoJSON</a></li>
<li class="toctree-l2"><a class="reference internal" href="../stream.html">25. GeoMesa Stream Processing</a></li>
<li class="toctree-l2"><a class="reference internal" href="../upgrade.html">26. Upgrade Guide</a></li>
<li class="toctree-l2"><a class="reference internal" href="../index.html#appendix">Appendix</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../developer/index.html">Developer Manual</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../tutorials/index.html">Tutorials</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">GeoMesa</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../index.html">Docs</a> &raquo;</li>
        
          <li><a href="../index.html">User Manual</a> &raquo;</li>
        
          <li><a href="index.html">12. GeoMesa NiFi Bundle</a> &raquo;</li>
        
      <li>12.2. Processors</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="processors">
<h1>12.2. Processors<a class="headerlink" href="#processors" title="Permalink to this headline">¶</a></h1>
<p>GeoMesa NiFi provides several processors:</p>
<table border="1" class="docutils">
<colgroup>
<col width="36%" />
<col width="64%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Processor</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><ul class="first last simple">
<li><code class="docutils literal notranslate"><span class="pre">PutGeoMesaAccumulo</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">PutGeoMesaAccumuloRecord</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">UpdateGeoMesaAccumuloRecord</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">AvroToPutGeoMesaAccumulo</span></code></li>
</ul>
</td>
<td>Ingest data into a GeoMesa Accumulo datastore</td>
</tr>
<tr class="row-odd"><td><ul class="first last simple">
<li><code class="docutils literal notranslate"><span class="pre">PutGeoMesaHBase</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">PutGeoMesaHBaseRecord</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">UpdateGeoMesaHBaseRecord</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">AvroToPutGeoMesaHBase</span></code></li>
</ul>
</td>
<td>Ingest data into a GeoMesa HBase datastore</td>
</tr>
<tr class="row-even"><td><ul class="first last simple">
<li><code class="docutils literal notranslate"><span class="pre">PutGeoMesaFileSystem</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">PutGeoMesaFileSystemRecord</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">UpdateGeoMesaFileSystemRecord</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">AvroToPutGeoMesaFileSystem</span></code></li>
</ul>
</td>
<td>Ingest data into a GeoMesa File System datastore</td>
</tr>
<tr class="row-odd"><td><ul class="first last simple">
<li><code class="docutils literal notranslate"><span class="pre">PutGeoMesaKafka</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">PutGeoMesaKafkaRecord</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">UpdateGeoMesaKafkaRecord</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">AvroToPutGeoMesaKafka</span></code></li>
</ul>
</td>
<td>Ingest data into a GeoMesa Kafka datastore</td>
</tr>
<tr class="row-even"><td><ul class="first last simple">
<li><code class="docutils literal notranslate"><span class="pre">PutGeoMesaRedis</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">PutGeoMesaRedisRecord</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">UpdateGeoMesaRedisRecord</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">AvroToPutGeoMesaRedis</span></code></li>
</ul>
</td>
<td>Ingest data into a GeoMesa Redis datastore</td>
</tr>
<tr class="row-odd"><td><ul class="first last simple">
<li><code class="docutils literal notranslate"><span class="pre">PutGeoTools</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">PutGeoToolsRecord</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">UpdateGeoToolsRecord</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">AvroToPutGeoTools</span></code></li>
</ul>
</td>
<td>Ingest data into an arbitrary GeoTools datastore</td>
</tr>
<tr class="row-even"><td><ul class="first last simple">
<li><code class="docutils literal notranslate"><span class="pre">GetGeoMesaKafkaRecord</span></code></li>
</ul>
</td>
<td>Read GeoMesa Kafka messages and output them as NiFi records</td>
</tr>
<tr class="row-odd"><td><ul class="first last simple">
<li><code class="docutils literal notranslate"><span class="pre">ConvertToGeoFile</span></code></li>
</ul>
</td>
<td>Use a GeoMesa converter to create files in a variety of
geometry-enabled formats</td>
</tr>
</tbody>
</table>
<div class="section" id="records-converters-and-avro">
<h2>12.2.1. Records, Converters, and Avro<a class="headerlink" href="#records-converters-and-avro" title="Permalink to this headline">¶</a></h2>
<p>The GeoMesa <code class="docutils literal notranslate"><span class="pre">Put</span></code> NiFi processors come in three different flavors. They all write to the same data stores, but
they vary in how the input data is converted into GeoTools <code class="docutils literal notranslate"><span class="pre">SimpleFeatures</span></code> (which are necessary for ingest).</p>
<p>The standard processors use the <a class="reference internal" href="../convert/index.html#converters"><span class="std std-ref">GeoMesa Convert</span></a> framework to define <code class="docutils literal notranslate"><span class="pre">SimpleFeatureTypes</span></code> and the mapping from
input files to <code class="docutils literal notranslate"><span class="pre">SimpleFeatures</span></code>. Converters can be re-used in the GeoMesa command-line tools and other non-NiFi
projects. See <a class="reference internal" href="converters.html"><span class="doc">Converter Processors</span></a> for details.</p>
<p>The record-based processors use the NiFi records API to define the input schema using a NiFi <code class="docutils literal notranslate"><span class="pre">RecordReader</span></code>.
Through <code class="docutils literal notranslate"><span class="pre">RecordReaders</span></code>, <code class="docutils literal notranslate"><span class="pre">SimpleFeatureTypes</span></code> can be managed in a centralized schema registry. Similarly, records
can be manipulated using standard NiFi processors before being passed to the GeoMesa processor. The use of standard
NiFi APIs greatly reduces the amount of GeoMesa-specific configuration required. See <a class="reference internal" href="records.html"><span class="doc">Record Processors</span></a>
for details.</p>
<p>Finally, the <code class="docutils literal notranslate"><span class="pre">AvroToPut</span></code> processors will ingest GeoMesa-specific GeoAvro files without any configuration. GeoAvro
is a special Avro file that has <code class="docutils literal notranslate"><span class="pre">SimpleFeatureType</span></code> metadata included. It can be produced using the GeoMesa
command-line tools export in <code class="docutils literal notranslate"><span class="pre">avro</span></code> format, the <code class="docutils literal notranslate"><span class="pre">ConvertToGeoFile</span></code> processor, the
<code class="docutils literal notranslate"><span class="pre">GeoAvroRecordSetWriterFactory</span></code> record writer factory, or directly through an instance of
<code class="docutils literal notranslate"><span class="pre">org.locationtech.geomesa.features.avro.AvroDataFileWriter</span></code>. GeoAvro is particularly useful because it is
self-describing. See <a class="reference internal" href="avro.html"><span class="doc">Avro Processors</span></a> for details.</p>
</div>
<div class="section" id="common-configuration">
<h2>12.2.2. Common Configuration<a class="headerlink" href="#common-configuration" title="Permalink to this headline">¶</a></h2>
<p>All types of input processors have some common configuration parameters for controlling data store writes:</p>
<table border="1" class="docutils">
<colgroup>
<col width="26%" />
<col width="74%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Property</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">ExtraClasspaths</span></code></td>
<td>Additional resources to add to the classpath, e.g. converter definitions</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">Write</span> <span class="pre">Mode</span></code></td>
<td>Use an appending writer (for new features) or a modifying writer (to update existing
features)</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">Identifying</span> <span class="pre">Attribute</span></code></td>
<td>When using a modifying writer, the attribute used to uniquely identify the feature.
If not specified, will use the feature ID</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">Schema</span> <span class="pre">Compatibility</span></code></td>
<td><p class="first">Controls how differences between the configured schema and the existing schema in the
data store (if any) will be handled.</p>
<ul class="last simple">
<li><code class="docutils literal notranslate"><span class="pre">Existing</span></code> will use the existing schema and drop any additional fields in the
configured schema.</li>
<li><code class="docutils literal notranslate"><span class="pre">Update</span></code> will update the existing schema to match the configured schema.</li>
<li><code class="docutils literal notranslate"><span class="pre">Exact</span></code> requires the configured schema to  match the existing schema.</li>
</ul>
</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">BatchSize</span></code></td>
<td>The number of flow files that will be processed in a single batch</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">FeatureWriterCaching</span></code></td>
<td>Enable caching of feature writers between flow files, useful if flow files have a
small number of records (see below)</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">FeatureWriterCacheTimeout</span></code></td>
<td>How often feature writers will be flushed to the data store, if caching is enabled</td>
</tr>
</tbody>
</table>
<div class="section" id="feature-writer-caching">
<h3>12.2.2.1. Feature Writer Caching<a class="headerlink" href="#feature-writer-caching" title="Permalink to this headline">¶</a></h3>
<p>Feature writer caching can be used to improve the throughput of processing many small flow files. Instead of a new
feature writer being created for each flow file, writers are cached and re-used between operations. If a writer is
idle for the configured timeout, then it will be flushed to the data store and closed.</p>
<p>Note that if feature writer caching is enabled, features that are processed may not show up in the data store
immediately. In addition, any features that have been processed but not flushed may be lost if NiFi shuts down
unexpectedly. To ensure data is properly flushed, stop the processor before shutting down NiFi.</p>
<p>Alternatively, NiFi’s built-in <code class="docutils literal notranslate"><span class="pre">MergeContent</span></code> processor can be used to batch up small files.</p>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="converters.html" class="btn btn-neutral float-right" title="12.3. Converter Processors" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="install.html" class="btn btn-neutral" title="12.1. Installation" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>

    </p>
  </div>

<div role="contentinfo">
  <p>
    &copy; Copyright 2013-2021 <a href="https://www.ccri.com/">Commonwealth Computer Research, Inc.</a>
    <br/>
    Licensed under the <a href="http://www.opensource.org/licenses/apache2.0.php">Apache License, Version 2.0</a>
  </p>
</div>

<div role="contentinfo">
  <p>
    Built with <a href="http://sphinx-doc.org/">Sphinx</a>
    using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>
    
    - view <a href="../../_sources/user/nifi/processors.rst.txt" rel="nofollow">page source</a>
    
  </p>
</div>



</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
        <script type="text/javascript" src="../../_static/jquery.js"></script>
        <script type="text/javascript" src="../../_static/underscore.js"></script>
        <script type="text/javascript" src="../../_static/doctools.js"></script>
    

  

  <script type="text/javascript" src="../../_static/js/theme.js"></script>

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>
 

<!-- analytics -->
<script>
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
ga('create', 'UA-53087457-1', 'auto');
ga('send', 'pageview');
</script>




</body>
</html>